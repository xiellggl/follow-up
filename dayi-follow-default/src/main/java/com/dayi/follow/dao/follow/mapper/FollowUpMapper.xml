<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dayi.follow.dao.follow.FollowUpMapper">

    <select id="findByDeptIds" parameterType="java.lang.String" resultType="com.dayi.follow.model.follow.FollowUp">
        SELECT * from follow_up where disable !=0 and is_follow_up !=0
        andn dept_id in
        <foreach item="item" index="index" collection="deptIds"
                 open="(" separator="," close=")">
            #{item}
        </foreach>

    </select>


    <select id="findIdsByDeptIds" parameterType="java.lang.String" resultType="java.lang.String">
        SELECT id from follow_up where disable !=0 and is_follow_up !=0
        andn dept_id in
        <foreach item="item" index="index" collection="deptIds"
                 open="(" separator="," close=")">
            #{item}
        </foreach>

    </select>

    <select id="findIdsByDeptId" parameterType="java.lang.String" resultType="java.lang.String">
        SELECT id from follow_up where disable !=0 and is_follow_up !=0
        andn dept_id =${deptId}
    </select>

    <select id="findAll" parameterType="map" resultType="com.dayi.follow.model.follow.FollowUp">
        SELECT * from follow_up where is_follow_up !=0 and disable !=0
        limit ${limitStart},${limitEnd}
    </select>

    <select id="countAll" resultType="java.lang.Integer">
        SELECT * from follow_up where is_follow_up !=0 and disable !=0
    </select>

    <select id="findAssignSelect" parameterType="map" resultType="com.dayi.follow.model.follow.FollowUp">
         SELECT * from follow_up where is_follow_up !=0 and disable !=0 and id in
        <foreach item="item" index="index" collection="followIds"
                 open="(" separator="," close=")">
            #{item}
        </foreach>
        <if test="''!=followUp and null!=followUp">
            and name=${followUp}
        </if>
        limit ${limitStart},${limitEnd}
    </select>

    <select id="countAssignSelect" parameterType="map" resultType="int">
        SELECT count(0) from follow_up where is_follow_up !=0 and disable !=0 and id in
        <foreach item="item" index="index" collection="followIds"
                 open="(" separator="," close=")">
            #{item}
        </foreach>
        <if test="''!=followUp and null!=followUp">
            and name=${followUp}
        </if>
    </select>


</mapper>