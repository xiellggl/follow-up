<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dayi.follow.dao.follow.UserMapper">

    <select id="findByDeptIds" parameterType="java.lang.String" resultType="com.dayi.follow.model.follow.FollowUp">
        SELECT * from follow_up where disable !=0
        andn dept_id in
        <foreach item="item" index="index" collection="deptIds"
                 open="(" separator="," close=")">
            #{item}
        </foreach>

    </select>


    <select id="findIdsByDeptIds" parameterType="java.lang.String" resultType="java.lang.String">
        SELECT id from follow_up where disable !=0
        andn dept_id in
        <foreach item="item" index="index" collection="deptIds"
                 open="(" separator="," close=")">
            #{item}
        </foreach>

    </select>

    <select id="findIdsByDeptId" parameterType="java.lang.String" resultType="java.lang.String">
        SELECT id from follow_up where disable !=0
        andn dept_id =${deptId}
    </select>

    <select id="findUsers" parameterType="map" resultType="com.dayi.follow.model.follow.FollowUp">
        SELECT * from follow_up where  disable !=0
        <if test="''!=mobile and null!=mobile">
            and mobile =${mobile}
        </if>

        and id in
        <foreach item="item" index="index" collection="followIds"
                 open="(" separator="," close=")">
            #{item}
        </foreach>

        <if test="''!=inviteCode and null!=inviteCode">
            and inviteCode =${inviteCode}
        </if>
        limit ${limitStart},${limitEnd}
    </select>

    <select id="getUsersNum" resultType="java.lang.Integer">
        SELECT * from follow_up  and disable !=0
        <if test="''!=mobile and null!=mobile">
            and mobile =${mobile}
        </if>

        and id in
        <foreach item="item" index="index" collection="followIds"
                 open="(" separator="," close=")">
            #{item}
        </foreach>

        <if test="''!=inviteCode and null!=inviteCode">
            and inviteCode =${inviteCode}
        </if>
    </select>



</mapper>