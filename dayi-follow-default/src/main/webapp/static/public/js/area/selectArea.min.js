var selectArea=function(t){var i={boxId:"areaBox",prov:null,city:null,dist:null,nodata:null,hasSuffix:true,fv:"id",required:true,distAll:false,callback:function(){}};var e=$.extend({},i,t);var n=$("#"+e.boxId);var a=n.find(".prov");var s=n.find(".city");var r=n.find(".dist");var d="name";var l="请选择";if(typeof resumeLang==="string"&&resumeLang=="en"){d="en";l="select"}var o=e.required?"":"<option value=''>"+l+"</option>";var f=datajson.City;var u=datajson.town;var v="";var c="";if(e.fv=="name"){e.fv=d}else{e.fv="id"}var p=function(t){var i="";if(e.hasSuffix){i=t;if(typeof resumeLang==="string"){i=resumeLang=="cn"?t:""}}return i};var m=function(t,i){var e=false;var n=t;if(t==null||t==""){return""}if(!e){for(var a in f){if(f[a].name==t){n=t+f[a].s;break}}}return n};var h=function(){temp_html=o;for(k=0;k<f.length;k++){if(f[k].id.toString().substr(2,2)=="00"&&f[k].s!=""){temp_html+='<option value="'+f[k][e.fv]+'" data-id="'+f[k].id+'">'+f[k][d]+"</option>"}}a.html(temp_html);t&&clearTimeout(t);var t=setTimeout(function(){if(e.prov!=null){a.val(e.prov);b();setTimeout(function(){if(e.city!=null){var t=m(e.city,["市","地区","州"]);s.val(t);y();setTimeout(function(){if(e.dist!=null){r.val(e.dist);e.callback()}},1)}},1)}},1);a.unbind("change",b);a.bind("change",b);s.unbind("change",y);s.bind("change",y)};var b=function(){var t=getSelectedAttr(a,"data-id")||0;s.empty().attr("disabled",true);r.empty().attr("disabled",true);if(t<=0){if(e.nodata=="none"){s.css("display","none");r.css("display","none")}else if(e.nodata=="hidden"){s.css("visibility","hidden");r.css("visibility","hidden")}return}temp_html=o;if(parseInt(t.substr(0,4),10)>=4100||parseInt(t.substr(0,4),10)<=1300){for(var i in f){if(f[i].id==t&&f[i].s!=""){temp_html+='<option value="'+f[i][e.fv]+p(f[i].s)+'" data-id="'+f[i].id+'">'+f[i][d]+p(f[i].s)+"</option>"}}}else{var n=0;for(k=0;k<f.length;k++){if(f[k].id.toString().substr(0,2)==t.toString().substr(0,2)&&f[k].id!=t&&f[k].s!=""){temp_html+='<option value="'+f[k][e.fv]+p(f[k].s)+'" data-id="'+f[k].id+'">'+f[k][d]+p(f[k].s)+"</option>";n++}}if(n==0){if(e.nodata=="none"){s.css("display","none");r.css("display","none")}else if(e.nodata=="hidden"){s.css("visibility","hidden");r.css("visibility","hidden")}}}s.html(temp_html).attr("disabled",false).css({display:"",visibility:""});y()};var y=function(){var t=getSelectedAttr(a,"data-id");var i=getSelectedAttr(s,"data-id");r.empty().attr("disabled",true);if(!t>0||!i>0){if(e.nodata=="none"){r.css("display","none")}else if(e.nodata=="hidden"){r.css("visibility","hidden")}return}temp_html=o;var n=0;if(e.distAll){temp_html='<option value="'+i+'" data-id="'+i+'">全市范围</option>'}for(k=0;k<u.length;k++){if(u[k].id.toString().substr(0,4)==i.toString().substr(0,4)){temp_html+='<option value="'+u[k][e.fv]+'" data-id="'+u[k].id+'">'+u[k][d]+"</option>";n++}}if(n==0){if(e.nodata=="none"){r.css("display","none")}else if(e.nodata=="hidden"){r.css("visibility","hidden")}return}r.html(temp_html).attr("disabled",false).css({display:"",visibility:""})};h()};getSelectedAttr=function(t,i){var e=null;t.find("option").each(function(){if($(this).prop("selected")){e=$(this).attr(i)}});return e};function getAreaItem(t){var i=new Array;var e=0;$(datajson.City).each(function(n,a){if(a["s"]=="市"&&(a["name"].indexOf(t)!=-1||a["en"].indexOf(t)!=-1||a["f"].indexOf(t)!=-1)){i[e]=a;e++}});return i}