(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports):typeof define==="function"&&define.amd?define(["exports"],e):e(t.echarts={})})(this,function(exports){"use strict";var t;if(typeof window!=="undefined"){t=window.__DEV__}else if(typeof global!=="undefined"){t=global.__DEV__}if(typeof t==="undefined"){t=true}var e=t;var r=2311;var i=function(){return r++};var a={};if(typeof wx==="object"&&typeof wx.getSystemInfoSync==="function"){a={browser:{},os:{},node:false,wxa:true,canvasSupported:true,svgSupported:false,touchEventsSupported:true}}else if(typeof document==="undefined"&&typeof self!=="undefined"){a={browser:{},os:{},node:false,worker:true,canvasSupported:true}}else if(typeof navigator==="undefined"){a={browser:{},os:{},node:true,worker:false,canvasSupported:true,svgSupported:true}}else{a=o(navigator.userAgent)}var n=a;function o(t){var e={};var r={};var i=t.match(/Firefox\/([\d.]+)/);var a=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/);var n=t.match(/Edge\/([\d.]+)/);var o=/micromessenger/i.test(t);if(i){r.firefox=true;r.version=i[1]}if(a){r.ie=true;r.version=a[1]}if(n){r.edge=true;r.version=n[1]}if(o){r.weChat=true}return{browser:r,os:e,node:false,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:typeof SVGRect!=="undefined",touchEventsSupported:"ontouchstart"in window&&!r.ie&&!r.edge,pointerEventsSupported:"onpointerdown"in window&&(r.edge||r.ie&&r.version>=11)}}var s={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1};var l={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1};var u=Object.prototype.toString;var h=Array.prototype;var f=h.forEach;var c=h.filter;var v=h.slice;var d=h.map;var p=h.reduce;var g={};function m(t,e){if(t==="createCanvas"){M=null}g[t]=e}function y(t){if(t==null||typeof t!="object"){return t}var e=t;var r=u.call(t);if(r==="[object Array]"){if(!tt(t)){e=[];for(var i=0,a=t.length;i<a;i++){e[i]=y(t[i])}}}else if(l[r]){if(!tt(t)){var n=t.constructor;if(t.constructor.from){e=n.from(t)}else{e=new n(t.length);for(var i=0,a=t.length;i<a;i++){e[i]=y(t[i])}}}}else if(!s[r]&&!tt(t)&&!H(t)){e={};for(var o in t){if(t.hasOwnProperty(o)){e[o]=y(t[o])}}}return e}function x(t,e,r){if(!G(e)||!G(t)){return r?y(e):t}for(var i in e){if(e.hasOwnProperty(i)){var a=t[i];var n=e[i];if(G(n)&&G(a)&&!z(n)&&!z(a)&&!H(n)&&!H(a)&&!W(n)&&!W(a)&&!tt(n)&&!tt(a)){x(a,n,r)}else if(r||!(i in t)){t[i]=y(e[i],true)}}}return t}function _(t,e){var r=t[0];for(var i=1,a=t.length;i<a;i++){r=x(r,t[i],e)}return r}function w(t,e){for(var r in e){if(e.hasOwnProperty(r)){t[r]=e[r]}}return t}function b(t,e,r){for(var i in e){if(e.hasOwnProperty(i)&&(r?e[i]!=null:t[i]==null)){t[i]=e[i]}}return t}var S=function(){return g.createCanvas()};g.createCanvas=function(){return document.createElement("canvas")};var M;function I(){if(!M){M=S().getContext("2d")}return M}function T(t,e){if(t){if(t.indexOf){return t.indexOf(e)}for(var r=0,i=t.length;r<i;r++){if(t[r]===e){return r}}}return-1}function D(t,e){var r=t.prototype;function i(){}i.prototype=e.prototype;t.prototype=new i;for(var a in r){t.prototype[a]=r[a]}t.prototype.constructor=t;t.superClass=e}function A(t,e,r){t="prototype"in t?t.prototype:t;e="prototype"in e?e.prototype:e;b(t,e,r)}function C(t){if(!t){return}if(typeof t=="string"){return false}return typeof t.length=="number"}function L(t,e,r){if(!(t&&e)){return}if(t.forEach&&t.forEach===f){t.forEach(e,r)}else if(t.length===+t.length){for(var i=0,a=t.length;i<a;i++){e.call(r,t[i],i,t)}}else{for(var n in t){if(t.hasOwnProperty(n)){e.call(r,t[n],n,t)}}}}function k(t,e,r){if(!(t&&e)){return}if(t.map&&t.map===d){return t.map(e,r)}else{var i=[];for(var a=0,n=t.length;a<n;a++){i.push(e.call(r,t[a],a,t))}return i}}function P(t,e,r,i){if(!(t&&e)){return}if(t.reduce&&t.reduce===p){return t.reduce(e,r,i)}else{for(var a=0,n=t.length;a<n;a++){r=e.call(i,r,t[a],a,t)}return r}}function N(t,e,r){if(!(t&&e)){return}if(t.filter&&t.filter===c){return t.filter(e,r)}else{var i=[];for(var a=0,n=t.length;a<n;a++){if(e.call(r,t[a],a,t)){i.push(t[a])}}return i}}function O(t,e,r){if(!(t&&e)){return}for(var i=0,a=t.length;i<a;i++){if(e.call(r,t[i],i,t)){return t[i]}}}function E(t,e){var r=v.call(arguments,2);return function(){return t.apply(e,r.concat(v.call(arguments)))}}function R(t){var e=v.call(arguments,1);return function(){return t.apply(this,e.concat(v.call(arguments)))}}function z(t){return u.call(t)==="[object Array]"}function B(t){return typeof t==="function"}function V(t){return u.call(t)==="[object String]"}function G(t){var e=typeof t;return e==="function"||!!t&&e=="object"}function W(t){return!!s[u.call(t)]}function F(t){return!!l[u.call(t)]}function H(t){return typeof t==="object"&&typeof t.nodeType==="number"&&typeof t.ownerDocument==="object"}function Z(t){return t!==t}function U(t){for(var e=0,r=arguments.length;e<r;e++){if(arguments[e]!=null){return arguments[e]}}}function X(t,e){return t!=null?t:e}function j(t,e,r){return t!=null?t:e!=null?e:r}function Y(){return Function.call.apply(v,arguments)}function q(t){if(typeof t==="number"){return[t,t,t,t]}var e=t.length;if(e===2){return[t[0],t[1],t[0],t[1]]}else if(e===3){return[t[0],t[1],t[2],t[1]]}return t}function K(t,e){if(!t){throw new Error(e)}}function $(t){if(t==null){return null}else if(typeof t.trim==="function"){return t.trim()}else{return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}var J="__ec_primitive__";function Q(t){t[J]=true}function tt(t){return t[J]}function et(t){var e=z(t);var r=this;t instanceof et?t.each(i):t&&L(t,i);function i(t,i){e?r.set(t,i):r.set(i,t)}}et.prototype={constructor:et,get:function(t){return this.hasOwnProperty(t)?this[t]:null},set:function(t,e){return this[t]=e},each:function(t,e){e!==void 0&&(t=E(t,e));for(var r in this){this.hasOwnProperty(r)&&t(this[r],r)}},removeKey:function(t){delete this[t]}};function rt(t){return new et(t)}function it(t,e){var r=new t.constructor(t.length+e.length);for(var i=0;i<t.length;i++){r[i]=t[i]}var a=t.length;for(i=0;i<e.length;i++){r[i+a]=e[i]}return r}function at(){}var nt=(Object.freeze||Object)({$override:m,clone:y,merge:x,mergeAll:_,extend:w,defaults:b,createCanvas:S,getContext:I,indexOf:T,inherits:D,mixin:A,isArrayLike:C,each:L,map:k,reduce:P,filter:N,find:O,bind:E,curry:R,isArray:z,isFunction:B,isString:V,isObject:G,isBuiltInObject:W,isTypedArray:F,isDom:H,eqNaN:Z,retrieve:U,retrieve2:X,retrieve3:j,slice:Y,normalizeCssArray:q,assert:K,trim:$,setAsPrimitive:Q,isPrimitive:tt,createHashMap:rt,concatArray:it,noop:at});var ot=typeof Float32Array==="undefined"?Array:Float32Array;function st(t,e){var r=new ot(2);if(t==null){t=0}if(e==null){e=0}r[0]=t;r[1]=e;return r}function lt(t,e){t[0]=e[0];t[1]=e[1];return t}function ut(t){var e=new ot(2);e[0]=t[0];e[1]=t[1];return e}function ht(t,e,r){t[0]=e;t[1]=r;return t}function ft(t,e,r){t[0]=e[0]+r[0];t[1]=e[1]+r[1];return t}function ct(t,e,r,i){t[0]=e[0]+r[0]*i;t[1]=e[1]+r[1]*i;return t}function vt(t,e,r){t[0]=e[0]-r[0];t[1]=e[1]-r[1];return t}function dt(t){return Math.sqrt(gt(t))}var pt=dt;function gt(t){return t[0]*t[0]+t[1]*t[1]}var mt=gt;function yt(t,e,r){t[0]=e[0]*r[0];t[1]=e[1]*r[1];return t}function xt(t,e,r){t[0]=e[0]/r[0];t[1]=e[1]/r[1];return t}function _t(t,e){return t[0]*e[0]+t[1]*e[1]}function wt(t,e,r){t[0]=e[0]*r;t[1]=e[1]*r;return t}function bt(t,e){var r=dt(e);if(r===0){t[0]=0;t[1]=0}else{t[0]=e[0]/r;t[1]=e[1]/r}return t}function St(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var Mt=St;function It(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var Tt=It;function Dt(t,e){t[0]=-e[0];t[1]=-e[1];return t}function At(t,e,r,i){t[0]=e[0]+i*(r[0]-e[0]);t[1]=e[1]+i*(r[1]-e[1]);return t}function Ct(t,e,r){var i=e[0];var a=e[1];t[0]=r[0]*i+r[2]*a+r[4];t[1]=r[1]*i+r[3]*a+r[5];return t}function Lt(t,e,r){t[0]=Math.min(e[0],r[0]);t[1]=Math.min(e[1],r[1]);return t}function kt(t,e,r){t[0]=Math.max(e[0],r[0]);t[1]=Math.max(e[1],r[1]);return t}var Pt=(Object.freeze||Object)({create:st,copy:lt,clone:ut,set:ht,add:ft,scaleAndAdd:ct,sub:vt,len:dt,length:pt,lenSquare:gt,lengthSquare:mt,mul:yt,div:xt,dot:_t,scale:wt,normalize:bt,distance:St,dist:Mt,distanceSquare:It,distSquare:Tt,negate:Dt,lerp:At,applyTransform:Ct,min:Lt,max:kt});function Nt(){this.on("mousedown",this._dragStart,this);this.on("mousemove",this._drag,this);this.on("mouseup",this._dragEnd,this);this.on("globalout",this._dragEnd,this)}Nt.prototype={constructor:Nt,_dragStart:function(t){var e=t.target;if(e&&e.draggable){this._draggingTarget=e;e.dragging=true;this._x=t.offsetX;this._y=t.offsetY;this.dispatchToElement(Ot(e,t),"dragstart",t.event)}},_drag:function(t){var e=this._draggingTarget;if(e){var r=t.offsetX;var i=t.offsetY;var a=r-this._x;var n=i-this._y;this._x=r;this._y=i;e.drift(a,n,t);this.dispatchToElement(Ot(e,t),"drag",t.event);var o=this.findHover(r,i,e).target;var s=this._dropTarget;this._dropTarget=o;if(e!==o){if(s&&o!==s){this.dispatchToElement(Ot(s,t),"dragleave",t.event)}if(o&&o!==s){this.dispatchToElement(Ot(o,t),"dragenter",t.event)}}}},_dragEnd:function(t){var e=this._draggingTarget;if(e){e.dragging=false}this.dispatchToElement(Ot(e,t),"dragend",t.event);if(this._dropTarget){this.dispatchToElement(Ot(this._dropTarget,t),"drop",t.event)}this._draggingTarget=null;this._dropTarget=null}};function Ot(t,e){return{target:t,topTarget:e&&e.topTarget}}var Et=Array.prototype.slice;var Rt=function(){this._$handlers={}};Rt.prototype={constructor:Rt,one:function(t,e,r){var i=this._$handlers;if(!e||!t){return this}if(!i[t]){i[t]=[]}for(var a=0;a<i[t].length;a++){if(i[t][a].h===e){return this}}i[t].push({h:e,one:true,ctx:r||this});return this},on:function(t,e,r){var i=this._$handlers;if(!e||!t){return this}if(!i[t]){i[t]=[]}for(var a=0;a<i[t].length;a++){if(i[t][a].h===e){return this}}i[t].push({h:e,one:false,ctx:r||this});return this},isSilent:function(t){var e=this._$handlers;return e[t]&&e[t].length},off:function(t,e){var r=this._$handlers;if(!t){this._$handlers={};return this}if(e){if(r[t]){var i=[];for(var a=0,n=r[t].length;a<n;a++){if(r[t][a]["h"]!=e){i.push(r[t][a])}}r[t]=i}if(r[t]&&r[t].length===0){delete r[t]}}else{delete r[t]}return this},trigger:function(t){if(this._$handlers[t]){var e=arguments;var r=e.length;if(r>3){e=Et.call(e,1)}var i=this._$handlers[t];var a=i.length;for(var n=0;n<a;){switch(r){case 1:i[n]["h"].call(i[n]["ctx"]);break;case 2:i[n]["h"].call(i[n]["ctx"],e[1]);break;case 3:i[n]["h"].call(i[n]["ctx"],e[1],e[2]);break;default:i[n]["h"].apply(i[n]["ctx"],e);break}if(i[n]["one"]){i.splice(n,1);a--}else{n++}}}return this},triggerWithContext:function(t){if(this._$handlers[t]){var e=arguments;var r=e.length;if(r>4){e=Et.call(e,1,e.length-1)}var i=e[e.length-1];var a=this._$handlers[t];var n=a.length;for(var o=0;o<n;){switch(r){case 1:a[o]["h"].call(i);break;case 2:a[o]["h"].call(i,e[1]);break;case 3:a[o]["h"].call(i,e[1],e[2]);break;default:a[o]["h"].apply(i,e);break}if(a[o]["one"]){a.splice(o,1);n--}else{o++}}}return this}};var zt="silent";function Bt(t,e,r){return{type:t,event:r,target:e.target,topTarget:e.topTarget,cancelBubble:false,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which}}function Vt(){}Vt.prototype.dispose=function(){};var Gt=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];var Wt=function(t,e,r,i){Rt.call(this);this.storage=t;this.painter=e;this.painterRoot=i;r=r||new Vt;this.proxy=null;this._hovered={};this._lastTouchMoment;this._lastX;this._lastY;Nt.call(this);this.setHandlerProxy(r)};Wt.prototype={constructor:Wt,setHandlerProxy:function(t){if(this.proxy){this.proxy.dispose()}if(t){L(Gt,function(e){t.on&&t.on(e,this[e],this)},this);t.handler=this}this.proxy=t},mousemove:function(t){var e=t.zrX;var r=t.zrY;var i=this._hovered;var a=i.target;if(a&&!a.__zr){i=this.findHover(i.x,i.y);a=i.target}var n=this._hovered=this.findHover(e,r);var o=n.target;var s=this.proxy;s.setCursor&&s.setCursor(o?o.cursor:"default");if(a&&o!==a){this.dispatchToElement(i,"mouseout",t)}this.dispatchToElement(n,"mousemove",t);if(o&&o!==a){this.dispatchToElement(n,"mouseover",t)}},mouseout:function(t){this.dispatchToElement(this._hovered,"mouseout",t);var e=t.toElement||t.relatedTarget;var r;do{e=e&&e.parentNode}while(e&&e.nodeType!=9&&!(r=e===this.painterRoot));!r&&this.trigger("globalout",{event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var r=this[t];r&&r.call(this,e)},dispose:function(){this.proxy.dispose();this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,r){t=t||{};var i=t.target;if(i&&i.silent){return}var a="on"+e;var n=Bt(e,t,r);while(i){i[a]&&(n.cancelBubble=i[a].call(i,n));i.trigger(e,n);i=i.parent;if(n.cancelBubble){break}}if(!n.cancelBubble){this.trigger(e,n);this.painter&&this.painter.eachOtherLayer(function(t){if(typeof t[a]=="function"){t[a].call(t,n)}if(t.trigger){t.trigger(e,n)}})}},findHover:function(t,e,r){var i=this.storage.getDisplayList();var a={x:t,y:e};for(var n=i.length-1;n>=0;n--){var o;if(i[n]!==r&&!i[n].ignore&&(o=Ft(i[n],t,e))){!a.topTarget&&(a.topTarget=i[n]);if(o!==zt){a.target=i[n];break}}}return a}};L(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Wt.prototype[t]=function(e){var r=this.findHover(e.zrX,e.zrY);var i=r.target;if(t==="mousedown"){this._downEl=i;this._downPoint=[e.zrX,e.zrY];this._upEl=i}else if(t==="mouseup"){this._upEl=i}else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||Mt(this._downPoint,[e.zrX,e.zrY])>4){return}this._downPoint=null}this.dispatchToElement(r,t,e)}});function Ft(t,e,r){if(t[t.rectHover?"rectContain":"contain"](e,r)){var i=t;var a;while(i){if(i.clipPath&&!i.clipPath.contain(e,r)){return false}if(i.silent){a=true}i=i.parent}return a?zt:true}return false}A(Wt,Rt);A(Wt,Nt);var Ht=typeof Float32Array==="undefined"?Array:Float32Array;function Zt(){var t=new Ht(6);Ut(t);return t}function Ut(t){t[0]=1;t[1]=0;t[2]=0;t[3]=1;t[4]=0;t[5]=0;return t}function Xt(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];return t}function jt(t,e,r){var i=e[0]*r[0]+e[2]*r[1];var a=e[1]*r[0]+e[3]*r[1];var n=e[0]*r[2]+e[2]*r[3];var o=e[1]*r[2]+e[3]*r[3];var s=e[0]*r[4]+e[2]*r[5]+e[4];var l=e[1]*r[4]+e[3]*r[5]+e[5];t[0]=i;t[1]=a;t[2]=n;t[3]=o;t[4]=s;t[5]=l;return t}function Yt(t,e,r){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4]+r[0];t[5]=e[5]+r[1];return t}function qt(t,e,r){var i=e[0];var a=e[2];var n=e[4];var o=e[1];var s=e[3];var l=e[5];var u=Math.sin(r);var h=Math.cos(r);t[0]=i*h+o*u;t[1]=-i*u+o*h;t[2]=a*h+s*u;t[3]=-a*u+h*s;t[4]=h*n+u*l;t[5]=h*l-u*n;return t}function Kt(t,e,r){var i=r[0];var a=r[1];t[0]=e[0]*i;t[1]=e[1]*a;t[2]=e[2]*i;t[3]=e[3]*a;t[4]=e[4]*i;t[5]=e[5]*a;return t}function $t(t,e){var r=e[0];var i=e[2];var a=e[4];var n=e[1];var o=e[3];var s=e[5];var l=r*o-n*i;if(!l){return null}l=1/l;t[0]=o*l;t[1]=-n*l;t[2]=-i*l;t[3]=r*l;t[4]=(i*s-o*a)*l;t[5]=(n*a-r*s)*l;return t}function Jt(t){var e=Zt();Xt(e,t);return e}var Qt=(Object.freeze||Object)({create:Zt,identity:Ut,copy:Xt,mul:jt,translate:Yt,rotate:qt,scale:Kt,invert:$t,clone:Jt});var te=Ut;var ee=5e-5;function re(t){return t>ee||t<-ee}var ie=function(t){t=t||{};if(!t.position){this.position=[0,0]}if(t.rotation==null){this.rotation=0}if(!t.scale){this.scale=[1,1]}this.origin=this.origin||null};var ae=ie.prototype;ae.transform=null;ae.needLocalTransform=function(){return re(this.rotation)||re(this.position[0])||re(this.position[1])||re(this.scale[0]-1)||re(this.scale[1]-1)};ae.updateTransform=function(){var t=this.parent;var e=t&&t.transform;var r=this.needLocalTransform();var i=this.transform;if(!(r||e)){i&&te(i);return}i=i||Zt();if(r){this.getLocalTransform(i)}else{te(i)}if(e){if(r){jt(i,t.transform,i)}else{Xt(i,t.transform)}}this.transform=i;this.invTransform=this.invTransform||Zt();$t(this.invTransform,i)};ae.getLocalTransform=function(t){return ie.getLocalTransform(this,t)};ae.setTransform=function(t){var e=this.transform;var r=t.dpr||1;if(e){t.setTransform(r*e[0],r*e[1],r*e[2],r*e[3],r*e[4],r*e[5])}else{t.setTransform(r,0,0,r,0,0)}};ae.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var ne=[];ae.decomposeTransform=function(){if(!this.transform){return}var t=this.parent;var e=this.transform;if(t&&t.transform){jt(ne,t.invTransform,e);e=ne}var r=e[0]*e[0]+e[1]*e[1];var i=e[2]*e[2]+e[3]*e[3];var a=this.position;var n=this.scale;if(re(r-1)){r=Math.sqrt(r)}if(re(i-1)){i=Math.sqrt(i)}if(e[0]<0){r=-r}if(e[3]<0){i=-i}a[0]=e[4];a[1]=e[5];n[0]=r;n[1]=i;this.rotation=Math.atan2(-e[1]/i,e[0]/r)};ae.getGlobalScale=function(){var t=this.transform;if(!t){return[1,1]}var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);var r=Math.sqrt(t[2]*t[2]+t[3]*t[3]);if(t[0]<0){e=-e}if(t[3]<0){r=-r}return[e,r]};ae.transformCoordToLocal=function(t,e){var r=[t,e];var i=this.invTransform;if(i){Ct(r,r,i)}return r};ae.transformCoordToGlobal=function(t,e){var r=[t,e];var i=this.transform;if(i){Ct(r,r,i)}return r};ie.getLocalTransform=function(t,e){e=e||[];te(e);var r=t.origin;var i=t.scale||[1,1];var a=t.rotation||0;var n=t.position||[0,0];if(r){e[4]-=r[0];e[5]-=r[1]}Kt(e,e,i);if(a){qt(e,e,a)}if(r){e[4]+=r[0];e[5]+=r[1]}e[4]+=n[0];e[5]+=n[1];return e};var oe={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){if((t*=2)<1){return.5*t*t}return-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){if((t*=2)<1){return.5*t*t*t}return.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){if((t*=2)<1){return.5*t*t*t*t}return-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){if((t*=2)<1){return.5*t*t*t*t*t}return.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){if(t===0){return 0}if(t===1){return 1}if((t*=2)<1){return.5*Math.pow(1024,t-1)}return.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){if((t*=2)<1){return-.5*(Math.sqrt(1-t*t)-1)}return.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e;var r=.1;var i=.4;if(t===0){return 0}if(t===1){return 1}if(!r||r<1){r=1;e=i/4}else{e=i*Math.asin(1/r)/(2*Math.PI)}return-(r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},elasticOut:function(t){var e;var r=.1;var i=.4;if(t===0){return 0}if(t===1){return 1}if(!r||r<1){r=1;e=i/4}else{e=i*Math.asin(1/r)/(2*Math.PI)}return r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1},elasticInOut:function(t){var e;var r=.1;var i=.4;if(t===0){return 0}if(t===1){return 1}if(!r||r<1){r=1;e=i/4}else{e=i*Math.asin(1/r)/(2*Math.PI)}if((t*=2)<1){return-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))}return r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=1.70158*1.525;if((t*=2)<1){return.5*(t*t*((e+1)*t-e))}return.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-oe.bounceOut(1-t)},bounceOut:function(t){if(t<1/2.75){return 7.5625*t*t}else if(t<2/2.75){return 7.5625*(t-=1.5/2.75)*t+.75}else if(t<2.5/2.75){return 7.5625*(t-=2.25/2.75)*t+.9375}else{return 7.5625*(t-=2.625/2.75)*t+.984375}},bounceInOut:function(t){if(t<.5){return oe.bounceIn(t*2)*.5}return oe.bounceOut(t*2-1)*.5+.5}};function se(t){this._target=t.target;this._life=t.life||1e3;this._delay=t.delay||0;this._initialized=false;this.loop=t.loop==null?false:t.loop;this.gap=t.gap||0;this.easing=t.easing||"Linear";this.onframe=t.onframe;this.ondestroy=t.ondestroy;this.onrestart=t.onrestart;this._pausedTime=0;this._paused=false}se.prototype={constructor:se,step:function(t,e){if(!this._initialized){this._startTime=t+this._delay;this._initialized=true}if(this._paused){this._pausedTime+=e;return}var r=(t-this._startTime-this._pausedTime)/this._life;if(r<0){return}r=Math.min(r,1);var i=this.easing;var a=typeof i=="string"?oe[i]:i;var n=typeof a==="function"?a(r):r;this.fire("frame",n);if(r==1){if(this.loop){this.restart(t);return"restart"}this._needsRemove=true;return"destroy"}return null},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap;this._pausedTime=0;this._needsRemove=false},fire:function(t,e){t="on"+t;if(this[t]){this[t](this._target,e)}},pause:function(){this._paused=true},resume:function(){this._paused=false}};var le=function(){this.head=null;this.tail=null;this._len=0};var ue=le.prototype;ue.insert=function(t){var e=new he(t);this.insertEntry(e);return e};ue.insertEntry=function(t){if(!this.head){this.head=this.tail=t}else{this.tail.next=t;t.prev=this.tail;t.next=null;this.tail=t}this._len++};ue.remove=function(t){var e=t.prev;var r=t.next;if(e){e.next=r}else{this.head=r}if(r){r.prev=e}else{this.tail=e}t.next=t.prev=null;this._len--};ue.len=function(){return this._len};ue.clear=function(){this.head=this.tail=null;this._len=0};var he=function(t){this.value=t;this.next;this.prev};var fe=function(t){this._list=new le;this._map={};this._maxSize=t||10;this._lastRemovedEntry=null};var ce=fe.prototype;ce.put=function(t,e){var r=this._list;var i=this._map;var a=null;if(i[t]==null){var n=r.len();var o=this._lastRemovedEntry;if(n>=this._maxSize&&n>0){var s=r.head;r.remove(s);delete i[s.key];a=s.value;this._lastRemovedEntry=s}if(o){o.value=e}else{o=new he(e)}o.key=t;r.insertEntry(o);i[t]=o}return a};ce.get=function(t){var e=this._map[t];var r=this._list;if(e!=null){if(e!==r.tail){r.remove(e);r.insertEntry(e)}return e.value}};ce.clear=function(){this._list.clear();this._map={}};var ve={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function de(t){t=Math.round(t);return t<0?0:t>255?255:t}function pe(t){t=Math.round(t);return t<0?0:t>360?360:t}function ge(t){return t<0?0:t>1?1:t}function me(t){if(t.length&&t.charAt(t.length-1)==="%"){return de(parseFloat(t)/100*255)}return de(parseInt(t,10))}function ye(t){if(t.length&&t.charAt(t.length-1)==="%"){return ge(parseFloat(t)/100)}return ge(parseFloat(t))}function xe(t,e,r){if(r<0){r+=1}else if(r>1){r-=1}if(r*6<1){return t+(e-t)*r*6}if(r*2<1){return e}if(r*3<2){return t+(e-t)*(2/3-r)*6}return t}function _e(t,e,r){return t+(e-t)*r}function we(t,e,r,i,a){t[0]=e;t[1]=r;t[2]=i;t[3]=a;return t}function be(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t}var Se=new fe(20);var Me=null;function Ie(t,e){if(Me){be(Me,e)}Me=Se.put(t,Me||e.slice())}function Te(t,e){if(!t){return}e=e||[];var r=Se.get(t);if(r){return be(e,r)}t=t+"";var i=t.replace(/ /g,"").toLowerCase();if(i in ve){be(e,ve[i]);Ie(t,e);return e}if(i.charAt(0)==="#"){if(i.length===4){var a=parseInt(i.substr(1),16);if(!(a>=0&&a<=4095)){we(e,0,0,0,1);return}we(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,1);Ie(t,e);return e}else if(i.length===7){var a=parseInt(i.substr(1),16);if(!(a>=0&&a<=16777215)){we(e,0,0,0,1);return}we(e,(a&16711680)>>16,(a&65280)>>8,a&255,1);Ie(t,e);return e}return}var n=i.indexOf("("),o=i.indexOf(")");if(n!==-1&&o+1===i.length){var s=i.substr(0,n);var l=i.substr(n+1,o-(n+1)).split(",");var u=1;switch(s){case"rgba":if(l.length!==4){we(e,0,0,0,1);return}u=ye(l.pop());case"rgb":if(l.length!==3){we(e,0,0,0,1);return}we(e,me(l[0]),me(l[1]),me(l[2]),u);Ie(t,e);return e;case"hsla":if(l.length!==4){we(e,0,0,0,1);return}l[3]=ye(l[3]);De(l,e);Ie(t,e);return e;case"hsl":if(l.length!==3){we(e,0,0,0,1);return}De(l,e);Ie(t,e);return e;default:return}}we(e,0,0,0,1);return}function De(t,e){var r=(parseFloat(t[0])%360+360)%360/360;var i=ye(t[1]);var a=ye(t[2]);var n=a<=.5?a*(i+1):a+i-a*i;var o=a*2-n;e=e||[];we(e,de(xe(o,n,r+1/3)*255),de(xe(o,n,r)*255),de(xe(o,n,r-1/3)*255),1);if(t.length===4){e[3]=t[3]}return e}function Ae(t){if(!t){return}var e=t[0]/255;var r=t[1]/255;var i=t[2]/255;var a=Math.min(e,r,i);var n=Math.max(e,r,i);var o=n-a;var s=(n+a)/2;var l;var u;if(o===0){l=0;u=0}else{if(s<.5){u=o/(n+a)}else{u=o/(2-n-a)}var h=((n-e)/6+o/2)/o;var f=((n-r)/6+o/2)/o;var c=((n-i)/6+o/2)/o;if(e===n){l=c-f}else if(r===n){l=1/3+h-c}else if(i===n){l=2/3+f-h}if(l<0){l+=1}if(l>1){l-=1}}var v=[l*360,u,s];if(t[3]!=null){v.push(t[3])}return v}function Ce(t,e){var r=Te(t);if(r){for(var i=0;i<3;i++){if(e<0){r[i]=r[i]*(1-e)|0}else{r[i]=(255-r[i])*e+r[i]|0}if(r[i]>255){r[i]=255}else if(t[i]<0){r[i]=0}}return ze(r,r.length===4?"rgba":"rgb")}}function Le(t){var e=Te(t);if(e){return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}}function ke(t,e,r){if(!(e&&e.length)||!(t>=0&&t<=1)){return}r=r||[];var i=t*(e.length-1);var a=Math.floor(i);var n=Math.ceil(i);var o=e[a];var s=e[n];var l=i-a;r[0]=de(_e(o[0],s[0],l));r[1]=de(_e(o[1],s[1],l));r[2]=de(_e(o[2],s[2],l));r[3]=ge(_e(o[3],s[3],l));return r}var Pe=ke;function Ne(t,e,r){if(!(e&&e.length)||!(t>=0&&t<=1)){return}var i=t*(e.length-1);var a=Math.floor(i);var n=Math.ceil(i);var o=Te(e[a]);var s=Te(e[n]);var l=i-a;var u=ze([de(_e(o[0],s[0],l)),de(_e(o[1],s[1],l)),de(_e(o[2],s[2],l)),ge(_e(o[3],s[3],l))],"rgba");return r?{color:u,leftIndex:a,rightIndex:n,value:i}:u}var Oe=Ne;function Ee(t,e,r,i){t=Te(t);if(t){t=Ae(t);e!=null&&(t[0]=pe(e));r!=null&&(t[1]=ye(r));i!=null&&(t[2]=ye(i));return ze(De(t),"rgba")}}function Re(t,e){t=Te(t);if(t&&e!=null){t[3]=ge(e);return ze(t,"rgba")}}function ze(t,e){if(!t||!t.length){return}var r=t[0]+","+t[1]+","+t[2];if(e==="rgba"||e==="hsva"||e==="hsla"){r+=","+t[3]}return e+"("+r+")"}var Be=(Object.freeze||Object)({parse:Te,lift:Ce,toHex:Le,fastLerp:ke,fastMapToColor:Pe,lerp:Ne,mapToColor:Oe,modifyHSL:Ee,modifyAlpha:Re,stringify:ze});var Ve=Array.prototype.slice;function Ge(t,e){return t[e]}function We(t,e,r){t[e]=r}function Fe(t,e,r){return(e-t)*r+t}function He(t,e,r){return r>.5?e:t}function Ze(t,e,r,i,a){var n=t.length;if(a==1){for(var o=0;o<n;o++){i[o]=Fe(t[o],e[o],r)}}else{var s=n&&t[0].length;for(var o=0;o<n;o++){for(var l=0;l<s;l++){i[o][l]=Fe(t[o][l],e[o][l],r)}}}}function Ue(t,e,r){var i=t.length;var a=e.length;if(i!==a){var n=i>a;if(n){t.length=a}else{for(var o=i;o<a;o++){t.push(r===1?e[o]:Ve.call(e[o]))}}}var s=t[0]&&t[0].length;for(var o=0;o<t.length;o++){if(r===1){if(isNaN(t[o])){t[o]=e[o]}}else{for(var l=0;l<s;l++){if(isNaN(t[o][l])){t[o][l]=e[o][l]}}}}}function Xe(t,e,r){if(t===e){return true}var i=t.length;if(i!==e.length){return false}if(r===1){for(var a=0;a<i;a++){if(t[a]!==e[a]){return false}}}else{var n=t[0].length;for(var a=0;a<i;a++){for(var o=0;o<n;o++){if(t[a][o]!==e[a][o]){return false}}}}return true}function je(t,e,r,i,a,n,o,s,l){var u=t.length;if(l==1){for(var h=0;h<u;h++){s[h]=Ye(t[h],e[h],r[h],i[h],a,n,o)}}else{var f=t[0].length;for(var h=0;h<u;h++){for(var c=0;c<f;c++){s[h][c]=Ye(t[h][c],e[h][c],r[h][c],i[h][c],a,n,o)}}}}function Ye(t,e,r,i,a,n,o){var s=(r-t)*.5;var l=(i-e)*.5;return(2*(e-r)+s+l)*o+(-3*(e-r)-2*s-l)*n+s*a+e}function qe(t){if(C(t)){var e=t.length;if(C(t[0])){var r=[];for(var i=0;i<e;i++){r.push(Ve.call(t[i]))}return r}return Ve.call(t)}return t}function Ke(t){t[0]=Math.floor(t[0]);t[1]=Math.floor(t[1]);t[2]=Math.floor(t[2]);return"rgba("+t.join(",")+")"}function $e(t){var e=t[t.length-1].value;return C(e&&e[0])?2:1}function Je(t,e,r,i,a,n){var o=t._getter;var s=t._setter;var l=e==="spline";var u=i.length;if(!u){return}var h=i[0].value;var f=C(h);var c=false;var v=false;var d=f?$e(i):0;var p;i.sort(function(t,e){return t.time-e.time});p=i[u-1].time;var g=[];var m=[];var y=i[0].value;var x=true;for(var _=0;_<u;_++){g.push(i[_].time/p);var w=i[_].value;if(!(f&&Xe(w,y,d)||!f&&w===y)){x=false}y=w;if(typeof w=="string"){
var b=Te(w);if(b){w=b;c=true}else{v=true}}m.push(w)}if(!n&&x){return}var S=m[u-1];for(var _=0;_<u-1;_++){if(f){Ue(m[_],S,d)}else{if(isNaN(m[_])&&!isNaN(S)&&!v&&!c){m[_]=S}}}f&&Ue(o(t._target,a),S,d);var M=0;var I=0;var T;var D;var A;var L;var k;var P;if(c){var N=[0,0,0,0]}var O=function(t,e){var r;if(e<0){r=0}else if(e<I){T=Math.min(M+1,u-1);for(r=T;r>=0;r--){if(g[r]<=e){break}}r=Math.min(r,u-2)}else{for(r=M;r<u;r++){if(g[r]>e){break}}r=Math.min(r-1,u-2)}M=r;I=e;var i=g[r+1]-g[r];if(i===0){return}else{D=(e-g[r])/i}if(l){L=m[r];A=m[r===0?r:r-1];k=m[r>u-2?u-1:r+1];P=m[r>u-3?u-1:r+2];if(f){je(A,L,k,P,D,D*D,D*D*D,o(t,a),d)}else{var n;if(c){n=je(A,L,k,P,D,D*D,D*D*D,N,1);n=Ke(N)}else if(v){return He(L,k,D)}else{n=Ye(A,L,k,P,D,D*D,D*D*D)}s(t,a,n)}}else{if(f){Ze(m[r],m[r+1],D,o(t,a),d)}else{var n;if(c){Ze(m[r],m[r+1],D,N,1);n=Ke(N)}else if(v){return He(m[r],m[r+1],D)}else{n=Fe(m[r],m[r+1],D)}s(t,a,n)}}};var E=new se({target:t._target,life:p,loop:t._loop,delay:t._delay,onframe:O,ondestroy:r});if(e&&e!=="spline"){E.easing=e}return E}var Qe=function(t,e,r,i){this._tracks={};this._target=t;this._loop=e||false;this._getter=r||Ge;this._setter=i||We;this._clipCount=0;this._delay=0;this._doneList=[];this._onframeList=[];this._clipList=[]};Qe.prototype={when:function(t,e){var r=this._tracks;for(var i in e){if(!e.hasOwnProperty(i)){continue}if(!r[i]){r[i]=[];var a=this._getter(this._target,i);if(a==null){continue}if(t!==0){r[i].push({time:0,value:qe(a)})}}r[i].push({time:t,value:e[i]})}return this},during:function(t){this._onframeList.push(t);return this},pause:function(){for(var t=0;t<this._clipList.length;t++){this._clipList[t].pause()}this._paused=true},resume:function(){for(var t=0;t<this._clipList.length;t++){this._clipList[t].resume()}this._paused=false},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={};this._clipList.length=0;var t=this._doneList;var e=t.length;for(var r=0;r<e;r++){t[r].call(this)}},start:function(t,e){var r=this;var i=0;var a=function(){i--;if(!i){r._doneCallback()}};var n;for(var o in this._tracks){if(!this._tracks.hasOwnProperty(o)){continue}var s=Je(this,t,a,this._tracks[o],o,e);if(s){this._clipList.push(s);i++;if(this.animation){this.animation.addClip(s)}n=s}}if(n){var l=n.onframe;n.onframe=function(t,e){l(t,e);for(var i=0;i<r._onframeList.length;i++){r._onframeList[i](t,e)}}}if(!i){this._doneCallback()}return this},stop:function(t){var e=this._clipList;var r=this.animation;for(var i=0;i<e.length;i++){var a=e[i];if(t){a.onframe(this._target,1)}r&&r.removeClip(a)}e.length=0},delay:function(t){this._delay=t;return this},done:function(t){if(t){this._doneList.push(t)}return this},getClips:function(){return this._clipList}};var tr=1;if(typeof window!=="undefined"){tr=Math.max(window.devicePixelRatio||1,1)}var er=0;var rr=tr;var ir=function(){};if(er===1){ir=function(){for(var t in arguments){throw new Error(arguments[t])}}}else if(er>1){ir=function(){for(var t in arguments){console.log(arguments[t])}}}var ar=ir;var nr=function(){this.animators=[]};nr.prototype={constructor:nr,animate:function(t,e){var r;var i=false;var a=this;var n=this.__zr;if(t){var o=t.split(".");var s=a;i=o[0]==="shape";for(var l=0,u=o.length;l<u;l++){if(!s){continue}s=s[o[l]]}if(s){r=s}}else{r=a}if(!r){ar('Property "'+t+'" is not existed in element '+a.id);return}var h=a.animators;var f=new Qe(r,e);f.during(function(t){a.dirty(i)}).done(function(){h.splice(T(h,f),1)});h.push(f);if(n){n.animation.addAnimator(f)}return f},stopAnimation:function(t){var e=this.animators;var r=e.length;for(var i=0;i<r;i++){e[i].stop(t)}e.length=0;return this},animateTo:function(t,e,r,i,a,n){if(V(r)){a=i;i=r;r=0}else if(B(i)){a=i;i="linear";r=0}else if(B(r)){a=r;r=0}else if(B(e)){a=e;e=500}else if(!e){e=500}this.stopAnimation();this._animateToShallow("",this,t,e,r);var o=this.animators.slice();var s=o.length;function l(){s--;if(!s){a&&a()}}if(!s){a&&a()}for(var u=0;u<o.length;u++){o[u].done(l).start(i,n)}},_animateToShallow:function(t,e,r,i,a){var n={};var o=0;for(var s in r){if(!r.hasOwnProperty(s)){continue}if(e[s]!=null){if(G(r[s])&&!C(r[s])){this._animateToShallow(t?t+"."+s:s,e[s],r[s],i,a)}else{n[s]=r[s];o++}}else if(r[s]!=null){if(!t){this.attr(s,r[s])}else{var l={};l[t]={};l[t][s]=r[s];this.attr(l)}}}if(o>0){this.animate(t,false).when(i==null?500:i,n).delay(a||0)}return this}};var or=function(t){ie.call(this,t);Rt.call(this,t);nr.call(this,t);this.id=t.id||i()};or.prototype={type:"element",name:"",__zr:null,ignore:false,clipPath:null,isGroup:false,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0;break}var r=this.transform;if(!r){r=this.transform=[1,0,0,1,0,0]}r[4]+=t;r[5]+=e;this.decomposeTransform();this.dirty(false)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if(t==="position"||t==="scale"||t==="origin"){if(e){var r=this[t];if(!r){r=this[t]=[]}r[0]=e[0];r[1]=e[1]}}else{this[t]=e}},hide:function(){this.ignore=true;this.__zr&&this.__zr.refresh()},show:function(){this.ignore=false;this.__zr&&this.__zr.refresh()},attr:function(t,e){if(typeof t==="string"){this.attrKV(t,e)}else if(G(t)){for(var r in t){if(t.hasOwnProperty(r)){this.attrKV(r,t[r])}}}this.dirty(false);return this},setClipPath:function(t){var e=this.__zr;if(e){t.addSelfToZr(e)}if(this.clipPath&&this.clipPath!==t){this.removeClipPath()}this.clipPath=t;t.__zr=e;t.__clipTarget=this;this.dirty(false)},removeClipPath:function(){var t=this.clipPath;if(t){if(t.__zr){t.removeSelfFromZr(t.__zr)}t.__zr=null;t.__clipTarget=null;this.clipPath=null;this.dirty(false)}},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e){for(var r=0;r<e.length;r++){t.animation.addAnimator(e[r])}}if(this.clipPath){this.clipPath.addSelfToZr(t)}},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e){for(var r=0;r<e.length;r++){t.animation.removeAnimator(e[r])}}if(this.clipPath){this.clipPath.removeSelfFromZr(t)}}};A(or,nr);A(or,ie);A(or,Rt);var sr=Ct;var lr=Math.min;var ur=Math.max;function hr(t,e,r,i){if(r<0){t=t+r;r=-r}if(i<0){e=e+i;i=-i}this.x=t;this.y=e;this.width=r;this.height=i}hr.prototype={constructor:hr,union:function(t){var e=lr(t.x,this.x);var r=lr(t.y,this.y);this.width=ur(t.x+t.width,this.x+this.width)-e;this.height=ur(t.y+t.height,this.y+this.height)-r;this.x=e;this.y=r},applyTransform:function(){var t=[];var e=[];var r=[];var i=[];return function(a){if(!a){return}t[0]=r[0]=this.x;t[1]=i[1]=this.y;e[0]=i[0]=this.x+this.width;e[1]=r[1]=this.y+this.height;sr(t,t,a);sr(e,e,a);sr(r,r,a);sr(i,i,a);this.x=lr(t[0],e[0],r[0],i[0]);this.y=lr(t[1],e[1],r[1],i[1]);var n=ur(t[0],e[0],r[0],i[0]);var o=ur(t[1],e[1],r[1],i[1]);this.width=n-this.x;this.height=o-this.y}}(),calculateTransform:function(t){var e=this;var r=t.width/e.width;var i=t.height/e.height;var a=Zt();Yt(a,a,[-e.x,-e.y]);Kt(a,a,[r,i]);Yt(a,a,[t.x,t.y]);return a},intersect:function(t){if(!t){return false}if(!(t instanceof hr)){t=hr.create(t)}var e=this;var r=e.x;var i=e.x+e.width;var a=e.y;var n=e.y+e.height;var o=t.x;var s=t.x+t.width;var l=t.y;var u=t.y+t.height;return!(i<o||s<r||n<l||u<a)},contain:function(t,e){var r=this;return t>=r.x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height},clone:function(){return new hr(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x;this.y=t.y;this.width=t.width;this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}};hr.create=function(t){return new hr(t.x,t.y,t.width,t.height)};var fr=function(t){t=t||{};or.call(this,t);for(var e in t){if(t.hasOwnProperty(e)){this[e]=t[e]}}this._children=[];this.__storage=null;this.__dirty=true};fr.prototype={constructor:fr,isGroup:true,type:"group",silent:false,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){var e=this._children;for(var r=0;r<e.length;r++){if(e[r].name===t){return e[r]}}},childCount:function(){return this._children.length},add:function(t){if(t&&t!==this&&t.parent!==this){this._children.push(t);this._doAdd(t)}return this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var r=this._children;var i=r.indexOf(e);if(i>=0){r.splice(i,0,t);this._doAdd(t)}}return this},_doAdd:function(t){if(t.parent){t.parent.remove(t)}t.parent=this;var e=this.__storage;var r=this.__zr;if(e&&e!==t.__storage){e.addToStorage(t);if(t instanceof fr){t.addChildrenToStorage(e)}}r&&r.refresh()},remove:function(t){var e=this.__zr;var r=this.__storage;var i=this._children;var a=T(i,t);if(a<0){return this}i.splice(a,1);t.parent=null;if(r){r.delFromStorage(t);if(t instanceof fr){t.delChildrenFromStorage(r)}}e&&e.refresh();return this},removeAll:function(){var t=this._children;var e=this.__storage;var r;var i;for(i=0;i<t.length;i++){r=t[i];if(e){e.delFromStorage(r);if(r instanceof fr){r.delChildrenFromStorage(e)}}r.parent=null}t.length=0;return this},eachChild:function(t,e){var r=this._children;for(var i=0;i<r.length;i++){var a=r[i];t.call(e,a,i)}return this},traverse:function(t,e){for(var r=0;r<this._children.length;r++){var i=this._children[r];t.call(e,i);if(i.type==="group"){i.traverse(t,e)}}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.addToStorage(r);if(r instanceof fr){r.addChildrenToStorage(t)}}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.delFromStorage(r);if(r instanceof fr){r.delChildrenFromStorage(t)}}},dirty:function(){this.__dirty=true;this.__zr&&this.__zr.refresh();return this},getBoundingRect:function(t){var e=null;var r=new hr(0,0,0,0);var i=t||this._children;var a=[];for(var n=0;n<i.length;n++){var o=i[n];if(o.ignore||o.invisible){continue}var s=o.getBoundingRect();var l=o.getLocalTransform(a);if(l){r.copy(s);r.applyTransform(l);e=e||r.clone();e.union(r)}else{e=e||s.clone();e.union(s)}}return e||r}};D(fr,or);var cr=32;var vr=7;function dr(t){var e=0;while(t>=cr){e|=t&1;t>>=1}return t+e}function pr(t,e,r,i){var a=e+1;if(a===r){return 1}if(i(t[a++],t[e])<0){while(a<r&&i(t[a],t[a-1])<0){a++}gr(t,e,a)}else{while(a<r&&i(t[a],t[a-1])>=0){a++}}return a-e}function gr(t,e,r){r--;while(e<r){var i=t[e];t[e++]=t[r];t[r--]=i}}function mr(t,e,r,i,a){if(i===e){i++}for(;i<r;i++){var n=t[i];var o=e;var s=i;var l;while(o<s){l=o+s>>>1;if(a(n,t[l])<0){s=l}else{o=l+1}}var u=i-o;switch(u){case 3:t[o+3]=t[o+2];case 2:t[o+2]=t[o+1];case 1:t[o+1]=t[o];break;default:while(u>0){t[o+u]=t[o+u-1];u--}}t[o]=n}}function yr(t,e,r,i,a,n){var o=0;var s=0;var l=1;if(n(t,e[r+a])>0){s=i-a;while(l<s&&n(t,e[r+a+l])>0){o=l;l=(l<<1)+1;if(l<=0){l=s}}if(l>s){l=s}o+=a;l+=a}else{s=a+1;while(l<s&&n(t,e[r+a-l])<=0){o=l;l=(l<<1)+1;if(l<=0){l=s}}if(l>s){l=s}var u=o;o=a-l;l=a-u}o++;while(o<l){var h=o+(l-o>>>1);if(n(t,e[r+h])>0){o=h+1}else{l=h}}return l}function xr(t,e,r,i,a,n){var o=0;var s=0;var l=1;if(n(t,e[r+a])<0){s=a+1;while(l<s&&n(t,e[r+a-l])<0){o=l;l=(l<<1)+1;if(l<=0){l=s}}if(l>s){l=s}var u=o;o=a-l;l=a-u}else{s=i-a;while(l<s&&n(t,e[r+a+l])>=0){o=l;l=(l<<1)+1;if(l<=0){l=s}}if(l>s){l=s}o+=a;l+=a}o++;while(o<l){var h=o+(l-o>>>1);if(n(t,e[r+h])<0){l=h}else{o=h+1}}return l}function _r(t,e){var r=vr;var i;var a;var n=0;var o=[];i=[];a=[];function s(t,e){i[n]=t;a[n]=e;n+=1}function l(){while(n>1){var t=n-2;if(t>=1&&a[t-1]<=a[t]+a[t+1]||t>=2&&a[t-2]<=a[t]+a[t-1]){if(a[t-1]<a[t+1]){t--}}else if(a[t]>a[t+1]){break}h(t)}}function u(){while(n>1){var t=n-2;if(t>0&&a[t-1]<a[t+1]){t--}h(t)}}function h(r){var o=i[r];var s=a[r];var l=i[r+1];var u=a[r+1];a[r]=s+u;if(r===n-3){i[r+1]=i[r+2];a[r+1]=a[r+2]}n--;var h=xr(t[l],t,o,s,0,e);o+=h;s-=h;if(s===0){return}u=yr(t[o+s-1],t,l,u,u-1,e);if(u===0){return}if(s<=u){f(o,s,l,u)}else{c(o,s,l,u)}}function f(i,a,n,s){var l=0;for(l=0;l<a;l++){o[l]=t[i+l]}var u=0;var h=n;var f=i;t[f++]=t[h++];if(--s===0){for(l=0;l<a;l++){t[f+l]=o[u+l]}return}if(a===1){for(l=0;l<s;l++){t[f+l]=t[h+l]}t[f+s]=o[u];return}var c=r;var v,d,p;while(1){v=0;d=0;p=false;do{if(e(t[h],o[u])<0){t[f++]=t[h++];d++;v=0;if(--s===0){p=true;break}}else{t[f++]=o[u++];v++;d=0;if(--a===1){p=true;break}}}while((v|d)<c);if(p){break}do{v=xr(t[h],o,u,a,0,e);if(v!==0){for(l=0;l<v;l++){t[f+l]=o[u+l]}f+=v;u+=v;a-=v;if(a<=1){p=true;break}}t[f++]=t[h++];if(--s===0){p=true;break}d=yr(o[u],t,h,s,0,e);if(d!==0){for(l=0;l<d;l++){t[f+l]=t[h+l]}f+=d;h+=d;s-=d;if(s===0){p=true;break}}t[f++]=o[u++];if(--a===1){p=true;break}c--}while(v>=vr||d>=vr);if(p){break}if(c<0){c=0}c+=2}r=c;r<1&&(r=1);if(a===1){for(l=0;l<s;l++){t[f+l]=t[h+l]}t[f+s]=o[u]}else if(a===0){throw new Error}else{for(l=0;l<a;l++){t[f+l]=o[u+l]}}}function c(i,a,n,s){var l=0;for(l=0;l<s;l++){o[l]=t[n+l]}var u=i+a-1;var h=s-1;var f=n+s-1;var c=0;var v=0;t[f--]=t[u--];if(--a===0){c=f-(s-1);for(l=0;l<s;l++){t[c+l]=o[l]}return}if(s===1){f-=a;u-=a;v=f+1;c=u+1;for(l=a-1;l>=0;l--){t[v+l]=t[c+l]}t[f]=o[h];return}var d=r;while(true){var p=0;var g=0;var m=false;do{if(e(o[h],t[u])<0){t[f--]=t[u--];p++;g=0;if(--a===0){m=true;break}}else{t[f--]=o[h--];g++;p=0;if(--s===1){m=true;break}}}while((p|g)<d);if(m){break}do{p=a-xr(o[h],t,i,a,a-1,e);if(p!==0){f-=p;u-=p;a-=p;v=f+1;c=u+1;for(l=p-1;l>=0;l--){t[v+l]=t[c+l]}if(a===0){m=true;break}}t[f--]=o[h--];if(--s===1){m=true;break}g=s-yr(t[u],o,0,s,s-1,e);if(g!==0){f-=g;h-=g;s-=g;v=f+1;c=h+1;for(l=0;l<g;l++){t[v+l]=o[c+l]}if(s<=1){m=true;break}}t[f--]=t[u--];if(--a===0){m=true;break}d--}while(p>=vr||g>=vr);if(m){break}if(d<0){d=0}d+=2}r=d;if(r<1){r=1}if(s===1){f-=a;u-=a;v=f+1;c=u+1;for(l=a-1;l>=0;l--){t[v+l]=t[c+l]}t[f]=o[h]}else if(s===0){throw new Error}else{c=f-(s-1);for(l=0;l<s;l++){t[c+l]=o[l]}}}this.mergeRuns=l;this.forceMergeRuns=u;this.pushRun=s}function wr(t,e,r,i){if(!r){r=0}if(!i){i=t.length}var a=i-r;if(a<2){return}var n=0;if(a<cr){n=pr(t,r,i,e);mr(t,r,i,r+n,e);return}var o=new _r(t,e);var s=dr(a);do{n=pr(t,r,i,e);if(n<s){var l=a;if(l>s){l=s}mr(t,r,r+l,r+n,e);n=l}o.pushRun(r,n);o.mergeRuns();a-=n;r+=n}while(a!==0);o.forceMergeRuns()}function br(t,e){if(t.zlevel===e.zlevel){if(t.z===e.z){return t.z2-e.z2}return t.z-e.z}return t.zlevel-e.zlevel}var Sr=function(){this._roots=[];this._displayList=[];this._displayListLen=0};Sr.prototype={constructor:Sr,traverse:function(t,e){for(var r=0;r<this._roots.length;r++){this._roots[r].traverse(t,e)}},getDisplayList:function(t,e){e=e||false;if(t){this.updateDisplayList(e)}return this._displayList},updateDisplayList:function(t){this._displayListLen=0;var e=this._roots;var r=this._displayList;for(var i=0,a=e.length;i<a;i++){this._updateAndAddDisplayable(e[i],null,t)}r.length=this._displayListLen;n.canvasSupported&&wr(r,br)},_updateAndAddDisplayable:function(t,e,r){if(t.ignore&&!r){return}t.beforeUpdate();if(t.__dirty){t.update()}t.afterUpdate();var i=t.clipPath;if(i){if(e){e=e.slice()}else{e=[]}var a=i;var n=t;while(a){a.parent=n;a.updateTransform();e.push(a);n=a;a=a.clipPath}}if(t.isGroup){var o=t._children;for(var s=0;s<o.length;s++){var l=o[s];if(t.__dirty){l.__dirty=true}this._updateAndAddDisplayable(l,e,r)}t.__dirty=false}else{t.__clipPaths=e;this._displayList[this._displayListLen++]=t}},addRoot:function(t){if(t.__storage===this){return}if(t instanceof fr){t.addChildrenToStorage(this)}this.addToStorage(t);this._roots.push(t)},delRoot:function(t){if(t==null){for(var e=0;e<this._roots.length;e++){var r=this._roots[e];if(r instanceof fr){r.delChildrenFromStorage(this)}}this._roots=[];this._displayList=[];this._displayListLen=0;return}if(t instanceof Array){for(var e=0,i=t.length;e<i;e++){this.delRoot(t[e])}return}var a=T(this._roots,t);if(a>=0){this.delFromStorage(t);this._roots.splice(a,1);if(t instanceof fr){t.delChildrenFromStorage(this)}}},addToStorage:function(t){if(t){t.__storage=this;t.dirty(false)}return this},delFromStorage:function(t){if(t){t.__storage=null}return this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:br};var Mr={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1};var Ir=function(t,e,r){if(Mr.hasOwnProperty(e)){return r*=t.dpr}return r};var Tr=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];var Dr=function(t,e){this.extendFrom(t,false);this.host=e};function Ar(t,e,r){var i=e.x==null?0:e.x;var a=e.x2==null?1:e.x2;var n=e.y==null?0:e.y;var o=e.y2==null?0:e.y2;if(!e.global){i=i*r.width+r.x;a=a*r.width+r.x;n=n*r.height+r.y;o=o*r.height+r.y}i=isNaN(i)?0:i;a=isNaN(a)?1:a;n=isNaN(n)?0:n;o=isNaN(o)?0:o;var s=t.createLinearGradient(i,n,a,o);return s}function Cr(t,e,r){var i=r.width;var a=r.height;var n=Math.min(i,a);var o=e.x==null?.5:e.x;var s=e.y==null?.5:e.y;var l=e.r==null?.5:e.r;if(!e.global){o=o*i+r.x;s=s*a+r.y;l=l*n}var u=t.createRadialGradient(o,s,0,o,s,l);return u}Dr.prototype={constructor:Dr,host:null,fill:"#000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:false,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:false,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,r){var i=this;var a=r&&r.style;var n=!a;for(var o=0;o<Tr.length;o++){var s=Tr[o];var l=s[0];if(n||i[l]!==a[l]){t[l]=Ir(t,l,i[l]||s[1])}}if(n||i.fill!==a.fill){t.fillStyle=i.fill}if(n||i.stroke!==a.stroke){t.strokeStyle=i.stroke}if(n||i.opacity!==a.opacity){t.globalAlpha=i.opacity==null?1:i.opacity}if(n||i.blend!==a.blend){t.globalCompositeOperation=i.blend||"source-over"}if(this.hasStroke()){var u=i.lineWidth;t.lineWidth=u/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return t!=null&&t!=="none"},hasStroke:function(){var t=this.stroke;return t!=null&&t!=="none"&&this.lineWidth>0},extendFrom:function(t,e){if(t){for(var r in t){if(t.hasOwnProperty(r)&&(e===true||(e===false?!this.hasOwnProperty(r):t[r]!=null))){this[r]=t[r]}}}},set:function(t,e){if(typeof t==="string"){this[t]=e}else{this.extendFrom(t,true)}},clone:function(){var t=new this.constructor;t.extendFrom(this,true);return t},getGradient:function(t,e,r){var i=e.type==="radial"?Cr:Ar;var a=i(t,e,r);var n=e.colorStops;for(var o=0;o<n.length;o++){a.addColorStop(n[o].offset,n[o].color)}return a}};var Lr=Dr.prototype;for(var kr=0;kr<Tr.length;kr++){var Pr=Tr[kr];if(!(Pr[0]in Lr)){Lr[Pr[0]]=Pr[1]}}Dr.getGradient=Lr.getGradient;var Nr=function(t,e){this.image=t;this.repeat=e;this.type="pattern"};Nr.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};function Or(){return false}function Er(t,e,r){var i=S();var a=e.getWidth();var n=e.getHeight();var o=i.style;if(o){o.position="absolute";o.left=0;o.top=0;o.width=a+"px";o.height=n+"px";i.setAttribute("data-zr-dom-id",t)}i.width=a*r;i.height=n*r;return i}var Rr=function(t,e,r){var i;r=r||rr;if(typeof t==="string"){i=Er(t,e,r)}else if(G(t)){i=t;t=i.id}this.id=t;this.dom=i;var a=i.style;if(a){i.onselectstart=Or;a["-webkit-user-select"]="none";a["user-select"]="none";a["-webkit-touch-callout"]="none";a["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";a["padding"]=0;a["margin"]=0;a["border-width"]=0}this.domBack=null;this.ctxBack=null;this.painter=e;this.config=null;this.clearColor=0;this.motionBlur=false;this.lastFrameAlpha=.7;this.dpr=r};Rr.prototype={constructor:Rr,__dirty:true,__used:false,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:false,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d");this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=Er("back-"+this.id,this.painter,t);this.ctxBack=this.domBack.getContext("2d");if(t!=1){this.ctxBack.scale(t,t)}},resize:function(t,e){var r=this.dpr;var i=this.dom;var a=i.style;var n=this.domBack;if(a){a.width=t+"px";a.height=e+"px"}i.width=t*r;i.height=e*r;if(n){n.width=t*r;n.height=e*r;if(r!=1){this.ctxBack.scale(r,r)}}},clear:function(t,e){var r=this.dom;var i=this.ctx;var a=r.width;var n=r.height;var e=e||this.clearColor;var o=this.motionBlur&&!t;var s=this.lastFrameAlpha;var l=this.dpr;if(o){if(!this.domBack){this.createBackBuffer()}this.ctxBack.globalCompositeOperation="copy";this.ctxBack.drawImage(r,0,0,a/l,n/l)}i.clearRect(0,0,a,n);if(e&&e!=="transparent"){var u;if(e.colorStops){u=e.__canvasGradient||Dr.getGradient(i,e,{x:0,y:0,width:a,height:n});e.__canvasGradient=u}else if(e.image){u=Nr.prototype.getCanvasPattern.call(e,i)}i.save();i.fillStyle=u||e;i.fillRect(0,0,a,n);i.restore()}if(o){var h=this.domBack;i.save();i.globalAlpha=s;i.drawImage(h,0,0,a,n);i.restore()}}};var zr=typeof window!=="undefined"&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)};var Br=new fe(50);function Vr(t){if(typeof t==="string"){var e=Br.get(t);return e&&e.image}else{return t}}function Gr(t,e,r,i,a){if(!t){return e}else if(typeof t==="string"){if(e&&e.__zrImageSrc===t||!r){return e}var n=Br.get(t);var o={hostEl:r,cb:i,cbPayload:a};if(n){e=n.image;!Fr(e)&&n.pending.push(o)}else{!e&&(e=new Image);e.onload=Wr;Br.put(t,e.__cachedImgObj={image:e,pending:[o]});e.src=e.__zrImageSrc=t}return e}else{return t}}function Wr(){var t=this.__cachedImgObj;this.onload=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var r=t.pending[e];var i=r.cb;i&&i(this,r.cbPayload);r.hostEl.dirty()}t.pending.length=0}function Fr(t){return t&&t.width&&t.height}var Hr={};var Zr=0;var Ur=5e3;var Xr=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;var jr="12px sans-serif";var Yr={};function qr(t,e){Yr[t]=e}function Kr(t,e){e=e||jr;var r=t+":"+e;if(Hr[r]){return Hr[r]}var i=(t+"").split("\n");var a=0;for(var n=0,o=i.length;n<o;n++){a=Math.max(li(i[n],e).width,a)}if(Zr>Ur){Zr=0;Hr={}}Zr++;Hr[r]=a;return a}function $r(t,e,r,i,a,n,o){return n?Qr(t,e,r,i,a,n,o):Jr(t,e,r,i,a,o)}function Jr(t,e,r,i,a,n){var o=ui(t,e,a,n);var s=Kr(t,e);if(a){s+=a[1]+a[3]}var l=o.outerHeight;var u=ti(0,s,r);var h=ei(0,l,i);var f=new hr(u,h,s,l);f.lineHeight=o.lineHeight;return f}function Qr(t,e,r,i,a,n,o){var s=hi(t,{rich:n,truncate:o,font:e,textAlign:r,textPadding:a});var l=s.outerWidth;var u=s.outerHeight;var h=ti(0,l,r);var f=ei(0,u,i);return new hr(h,f,l,u)}function ti(t,e,r){if(r==="right"){t-=e}else if(r==="center"){t-=e/2}return t}function ei(t,e,r){if(r==="middle"){t-=e/2}else if(r==="bottom"){t-=e}return t}function ri(t,e,r){var i=e.x;var a=e.y;var n=e.height;var o=e.width;var s=n/2;var l="left";var u="top";switch(t){case"left":i-=r;a+=s;l="right";u="middle";break;case"right":i+=r+o;a+=s;u="middle";break;case"top":i+=o/2;a-=r;l="center";u="bottom";break;case"bottom":i+=o/2;a+=n+r;l="center";break;case"inside":i+=o/2;a+=s;l="center";u="middle";break;case"insideLeft":i+=r;a+=s;u="middle";break;case"insideRight":i+=o-r;a+=s;l="right";u="middle";break;case"insideTop":i+=o/2;a+=r;l="center";break;case"insideBottom":i+=o/2;a+=n-r;l="center";u="bottom";break;case"insideTopLeft":i+=r;a+=r;break;case"insideTopRight":i+=o-r;a+=r;l="right";break;case"insideBottomLeft":i+=r;a+=n-r;u="bottom";break;case"insideBottomRight":i+=o-r;a+=n-r;l="right";u="bottom";break}return{x:i,y:a,textAlign:l,textVerticalAlign:u}}function ii(t,e,r,i,a){if(!e){return""}var n=(t+"").split("\n");a=ai(e,r,i,a);for(var o=0,s=n.length;o<s;o++){n[o]=ni(n[o],a)}return n.join("\n")}function ai(t,e,r,i){i=w({},i);i.font=e;var r=X(r,"...");i.maxIterations=X(i.maxIterations,2);var a=i.minChar=X(i.minChar,0);i.cnCharWidth=Kr("",e);var n=i.ascCharWidth=Kr("a",e);i.placeholder=X(i.placeholder,"");var o=t=Math.max(0,t-1);for(var s=0;s<a&&o>=n;s++){o-=n}var l=Kr(r);if(l>o){r="";l=0}o=t-l;i.ellipsis=r;i.ellipsisWidth=l;i.contentWidth=o;i.containerWidth=t;return i}function ni(t,e){var r=e.containerWidth;var i=e.font;var a=e.contentWidth;if(!r){return""}var n=Kr(t,i);if(n<=r){return t}for(var o=0;;o++){if(n<=a||o>=e.maxIterations){t+=e.ellipsis;break}var s=o===0?oi(t,a,e.ascCharWidth,e.cnCharWidth):n>0?Math.floor(t.length*a/n):0;t=t.substr(0,s);n=Kr(t,i)}if(t===""){t=e.placeholder}return t}function oi(t,e,r,i){var a=0;var n=0;for(var o=t.length;n<o&&a<e;n++){var s=t.charCodeAt(n);a+=0<=s&&s<=127?r:i}return n}function si(t){return Kr("",t)}function li(t,e){return Yr.measureText(t,e)}Yr.measureText=function(t,e){var r=I();r.font=e||jr;return r.measureText(t)};function ui(t,e,r,i){t!=null&&(t+="");var a=si(e);var n=t?t.split("\n"):[];var o=n.length*a;var s=o;if(r){s+=r[0]+r[2]}if(t&&i){var l=i.outerHeight;var u=i.outerWidth;if(l!=null&&s>l){t="";n=[]}else if(u!=null){var h=ai(u-(r?r[1]+r[3]:0),e,i.ellipsis,{minChar:i.minChar,placeholder:i.placeholder});for(var f=0,c=n.length;f<c;f++){n[f]=ni(n[f],h)}}}return{lines:n,height:o,outerHeight:s,lineHeight:a}}function hi(t,e){var r={lines:[],width:0,height:0};t!=null&&(t+="");if(!t){return r}var i=Xr.lastIndex=0;var a;while((a=Xr.exec(t))!=null){var n=a.index;if(n>i){fi(r,t.substring(i,n))}fi(r,a[2],a[1]);i=Xr.lastIndex}if(i<t.length){fi(r,t.substring(i,t.length))}var o=r.lines;var s=0;var l=0;var u=[];var h=e.textPadding;var f=e.truncate;var c=f&&f.outerWidth;var v=f&&f.outerHeight;if(h){c!=null&&(c-=h[1]+h[3]);v!=null&&(v-=h[0]+h[2])}for(var d=0;d<o.length;d++){var p=o[d];var g=0;var m=0;for(var y=0;y<p.tokens.length;y++){var x=p.tokens[y];var _=x.styleName&&e.rich[x.styleName]||{};var w=x.textPadding=_.textPadding;var b=x.font=_.font||e.font;var S=x.textHeight=X(_.textHeight,si(b));w&&(S+=w[0]+w[2]);x.height=S;x.lineHeight=j(_.textLineHeight,e.textLineHeight,S);x.textAlign=_&&_.textAlign||e.textAlign;x.textVerticalAlign=_&&_.textVerticalAlign||"middle";if(v!=null&&s+x.lineHeight>v){return{lines:[],width:0,height:0}}x.textWidth=Kr(x.text,b);var M=_.textWidth;var I=M==null||M==="auto";if(typeof M==="string"&&M.charAt(M.length-1)==="%"){x.percentWidth=M;u.push(x);M=0}else{if(I){M=x.textWidth;var T=_.textBackgroundColor;var D=T&&T.image;if(D){D=Vr(D);if(Fr(D)){M=Math.max(M,D.width*S/D.height)}}}var A=w?w[1]+w[3]:0;M+=A;var C=c!=null?c-m:null;if(C!=null&&C<M){if(!I||C<A){x.text="";x.textWidth=M=0}else{x.text=ii(x.text,C-A,b,f.ellipsis,{minChar:f.minChar});x.textWidth=Kr(x.text,b);M=x.textWidth+A}}}m+=x.width=M;_&&(g=Math.max(g,x.lineHeight))}p.width=m;p.lineHeight=g;s+=g;l=Math.max(l,m)}r.outerWidth=r.width=X(e.textWidth,l);r.outerHeight=r.height=X(e.textHeight,s);if(h){r.outerWidth+=h[1]+h[3];r.outerHeight+=h[0]+h[2]}for(var d=0;d<u.length;d++){var x=u[d];var L=x.percentWidth;x.width=parseInt(L,10)/100*l}return r}function fi(t,e,r){var i=e==="";var a=e.split("\n");var n=t.lines;for(var o=0;o<a.length;o++){var s=a[o];var l={styleName:r,text:s,isLineHolder:!s&&!i};if(!o){var u=(n[n.length-1]||(n[0]={tokens:[]})).tokens;var h=u.length;h===1&&u[0].isLineHolder?u[0]=l:(s||!h||i)&&u.push(l)}else{n.push({tokens:[l]})}}}function ci(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&$(e)||t.textFont||t.font}function vi(t,e){var r=e.x;var i=e.y;var a=e.width;var n=e.height;var o=e.r;var s;var l;var u;var h;if(a<0){r=r+a;a=-a}if(n<0){i=i+n;n=-n}if(typeof o==="number"){s=l=u=h=o}else if(o instanceof Array){if(o.length===1){s=l=u=h=o[0]}else if(o.length===2){s=u=o[0];l=h=o[1]}else if(o.length===3){s=o[0];l=h=o[1];u=o[2]}else{s=o[0];l=o[1];u=o[2];h=o[3]}}else{s=l=u=h=0}var f;if(s+l>a){f=s+l;s*=a/f;l*=a/f}if(u+h>a){f=u+h;u*=a/f;h*=a/f}if(l+u>n){f=l+u;l*=n/f;u*=n/f}if(s+h>n){f=s+h;s*=n/f;h*=n/f}t.moveTo(r+s,i);t.lineTo(r+a-l,i);l!==0&&t.arc(r+a-l,i+l,l,-Math.PI/2,0);t.lineTo(r+a,i+n-u);u!==0&&t.arc(r+a-u,i+n-u,u,0,Math.PI/2);t.lineTo(r+h,i+n);h!==0&&t.arc(r+h,i+n-h,h,Math.PI/2,Math.PI);t.lineTo(r,i+s);s!==0&&t.arc(r+s,i+s,s,Math.PI,Math.PI*1.5)}var di={left:1,right:1,center:1};var pi={top:1,bottom:1,middle:1};function gi(t){mi(t);L(t.rich,mi);return t}function mi(t){if(t){t.font=ci(t);var e=t.textAlign;e==="middle"&&(e="center");t.textAlign=e==null||di[e]?e:"left";var r=t.textVerticalAlign||t.textBaseline;r==="center"&&(r="middle");t.textVerticalAlign=r==null||pi[r]?r:"top";var i=t.textPadding;if(i){t.textPadding=q(t.textPadding)}}}function yi(t,e,r,i,a){i.rich?_i(t,e,r,i,a):xi(t,e,r,i,a)}function xi(t,e,r,i,a){var n=Ai(e,"font",i.font||jr);var o=i.textPadding;var s=t.__textCotentBlock;if(!s||t.__dirty){s=t.__textCotentBlock=ui(r,n,o,i.truncate)}var l=s.outerHeight;var u=s.lines;var h=s.lineHeight;var f=Di(l,i,a);var c=f.baseX;var v=f.baseY;var d=f.textAlign;var p=f.textVerticalAlign;bi(e,i,a,c,v);var g=ei(v,l,p);var m=c;var y=g;var x=Mi(i);if(x||o){var _=Kr(r,n);var w=_;o&&(w+=o[1]+o[3]);var b=ti(c,w,d);x&&Ii(t,e,i,b,g,w,l);if(o){m=Pi(c,d,o);y+=o[0]}}Ai(e,"textAlign",d||"left");Ai(e,"textBaseline","middle");Ai(e,"shadowBlur",i.textShadowBlur||0);Ai(e,"shadowColor",i.textShadowColor||"transparent");Ai(e,"shadowOffsetX",i.textShadowOffsetX||0);Ai(e,"shadowOffsetY",i.textShadowOffsetY||0);y+=h/2;var S=i.textStrokeWidth;var M=Ci(i.textStroke,S);var I=Li(i.textFill);if(M){Ai(e,"lineWidth",S);Ai(e,"strokeStyle",M)}if(I){Ai(e,"fillStyle",I)}for(var T=0;T<u.length;T++){M&&e.strokeText(u[T],m,y);I&&e.fillText(u[T],m,y);y+=h}}function _i(t,e,r,i,a){var n=t.__textCotentBlock;if(!n||t.__dirty){n=t.__textCotentBlock=hi(r,i)}wi(t,e,n,i,a)}function wi(t,e,r,i,a){var n=r.width;var o=r.outerWidth;var s=r.outerHeight;var l=i.textPadding;var u=Di(s,i,a);var h=u.baseX;var f=u.baseY;var c=u.textAlign;var v=u.textVerticalAlign;bi(e,i,a,h,f);var d=ti(h,o,c);var p=ei(f,s,v);var g=d;var m=p;if(l){g+=l[3];m+=l[0]}var y=g+n;Mi(i)&&Ii(t,e,i,d,p,o,s);for(var x=0;x<r.lines.length;x++){var _=r.lines[x];var w=_.tokens;var b=w.length;var S=_.lineHeight;var M=_.width;var I=0;var T=g;var D=y;var A=b-1;var C;while(I<b&&(C=w[I],!C.textAlign||C.textAlign==="left")){Si(t,e,C,i,S,m,T,"left");M-=C.width;T+=C.width;I++}while(A>=0&&(C=w[A],C.textAlign==="right")){Si(t,e,C,i,S,m,D,"right");M-=C.width;D-=C.width;A--}T+=(n-(T-g)-(y-D)-M)/2;while(I<=A){C=w[I];Si(t,e,C,i,S,m,T+C.width/2,"center");T+=C.width;I++}m+=S}}function bi(t,e,r,i,a){if(r&&e.textRotation){var n=e.textOrigin;if(n==="center"){i=r.width/2+r.x;a=r.height/2+r.y}else if(n){i=n[0]+r.x;a=n[1]+r.y}t.translate(i,a);t.rotate(-e.textRotation);t.translate(-i,-a)}}function Si(t,e,r,i,a,n,o,s){var l=i.rich[r.styleName]||{};var u=r.textVerticalAlign;var h=n+a/2;if(u==="top"){h=n+r.height/2}else if(u==="bottom"){h=n+a-r.height/2}!r.isLineHolder&&Mi(l)&&Ii(t,e,l,s==="right"?o-r.width:s==="center"?o-r.width/2:o,h-r.height/2,r.width,r.height);var f=r.textPadding;if(f){o=Pi(o,s,f);h-=r.height/2-f[2]-r.textHeight/2}Ai(e,"shadowBlur",j(l.textShadowBlur,i.textShadowBlur,0));Ai(e,"shadowColor",l.textShadowColor||i.textShadowColor||"transparent");Ai(e,"shadowOffsetX",j(l.textShadowOffsetX,i.textShadowOffsetX,0));Ai(e,"shadowOffsetY",j(l.textShadowOffsetY,i.textShadowOffsetY,0));Ai(e,"textAlign",s);Ai(e,"textBaseline","middle");Ai(e,"font",r.font||jr);var c=Ci(l.textStroke||i.textStroke,d);var v=Li(l.textFill||i.textFill);var d=X(l.textStrokeWidth,i.textStrokeWidth);if(c){Ai(e,"lineWidth",d);Ai(e,"strokeStyle",c);e.strokeText(r.text,o,h)}if(v){Ai(e,"fillStyle",v);e.fillText(r.text,o,h)}}function Mi(t){return t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor}function Ii(t,e,r,i,a,n,o){var s=r.textBackgroundColor;var l=r.textBorderWidth;
var u=r.textBorderColor;var h=V(s);Ai(e,"shadowBlur",r.textBoxShadowBlur||0);Ai(e,"shadowColor",r.textBoxShadowColor||"transparent");Ai(e,"shadowOffsetX",r.textBoxShadowOffsetX||0);Ai(e,"shadowOffsetY",r.textBoxShadowOffsetY||0);if(h||l&&u){e.beginPath();var f=r.textBorderRadius;if(!f){e.rect(i,a,n,o)}else{vi(e,{x:i,y:a,width:n,height:o,r:f})}e.closePath()}if(h){Ai(e,"fillStyle",s);e.fill()}else if(G(s)){var c=s.image;c=Gr(c,null,t,Ti,s);if(c&&Fr(c)){e.drawImage(c,i,a,n,o)}}if(l&&u){Ai(e,"lineWidth",l);Ai(e,"strokeStyle",u);e.stroke()}}function Ti(t,e){e.image=t}function Di(t,e,r){var i=e.x||0;var a=e.y||0;var n=e.textAlign;var o=e.textVerticalAlign;if(r){var s=e.textPosition;if(s instanceof Array){i=r.x+ki(s[0],r.width);a=r.y+ki(s[1],r.height)}else{var l=ri(s,r,e.textDistance);i=l.x;a=l.y;n=n||l.textAlign;o=o||l.textVerticalAlign}var u=e.textOffset;if(u){i+=u[0];a+=u[1]}}return{baseX:i,baseY:a,textAlign:n,textVerticalAlign:o}}function Ai(t,e,r){t[e]=Ir(t,e,r);return t[e]}function Ci(t,e){return t==null||e<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function Li(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function ki(t,e){if(typeof t==="string"){if(t.lastIndexOf("%")>=0){return parseFloat(t)/100*e}return parseFloat(t)}return t}function Pi(t,e,r){return e==="right"?t-r[1]:e==="center"?t+r[3]/2-r[1]/2:t+r[3]}function Ni(t,e){return t!=null&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}var Oi=new hr;var Ei=function(){};Ei.prototype={constructor:Ei,drawRectText:function(t,e){var r=this.style;e=r.textRect||e;this.__dirty&&gi(r,true);var i=r.text;i!=null&&(i+="");if(!Ni(i,r)){return}t.save();var a=this.transform;if(!r.transformText){if(a){Oi.copy(e);Oi.applyTransform(a);e=Oi}}else{this.setTransform(t)}yi(this,t,i,r,e);t.restore()}};function Ri(t){t=t||{};or.call(this,t);for(var e in t){if(t.hasOwnProperty(e)&&e!=="style"){this[e]=t[e]}}this.style=new Dr(t.style,this);this._rect=null;this.__clipPaths=[]}Ri.prototype={constructor:Ri,type:"displayable",__dirty:true,invisible:false,z:0,z2:0,zlevel:0,draggable:false,dragging:false,silent:false,culling:false,cursor:"pointer",rectHover:false,progressive:false,incremental:false,inplace:false,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var r=this.transformCoordToLocal(t,e);var i=this.getBoundingRect();return i.contain(r[0],r[1])},dirty:function(){this.__dirty=true;this._rect=null;this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){if(t!=="style"){or.prototype.attrKV.call(this,t,e)}else{this.style.set(e)}},setStyle:function(t,e){this.style.set(t,e);this.dirty(false);return this},useStyle:function(t){this.style=new Dr(t,this);this.dirty(false);return this}};D(Ri,or);A(Ri,Ei);function zi(t){Ri.call(this,t)}zi.prototype={constructor:zi,type:"image",brush:function(t,e){var r=this.style;var i=r.image;r.bind(t,this,e);var a=this._image=Gr(i,this._image,this,this.onload);if(!a||!Fr(a)){return}var n=r.x||0;var o=r.y||0;var s=r.width;var l=r.height;var u=a.width/a.height;if(s==null&&l!=null){s=l*u}else if(l==null&&s!=null){l=s/u}else if(s==null&&l==null){s=a.width;l=a.height}this.setTransform(t);if(r.sWidth&&r.sHeight){var h=r.sx||0;var f=r.sy||0;t.drawImage(a,h,f,r.sWidth,r.sHeight,n,o,s,l)}else if(r.sx&&r.sy){var h=r.sx;var f=r.sy;var c=s-h;var v=l-f;t.drawImage(a,h,f,c,v,n,o,s,l)}else{t.drawImage(a,n,o,s,l)}if(r.text!=null){this.restoreTransform(t);this.drawRectText(t,this.getBoundingRect())}},getBoundingRect:function(){var t=this.style;if(!this._rect){this._rect=new hr(t.x||0,t.y||0,t.width||0,t.height||0)}return this._rect}};D(zi,Ri);var Bi=1e5;var Vi=314159;var Gi=.01;var Wi=.001;function Fi(t){return parseInt(t,10)}function Hi(t){if(!t){return false}if(t.__builtin__){return true}if(typeof t.resize!=="function"||typeof t.refresh!=="function"){return false}return true}var Zi=new hr(0,0,0,0);var Ui=new hr(0,0,0,0);function Xi(t,e,r){Zi.copy(t.getBoundingRect());if(t.transform){Zi.applyTransform(t.transform)}Ui.width=e;Ui.height=r;return!Zi.intersect(Ui)}function ji(t,e){if(t==e){return false}if(!t||!e||t.length!==e.length){return true}for(var r=0;r<t.length;r++){if(t[r]!==e[r]){return true}}}function Yi(t,e){for(var r=0;r<t.length;r++){var i=t[r];i.setTransform(e);e.beginPath();i.buildPath(e,i.shape);e.clip();i.restoreTransform(e)}}function qi(t,e){var r=document.createElement("div");r.style.cssText=["position:relative","overflow:hidden","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";";return r}var Ki=function(t,e,r){this.type="canvas";var i=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=r=w({},r||{});this.dpr=r.devicePixelRatio||rr;this._singleCanvas=i;this.root=t;var a=t.style;if(a){a["-webkit-tap-highlight-color"]="transparent";a["-webkit-user-select"]=a["user-select"]=a["-webkit-touch-callout"]="none";t.innerHTML=""}this.storage=e;var n=this._zlevelList=[];var o=this._layers={};this._layerConfig={};this._needsManuallyCompositing=false;if(!i){this._width=this._getSize(0);this._height=this._getSize(1);var s=this._domRoot=qi(this._width,this._height);t.appendChild(s)}else{var l=t.width;var u=t.height;if(r.width!=null){l=r.width}if(r.height!=null){u=r.height}this.dpr=r.devicePixelRatio||1;t.width=l*this.dpr;t.height=u*this.dpr;this._width=l;this._height=u;var h=new Rr(t,this,this.dpr);h.__builtin__=true;h.initContext();o[Vi]=h;h.zlevel=Vi;n.push(Vi);this._domRoot=t}this._hoverlayer=null;this._hoverElements=[]};Ki.prototype={constructor:Ki,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t){return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}}},refresh:function(t){var e=this.storage.getDisplayList(true);var r=this._zlevelList;this._redrawId=Math.random();this._paintList(e,t,this._redrawId);for(var i=0;i<r.length;i++){var a=r[i];var n=this._layers[a];if(!n.__builtin__&&n.refresh){var o=i===0?this._backgroundColor:null;n.refresh(o)}}this.refreshHover();return this},addHover:function(t,e){if(t.__hoverMir){return}var r=new t.constructor({style:t.style,shape:t.shape});r.__from=t;t.__hoverMir=r;r.setStyle(e);this._hoverElements.push(r)},removeHover:function(t){var e=t.__hoverMir;var r=this._hoverElements;var i=T(r,e);if(i>=0){r.splice(i,1)}t.__hoverMir=null},clearHover:function(t){var e=this._hoverElements;for(var r=0;r<e.length;r++){var i=e[r].__from;if(i){i.__hoverMir=null}}e.length=0},refreshHover:function(){var t=this._hoverElements;var e=t.length;var r=this._hoverlayer;r&&r.clear();if(!e){return}wr(t,this.storage.displayableSortFunc);if(!r){r=this._hoverlayer=this.getLayer(Bi)}var i={};r.ctx.save();for(var a=0;a<e;){var n=t[a];var o=n.__from;if(!(o&&o.__zr)){t.splice(a,1);o.__hoverMir=null;e--;continue}a++;if(!o.invisible){n.transform=o.transform;n.invTransform=o.invTransform;n.__clipPaths=o.__clipPaths;this._doPaintEl(n,r,true,i)}}r.ctx.restore()},getHoverLayer:function(){return this.getLayer(Bi)},_paintList:function(t,e,r){if(this._redrawId!==r){return}e=e||false;this._updateLayerStatus(t);var i=this._doPaintList(t,e);if(this._needsManuallyCompositing){this._compositeManually()}if(!i){var a=this;zr(function(){a._paintList(t,e,r)})}},_compositeManually:function(){var t=this.getLayer(Vi).ctx;var e=this._domRoot.width;var r=this._domRoot.height;t.clearRect(0,0,e,r);this.eachBuiltinLayer(function(i){if(i.virtual){t.drawImage(i.dom,0,0,e,r)}})},_doPaintList:function(t,e){var r=[];for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];var o=this._layers[a];if(o.__builtin__&&o!==this._hoverlayer&&(o.__dirty||e)){r.push(o)}}var s=true;for(var l=0;l<r.length;l++){var o=r[l];var u=o.ctx;var h={};u.save();var f=e?o.__startIndex:o.__drawIndex;var c=!e&&o.incremental&&Date.now;var v=c&&Date.now();var d=o.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(o.__startIndex===o.__endIndex){o.clear(false,d)}else if(f===o.__startIndex){var p=t[f];if(!p.incremental||!p.notClear||e){o.clear(false,d)}}if(f===-1){console.error("For some unknown reason. drawIndex is -1");f=o.__startIndex}for(var g=f;g<o.__endIndex;g++){var m=t[g];this._doPaintEl(m,o,e,h);m.__dirty=false;if(c){var y=Date.now()-v;if(y>15){break}}}o.__drawIndex=g;if(o.__drawIndex<o.__endIndex){s=false}if(h.prevElClipPaths){u.restore()}u.restore()}if(n.wxa){L(this._layers,function(t){if(t&&t.ctx&&t.ctx.draw){t.ctx.draw()}})}return s},_doPaintEl:function(t,e,r,i){var a=e.ctx;var n=t.transform;if((e.__dirty||r)&&!t.invisible&&t.style.opacity!==0&&!(n&&!n[0]&&!n[3])&&!(t.culling&&Xi(t,this._width,this._height))){var o=t.__clipPaths;if(!i.prevElClipPaths||ji(o,i.prevElClipPaths)){if(i.prevElClipPaths){e.ctx.restore();i.prevElClipPaths=null;i.prevEl=null}if(o){a.save();Yi(o,a);i.prevElClipPaths=o}}t.beforeBrush&&t.beforeBrush(a);t.brush(a,i.prevEl||null);i.prevEl=t;t.afterBrush&&t.afterBrush(a)}},getLayer:function(t,e){if(this._singleCanvas&&!this._needsManuallyCompositing){t=Vi}var r=this._layers[t];if(!r){r=new Rr("zr_"+t,this,this.dpr);r.zlevel=t;r.__builtin__=true;if(this._layerConfig[t]){x(r,this._layerConfig[t],true)}if(e){r.virtual=e}this.insertLayer(t,r);r.initContext()}return r},insertLayer:function(t,e){var r=this._layers;var i=this._zlevelList;var a=i.length;var n=null;var o=-1;var s=this._domRoot;if(r[t]){ar("ZLevel "+t+" has been used already");return}if(!Hi(e)){ar("Layer of zlevel "+t+" is not valid");return}if(a>0&&t>i[0]){for(o=0;o<a-1;o++){if(i[o]<t&&i[o+1]>t){break}}n=r[i[o]]}i.splice(o+1,0,t);r[t]=e;if(!e.virtual){if(n){var l=n.dom;if(l.nextSibling){s.insertBefore(e.dom,l.nextSibling)}else{s.appendChild(e.dom)}}else{if(s.firstChild){s.insertBefore(e.dom,s.firstChild)}else{s.appendChild(e.dom)}}}},eachLayer:function(t,e){var r=this._zlevelList;var i;var a;for(a=0;a<r.length;a++){i=r[a];t.call(e,this._layers[i],i)}},eachBuiltinLayer:function(t,e){var r=this._zlevelList;var i;var a;var n;for(n=0;n<r.length;n++){a=r[n];i=this._layers[a];if(i.__builtin__){t.call(e,i,a)}}},eachOtherLayer:function(t,e){var r=this._zlevelList;var i;var a;var n;for(n=0;n<r.length;n++){a=r[n];i=this._layers[a];if(!i.__builtin__){t.call(e,i,a)}}},getLayers:function(){return this._layers},_updateLayerStatus:function(t){this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=false});function e(t){if(a){if(a.__endIndex!==t){a.__dirty=true}a.__endIndex=t}}if(this._singleCanvas){for(var r=1;r<t.length;r++){var i=t[r];if(i.zlevel!==t[r-1].zlevel||i.incremental){this._needsManuallyCompositing=true;break}}}var a=null;var n=0;for(var r=0;r<t.length;r++){var i=t[r];var o=i.zlevel;var s;if(i.incremental){s=this.getLayer(o+Wi,this._needsManuallyCompositing);s.incremental=true;n=1}else{s=this.getLayer(o+(n>0?Gi:0),this._needsManuallyCompositing)}if(!s.__builtin__){ar("ZLevel "+o+" has been used by unkown layer "+s.id)}if(s!==a){s.__used=true;if(s.__startIndex!==r){s.__dirty=true}s.__startIndex=r;if(!s.incremental){s.__drawIndex=r}else{s.__drawIndex=-1}e(r);a=s}if(i.__dirty){s.__dirty=true;if(s.incremental&&s.__drawIndex<0){s.__drawIndex=r}}}e(r);this.eachBuiltinLayer(function(t,e){if(!t.__used&&t.getElementCount()>0){t.__dirty=true;t.__startIndex=t.__endIndex=t.__drawIndex=0}if(t.__dirty&&t.__drawIndex<0){t.__drawIndex=t.__startIndex}})},clear:function(){this.eachBuiltinLayer(this._clearLayer);return this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var r=this._layerConfig;if(!r[t]){r[t]=e}else{x(r[t],e,true)}for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===t||a===t+Gi){var n=this._layers[a];x(n,r[t],true)}}}},delLayer:function(t){var e=this._layers;var r=this._zlevelList;var i=e[t];if(!i){return}i.dom.parentNode.removeChild(i.dom);delete e[t];r.splice(T(r,t),1)},resize:function(t,e){if(!this._domRoot.style){if(t==null||e==null){return}this._width=t;this._height=e;this.getLayer(Vi).resize(t,e)}else{var r=this._domRoot;r.style.display="none";var i=this._opts;t!=null&&(i.width=t);e!=null&&(i.height=e);t=this._getSize(0);e=this._getSize(1);r.style.display="";if(this._width!=t||e!=this._height){r.style.width=t+"px";r.style.height=e+"px";for(var a in this._layers){if(this._layers.hasOwnProperty(a)){this._layers[a].resize(t,e)}}L(this._progressiveLayers,function(r){r.resize(t,e)});this.refresh(true)}this._width=t;this._height=e}return this},clearLayer:function(t){var e=this._layers[t];if(e){e.clear()}},dispose:function(){this.root.innerHTML="";this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){t=t||{};if(this._singleCanvas&&!this._compositeManually){return this._layers[Vi].dom}var e=new Rr("image",this,t.pixelRatio||this.dpr);e.initContext();e.clear(false,t.backgroundColor||this._backgroundColor);if(t.pixelRatio<=this.dpr){this.refresh();var r=e.dom.width;var i=e.dom.height;var a=e.ctx;this.eachLayer(function(t){if(t.__builtin__){a.drawImage(t.dom,0,0,r,i)}else if(t.renderToCanvas){e.ctx.save();t.renderToCanvas(e.ctx);e.ctx.restore()}})}else{var n={};var o=this.storage.getDisplayList(true);for(var s=0;s<o.length;s++){var l=o[s];this._doPaintEl(l,e,true,n)}}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts;var r=["width","height"][t];var i=["clientWidth","clientHeight"][t];var a=["paddingLeft","paddingTop"][t];var n=["paddingRight","paddingBottom"][t];if(e[r]!=null&&e[r]!=="auto"){return parseFloat(e[r])}var o=this.root;var s=document.defaultView.getComputedStyle(o);return(o[i]||Fi(s[r])||Fi(o.style[r]))-(Fi(s[a])||0)-(Fi(s[n])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var r=document.createElement("canvas");var i=r.getContext("2d");var a=t.getBoundingRect();var n=t.style;var o=n.shadowBlur*e;var s=n.shadowOffsetX*e;var l=n.shadowOffsetY*e;var u=n.hasStroke()?n.lineWidth:0;var h=Math.max(u/2,-s+o);var f=Math.max(u/2,s+o);var c=Math.max(u/2,-l+o);var v=Math.max(u/2,l+o);var d=a.width+h+f;var p=a.height+c+v;r.width=d*e;r.height=p*e;i.scale(e,e);i.clearRect(0,0,d,p);i.dpr=e;var g={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[h-a.x,c-a.y];t.rotation=0;t.scale=[1,1];t.updateTransform();if(t){t.brush(i)}var m=zi;var y=new m({style:{x:0,y:0,image:r}});if(g.position!=null){y.position=t.position=g.position}if(g.rotation!=null){y.rotation=t.rotation=g.rotation}if(g.scale!=null){y.scale=t.scale=g.scale}return y}};var $i=typeof window!=="undefined"&&!!window.addEventListener;var Ji=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function Qi(t){return t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0}}function ta(t,e,r,i){r=r||{};if(i||!n.canvasSupported){ea(t,e,r)}else if(n.browser.firefox&&e.layerX!=null&&e.layerX!==e.offsetX){r.zrX=e.layerX;r.zrY=e.layerY}else if(e.offsetX!=null){r.zrX=e.offsetX;r.zrY=e.offsetY}else{ea(t,e,r)}return r}function ea(t,e,r){var i=Qi(t);r.zrX=e.clientX-i.left;r.zrY=e.clientY-i.top}function ra(t,e,r){e=e||window.event;if(e.zrX!=null){return e}var i=e.type;var a=i&&i.indexOf("touch")>=0;if(!a){ta(t,e,e,r);e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}else{var n=i!="touchend"?e.targetTouches[0]:e.changedTouches[0];n&&ta(t,n,e,r)}var o=e.button;if(e.which==null&&o!==undefined&&Ji.test(e.type)){e.which=o&1?1:o&2?3:o&4?2:0}return e}function ia(t,e,r){if($i){t.addEventListener(e,r)}else{t.attachEvent("on"+e,r)}}function aa(t,e,r){if($i){t.removeEventListener(e,r)}else{t.detachEvent("on"+e,r)}}var na=$i?function(t){t.preventDefault();t.stopPropagation();t.cancelBubble=true}:function(t){t.returnValue=false;t.cancelBubble=true};function oa(t){return t.which>1}var sa=function(t){t=t||{};this.stage=t.stage||{};this.onframe=t.onframe||function(){};this._clips=[];this._running=false;this._time;this._pausedTime;this._pauseStart;this._paused=false;Rt.call(this)};sa.prototype={constructor:sa,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;var e=t.getClips();for(var r=0;r<e.length;r++){this.addClip(e[r])}},removeClip:function(t){var e=T(this._clips,t);if(e>=0){this._clips.splice(e,1)}},removeAnimator:function(t){var e=t.getClips();for(var r=0;r<e.length;r++){this.removeClip(e[r])}t.animation=null},_update:function(){var t=(new Date).getTime()-this._pausedTime;var e=t-this._time;var r=this._clips;var i=r.length;var a=[];var n=[];for(var o=0;o<i;o++){var s=r[o];var l=s.step(t,e);if(l){a.push(l);n.push(s)}}for(var o=0;o<i;){if(r[o]._needsRemove){r[o]=r[i-1];r.pop();i--}else{o++}}i=a.length;for(var o=0;o<i;o++){n[o].fire(a[o])}this._time=t;this.onframe(e);this.trigger("frame",e);if(this.stage.update){this.stage.update()}},_startLoop:function(){var t=this;this._running=true;function e(){if(t._running){zr(e);!t._paused&&t._update()}}zr(e)},start:function(){this._time=(new Date).getTime();this._pausedTime=0;this._startLoop()},stop:function(){this._running=false},pause:function(){if(!this._paused){this._pauseStart=(new Date).getTime();this._paused=true}},resume:function(){if(this._paused){this._pausedTime+=(new Date).getTime()-this._pauseStart;this._paused=false}},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){e=e||{};var r=new Qe(t,e.loop,e.getter,e.setter);this.addAnimator(r);return r}};A(sa,Rt);var la=function(){this._track=[]};la.prototype={constructor:la,recognize:function(t,e,r){this._doTrack(t,e,r);return this._recognize(t)},clear:function(){this._track.length=0;return this},_doTrack:function(t,e,r){var i=t.touches;if(!i){return}var a={points:[],touches:[],target:e,event:t};for(var n=0,o=i.length;n<o;n++){var s=i[n];var l=ta(r,s,{});a.points.push([l.zrX,l.zrY]);a.touches.push(s)}this._track.push(a)},_recognize:function(t){for(var e in fa){if(fa.hasOwnProperty(e)){var r=fa[e](this._track,t);if(r){return r}}}}};function ua(t){var e=t[1][0]-t[0][0];var r=t[1][1]-t[0][1];return Math.sqrt(e*e+r*r)}function ha(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var fa={pinch:function(t,e){var r=t.length;if(!r){return}var i=(t[r-1]||{}).points;var a=(t[r-2]||{}).points||i;if(a&&a.length>1&&i&&i.length>1){var n=ua(i)/ua(a);!isFinite(n)&&(n=1);e.pinchScale=n;var o=ha(i);e.pinchX=o[0];e.pinchY=o[1];return{type:"pinch",target:t[0].target,event:e}}}};var ca=300;var va=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];var da=["touchstart","touchend","touchmove"];var pa={pointerdown:1,pointerup:1,pointermove:1,pointerout:1};var ga=k(va,function(t){var e=t.replace("mouse","pointer");return pa[e]?e:t});function ma(t){return t==="mousewheel"&&n.browser.firefox?"DOMMouseScroll":t}function ya(t,e,r){var i=t._gestureMgr;r==="start"&&i.clear();var a=i.recognize(e,t.handler.findHover(e.zrX,e.zrY,null).target,t.dom);r==="end"&&i.clear();if(a){var n=a.type;e.gestureEvent=n;t.handler.dispatchToElement({target:a.target},n,a.event)}}function xa(t){t._touching=true;clearTimeout(t._touchTimer);t._touchTimer=setTimeout(function(){t._touching=false},700)}var _a={mousemove:function(t){t=ra(this.dom,t);this.trigger("mousemove",t)},mouseout:function(t){t=ra(this.dom,t);var e=t.toElement||t.relatedTarget;if(e!=this.dom){while(e&&e.nodeType!=9){if(e===this.dom){return}e=e.parentNode}}this.trigger("mouseout",t)},touchstart:function(t){t=ra(this.dom,t);t.zrByTouch=true;this._lastTouchMoment=new Date;ya(this,t,"start");_a.mousemove.call(this,t);_a.mousedown.call(this,t);xa(this)},touchmove:function(t){t=ra(this.dom,t);t.zrByTouch=true;ya(this,t,"change");_a.mousemove.call(this,t);xa(this)},touchend:function(t){t=ra(this.dom,t);t.zrByTouch=true;ya(this,t,"end");_a.mouseup.call(this,t);if(+new Date-this._lastTouchMoment<ca){_a.click.call(this,t)}xa(this)},pointerdown:function(t){_a.mousedown.call(this,t)},pointermove:function(t){if(!wa(t)){_a.mousemove.call(this,t)}},pointerup:function(t){_a.mouseup.call(this,t)},pointerout:function(t){if(!wa(t)){_a.mouseout.call(this,t)}}};function wa(t){var e=t.pointerType;return e==="pen"||e==="touch"}L(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){_a[t]=function(e){e=ra(this.dom,e);this.trigger(t,e)}});function ba(t){L(da,function(e){t._handlers[e]=E(_a[e],t)});L(ga,function(e){t._handlers[e]=E(_a[e],t)});L(va,function(r){t._handlers[r]=e(_a[r],t)});function e(t,e){return function(){if(e._touching){return}return t.apply(e,arguments)}}}function Sa(t){Rt.call(this);this.dom=t;this._touching=false;this._touchTimer;this._gestureMgr=new la;this._handlers={};ba(this);if(n.pointerEventsSupported){e(ga,this)}else{if(n.touchEventsSupported){e(da,this)}e(va,this)}function e(e,r){L(e,function(e){ia(t,ma(e),r._handlers[e])},r)}}var Ma=Sa.prototype;Ma.dispose=function(){var t=va.concat(da);for(var e=0;e<t.length;e++){var r=t[e];aa(this.dom,ma(r),this._handlers[r])}};Ma.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")};A(Sa,Rt);var Ia=!n.canvasSupported;var Ta={canvas:Ki};var Da={};var Aa="4.0.4";function Ca(t,e){var r=new Oa(i(),t,e);Da[r.id]=r;return r}function La(t){if(t){t.dispose()}else{for(var e in Da){if(Da.hasOwnProperty(e)){Da[e].dispose()}}Da={}}return this}function ka(t){return Da[t]}function Pa(t,e){Ta[t]=e}function Na(t){delete Da[t]}var Oa=function(t,e,r){r=r||{};this.dom=e;this.id=t;var i=this;var a=new Sr;var o=r.renderer;if(Ia){if(!Ta.vml){throw new Error("You need to require 'zrender/vml/vml' to support IE8")}o="vml"}else if(!o||!Ta[o]){o="canvas"}var s=new Ta[o](e,a,r,t);this.storage=a;this.painter=s;var l=!n.node&&!n.worker?new Sa(s.getViewportRoot()):null;this.handler=new Wt(a,s,l,s.root);this.animation=new sa({stage:{update:E(this.flush,this)}});this.animation.start();this._needsRefresh;var u=a.delFromStorage;var h=a.addToStorage;a.delFromStorage=function(t){u.call(a,t);t&&t.removeSelfFromZr(i)};a.addToStorage=function(t){h.call(a,t);t.addSelfToZr(i)}};Oa.prototype={constructor:Oa,getId:function(){return this.id},add:function(t){this.storage.addRoot(t);this._needsRefresh=true},remove:function(t){this.storage.delRoot(t);this._needsRefresh=true},configLayer:function(t,e){if(this.painter.configLayer){this.painter.configLayer(t,e)}this._needsRefresh=true},setBackgroundColor:function(t){if(this.painter.setBackgroundColor){this.painter.setBackgroundColor(t)}this._needsRefresh=true},refreshImmediately:function(){this._needsRefresh=false;this.painter.refresh();this._needsRefresh=false},refresh:function(){this._needsRefresh=true},flush:function(){var t;if(this._needsRefresh){t=true;this.refreshImmediately()}if(this._needsRefreshHover){t=true;this.refreshHoverImmediately()}t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){this.painter.addHover(t,e);this.refreshHover()}},removeHover:function(t){if(this.painter.removeHover){this.painter.removeHover(t);this.refreshHover()}},clearHover:function(){if(this.painter.clearHover){this.painter.clearHover();this.refreshHover()}},refreshHover:function(){this._needsRefreshHover=true},refreshHoverImmediately:function(){this._needsRefreshHover=false;this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{};this.painter.resize(t.width,t.height);this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,r){this.handler.on(t,e,r)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot();this.painter.clear()},dispose:function(){this.animation.stop();this.clear();this.storage.dispose();this.painter.dispose();this.handler.dispose();this.animation=this.storage=this.painter=this.handler=null;Na(this.id)}};var Ea=(Object.freeze||Object)({version:Aa,init:Ca,dispose:La,getInstance:ka,registerPainter:Pa});var Ra=L;var za=G;var Ba=z;var Va="series\0";function Ga(t){return t instanceof Array?t:t==null?[]:[t]}function Wa(t,e,r){if(t){t[e]=t[e]||{};t.emphasis=t.emphasis||{};t.emphasis[e]=t.emphasis[e]||{};for(var i=0,a=r.length;i<a;i++){var n=r[i];if(!t.emphasis[e].hasOwnProperty(n)&&t[e].hasOwnProperty(n)){t.emphasis[e][n]=t[e][n]}}}}var Fa=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Ha(t){return za(t)&&!Ba(t)&&!(t instanceof Date)?t.value:t}function Za(t){return za(t)&&!(t instanceof Array)}function Ua(t,e){e=(e||[]).slice();var r=k(t||[],function(t,e){return{exist:t}});Ra(e,function(t,i){if(!za(t)){return}for(var a=0;a<r.length;a++){if(!r[a].option&&t.id!=null&&r[a].exist.id===t.id+""){r[a].option=t;e[i]=null;return}}for(var a=0;a<r.length;a++){var n=r[a].exist;if(!r[a].option&&(n.id==null||t.id==null)&&t.name!=null&&!Ya(t)&&!Ya(n)&&n.name===t.name+""){r[a].option=t;e[i]=null;return}}});Ra(e,function(t,e){if(!za(t)){return}var i=0;for(;i<r.length;i++){var a=r[i].exist;if(!r[i].option&&!Ya(a)&&t.id==null){r[i].option=t;break}}if(i>=r.length){r.push({option:t})}});return r}function Xa(t){var e=rt();Ra(t,function(t,r){var i=t.exist;i&&e.set(i.id,t)});Ra(t,function(t,r){var i=t.option;K(!i||i.id==null||!e.get(i.id)||e.get(i.id)===t,"id duplicates: "+(i&&i.id));i&&i.id!=null&&e.set(i.id,t);!t.keyInfo&&(t.keyInfo={})});Ra(t,function(t,r){var i=t.exist;var a=t.option;var n=t.keyInfo;if(!za(a)){return}n.name=a.name!=null?a.name+"":i?i.name:Va+r;if(i){n.id=i.id}else if(a.id!=null){n.id=a.id+""}else{var o=0;do{n.id="\0"+n.name+"\0"+o++}while(e.get(n.id))}e.set(n.id,t)})}function ja(t){var e=t.name;return!!(e&&e.indexOf(Va))}function Ya(t){return za(t)&&t.id&&(t.id+"").indexOf("\0_ec_\0")===0}function qa(t,e){var r={};var i={};a(t||[],r);a(e||[],i,r);return[n(r),n(i)];function a(t,e,r){for(var i=0,a=t.length;i<a;i++){var n=t[i].seriesId;var o=Ga(t[i].dataIndex);var s=r&&r[n];for(var l=0,u=o.length;l<u;l++){var h=o[l];if(s&&s[h]){s[h]=null}else{(e[n]||(e[n]={}))[h]=1}}}}function n(t,e){var r=[];for(var i in t){if(t.hasOwnProperty(i)&&t[i]!=null){if(e){r.push(+i)}else{var a=n(t[i],true);a.length&&r.push({seriesId:i,dataIndex:a})}}}return r}}function Ka(t,e){if(e.dataIndexInside!=null){return e.dataIndexInside}else if(e.dataIndex!=null){return z(e.dataIndex)?k(e.dataIndex,function(e){return t.indexOfRawIndex(e)}):t.indexOfRawIndex(e.dataIndex)}else if(e.name!=null){return z(e.name)?k(e.name,function(e){return t.indexOfName(e)}):t.indexOfName(e.name)}}function $a(){var t="__\0ec_inner_"+Ja++ +"_"+Math.random().toFixed(5);return function(e){return e[t]||(e[t]={})}}var Ja=0;function Qa(t,e,r){if(V(e)){var i={};i[e+"Index"]=0;e=i}var a=r&&r.defaultMainType;if(a&&!tn(e,a+"Index")&&!tn(e,a+"Id")&&!tn(e,a+"Name")){e[a+"Index"]=0}var n={};Ra(e,function(i,a){var i=e[a];if(a==="dataIndex"||a==="dataIndexInside"){n[a]=i;return}var o=a.match(/^(\w+)(Index|Id|Name)$/)||[];var s=o[1];var l=(o[2]||"").toLowerCase();if(!s||!l||i==null||l==="index"&&i==="none"||r&&r.includeMainTypes&&T(r.includeMainTypes,s)<0){return}var u={mainType:s};if(l!=="index"||i!=="all"){u[l]=i}var h=t.queryComponents(u);n[s+"Models"]=h;n[s+"Model"]=h[0]});return n}function tn(t,e){return t&&t.hasOwnProperty(e)}function en(t,e,r){t.setAttribute?t.setAttribute(e,r):t[e]=r}function rn(t,e){return t.getAttribute?t.getAttribute(e):t[e]}var an=".";var nn="___EC__COMPONENT__CONTAINER___";function on(t){var e={main:"",sub:""};if(t){t=t.split(an);e.main=t[0]||"";e.sub=t[1]||""}return e}function sn(t){K(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function ln(t,r){t.$constructor=t;t.extend=function(t){if(e){L(r,function(e){if(!t[e]){console.warn("Method `"+e+"` should be implemented"+(t.type?" in "+t.type:"")+".")}})}var i=this;var a=function(){if(!t.$constructor){i.apply(this,arguments)}else{t.$constructor.apply(this,arguments)}};w(a.prototype,t);a.extend=this.extend;a.superCall=fn;a.superApply=cn;D(a,this);a.superClass=i;return a}}var un=0;function hn(t){var r=["__\0is_clz",un++,Math.random().toFixed(3)].join("_");t.prototype[r]=true;if(e){K(!t.isInstance,'The method "is" can not be defined.')}t.isInstance=function(t){return!!(t&&t[r])}}function fn(t,e){var r=Y(arguments,2);return this.superClass.prototype[e].apply(t,r)}function cn(t,e,r){return this.superClass.prototype[e].apply(t,r)}function vn(t,r){r=r||{};var i={};t.registerClass=function(t,r){if(r){sn(r);r=on(r);if(!r.sub){if(e){if(i[r.main]){console.warn(r.main+" exists.")}}i[r.main]=t}else if(r.sub!==nn){var n=a(r);n[r.sub]=t}}return t};t.getClass=function(t,e,r){var a=i[t];if(a&&a[nn]){a=e?a[e]:null}if(r&&!a){throw new Error(!e?t+"."+"type should be specified.":"Component "+t+"."+(e||"")+" not exists. Load it first.")}return a};t.getClassesByMainType=function(t){t=on(t);var e=[];var r=i[t.main];if(r&&r[nn]){L(r,function(t,r){r!==nn&&e.push(t)})}else{e.push(r)}return e};t.hasClass=function(t){t=on(t);return!!i[t.main]};t.getAllClassMainTypes=function(){var t=[];L(i,function(e,r){t.push(r)});return t};t.hasSubTypes=function(t){t=on(t);var e=i[t.main];return e&&e[nn]};t.parseClassType=on;function a(t){var e=i[t.main];if(!e||!e[nn]){e=i[t.main]={};e[nn]=true}return e}if(r.registerWhenExtend){var n=t.extend;if(n){t.extend=function(e){var r=n.call(this,e);return t.registerClass(r,e.type)}}}return t}var dn=function(t){for(var e=0;e<t.length;e++){if(!t[e][1]){t[e][1]=t[e][0]}}return function(e,r,i){var a={};for(var n=0;n<t.length;n++){var o=t[n][1];if(r&&T(r,o)>=0||i&&T(i,o)<0){continue}var s=e.getShallow(o);if(s!=null){a[t[n][0]]=s}}return a}};var pn=dn([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);var gn={getLineStyle:function(t){var e=pn(this,t);var r=this.getLineDash(e.lineWidth);r&&(e.lineDash=r);return e},getLineDash:function(t){if(t==null){t=1}var e=this.get("type");var r=Math.max(t,2);var i=t*4;return e==="solid"||e==null?null:e==="dashed"?[i,i]:[r,r]}};var mn=dn([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]);var yn={getAreaStyle:function(t,e){return mn(this,t,e)}};var xn=Math.pow;var _n=Math.sqrt;var wn=1e-8;var bn=1e-4;var Sn=_n(3);var Mn=1/3;var In=st();var Tn=st();var Dn=st();function An(t){return t>-wn&&t<wn}function Cn(t){return t>wn||t<-wn}function Ln(t,e,r,i,a){var n=1-a;return n*n*(n*t+3*a*e)+a*a*(a*i+3*n*r)}function kn(t,e,r,i,a){var n=1-a;return 3*(((e-t)*n+2*(r-e)*a)*n+(i-r)*a*a)}function Pn(t,e,r,i,a,n){var o=i+3*(e-r)-t;var s=3*(r-e*2+t);var l=3*(e-t);var u=t-a;var h=s*s-3*o*l;var f=s*l-9*o*u;var c=l*l-3*s*u;var v=0;if(An(h)&&An(f)){if(An(s)){n[0]=0}else{var d=-l/s;if(d>=0&&d<=1){n[v++]=d}}}else{var p=f*f-4*h*c;if(An(p)){var g=f/h;var d=-s/o+g;var m=-g/2;if(d>=0&&d<=1){n[v++]=d}if(m>=0&&m<=1){n[v++]=m}}else if(p>0){var y=_n(p);var x=h*s+1.5*o*(-f+y);var _=h*s+1.5*o*(-f-y);if(x<0){x=-xn(-x,Mn)}else{x=xn(x,Mn)}if(_<0){_=-xn(-_,Mn)}else{_=xn(_,Mn)}var d=(-s-(x+_))/(3*o);if(d>=0&&d<=1){n[v++]=d}}else{var w=(2*h*s-3*o*f)/(2*_n(h*h*h));var b=Math.acos(w)/3;var S=_n(h);var M=Math.cos(b);var d=(-s-2*S*M)/(3*o);var m=(-s+S*(M+Sn*Math.sin(b)))/(3*o);var I=(-s+S*(M-Sn*Math.sin(b)))/(3*o);if(d>=0&&d<=1){n[v++]=d}if(m>=0&&m<=1){n[v++]=m}if(I>=0&&I<=1){n[v++]=I}}}return v}function Nn(t,e,r,i,a){var n=6*r-12*e+6*t;var o=9*e+3*i-3*t-9*r;var s=3*e-3*t;var l=0;if(An(o)){if(Cn(n)){var u=-s/n;if(u>=0&&u<=1){
a[l++]=u}}}else{var h=n*n-4*o*s;if(An(h)){a[0]=-n/(2*o)}else if(h>0){var f=_n(h);var u=(-n+f)/(2*o);var c=(-n-f)/(2*o);if(u>=0&&u<=1){a[l++]=u}if(c>=0&&c<=1){a[l++]=c}}}return l}function On(t,e,r,i,a,n){var o=(e-t)*a+t;var s=(r-e)*a+e;var l=(i-r)*a+r;var u=(s-o)*a+o;var h=(l-s)*a+s;var f=(h-u)*a+u;n[0]=t;n[1]=o;n[2]=u;n[3]=f;n[4]=f;n[5]=h;n[6]=l;n[7]=i}function En(t,e,r,i,a,n,o,s,l,u,h){var f;var c=.005;var v=Infinity;var d;var p;var g;var m;In[0]=l;In[1]=u;for(var y=0;y<1;y+=.05){Tn[0]=Ln(t,r,a,o,y);Tn[1]=Ln(e,i,n,s,y);g=Tt(In,Tn);if(g<v){f=y;v=g}}v=Infinity;for(var x=0;x<32;x++){if(c<bn){break}d=f-c;p=f+c;Tn[0]=Ln(t,r,a,o,d);Tn[1]=Ln(e,i,n,s,d);g=Tt(Tn,In);if(d>=0&&g<v){f=d;v=g}else{Dn[0]=Ln(t,r,a,o,p);Dn[1]=Ln(e,i,n,s,p);m=Tt(Dn,In);if(p<=1&&m<v){f=p;v=m}else{c*=.5}}}if(h){h[0]=Ln(t,r,a,o,f);h[1]=Ln(e,i,n,s,f)}return _n(v)}function Rn(t,e,r,i){var a=1-i;return a*(a*t+2*i*e)+i*i*r}function zn(t,e,r,i){return 2*((1-i)*(e-t)+i*(r-e))}function Bn(t,e,r,i,a){var n=t-2*e+r;var o=2*(e-t);var s=t-i;var l=0;if(An(n)){if(Cn(o)){var u=-s/o;if(u>=0&&u<=1){a[l++]=u}}}else{var h=o*o-4*n*s;if(An(h)){var u=-o/(2*n);if(u>=0&&u<=1){a[l++]=u}}else if(h>0){var f=_n(h);var u=(-o+f)/(2*n);var c=(-o-f)/(2*n);if(u>=0&&u<=1){a[l++]=u}if(c>=0&&c<=1){a[l++]=c}}}return l}function Vn(t,e,r){var i=t+r-2*e;if(i===0){return.5}else{return(t-e)/i}}function Gn(t,e,r,i,a){var n=(e-t)*i+t;var o=(r-e)*i+e;var s=(o-n)*i+n;a[0]=t;a[1]=n;a[2]=s;a[3]=s;a[4]=o;a[5]=r}function Wn(t,e,r,i,a,n,o,s,l){var u;var h=.005;var f=Infinity;In[0]=o;In[1]=s;for(var c=0;c<1;c+=.05){Tn[0]=Rn(t,r,a,c);Tn[1]=Rn(e,i,n,c);var v=Tt(In,Tn);if(v<f){u=c;f=v}}f=Infinity;for(var d=0;d<32;d++){if(h<bn){break}var p=u-h;var g=u+h;Tn[0]=Rn(t,r,a,p);Tn[1]=Rn(e,i,n,p);var v=Tt(Tn,In);if(p>=0&&v<f){u=p;f=v}else{Dn[0]=Rn(t,r,a,g);Dn[1]=Rn(e,i,n,g);var m=Tt(Dn,In);if(g<=1&&m<f){u=g;f=m}else{h*=.5}}}if(l){l[0]=Rn(t,r,a,u);l[1]=Rn(e,i,n,u)}return _n(f)}var Fn=Math.min;var Hn=Math.max;var Zn=Math.sin;var Un=Math.cos;var Xn=Math.PI*2;var jn=st();var Yn=st();var qn=st();function Kn(t,e,r){if(t.length===0){return}var i=t[0];var a=i[0];var n=i[0];var o=i[1];var s=i[1];var l;for(l=1;l<t.length;l++){i=t[l];a=Fn(a,i[0]);n=Hn(n,i[0]);o=Fn(o,i[1]);s=Hn(s,i[1])}e[0]=a;e[1]=o;r[0]=n;r[1]=s}function $n(t,e,r,i,a,n){a[0]=Fn(t,r);a[1]=Fn(e,i);n[0]=Hn(t,r);n[1]=Hn(e,i)}var Jn=[];var Qn=[];function to(t,e,r,i,a,n,o,s,l,u){var h=Nn;var f=Ln;var c;var v=h(t,r,a,o,Jn);l[0]=Infinity;l[1]=Infinity;u[0]=-Infinity;u[1]=-Infinity;for(c=0;c<v;c++){var d=f(t,r,a,o,Jn[c]);l[0]=Fn(d,l[0]);u[0]=Hn(d,u[0])}v=h(e,i,n,s,Qn);for(c=0;c<v;c++){var p=f(e,i,n,s,Qn[c]);l[1]=Fn(p,l[1]);u[1]=Hn(p,u[1])}l[0]=Fn(t,l[0]);u[0]=Hn(t,u[0]);l[0]=Fn(o,l[0]);u[0]=Hn(o,u[0]);l[1]=Fn(e,l[1]);u[1]=Hn(e,u[1]);l[1]=Fn(s,l[1]);u[1]=Hn(s,u[1])}function eo(t,e,r,i,a,n,o,s){var l=Vn;var u=Rn;var h=Hn(Fn(l(t,r,a),1),0);var f=Hn(Fn(l(e,i,n),1),0);var c=u(t,r,a,h);var v=u(e,i,n,f);o[0]=Fn(t,a,c);o[1]=Fn(e,n,v);s[0]=Hn(t,a,c);s[1]=Hn(e,n,v)}function ro(t,e,r,i,a,n,o,s,l){var u=Lt;var h=kt;var f=Math.abs(a-n);if(f%Xn<1e-4&&f>1e-4){s[0]=t-r;s[1]=e-i;l[0]=t+r;l[1]=e+i;return}jn[0]=Un(a)*r+t;jn[1]=Zn(a)*i+e;Yn[0]=Un(n)*r+t;Yn[1]=Zn(n)*i+e;u(s,jn,Yn);h(l,jn,Yn);a=a%Xn;if(a<0){a=a+Xn}n=n%Xn;if(n<0){n=n+Xn}if(a>n&&!o){n+=Xn}else if(a<n&&o){a+=Xn}if(o){var c=n;n=a;a=c}for(var v=0;v<n;v+=Math.PI/2){if(v>a){qn[0]=Un(v)*r+t;qn[1]=Zn(v)*i+e;u(s,qn,s);h(l,qn,l)}}}var io={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7};var ao=[];var no=[];var oo=[];var so=[];var lo=Math.min;var uo=Math.max;var ho=Math.cos;var fo=Math.sin;var co=Math.sqrt;var vo=Math.abs;var po=typeof Float32Array!="undefined";var go=function(t){this._saveData=!(t||false);if(this._saveData){this.data=[]}this._ctx=null};go.prototype={constructor:go,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e){this._ux=vo(1/rr/t)||0;this._uy=vo(1/rr/e)||0},getContext:function(){return this._ctx},beginPath:function(t){this._ctx=t;t&&t.beginPath();t&&(this.dpr=t.dpr);if(this._saveData){this._len=0}if(this._lineDash){this._lineDash=null;this._dashOffset=0}return this},moveTo:function(t,e){this.addData(io.M,t,e);this._ctx&&this._ctx.moveTo(t,e);this._x0=t;this._y0=e;this._xi=t;this._yi=e;return this},lineTo:function(t,e){var r=vo(t-this._xi)>this._ux||vo(e-this._yi)>this._uy||this._len<5;this.addData(io.L,t,e);if(this._ctx&&r){this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)}if(r){this._xi=t;this._yi=e}return this},bezierCurveTo:function(t,e,r,i,a,n){this.addData(io.C,t,e,r,i,a,n);if(this._ctx){this._needsDash()?this._dashedBezierTo(t,e,r,i,a,n):this._ctx.bezierCurveTo(t,e,r,i,a,n)}this._xi=a;this._yi=n;return this},quadraticCurveTo:function(t,e,r,i){this.addData(io.Q,t,e,r,i);if(this._ctx){this._needsDash()?this._dashedQuadraticTo(t,e,r,i):this._ctx.quadraticCurveTo(t,e,r,i)}this._xi=r;this._yi=i;return this},arc:function(t,e,r,i,a,n){this.addData(io.A,t,e,r,r,i,a-i,0,n?0:1);this._ctx&&this._ctx.arc(t,e,r,i,a,n);this._xi=ho(a)*r+t;this._yi=fo(a)*r+t;return this},arcTo:function(t,e,r,i,a){if(this._ctx){this._ctx.arcTo(t,e,r,i,a)}return this},rect:function(t,e,r,i){this._ctx&&this._ctx.rect(t,e,r,i);this.addData(io.R,t,e,r,i);return this},closePath:function(){this.addData(io.Z);var t=this._ctx;var e=this._x0;var r=this._y0;if(t){this._needsDash()&&this._dashedLineTo(e,r);t.closePath()}this._xi=e;this._yi=r;return this},fill:function(t){t&&t.fill();this.toStatic()},stroke:function(t){t&&t.stroke();this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t;this._dashIdx=0;var e=0;for(var r=0;r<t.length;r++){e+=t[r]}this._dashSum=e}return this},setLineDashOffset:function(t){this._dashOffset=t;return this},len:function(){return this._len},setData:function(t){var e=t.length;if(!(this.data&&this.data.length==e)&&po){this.data=new Float32Array(e)}for(var r=0;r<e;r++){this.data[r]=t[r]}this._len=e},appendPath:function(t){if(!(t instanceof Array)){t=[t]}var e=t.length;var r=0;var i=this._len;for(var a=0;a<e;a++){r+=t[a].len()}if(po&&this.data instanceof Float32Array){this.data=new Float32Array(i+r)}for(var a=0;a<e;a++){var n=t[a].data;for(var o=0;o<n.length;o++){this.data[i++]=n[o]}}this._len=i},addData:function(t){if(!this._saveData){return}var e=this.data;if(this._len+arguments.length>e.length){this._expandData();e=this.data}for(var r=0;r<arguments.length;r++){e[this._len++]=arguments[r]}this._prevCmd=t},_expandData:function(){if(!(this.data instanceof Array)){var t=[];for(var e=0;e<this._len;e++){t[e]=this.data[e]}this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var r=this._dashSum;var i=this._dashOffset;var a=this._lineDash;var n=this._ctx;var o=this._xi;var s=this._yi;var l=t-o;var u=e-s;var h=co(l*l+u*u);var f=o;var c=s;var v;var d=a.length;var p;l/=h;u/=h;if(i<0){i=r+i}i%=r;f-=i*l;c-=i*u;while(l>0&&f<=t||l<0&&f>=t||l==0&&(u>0&&c<=e||u<0&&c>=e)){p=this._dashIdx;v=a[p];f+=l*v;c+=u*v;this._dashIdx=(p+1)%d;if(l>0&&f<o||l<0&&f>o||u>0&&c<s||u<0&&c>s){continue}n[p%2?"moveTo":"lineTo"](l>=0?lo(f,t):uo(f,t),u>=0?lo(c,e):uo(c,e))}l=f-t;u=c-e;this._dashOffset=-co(l*l+u*u)},_dashedBezierTo:function(t,e,r,i,a,n){var o=this._dashSum;var s=this._dashOffset;var l=this._lineDash;var u=this._ctx;var h=this._xi;var f=this._yi;var c;var v;var d;var p=Ln;var g=0;var m=this._dashIdx;var y=l.length;var x;var _;var w=0;if(s<0){s=o+s}s%=o;for(c=0;c<1;c+=.1){v=p(h,t,r,a,c+.1)-p(h,t,r,a,c);d=p(f,e,i,n,c+.1)-p(f,e,i,n,c);g+=co(v*v+d*d)}for(;m<y;m++){w+=l[m];if(w>s){break}}c=(w-s)/g;while(c<=1){x=p(h,t,r,a,c);_=p(f,e,i,n,c);m%2?u.moveTo(x,_):u.lineTo(x,_);c+=l[m]/g;m=(m+1)%y}m%2!==0&&u.lineTo(a,n);v=a-x;d=n-_;this._dashOffset=-co(v*v+d*d)},_dashedQuadraticTo:function(t,e,r,i){var a=r;var n=i;r=(r+2*t)/3;i=(i+2*e)/3;t=(this._xi+2*t)/3;e=(this._yi+2*e)/3;this._dashedBezierTo(t,e,r,i,a,n)},toStatic:function(){var t=this.data;if(t instanceof Array){t.length=this._len;if(po){this.data=new Float32Array(t)}}},getBoundingRect:function(){ao[0]=ao[1]=oo[0]=oo[1]=Number.MAX_VALUE;no[0]=no[1]=so[0]=so[1]=-Number.MAX_VALUE;var t=this.data;var e=0;var r=0;var i=0;var a=0;for(var n=0;n<t.length;){var o=t[n++];if(n==1){e=t[n];r=t[n+1];i=e;a=r}switch(o){case io.M:i=t[n++];a=t[n++];e=i;r=a;oo[0]=i;oo[1]=a;so[0]=i;so[1]=a;break;case io.L:$n(e,r,t[n],t[n+1],oo,so);e=t[n++];r=t[n++];break;case io.C:to(e,r,t[n++],t[n++],t[n++],t[n++],t[n],t[n+1],oo,so);e=t[n++];r=t[n++];break;case io.Q:eo(e,r,t[n++],t[n++],t[n],t[n+1],oo,so);e=t[n++];r=t[n++];break;case io.A:var s=t[n++];var l=t[n++];var u=t[n++];var h=t[n++];var f=t[n++];var c=t[n++]+f;var v=t[n++];var d=1-t[n++];if(n==1){i=ho(f)*u+s;a=fo(f)*h+l}ro(s,l,u,h,f,c,d,oo,so);e=ho(c)*u+s;r=fo(c)*h+l;break;case io.R:i=e=t[n++];a=r=t[n++];var p=t[n++];var g=t[n++];$n(i,a,i+p,a+g,oo,so);break;case io.Z:e=i;r=a;break}Lt(ao,ao,oo);kt(no,no,so)}if(n===0){ao[0]=ao[1]=no[0]=no[1]=0}return new hr(ao[0],ao[1],no[0]-ao[0],no[1]-ao[1])},rebuildPath:function(t){var e=this.data;var r,i;var a,n;var o,s;var l=this._ux;var u=this._uy;var h=this._len;for(var f=0;f<h;){var c=e[f++];if(f==1){a=e[f];n=e[f+1];r=a;i=n}switch(c){case io.M:r=a=e[f++];i=n=e[f++];t.moveTo(a,n);break;case io.L:o=e[f++];s=e[f++];if(vo(o-a)>l||vo(s-n)>u||f===h-1){t.lineTo(o,s);a=o;n=s}break;case io.C:t.bezierCurveTo(e[f++],e[f++],e[f++],e[f++],e[f++],e[f++]);a=e[f-2];n=e[f-1];break;case io.Q:t.quadraticCurveTo(e[f++],e[f++],e[f++],e[f++]);a=e[f-2];n=e[f-1];break;case io.A:var v=e[f++];var d=e[f++];var p=e[f++];var g=e[f++];var m=e[f++];var y=e[f++];var x=e[f++];var _=e[f++];var w=p>g?p:g;var b=p>g?1:p/g;var S=p>g?g/p:1;var M=Math.abs(p-g)>.001;var I=m+y;if(M){t.translate(v,d);t.rotate(x);t.scale(b,S);t.arc(0,0,w,m,I,1-_);t.scale(1/b,1/S);t.rotate(-x);t.translate(-v,-d)}else{t.arc(v,d,w,m,I,1-_)}if(f==1){r=ho(m)*p+v;i=fo(m)*g+d}a=ho(I)*p+v;n=fo(I)*g+d;break;case io.R:r=a=e[f];i=n=e[f+1];t.rect(e[f++],e[f++],e[f++],e[f++]);break;case io.Z:t.closePath();a=r;n=i}}}};go.CMD=io;function mo(t,e,r,i,a,n,o){if(a===0){return false}var s=a;var l=0;var u=t;if(o>e+s&&o>i+s||o<e-s&&o<i-s||n>t+s&&n>r+s||n<t-s&&n<r-s){return false}if(t!==r){l=(e-i)/(t-r);u=(t*i-r*e)/(t-r)}else{return Math.abs(n-t)<=s/2}var h=l*n-o+u;var f=h*h/(l*l+1);return f<=s/2*s/2}function yo(t,e,r,i,a,n,o,s,l,u,h){if(l===0){return false}var f=l;if(h>e+f&&h>i+f&&h>n+f&&h>s+f||h<e-f&&h<i-f&&h<n-f&&h<s-f||u>t+f&&u>r+f&&u>a+f&&u>o+f||u<t-f&&u<r-f&&u<a-f&&u<o-f){return false}var c=En(t,e,r,i,a,n,o,s,u,h,null);return c<=f/2}function xo(t,e,r,i,a,n,o,s,l){if(o===0){return false}var u=o;if(l>e+u&&l>i+u&&l>n+u||l<e-u&&l<i-u&&l<n-u||s>t+u&&s>r+u&&s>a+u||s<t-u&&s<r-u&&s<a-u){return false}var h=Wn(t,e,r,i,a,n,s,l,null);return h<=u/2}var _o=Math.PI*2;function wo(t){t%=_o;if(t<0){t+=_o}return t}var bo=Math.PI*2;function So(t,e,r,i,a,n,o,s,l){if(o===0){return false}var u=o;s-=t;l-=e;var h=Math.sqrt(s*s+l*l);if(h-u>r||h+u<r){return false}if(Math.abs(i-a)%bo<1e-4){return true}if(n){var f=i;i=wo(a);a=wo(f)}else{i=wo(i);a=wo(a)}if(i>a){a+=bo}var c=Math.atan2(l,s);if(c<0){c+=bo}return c>=i&&c<=a||c+bo>=i&&c+bo<=a}function Mo(t,e,r,i,a,n){if(n>e&&n>i||n<e&&n<i){return 0}if(i===e){return 0}var o=i<e?1:-1;var s=(n-e)/(i-e);if(s===1||s===0){o=i<e?.5:-.5}var l=s*(r-t)+t;return l===a?Infinity:l>a?o:0}var Io=go.CMD;var To=Math.PI*2;var Do=1e-4;function Ao(t,e){return Math.abs(t-e)<Do}var Co=[-1,-1,-1];var Lo=[-1,-1];function ko(){var t=Lo[0];Lo[0]=Lo[1];Lo[1]=t}function Po(t,e,r,i,a,n,o,s,l,u){if(u>e&&u>i&&u>n&&u>s||u<e&&u<i&&u<n&&u<s){return 0}var h=Pn(e,i,n,s,u,Co);if(h===0){return 0}else{var f=0;var c=-1;var v,d;for(var p=0;p<h;p++){var g=Co[p];var m=g===0||g===1?.5:1;var y=Ln(t,r,a,o,g);if(y<l){continue}if(c<0){c=Nn(e,i,n,s,Lo);if(Lo[1]<Lo[0]&&c>1){ko()}v=Ln(e,i,n,s,Lo[0]);if(c>1){d=Ln(e,i,n,s,Lo[1])}}if(c==2){if(g<Lo[0]){f+=v<e?m:-m}else if(g<Lo[1]){f+=d<v?m:-m}else{f+=s<d?m:-m}}else{if(g<Lo[0]){f+=v<e?m:-m}else{f+=s<v?m:-m}}}return f}}function No(t,e,r,i,a,n,o,s){if(s>e&&s>i&&s>n||s<e&&s<i&&s<n){return 0}var l=Bn(e,i,n,s,Co);if(l===0){return 0}else{var u=Vn(e,i,n);if(u>=0&&u<=1){var h=0;var f=Rn(e,i,n,u);for(var c=0;c<l;c++){var v=Co[c]===0||Co[c]===1?.5:1;var d=Rn(t,r,a,Co[c]);if(d<o){continue}if(Co[c]<u){h+=f<e?v:-v}else{h+=n<f?v:-v}}return h}else{var v=Co[0]===0||Co[0]===1?.5:1;var d=Rn(t,r,a,Co[0]);if(d<o){return 0}return n<e?v:-v}}}function Oo(t,e,r,i,a,n,o,s){s-=e;if(s>r||s<-r){return 0}var l=Math.sqrt(r*r-s*s);Co[0]=-l;Co[1]=l;var u=Math.abs(i-a);if(u<1e-4){return 0}if(u%To<1e-4){i=0;a=To;var h=n?1:-1;if(o>=Co[0]+t&&o<=Co[1]+t){return h}else{return 0}}if(n){var l=i;i=wo(a);a=wo(l)}else{i=wo(i);a=wo(a)}if(i>a){a+=To}var f=0;for(var c=0;c<2;c++){var v=Co[c];if(v+t>o){var d=Math.atan2(s,v);var h=n?1:-1;if(d<0){d=To+d}if(d>=i&&d<=a||d+To>=i&&d+To<=a){if(d>Math.PI/2&&d<Math.PI*1.5){h=-h}f+=h}}}return f}function Eo(t,e,r,i,a){var n=0;var o=0;var s=0;var l=0;var u=0;for(var h=0;h<t.length;){var f=t[h++];if(f===Io.M&&h>1){if(!r){n+=Mo(o,s,l,u,i,a)}}if(h==1){o=t[h];s=t[h+1];l=o;u=s}switch(f){case Io.M:l=t[h++];u=t[h++];o=l;s=u;break;case Io.L:if(r){if(mo(o,s,t[h],t[h+1],e,i,a)){return true}}else{n+=Mo(o,s,t[h],t[h+1],i,a)||0}o=t[h++];s=t[h++];break;case Io.C:if(r){if(yo(o,s,t[h++],t[h++],t[h++],t[h++],t[h],t[h+1],e,i,a)){return true}}else{n+=Po(o,s,t[h++],t[h++],t[h++],t[h++],t[h],t[h+1],i,a)||0}o=t[h++];s=t[h++];break;case Io.Q:if(r){if(xo(o,s,t[h++],t[h++],t[h],t[h+1],e,i,a)){return true}}else{n+=No(o,s,t[h++],t[h++],t[h],t[h+1],i,a)||0}o=t[h++];s=t[h++];break;case Io.A:var c=t[h++];var v=t[h++];var d=t[h++];var p=t[h++];var g=t[h++];var m=t[h++];var y=t[h++];var x=1-t[h++];var _=Math.cos(g)*d+c;var w=Math.sin(g)*p+v;if(h>1){n+=Mo(o,s,_,w,i,a)}else{l=_;u=w}var b=(i-c)*p/d+c;if(r){if(So(c,v,p,g,g+m,x,e,b,a)){return true}}else{n+=Oo(c,v,p,g,g+m,x,b,a)}o=Math.cos(g+m)*d+c;s=Math.sin(g+m)*p+v;break;case Io.R:l=o=t[h++];u=s=t[h++];var S=t[h++];var M=t[h++];var _=l+S;var w=u+M;if(r){if(mo(l,u,_,u,e,i,a)||mo(_,u,_,w,e,i,a)||mo(_,w,l,w,e,i,a)||mo(l,w,l,u,e,i,a)){return true}}else{n+=Mo(_,u,_,w,i,a);n+=Mo(l,w,l,u,i,a)}break;case Io.Z:if(r){if(mo(o,s,l,u,e,i,a)){return true}}else{n+=Mo(o,s,l,u,i,a)}o=l;s=u;break}}if(!r&&!Ao(s,u)){n+=Mo(o,s,l,u,i,a)||0}return n!==0}function Ro(t,e,r){return Eo(t,0,false,e,r)}function zo(t,e,r,i){return Eo(t,e,true,r,i)}var Bo=Nr.prototype.getCanvasPattern;var Vo=Math.abs;var Go=new go(true);function Wo(t){Ri.call(this,t);this.path=null}Wo.prototype={constructor:Wo,type:"path",__dirtyPath:true,strokeContainThreshold:5,brush:function(t,e){var r=this.style;var i=this.path||Go;var a=r.hasStroke();var n=r.hasFill();var o=r.fill;var s=r.stroke;var l=n&&!!o.colorStops;var u=a&&!!s.colorStops;var h=n&&!!o.image;var f=a&&!!s.image;r.bind(t,this,e);this.setTransform(t);if(this.__dirty){var c;if(l){c=c||this.getBoundingRect();this._fillGradient=r.getGradient(t,o,c)}if(u){c=c||this.getBoundingRect();this._strokeGradient=r.getGradient(t,s,c)}}if(l){t.fillStyle=this._fillGradient}else if(h){t.fillStyle=Bo.call(o,t)}if(u){t.strokeStyle=this._strokeGradient}else if(f){t.strokeStyle=Bo.call(s,t)}var v=r.lineDash;var d=r.lineDashOffset;var p=!!t.setLineDash;var g=this.getGlobalScale();i.setScale(g[0],g[1]);if(this.__dirtyPath||v&&!p&&a){i.beginPath(t);if(v&&!p){i.setLineDash(v);i.setLineDashOffset(d)}this.buildPath(i,this.shape,false);if(this.path){this.__dirtyPath=false}}else{t.beginPath();this.path.rebuildPath(t)}n&&i.fill(t);if(v&&p){t.setLineDash(v);t.lineDashOffset=d}a&&i.stroke(t);if(v&&p){t.setLineDash([])}if(r.text!=null){this.restoreTransform(t);this.drawRectText(t,this.getBoundingRect())}},buildPath:function(t,e,r){},createPathProxy:function(){this.path=new go},getBoundingRect:function(){var t=this._rect;var e=this.style;var r=!t;if(r){var i=this.path;if(!i){i=this.path=new go}if(this.__dirtyPath){i.beginPath();this.buildPath(i,this.shape,false)}t=i.getBoundingRect()}this._rect=t;if(e.hasStroke()){var a=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||r){a.copy(t);var n=e.lineWidth;var o=e.strokeNoScale?this.getLineScale():1;if(!e.hasFill()){n=Math.max(n,this.strokeContainThreshold||4)}if(o>1e-10){a.width+=n/o;a.height+=n/o;a.x-=n/o/2;a.y-=n/o/2}}return a}return t},contain:function(t,e){var r=this.transformCoordToLocal(t,e);var i=this.getBoundingRect();var a=this.style;t=r[0];e=r[1];if(i.contain(t,e)){var n=this.path.data;if(a.hasStroke()){var o=a.lineWidth;var s=a.strokeNoScale?this.getLineScale():1;if(s>1e-10){if(!a.hasFill()){o=Math.max(o,this.strokeContainThreshold)}if(zo(n,o/s,t,e)){return true}}}if(a.hasFill()){return Ro(n,t,e)}}return false},dirty:function(t){if(t==null){t=true}if(t){this.__dirtyPath=t;this._rect=null}this.__dirty=true;this.__zr&&this.__zr.refresh();if(this.__clipTarget){this.__clipTarget.dirty()}},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){if(t==="shape"){this.setShape(e);this.__dirtyPath=true;this._rect=null}else{Ri.prototype.attrKV.call(this,t,e)}},setShape:function(t,e){var r=this.shape;if(r){if(G(t)){for(var i in t){if(t.hasOwnProperty(i)){r[i]=t[i]}}}else{r[t]=e}this.dirty(true)}return this},getLineScale:function(){var t=this.transform;return t&&Vo(t[0]-1)>1e-10&&Vo(t[3]-1)>1e-10?Math.sqrt(Vo(t[0]*t[3]-t[2]*t[1])):1}};Wo.extend=function(t){var e=function(e){Wo.call(this,e);if(t.style){this.style.extendFrom(t.style,false)}var r=t.shape;if(r){this.shape=this.shape||{};var i=this.shape;for(var a in r){if(!i.hasOwnProperty(a)&&r.hasOwnProperty(a)){i[a]=r[a]}}}t.init&&t.init.call(this,e)};D(e,Wo);for(var r in t){if(r!=="style"&&r!=="shape"){e.prototype[r]=t[r]}}return e};D(Wo,Ri);var Fo=go.CMD;var Ho=[[],[],[]];var Zo=Math.sqrt;var Uo=Math.atan2;var Xo=function(t,e){var r=t.data;var i;var a;var n;var o;var s;var l;var u=Fo.M;var h=Fo.C;var f=Fo.L;var c=Fo.R;var v=Fo.A;var d=Fo.Q;for(n=0,o=0;n<r.length;){i=r[n++];o=n;a=0;switch(i){case u:a=1;break;case f:a=1;break;case h:a=3;break;case d:a=2;break;case v:var p=e[4];var g=e[5];var m=Zo(e[0]*e[0]+e[1]*e[1]);var y=Zo(e[2]*e[2]+e[3]*e[3]);var x=Uo(-e[1]/y,e[0]/m);r[n]*=m;r[n++]+=p;r[n]*=y;r[n++]+=g;r[n++]*=m;r[n++]*=y;r[n++]+=x;r[n++]+=x;n+=2;o=n;break;case c:l[0]=r[n++];l[1]=r[n++];Ct(l,l,e);r[o++]=l[0];r[o++]=l[1];l[0]+=r[n++];l[1]+=r[n++];Ct(l,l,e);r[o++]=l[0];r[o++]=l[1]}for(s=0;s<a;s++){var l=Ho[s];l[0]=r[n++];l[1]=r[n++];Ct(l,l,e);r[o++]=l[0];r[o++]=l[1]}}};var jo=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];var Yo=Math.sqrt;var qo=Math.sin;var Ko=Math.cos;var $o=Math.PI;var Jo=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])};var Qo=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(Jo(t)*Jo(e))};var ts=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Qo(t,e))};function es(t,e,r,i,a,n,o,s,l,u,h){var f=l*($o/180);var c=Ko(f)*(t-r)/2+qo(f)*(e-i)/2;var v=-1*qo(f)*(t-r)/2+Ko(f)*(e-i)/2;var d=c*c/(o*o)+v*v/(s*s);if(d>1){o*=Yo(d);s*=Yo(d)}var p=(a===n?-1:1)*Yo((o*o*(s*s)-o*o*(v*v)-s*s*(c*c))/(o*o*(v*v)+s*s*(c*c)))||0;var g=p*o*v/s;var m=p*-s*c/o;var y=(t+r)/2+Ko(f)*g-qo(f)*m;var x=(e+i)/2+qo(f)*g+Ko(f)*m;var _=ts([1,0],[(c-g)/o,(v-m)/s]);var w=[(c-g)/o,(v-m)/s];var b=[(-1*c-g)/o,(-1*v-m)/s];var S=ts(w,b);if(Qo(w,b)<=-1){S=$o}if(Qo(w,b)>=1){S=0}if(n===0&&S>0){S=S-2*$o}if(n===1&&S<0){S=S+2*$o}h.addData(u,y,x,o,s,_,S,f,n)}function rs(t){if(!t){return[]}var e=t.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");var r;for(r=0;r<jo.length;r++){e=e.replace(new RegExp(jo[r],"g"),"|"+jo[r])}var i=e.split("|");var a=0;var n=0;var o=new go;var s=go.CMD;var l;for(r=1;r<i.length;r++){var u=i[r];var h=u.charAt(0);var f=0;var c=u.slice(1).replace(/e,-/g,"e-").split(",");var v;if(c.length>0&&c[0]===""){c.shift()}for(var d=0;d<c.length;d++){c[d]=parseFloat(c[d])}while(f<c.length&&!isNaN(c[f])){if(isNaN(c[0])){break}var p;var g;var m;var y;var x;var _;var w;var b=a;var S=n;switch(h){case"l":a+=c[f++];n+=c[f++];v=s.L;o.addData(v,a,n);break;case"L":a=c[f++];n=c[f++];v=s.L;o.addData(v,a,n);break;case"m":a+=c[f++];n+=c[f++];v=s.M;o.addData(v,a,n);h="l";break;case"M":a=c[f++];n=c[f++];v=s.M;o.addData(v,a,n);h="L";break;case"h":a+=c[f++];v=s.L;o.addData(v,a,n);break;case"H":a=c[f++];v=s.L;o.addData(v,a,n);break;case"v":n+=c[f++];v=s.L;o.addData(v,a,n);break;case"V":n=c[f++];v=s.L;o.addData(v,a,n);break;case"C":v=s.C;o.addData(v,c[f++],c[f++],c[f++],c[f++],c[f++],c[f++]);a=c[f-2];n=c[f-1];break;case"c":v=s.C;o.addData(v,c[f++]+a,c[f++]+n,c[f++]+a,c[f++]+n,c[f++]+a,c[f++]+n);a+=c[f-2];n+=c[f-1];break;case"S":p=a;g=n;var M=o.len();var I=o.data;if(l===s.C){p+=a-I[M-4];g+=n-I[M-3]}v=s.C;b=c[f++];S=c[f++];a=c[f++];n=c[f++];o.addData(v,p,g,b,S,a,n);break;case"s":p=a;g=n;var M=o.len();var I=o.data;if(l===s.C){p+=a-I[M-4];g+=n-I[M-3]}v=s.C;b=a+c[f++];S=n+c[f++];a+=c[f++];n+=c[f++];o.addData(v,p,g,b,S,a,n);break;case"Q":b=c[f++];S=c[f++];a=c[f++];n=c[f++];v=s.Q;o.addData(v,b,S,a,n);break;case"q":b=c[f++]+a;S=c[f++]+n;a+=c[f++];n+=c[f++];v=s.Q;o.addData(v,b,S,a,n);break;case"T":p=a;g=n;var M=o.len();var I=o.data;if(l===s.Q){p+=a-I[M-4];g+=n-I[M-3]}a=c[f++];n=c[f++];v=s.Q;o.addData(v,p,g,a,n);break;case"t":p=a;g=n;var M=o.len();var I=o.data;if(l===s.Q){p+=a-I[M-4];g+=n-I[M-3]}a+=c[f++];n+=c[f++];v=s.Q;o.addData(v,p,g,a,n);break;case"A":m=c[f++];y=c[f++];x=c[f++];_=c[f++];w=c[f++];b=a,S=n;a=c[f++];n=c[f++];v=s.A;es(b,S,a,n,_,w,m,y,x,v,o);break;case"a":m=c[f++];y=c[f++];x=c[f++];_=c[f++];w=c[f++];b=a,S=n;a+=c[f++];n+=c[f++];v=s.A;es(b,S,a,n,_,w,m,y,x,v,o);break}}if(h==="z"||h==="Z"){v=s.Z;o.addData(v)}l=v}o.toStatic();return o}function is(t,e){var r=rs(t);e=e||{};e.buildPath=function(t){if(t.setData){t.setData(r.data);var e=t.getContext();if(e){t.rebuildPath(e)}}else{var e=t;r.rebuildPath(e)}};e.applyTransform=function(t){Xo(r,t);this.dirty(true)};return e}function as(t,e){return new Wo(is(t,e))}function ns(t,e){return Wo.extend(is(t,e))}function os(t,e){var r=[];var i=t.length;for(var a=0;a<i;a++){var n=t[a];if(!n.path){n.createPathProxy()}if(n.__dirtyPath){n.buildPath(n.path,n.shape,true)}r.push(n.path)}var o=new Wo(e);o.createPathProxy();o.buildPath=function(t){t.appendPath(r);var e=t.getContext();if(e){t.rebuildPath(e)}};return o}var ss=function(t){Ri.call(this,t)};ss.prototype={constructor:ss,type:"text",brush:function(t,e){var r=this.style;this.__dirty&&gi(r,true);r.fill=r.stroke=r.shadowBlur=r.shadowColor=r.shadowOffsetX=r.shadowOffsetY=null;var i=r.text;i!=null&&(i+="");r.bind(t,this,e);if(!Ni(i,r)){return}this.setTransform(t);yi(this,t,i,r);this.restoreTransform(t)},getBoundingRect:function(){var t=this.style;this.__dirty&&gi(t,true);if(!this._rect){var e=t.text;e!=null?e+="":e="";var r=$r(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.rich);r.x+=t.x||0;r.y+=t.y||0;if(Ci(t.textStroke,t.textStrokeWidth)){var i=t.textStrokeWidth;r.x-=i/2;r.y-=i/2;r.width+=i;r.height+=i}this._rect=r}return this._rect}};D(ss,Ri);var ls=Wo.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,r){if(r){t.moveTo(e.cx+e.r,e.cy)}t.arc(e.cx,e.cy,e.r,0,Math.PI*2,true)}});var us=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];var hs=function(t){return n.browser.ie&&n.browser.version>=11?function(){var e=this.__clipPaths;var r=this.style;var i;if(e){for(var a=0;a<e.length;a++){var n=e[a];var o=n&&n.shape;var s=n&&n.type;if(o&&(s==="sector"&&o.startAngle===o.endAngle||s==="rect"&&(!o.width||!o.height))){for(var l=0;l<us.length;l++){us[l][2]=r[us[l][0]];r[us[l][0]]=us[l][1]}i=true;break}}}t.apply(this,arguments);if(i){for(var l=0;l<us.length;l++){r[us[l][0]]=us[l][2]}}}:t};var fs=Wo.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:true},brush:hs(Wo.prototype.brush),buildPath:function(t,e){var r=e.cx;var i=e.cy;var a=Math.max(e.r0||0,0);var n=Math.max(e.r,0);var o=e.startAngle;var s=e.endAngle;var l=e.clockwise;var u=Math.cos(o);var h=Math.sin(o);t.moveTo(u*a+r,h*a+i);t.lineTo(u*n+r,h*n+i);t.arc(r,i,n,o,s,!l);t.lineTo(Math.cos(s)*a+r,Math.sin(s)*a+i);if(a!==0){t.arc(r,i,a,s,o,l)}t.closePath()}});var cs=Wo.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var r=e.cx;var i=e.cy;var a=Math.PI*2;t.moveTo(r+e.r,i);t.arc(r,i,e.r,0,a,false);t.moveTo(r+e.r0,i);t.arc(r,i,e.r0,0,a,true)}});function vs(t,e,r,i,a,n,o){var s=(r-t)*.5;var l=(i-e)*.5;return(2*(e-r)+s+l)*o+(-3*(e-r)-2*s-l)*n+s*a+e}var ds=function(t,e){var r=t.length;var i=[];var a=0;for(var n=1;n<r;n++){a+=St(t[n-1],t[n])}var o=a/2;o=o<r?r:o;for(var n=0;n<o;n++){var s=n/(o-1)*(e?r:r-1);var l=Math.floor(s);var u=s-l;var h;var f=t[l%r];var c;var v;if(!e){h=t[l===0?l:l-1];c=t[l>r-2?r-1:l+1];v=t[l>r-3?r-1:l+2]}else{h=t[(l-1+r)%r];c=t[(l+1)%r];v=t[(l+2)%r]}var d=u*u;var p=u*d;i.push([vs(h[0],f[0],c[0],v[0],u,d,p),vs(h[1],f[1],c[1],v[1],u,d,p)])}return i};var ps=function(t,e,r,i){var a=[];var n=[];var o=[];var s=[];var l;var u;var h,f;if(i){h=[Infinity,Infinity];f=[-Infinity,-Infinity];for(var c=0,v=t.length;c<v;c++){Lt(h,h,t[c]);kt(f,f,t[c])}Lt(h,h,i[0]);kt(f,f,i[1])}for(var c=0,v=t.length;c<v;c++){var d=t[c];if(r){l=t[c?c-1:v-1];u=t[(c+1)%v]}else{if(c===0||c===v-1){a.push(ut(t[c]));continue}else{l=t[c-1];u=t[c+1]}}vt(n,u,l);wt(n,n,e);var p=St(d,l);var g=St(d,u);var m=p+g;if(m!==0){p/=m;g/=m}wt(o,n,-p);wt(s,n,g);var y=ft([],d,o);var x=ft([],d,s);if(i){kt(y,y,h);Lt(y,y,f);kt(x,x,h);Lt(x,x,f)}a.push(y);a.push(x)}if(r){a.push(a.shift())}return a};function gs(t,e,r){var i=e.points;var a=e.smooth;if(i&&i.length>=2){if(a&&a!=="spline"){var n=ps(i,a,r,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);var o=i.length;for(var s=0;s<(r?o:o-1);s++){var l=n[s*2];var u=n[s*2+1];var h=i[(s+1)%o];t.bezierCurveTo(l[0],l[1],u[0],u[1],h[0],h[1])}}else{if(a==="spline"){i=ds(i,r)}t.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++){t.lineTo(i[s][0],i[s][1])}}r&&t.closePath()}}var ms=Wo.extend({type:"polygon",shape:{points:null,smooth:false,smoothConstraint:null},buildPath:function(t,e){gs(t,e,true)}});var ys=Wo.extend({type:"polyline",shape:{points:null,smooth:false,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){gs(t,e,false)}});var xs=Wo.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var r=e.x;var i=e.y;var a=e.width;var n=e.height;if(!e.r){t.rect(r,i,a,n)}else{vi(t,e)}t.closePath();return}});var _s=Wo.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var r=e.x1;var i=e.y1;var a=e.x2;var n=e.y2;var o=e.percent;if(o===0){return}t.moveTo(r,i);if(o<1){a=r*(1-o)+a*o;n=i*(1-o)+n*o}t.lineTo(a,n)},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}});var ws=[];function bs(t,e,r){var i=t.cpx2;var a=t.cpy2;if(i===null||a===null){return[(r?kn:Ln)(t.x1,t.cpx1,t.cpx2,t.x2,e),(r?kn:Ln)(t.y1,t.cpy1,t.cpy2,t.y2,e)]}else{return[(r?zn:Rn)(t.x1,t.cpx1,t.x2,e),(r?zn:Rn)(t.y1,t.cpy1,t.y2,e)]}}var Ss=Wo.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var r=e.x1;var i=e.y1;var a=e.x2;var n=e.y2;var o=e.cpx1;var s=e.cpy1;var l=e.cpx2;var u=e.cpy2;var h=e.percent;if(h===0){return}t.moveTo(r,i);if(l==null||u==null){if(h<1){Gn(r,o,a,h,ws);o=ws[1];a=ws[2];Gn(i,s,n,h,ws);s=ws[1];n=ws[2]}t.quadraticCurveTo(o,s,a,n)}else{if(h<1){On(r,o,l,a,h,ws);o=ws[1];l=ws[2];a=ws[3];On(i,s,u,n,h,ws);s=ws[1];u=ws[2];n=ws[3]}t.bezierCurveTo(o,s,l,u,a,n)}},pointAt:function(t){return bs(this.shape,t,false)},tangentAt:function(t){var e=bs(this.shape,t,true);return bt(e,e)}});var Ms=Wo.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:true},style:{stroke:"#000",fill:null},buildPath:function(t,e){var r=e.cx;var i=e.cy;var a=Math.max(e.r,0);var n=e.startAngle;var o=e.endAngle;var s=e.clockwise;var l=Math.cos(n);var u=Math.sin(n);t.moveTo(l*a+r,u*a+i);t.arc(r,i,a,n,o,!s)}});var Is=Wo.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){var t=this.__dirtyPath;var e=this.shape.paths;for(var r=0;r<e.length;r++){t=t||e[r].__dirtyPath}this.__dirtyPath=t;this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();var t=this.shape.paths||[];var e=this.getGlobalScale();for(var r=0;r<t.length;r++){if(!t[r].path){t[r].createPathProxy()}t[r].path.setScale(e[0],e[1])}},buildPath:function(t,e){var r=e.paths||[];for(var i=0;i<r.length;i++){r[i].buildPath(t,r[i].shape,true)}},afterBrush:function(){var t=this.shape.paths||[];for(var e=0;e<t.length;e++){t[e].__dirtyPath=false}},getBoundingRect:function(){this._updatePathDirty();return Wo.prototype.getBoundingRect.call(this)}});var Ts=function(t){this.colorStops=t||[]};Ts.prototype={constructor:Ts,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var Ds=function(t,e,r,i,a,n){this.x=t==null?0:t;this.y=e==null?0:e;this.x2=r==null?1:r;this.y2=i==null?0:i;this.type="linear";this.global=n||false;Ts.call(this,a)};Ds.prototype={constructor:Ds};D(Ds,Ts);var As=function(t,e,r,i,a){this.x=t==null?.5:t;this.y=e==null?.5:e;this.r=r==null?.5:r;this.type="radial";this.global=a||false;Ts.call(this,i)};As.prototype={constructor:As};D(As,Ts);function Cs(t){Ri.call(this,t);this._displayables=[];this._temporaryDisplayables=[];this._cursor=0;this.notClear=true}Cs.prototype.incremental=true;Cs.prototype.clearDisplaybles=function(){this._displayables=[];this._temporaryDisplayables=[];this._cursor=0;this.dirty();this.notClear=false};Cs.prototype.addDisplayable=function(t,e){if(e){this._temporaryDisplayables.push(t)}else{this._displayables.push(t)}this.dirty()};Cs.prototype.addDisplayables=function(t,e){e=e||false;for(var r=0;r<t.length;r++){this.addDisplayable(t[r],e)}};Cs.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++){t&&t(this._displayables[e])}for(var e=0;e<this._temporaryDisplayables.length;e++){t&&t(this._temporaryDisplayables[e])}};Cs.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var e=this._displayables[t];e.parent=this;e.update();e.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var e=this._temporaryDisplayables[t];e.parent=this;e.update();e.parent=null}};Cs.prototype.brush=function(t,e){for(var r=this._cursor;r<this._displayables.length;r++){var i=this._displayables[r];i.beforeBrush&&i.beforeBrush(t);i.brush(t,r===this._cursor?null:this._displayables[r-1]);i.afterBrush&&i.afterBrush(t)}this._cursor=r;for(var r=0;r<this._temporaryDisplayables.length;r++){var i=this._temporaryDisplayables[r];i.beforeBrush&&i.beforeBrush(t);i.brush(t,r===0?null:this._temporaryDisplayables[r-1]);i.afterBrush&&i.afterBrush(t)}this._temporaryDisplayables=[];this.notClear=true};var Ls=[];Cs.prototype.getBoundingRect=function(){if(!this._rect){var t=new hr(Infinity,Infinity,(-Infinity),(-Infinity));for(var e=0;e<this._displayables.length;e++){var r=this._displayables[e];var i=r.getBoundingRect().clone();if(r.needLocalTransform()){i.applyTransform(r.getLocalTransform(Ls))}t.union(i)}this._rect=t}return this._rect};Cs.prototype.contain=function(t,e){var r=this.transformCoordToLocal(t,e);var i=this.getBoundingRect();if(i.contain(r[0],r[1])){for(var a=0;a<this._displayables.length;a++){var n=this._displayables[a];if(n.contain(t,e)){return true}}}return false};D(Cs,Ri);var ks=Math.round;var Ps=Math.max;var Ns=Math.min;var Os={};function Es(t){return Wo.extend(t)}function Rs(t,e){return ns(t,e)}function zs(t,e,r,i){var a=as(t,e);var n=a.getBoundingRect();if(r){if(i==="center"){r=Vs(r,n)}Ws(a,r)}return a}function Bs(t,e,r){var i=new zi({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){if(r==="center"){var a={width:t.width,height:t.height};i.setStyle(Vs(e,a))}}});return i}function Vs(t,e){var r=e.width/e.height;var i=t.height*r;var a;if(i<=t.width){a=t.height}else{i=t.width;a=i/r}var n=t.x+t.width/2;var o=t.y+t.height/2;return{x:n-i/2,y:o-a/2,width:i,height:a}}var Gs=os;function Ws(t,e){if(!t.applyTransform){return}var r=t.getBoundingRect();var i=r.calculateTransform(e);t.applyTransform(i)}function Fs(t){var e=t.shape;var r=t.style.lineWidth;if(ks(e.x1*2)===ks(e.x2*2)){
e.x1=e.x2=Zs(e.x1,r,true)}if(ks(e.y1*2)===ks(e.y2*2)){e.y1=e.y2=Zs(e.y1,r,true)}return t}function Hs(t){var e=t.shape;var r=t.style.lineWidth;var i=e.x;var a=e.y;var n=e.width;var o=e.height;e.x=Zs(e.x,r,true);e.y=Zs(e.y,r,true);e.width=Math.max(Zs(i+n,r,false)-e.x,n===0?0:1);e.height=Math.max(Zs(a+o,r,false)-e.y,o===0?0:1);return t}function Zs(t,e,r){var i=ks(t*2);return(i+ks(e))%2===0?i/2:(i+(r?1:-1))/2}function Us(t){return t!=null&&t!="none"}function Xs(t){return typeof t==="string"?Ce(t,-.1):t}function js(t){if(t.__hoverStlDirty){var e=t.style.stroke;var r=t.style.fill;var i=t.__hoverStl;i.fill=i.fill||(Us(r)?Xs(r):null);i.stroke=i.stroke||(Us(e)?Xs(e):null);var a={};for(var n in i){if(i[n]!=null){a[n]=t.style[n]}}t.__normalStl=a;t.__hoverStlDirty=false}}function Ys(t){if(t.__isHover){return}js(t);if(t.useHoverLayer){t.__zr&&t.__zr.addHover(t,t.__hoverStl)}else{var e=t.style;var r=e.insideRollbackOpt;r&&cl(e);e.extendFrom(t.__hoverStl);if(r){fl(e,e.insideOriginalTextPosition,r);if(e.textFill==null){e.textFill=r.autoColor}}t.dirty(false);t.z2+=1}t.__isHover=true}function qs(t){if(!t.__isHover){return}var e=t.__normalStl;if(t.useHoverLayer){t.__zr&&t.__zr.removeHover(t)}else{e&&t.setStyle(e);t.z2-=1}t.__isHover=false}function Ks(t){t.type==="group"?t.traverse(function(t){if(t.type!=="group"){Ys(t)}}):Ys(t)}function $s(t){t.type==="group"?t.traverse(function(t){if(t.type!=="group"){qs(t)}}):qs(t)}function Js(t,e){t.__hoverStl=t.hoverStyle||e||{};t.__hoverStlDirty=true;if(t.__isHover){js(t)}}function Qs(t){if(this.__hoverSilentOnTouch&&t.zrByTouch){return}!this.__isEmphasis&&Ks(this)}function tl(t){if(this.__hoverSilentOnTouch&&t.zrByTouch){return}!this.__isEmphasis&&$s(this)}function el(){this.__isEmphasis=true;Ks(this)}function rl(){this.__isEmphasis=false;$s(this)}function il(t,e,r){t.__hoverSilentOnTouch=r&&r.hoverSilentOnTouch;t.type==="group"?t.traverse(function(t){if(t.type!=="group"){Js(t,e)}}):Js(t,e);t.on("mouseover",Qs).on("mouseout",tl);t.on("emphasis",el).on("normal",rl)}function al(t,e,r,i,a,n,o){a=a||Os;var s=a.labelFetcher;var l=a.labelDataIndex;var u=a.labelDimIndex;var h=r.getShallow("show");var f=i.getShallow("show");var c;if(h||f){if(s){c=s.getFormattedLabel(l,"normal",null,u)}if(c==null){c=B(a.defaultText)?a.defaultText(l,a):a.defaultText}}var v=h?c:null;var d=f?X(s?s.getFormattedLabel(l,"emphasis",null,u):null,c):null;if(v!=null||d!=null){nl(t,r,n,a);nl(e,i,o,a,true)}t.text=v;e.text=d}function nl(t,e,r,i,a){sl(t,e,i,a);r&&w(t,r);t.host&&t.host.dirty&&t.host.dirty(false);return t}function ol(t,e,r){var i={isRectText:true};var a;if(r===false){a=true}else{i.autoColor=r}sl(t,e,i,a);t.host&&t.host.dirty&&t.host.dirty(false)}function sl(t,e,r,i){r=r||Os;if(r.isRectText){var a=e.getShallow("position")||(i?null:"inside");a==="outside"&&(a="top");t.textPosition=a;t.textOffset=e.getShallow("offset");var n=e.getShallow("rotate");n!=null&&(n*=Math.PI/180);t.textRotation=n;t.textDistance=X(e.getShallow("distance"),i?null:5)}var o=e.ecModel;var s=o&&o.option.textStyle;var l=ll(e);var u;if(l){u={};for(var h in l){if(l.hasOwnProperty(h)){var f=e.getModel(["rich",h]);ul(u[h]={},f,s,r,i)}}}t.rich=u;ul(t,e,s,r,i,true);if(r.forceRich&&!r.textStyle){r.textStyle={}}return t}function ll(t){var e;while(t&&t!==t.ecModel){var r=(t.option||Os).rich;if(r){e=e||{};for(var i in r){if(r.hasOwnProperty(i)){e[i]=1}}}t=t.parentModel}return e}function ul(t,e,r,i,a,n){r=!a&&r||Os;t.textFill=hl(e.getShallow("color"),i)||r.color;t.textStroke=hl(e.getShallow("textBorderColor"),i)||r.textBorderColor;t.textStrokeWidth=X(e.getShallow("textBorderWidth"),r.textBorderWidth);if(!a){if(n){var o=t.textPosition;t.insideRollback=fl(t,o,i);t.insideOriginalTextPosition=o;t.insideRollbackOpt=i}if(t.textFill==null){t.textFill=i.autoColor}}t.fontStyle=e.getShallow("fontStyle")||r.fontStyle;t.fontWeight=e.getShallow("fontWeight")||r.fontWeight;t.fontSize=e.getShallow("fontSize")||r.fontSize;t.fontFamily=e.getShallow("fontFamily")||r.fontFamily;t.textAlign=e.getShallow("align");t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline");t.textLineHeight=e.getShallow("lineHeight");t.textWidth=e.getShallow("width");t.textHeight=e.getShallow("height");t.textTag=e.getShallow("tag");if(!n||!i.disableBox){t.textBackgroundColor=hl(e.getShallow("backgroundColor"),i);t.textPadding=e.getShallow("padding");t.textBorderColor=hl(e.getShallow("borderColor"),i);t.textBorderWidth=e.getShallow("borderWidth");t.textBorderRadius=e.getShallow("borderRadius");t.textBoxShadowColor=e.getShallow("shadowColor");t.textBoxShadowBlur=e.getShallow("shadowBlur");t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX");t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")}t.textShadowColor=e.getShallow("textShadowColor")||r.textShadowColor;t.textShadowBlur=e.getShallow("textShadowBlur")||r.textShadowBlur;t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||r.textShadowOffsetX;t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||r.textShadowOffsetY}function hl(t,e){return t!=="auto"?t:e&&e.autoColor?e.autoColor:null}function fl(t,e,r){var i=r.useInsideStyle;var a;if(t.textFill==null&&i!==false&&(i===true||r.isRectText&&e&&typeof e==="string"&&e.indexOf("inside")>=0)){a={textFill:null,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth};t.textFill="#fff";if(t.textStroke==null){t.textStroke=r.autoColor;t.textStrokeWidth==null&&(t.textStrokeWidth=2)}}return a}function cl(t){var e=t.insideRollback;if(e){t.textFill=e.textFill;t.textStroke=e.textStroke;t.textStrokeWidth=e.textStrokeWidth}}function vl(t,e){var r=e||e.getModel("textStyle");return $([t.fontStyle||r&&r.getShallow("fontStyle")||"",t.fontWeight||r&&r.getShallow("fontWeight")||"",(t.fontSize||r&&r.getShallow("fontSize")||12)+"px",t.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}function dl(t,e,r,i,a,n){if(typeof a==="function"){n=a;a=null}var o=i&&i.isAnimationEnabled();if(o){var s=t?"Update":"";var l=i.getShallow("animationDuration"+s);var u=i.getShallow("animationEasing"+s);var h=i.getShallow("animationDelay"+s);if(typeof h==="function"){h=h(a,i.getAnimationDelayParams?i.getAnimationDelayParams(e,a):null)}if(typeof l==="function"){l=l(a)}l>0?e.animateTo(r,l,h||0,u,n,!!n):(e.stopAnimation(),e.attr(r),n&&n())}else{e.stopAnimation();e.attr(r);n&&n()}}function pl(t,e,r,i,a){dl(true,t,e,r,i,a)}function gl(t,e,r,i,a){dl(false,t,e,r,i,a)}function ml(t,e){var r=Ut([]);while(t&&t!==e){jt(r,t.getLocalTransform(),r);t=t.parent}return r}function yl(t,e,r){if(e&&!C(e)){e=ie.getLocalTransform(e)}if(r){e=$t([],e)}return Ct([],t,e)}function xl(t,e,r){var i=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]);var a=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]);var n=[t==="left"?-i:t==="right"?i:0,t==="top"?-a:t==="bottom"?a:0];n=yl(n,e,r);return Math.abs(n[0])>Math.abs(n[1])?n[0]>0?"right":"left":n[1]>0?"bottom":"top"}function _l(t,e,r,i){if(!t||!e){return}function a(t){var e={};t.traverse(function(t){if(!t.isGroup&&t.anid){e[t.anid]=t}});return e}function n(t){var e={position:ut(t.position),rotation:t.rotation};if(t.shape){e.shape=w({},t.shape)}return e}var o=a(t);e.traverse(function(t){if(!t.isGroup&&t.anid){var e=o[t.anid];if(e){var i=n(t);t.attr(n(e));pl(t,i,r,t.dataIndex)}}})}function wl(t,e){return k(t,function(t){var r=t[0];r=Ps(r,e.x);r=Ns(r,e.x+e.width);var i=t[1];i=Ps(i,e.y);i=Ns(i,e.y+e.height);return[r,i]})}function bl(t,e){var r=Ps(t.x,e.x);var i=Ns(t.x+t.width,e.x+e.width);var a=Ps(t.y,e.y);var n=Ns(t.y+t.height,e.y+e.height);if(i>=r&&n>=a){return{x:r,y:a,width:i-r,height:n-a}}}function Sl(t,e,r){e=w({rectHover:true},e);var i=e.style={strokeNoScale:true};r=r||{x:-1,y:-1,width:2,height:2};if(t){return t.indexOf("image://")===0?(i.image=t.slice(8),b(i,r),new zi(e)):zs(t.replace("path://",""),e,r,"center")}}var Ml=(Object.freeze||Object)({extendShape:Es,extendPath:Rs,makePath:zs,makeImage:Bs,mergePath:Gs,resizePath:Ws,subPixelOptimizeLine:Fs,subPixelOptimizeRect:Hs,subPixelOptimize:Zs,setHoverStyle:il,setLabelStyle:al,setTextStyle:nl,setText:ol,getFont:vl,updateProps:pl,initProps:gl,getTransform:ml,applyTransform:yl,transformDirection:xl,groupTransition:_l,clipPointsByRect:wl,clipRectByRect:bl,createIcon:Sl,Group:fr,Image:zi,Text:ss,Circle:ls,Sector:fs,Ring:cs,Polygon:ms,Polyline:ys,Rect:xs,Line:_s,BezierCurve:Ss,Arc:Ms,IncrementalDisplayable:Cs,CompoundPath:Is,LinearGradient:Ds,RadialGradient:As,BoundingRect:hr});var Il=["textStyle","color"];var Tl={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(Il):null)},getFont:function(){return vl({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return $r(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("rich"),this.getShallow("truncateText"))}};var Dl=dn([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]);var Al={getItemStyle:function(t,e){var r=Dl(this,t,e);var i=this.getBorderLineDash();i&&(r.lineDash=i);return r},getBorderLineDash:function(){var t=this.get("borderType");return t==="solid"||t==null?null:t==="dashed"?[5,5]:[1,1]}};var Cl=A;var Ll=$a();function kl(t,e,r){this.parentModel=e;this.ecModel=r;this.option=t}kl.prototype={constructor:kl,init:null,mergeOption:function(t){x(this.option,t,true)},get:function(t,e){if(t==null){return this.option}return Pl(this.option,this.parsePath(t),!e&&Nl(this,t))},getShallow:function(t,e){var r=this.option;var i=r==null?r:r[t];var a=!e&&Nl(this,t);if(i==null&&a){i=a.getShallow(t)}return i},getModel:function(t,e){var r=t==null?this.option:Pl(this.option,t=this.parsePath(t));var i;e=e||(i=Nl(this,t))&&i.getModel(t);return new kl(r,e,this.ecModel)},isEmpty:function(){return this.option==null},restoreData:function(){},clone:function(){var t=this.constructor;return new t(y(this.option))},setReadOnly:function(t){},parsePath:function(t){if(typeof t==="string"){t=t.split(".")}return t},customizeGetParent:function(t){Ll(this).getParent=t},isAnimationEnabled:function(){if(!n.node){if(this.option.animation!=null){return!!this.option.animation}else if(this.parentModel){return this.parentModel.isAnimationEnabled()}}}};function Pl(t,e,r){for(var i=0;i<e.length;i++){if(!e[i]){continue}t=t&&typeof t==="object"?t[e[i]]:null;if(t==null){break}}if(t==null&&r){t=r.get(e)}return t}function Nl(t,e){var r=Ll(t).getParent;return r?r.call(t,e):t.parentModel}ln(kl);hn(kl);Cl(kl,gn);Cl(kl,yn);Cl(kl,Tl);Cl(kl,Al);var Ol=0;function El(t){return[t||"",Ol++,Math.random().toFixed(5)].join("_")}function Rl(t){var e={};t.registerSubTypeDefaulter=function(t,r){t=on(t);e[t.main]=r};t.determineSubType=function(r,i){var a=i.type;if(!a){var n=on(r).main;if(t.hasSubTypes(r)&&e[n]){a=e[n](i)}}return a};return t}function zl(t,e){t.topologicalTravel=function(t,e,i,a){if(!t.length){return}var n=r(e);var o=n.graph;var s=n.noEntryList;var l={};L(t,function(t){l[t]=true});while(s.length){var u=s.pop();var h=o[u];var f=!!l[u];if(f){i.call(a,u,h.originalDeps.slice());delete l[u]}L(h.successor,f?v:c)}L(l,function(){throw new Error("Circle dependency may exists")});function c(t){o[t].entryCount--;if(o[t].entryCount===0){s.push(t)}}function v(t){l[t]=true;c(t)}};function r(t){var r={};var n=[];L(t,function(o){var s=i(r,o);var l=s.originalDeps=e(o);var u=a(l,t);s.entryCount=u.length;if(s.entryCount===0){n.push(o)}L(u,function(t){if(T(s.predecessor,t)<0){s.predecessor.push(t)}var e=i(r,t);if(T(e.successor,t)<0){e.successor.push(o)}})});return{graph:r,noEntryList:n}}function i(t,e){if(!t[e]){t[e]={predecessor:[],successor:[]}}return t[e]}function a(t,e){var r=[];L(t,function(t){T(e,t)>=0&&r.push(t)});return r}}var Bl=1e-4;function Vl(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}function Gl(t,e,r,i){var a=e[1]-e[0];var n=r[1]-r[0];if(a===0){return n===0?r[0]:(r[0]+r[1])/2}if(i){if(a>0){if(t<=e[0]){return r[0]}else if(t>=e[1]){return r[1]}}else{if(t>=e[0]){return r[0]}else if(t<=e[1]){return r[1]}}}else{if(t===e[0]){return r[0]}if(t===e[1]){return r[1]}}return(t-e[0])/a*n+r[0]}function Wl(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}if(typeof t==="string"){if(Vl(t).match(/%$/)){return parseFloat(t)/100*e}return parseFloat(t)}return t==null?NaN:+t}function Fl(t,e,r){if(e==null){e=10}e=Math.min(Math.max(0,e),20);t=(+t).toFixed(e);return r?t:+t}function Hl(t){t.sort(function(t,e){return t-e});return t}function Zl(t){t=+t;if(isNaN(t)){return 0}var e=1;var r=0;while(Math.round(t*e)/e!==t){e*=10;r++}return r}function Ul(t){var e=t.toString();var r=e.indexOf("e");if(r>0){var i=+e.slice(r+1);return i<0?-i:0}else{var a=e.indexOf(".");return a<0?0:e.length-1-a}}function Xl(t,e){var r=Math.log;var i=Math.LN10;var a=Math.floor(r(t[1]-t[0])/i);var n=Math.round(r(Math.abs(e[1]-e[0]))/i);var o=Math.min(Math.max(-a+n,0),20);return!isFinite(o)?20:o}function jl(t,e,r){if(!t[e]){return 0}var i=P(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(i===0){return 0}var a=Math.pow(10,r);var n=k(t,function(t){return(isNaN(t)?0:t)/i*a*100});var o=a*100;var s=k(n,function(t){return Math.floor(t)});var l=P(s,function(t,e){return t+e},0);var u=k(n,function(t,e){return t-s[e]});while(l<o){var h=Number.NEGATIVE_INFINITY;var f=null;for(var c=0,v=u.length;c<v;++c){if(u[c]>h){h=u[c];f=c}}++s[f];u[f]=0;++l}return s[e]/a}var Yl=9007199254740991;function ql(t){var e=Math.PI*2;return(t%e+e)%e}function Kl(t){return t>-Bl&&t<Bl}var $l=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Jl(t){if(t instanceof Date){return t}else if(typeof t==="string"){var e=$l.exec(t);if(!e){return new Date(NaN)}if(!e[8]){return new Date((+e[1]),+(e[2]||1)-1,+e[3]||1,+e[4]||0,(+(e[5]||0)),+e[6]||0,+e[7]||0)}else{var r=+e[4]||0;if(e[8].toUpperCase()!=="Z"){r-=e[8].slice(0,3)}return new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,r,+(e[5]||0),+e[6]||0,+e[7]||0))}}else if(t==null){return new Date(NaN)}return new Date(Math.round(t))}function Ql(t){return Math.pow(10,tu(t))}function tu(t){return Math.floor(Math.log(t)/Math.LN10)}function eu(t,e){var r=tu(t);var i=Math.pow(10,r);var a=t/i;var n;if(e){if(a<1.5){n=1}else if(a<2.5){n=2}else if(a<4){n=3}else if(a<7){n=5}else{n=10}}else{if(a<1){n=1}else if(a<2){n=2}else if(a<3){n=3}else if(a<5){n=5}else{n=10}}t=n*i;return r>=-20?+t.toFixed(r<0?-r:0):t}function ru(t){t.sort(function(t,e){return s(t,e,0)?-1:1});var e=-Infinity;var r=1;for(var i=0;i<t.length;){var a=t[i].interval;var n=t[i].close;for(var o=0;o<2;o++){if(a[o]<=e){a[o]=e;n[o]=!o?1-r:1}e=a[o];r=n[o]}if(a[0]===a[1]&&n[0]*n[1]!==1){t.splice(i,1)}else{i++}}return t;function s(t,e,r){return t.interval[r]<e.interval[r]||t.interval[r]===e.interval[r]&&(t.close[r]-e.close[r]===(!r?1:-1)||!r&&s(t,e,1))}}function iu(t){return t-parseFloat(t)>=0}var au=(Object.freeze||Object)({linearMap:Gl,parsePercent:Wl,round:Fl,asc:Hl,getPrecision:Zl,getPrecisionSafe:Ul,getPixelPrecision:Xl,getPercentWithPrecision:jl,MAX_SAFE_INTEGER:Yl,remRadian:ql,isRadianAroundZero:Kl,parseDate:Jl,quantity:Ql,nice:eu,reformIntervals:ru,isNumeric:iu});function nu(t){if(isNaN(t)){return"-"}t=(t+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function ou(t,e){t=(t||"").toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()});if(e&&t){t=t.charAt(0).toUpperCase()+t.slice(1)}return t}var su=q;var lu=/([&<>"'])/g;var uu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function hu(t){return t==null?"":(t+"").replace(lu,function(t,e){return uu[e]})}var fu=["a","b","c","d","e","f","g"];var cu=function(t,e){return"{"+t+(e==null?"":e)+"}"};function vu(t,e,r){if(!z(e)){e=[e]}var i=e.length;if(!i){return""}var a=e[0].$vars||[];for(var n=0;n<a.length;n++){var o=fu[n];t=t.replace(cu(o),cu(o,0))}for(var s=0;s<i;s++){for(var l=0;l<a.length;l++){var u=e[s][a[l]];t=t.replace(cu(fu[l],s),r?hu(u):u)}}return t}function du(t,e,r){L(e,function(e,i){t=t.replace("{"+i+"}",r?hu(e):e)});return t}function pu(t,e){t=V(t)?{color:t,extraCssText:e}:t||{};var r=t.color;var i=t.type;var e=t.extraCssText;if(!r){return""}return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;'+"border-radius:4px;width:4px;height:4px;background-color:"+hu(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;'+"border-radius:10px;width:10px;height:10px;background-color:"+hu(r)+";"+(e||"")+'"></span>'}function gu(t,e){t+="";return"0000".substr(0,e-t.length)+t}function mu(t,e,r){if(t==="week"||t==="month"||t==="quarter"||t==="half-year"||t==="year"){t="MM-dd\nyyyy"}var i=Jl(e);var a=r?"UTC":"";var n=i["get"+a+"FullYear"]();var o=i["get"+a+"Month"]()+1;var s=i["get"+a+"Date"]();var l=i["get"+a+"Hours"]();var u=i["get"+a+"Minutes"]();var h=i["get"+a+"Seconds"]();var f=i["get"+a+"Milliseconds"]();t=t.replace("MM",gu(o,2)).replace("M",o).replace("yyyy",n).replace("yy",n%100).replace("dd",gu(s,2)).replace("d",s).replace("hh",gu(l,2)).replace("h",l).replace("mm",gu(u,2)).replace("m",u).replace("ss",gu(h,2)).replace("s",h).replace("SSS",gu(f,3));return t}function yu(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t}var xu=ii;var _u=$r;var wu=(Object.freeze||Object)({addCommas:nu,toCamelCase:ou,normalizeCssArray:su,encodeHTML:hu,formatTpl:vu,formatTplSimple:du,getTooltipMarker:pu,formatTime:mu,capitalFirst:yu,truncateText:xu,getTextRect:_u});var bu=L;var Su=["left","right","top","bottom","width","height"];var Mu=[["width","left","right"],["height","top","bottom"]];function Iu(t,e,r,i,a){var n=0;var o=0;if(i==null){i=Infinity}if(a==null){a=Infinity}var s=0;e.eachChild(function(l,u){var h=l.position;var f=l.getBoundingRect();var c=e.childAt(u+1);var v=c&&c.getBoundingRect();var d;var p;if(t==="horizontal"){var g=f.width+(v?-v.x+f.x:0);d=n+g;if(d>i||l.newline){n=0;d=g;o+=s+r;s=f.height}else{s=Math.max(s,f.height)}}else{var m=f.height+(v?-v.y+f.y:0);p=o+m;if(p>a||l.newline){n+=s+r;o=0;p=m;s=f.width}else{s=Math.max(s,f.width)}}if(l.newline){return}h[0]=n;h[1]=o;t==="horizontal"?n=d+r:o=p+r})}var Tu=Iu;var Du=R(Iu,"vertical");var Au=R(Iu,"horizontal");function Cu(t,e,r){var i=e.width;var a=e.height;var n=Wl(t.x,i);var o=Wl(t.y,a);var s=Wl(t.x2,i);var l=Wl(t.y2,a);(isNaN(n)||isNaN(parseFloat(t.x)))&&(n=0);(isNaN(s)||isNaN(parseFloat(t.x2)))&&(s=i);(isNaN(o)||isNaN(parseFloat(t.y)))&&(o=0);(isNaN(l)||isNaN(parseFloat(t.y2)))&&(l=a);r=su(r||0);return{width:Math.max(s-n-r[1]-r[3],0),height:Math.max(l-o-r[0]-r[2],0)}}function Lu(t,e,r){r=su(r||0);var i=e.width;var a=e.height;var n=Wl(t.left,i);var o=Wl(t.top,a);var s=Wl(t.right,i);var l=Wl(t.bottom,a);var u=Wl(t.width,i);var h=Wl(t.height,a);var f=r[2]+r[0];var c=r[1]+r[3];var v=t.aspect;if(isNaN(u)){u=i-s-c-n}if(isNaN(h)){h=a-l-f-o}if(v!=null){if(isNaN(u)&&isNaN(h)){if(v>i/a){u=i*.8}else{h=a*.8}}if(isNaN(u)){u=v*h}if(isNaN(h)){h=u/v}}if(isNaN(n)){n=i-s-u-c}if(isNaN(o)){o=a-l-h-f}switch(t.left||t.right){case"center":n=i/2-u/2-r[3];break;case"right":n=i-u-c;break}switch(t.top||t.bottom){case"middle":case"center":o=a/2-h/2-r[0];break;case"bottom":o=a-h-f;break}n=n||0;o=o||0;if(isNaN(u)){u=i-c-n-(s||0)}if(isNaN(h)){h=a-f-o-(l||0)}var d=new hr(n+r[3],o+r[0],u,h);d.margin=r;return d}function ku(t,e,r,i,a){var n=!a||!a.hv||a.hv[0];var o=!a||!a.hv||a.hv[1];var s=a&&a.boundingMode||"all";if(!n&&!o){return}var l;if(s==="raw"){l=t.type==="group"?new hr(0,0,+e.width||0,+e.height||0):t.getBoundingRect()}else{l=t.getBoundingRect();if(t.needLocalTransform()){var u=t.getLocalTransform();l=l.clone();l.applyTransform(u)}}e=Lu(b({width:l.width,height:l.height},e),r,i);var h=t.position;var f=n?e.x-l.x:0;var c=o?e.y-l.y:0;t.attr("position",s==="raw"?[f,c]:[h[0]+f,h[1]+c])}function Pu(t,e){return t[Mu[e][0]]!=null||t[Mu[e][1]]!=null&&t[Mu[e][2]]!=null}function Nu(t,e,r){!G(r)&&(r={});var i=r.ignoreSize;!z(i)&&(i=[i,i]);var a=o(Mu[0],0);var n=o(Mu[1],1);u(Mu[0],t,a);u(Mu[1],t,n);function o(r,a){var n={};var o=0;var u={};var h=0;var f=2;bu(r,function(e){u[e]=t[e]});bu(r,function(t){s(e,t)&&(n[t]=u[t]=e[t]);l(n,t)&&o++;l(u,t)&&h++});if(i[a]){if(l(e,r[1])){u[r[2]]=null}else if(l(e,r[2])){u[r[1]]=null}return u}if(h===f||!o){return u}else if(o>=f){return n}else{for(var c=0;c<r.length;c++){var v=r[c];if(!s(n,v)&&s(t,v)){n[v]=t[v];break}}return n}}function s(t,e){return t.hasOwnProperty(e)}function l(t,e){return t[e]!=null&&t[e]!=="auto"}function u(t,e,r){bu(t,function(t){e[t]=r[t]})}}function Ou(t){return Eu({},t)}function Eu(t,e){e&&t&&bu(Su,function(r){e.hasOwnProperty(r)&&(t[r]=e[r])});return t}var Ru={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}};var zu=$a();var Bu=kl.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,r,i){kl.call(this,t,e,r,i);this.uid=El("ec_cpt_model")},init:function(t,e,r,i){this.mergeDefaultAndTheme(t,r)},mergeDefaultAndTheme:function(t,e){var r=this.layoutMode;var i=r?Ou(t):{};var a=e.getTheme();x(t,a.get(this.mainType));x(t,this.getDefaultOption());if(r){Nu(t,i,r)}},mergeOption:function(t,e){x(this.option,t,true);var r=this.layoutMode;if(r){Nu(this.option,t,r)}},optionUpdated:function(t,e){},getDefaultOption:function(){var t=zu(this);if(!t.defaultOption){var e=[];var r=this.constructor;while(r){var i=r.prototype.defaultOption;i&&e.push(i);r=r.superClass}var a={};for(var n=e.length-1;n>=0;n--){a=x(a,e[n],true)}t.defaultOption=a}return t.defaultOption},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",true),id:this.get(t+"Id",true)})}});vn(Bu,{registerWhenExtend:true});Rl(Bu);zl(Bu,Vu);function Vu(t){var e=[];L(Bu.getClassesByMainType(t),function(t){e=e.concat(t.prototype.dependencies||[])});e=k(e,function(t){return on(t).main});if(t!=="dataset"&&T(e,"dataset")<=0){e.unshift("dataset")}return e}A(Bu,Ru);var Gu="";if(typeof navigator!=="undefined"){Gu=navigator.platform||""}var Wu={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:Gu.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:false};var Fu=$a();function Hu(t,e){var r=t.length;for(var i=0;i<r;i++){if(t[i].length>e){return t[i]}}return t[r-1]}var Zu={clearColorPalette:function(){Fu(this).colorIdx=0;Fu(this).colorNameMap={}},getColorFromPalette:function(t,e,r){e=e||this;var i=Fu(e);var a=i.colorIdx||0;var n=i.colorNameMap=i.colorNameMap||{};if(n.hasOwnProperty(t)){return n[t]}var o=Ga(this.get("color",true));var s=this.get("colorLayer",true);var l=r==null||!s?o:Hu(s,r);l=l||o;if(!l||!l.length){return}var u=l[a];if(t){n[t]=u}i.colorIdx=(a+1)%l.length;return u}};function Uu(t){var e=t.get("coordinateSystem");var r={coordSysName:e,coordSysDims:[],axisMap:rt(),categoryAxisMap:rt()};var i=Xu[e];if(i){i(t,r,r.axisMap,r.categoryAxisMap);return r}}var Xu={cartesian2d:function(t,r,i,a){var n=t.getReferringComponents("xAxis")[0];var o=t.getReferringComponents("yAxis")[0];if(e){if(!n){throw new Error('xAxis "'+U(t.get("xAxisIndex"),t.get("xAxisId"),0)+'" not found')}if(!o){throw new Error('yAxis "'+U(t.get("xAxisIndex"),t.get("yAxisId"),0)+'" not found')}}r.coordSysDims=["x","y"];i.set("x",n);i.set("y",o);if(ju(n)){a.set("x",n);r.firstCategoryDimIndex=0}if(ju(o)){a.set("y",o);r.firstCategoryDimIndex=1}},singleAxis:function(t,r,i,a){var n=t.getReferringComponents("singleAxis")[0];if(e){if(!n){throw new Error("singleAxis should be specified.")}}r.coordSysDims=["single"];i.set("single",n);if(ju(n)){a.set("single",n);r.firstCategoryDimIndex=0}},polar:function(t,r,i,a){var n=t.getReferringComponents("polar")[0];var o=n.findAxisModel("radiusAxis");var s=n.findAxisModel("angleAxis");if(e){if(!s){throw new Error("angleAxis option not found")}if(!o){throw new Error("radiusAxis option not found")}}r.coordSysDims=["radius","angle"];i.set("radius",o);i.set("angle",s);if(ju(o)){a.set("radius",o);r.firstCategoryDimIndex=0}if(ju(s)){a.set("angle",s);r.firstCategoryDimIndex=1}},geo:function(t,e,r,i){e.coordSysDims=["lng","lat"]},parallel:function(t,e,r,i){var a=t.ecModel;var n=a.getComponent("parallel",t.get("parallelIndex"));var o=e.coordSysDims=n.dimensions.slice();L(n.parallelAxisIndex,function(t,n){var s=a.getComponent("parallelAxis",t);var l=o[n];r.set(l,s);if(ju(s)&&e.firstCategoryDimIndex==null){i.set(l,s);e.firstCategoryDimIndex=n}})}};function ju(t){return t.get("type")==="category"}var Yu="original";var qu="arrayRows";var Ku="objectRows";var $u="keyedColumns";var Ju="unknown";var Qu="typedArray";var th="column";var eh="row";function rh(t){this.fromDataset=t.fromDataset;this.data=t.data||(t.sourceFormat===$u?{}:[]);this.sourceFormat=t.sourceFormat||Ju;this.seriesLayoutBy=t.seriesLayoutBy||th;this.dimensionsDefine=t.dimensionsDefine;this.encodeDefine=t.encodeDefine&&rt(t.encodeDefine);this.startIndex=t.startIndex||0;this.dimensionsDetectCount=t.dimensionsDetectCount}rh.seriesDataToSource=function(t){return new rh({data:t,sourceFormat:F(t)?Qu:Yu,fromDataset:false})};hn(rh);var ih=$a();function ah(t){var e=t.option.source;var r=Ju;if(F(e)){r=Qu}else if(z(e)){for(var i=0,a=e.length;i<a;i++){var n=e[i];if(n==null){continue}else if(z(n)){r=qu;break}else if(G(n)){r=Ku;break}}}else if(G(e)){for(var o in e){if(e.hasOwnProperty(o)&&C(e[o])){r=$u;break}}}else if(e!=null){throw new Error("Invalid data")}ih(t).sourceFormat=r}function nh(t){return ih(t).source}function oh(t){ih(t).datasetMap=rt()}function sh(t){var e=t.option;var r=e.data;var i=F(r)?Qu:Yu;var a=false;var n=e.seriesLayoutBy;var o=e.sourceHeader;var s=e.dimensions;var l=vh(t);if(l){var u=l.option;r=u.source;i=ih(l).sourceFormat;a=true;n=n||u.seriesLayoutBy;o==null&&(o=u.sourceHeader);s=s||u.dimensions}var h=lh(r,i,n,o,s);var f=e.encode;if(!f&&l){f=ch(t,l,r,i,n,h)}ih(t).source=new rh({data:r,fromDataset:a,seriesLayoutBy:n,sourceFormat:i,dimensionsDefine:h.dimensionsDefine,startIndex:h.startIndex,dimensionsDetectCount:h.dimensionsDetectCount,encodeDefine:f})}function lh(t,r,i,a,n){if(!t){return{dimensionsDefine:uh(n)}}var o;var s;var l;if(r===qu){if(a==="auto"||a==null){hh(function(t){if(t!=null&&t!=="-"){if(V(t)){s==null&&(s=1)}else{s=0}}},i,t,10)}else{s=a?1:0}if(!n&&s===1){n=[];hh(function(t,e){n[e]=t!=null?t:""},i,t)}o=n?n.length:i===eh?t.length:t[0]?t[0].length:null}else if(r===Ku){if(!n){n=fh(t);l=true}}else if(r===$u){if(!n){n=[];l=true;L(t,function(t,e){n.push(e)})}}else if(r===Yu){var u=Ha(t[0]);o=z(u)&&u.length||1}else if(r===Qu){if(e){K(!!n,"dimensions must be given if data is TypedArray.")}}var h;if(l){L(n,function(t,e){if((G(t)?t.name:t)==="name"){h=e}})}return{startIndex:s,dimensionsDefine:uh(n),dimensionsDetectCount:o,potentialNameDimIndex:h}}function uh(t){if(!t){return}var e=rt();return k(t,function(t,r){t=w({},G(t)?t:{name:t});if(t.name==null){return t}t.name+="";if(t.displayName==null){t.displayName=t.name}var i=e.get(t.name);if(!i){e.set(t.name,{count:1})}else{t.name+="-"+i.count++}return t})}function hh(t,e,r,i){i==null&&(i=Infinity);if(e===eh){for(var a=0;a<r.length&&a<i;a++){t(r[a]?r[a][0]:null,a)}}else{var n=r[0]||[];for(var a=0;a<n.length&&a<i;a++){t(n[a],a)}}}function fh(t){var e=0;var r;while(e<t.length&&!(r=t[e++])){}if(r){var i=[];L(r,function(t,e){i.push(e)});return i}}function ch(t,e,r,i,a,n){var o=Uu(t);var s={};var l=[];var u=[];var h=t.subType;var f=rt(["pie","map","funnel"]);var c=rt(["line","bar","pictorialBar","scatter","effectScatter","candlestick","boxplot"]);if(o&&c.get(h)!=null){var v=t.ecModel;var d=ih(v).datasetMap;var p=e.uid+"_"+a;var g=d.get(p)||d.set(p,{categoryWayDim:1,valueWayDim:0});L(o.coordSysDims,function(t){if(o.firstCategoryDimIndex==null){var e=g.valueWayDim++;s[t]=e;u.push(e)}else if(o.categoryAxisMap.get(t)){s[t]=0;l.push(0)}else{var e=g.categoryWayDim++;s[t]=e;u.push(e)}})}else if(f.get(h)!=null){var m;for(var y=0;y<5&&m==null;y++){if(!ph(r,i,a,n.dimensionsDefine,n.startIndex,y)){m=y}}if(m!=null){s.value=m;var x=n.potentialNameDimIndex||Math.max(m-1,0);u.push(x);l.push(x)}}l.length&&(s.itemName=l);u.length&&(s.seriesName=u);return s}function vh(t){var e=t.option;var r=e.data;if(!r){return t.ecModel.getComponent("dataset",e.datasetIndex||0)}}function dh(t,e){return ph(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function ph(t,e,r,i,a,n){var o;var s=5;if(F(t)){return false}var l;if(i){l=i[n];l=G(l)?l.name:l}if(e===qu){if(r===eh){var u=t[n];for(var h=0;h<(u||[]).length&&h<s;h++){if((o=d(u[a+h]))!=null){return o}}}else{for(var h=0;h<t.length&&h<s;h++){var f=t[a+h];if(f&&(o=d(f[n]))!=null){return o}}}}else if(e===Ku){if(!l){return}for(var h=0;h<t.length&&h<s;h++){var c=t[h];if(c&&(o=d(c[l]))!=null){return o}}}else if(e===$u){if(!l){return}var u=t[l];if(!u||F(u)){return false}for(var h=0;h<u.length&&h<s;h++){if((o=d(u[h]))!=null){return o}}}else if(e===Yu){for(var h=0;h<t.length&&h<s;h++){var c=t[h];var v=Ha(c);if(!z(v)){return false}if((o=d(v[n]))!=null){return o}}}function d(t){if(t!=null&&isFinite(t)&&t!==""){return false}else if(V(t)&&t!=="-"){return true}}return false}var gh="\0_ec_inner";var mh=kl.extend({init:function(t,e,r,i){r=r||{};this.option=null;this._theme=new kl(r);this._optionManager=i},setOption:function(t,e){K(!(gh in t),"please use chart.getOption()");this._optionManager.setOption(t,e);this.resetOption(null)},resetOption:function(t){var e=false;var r=this._optionManager;if(!t||t==="recreate"){var i=r.mountOption(t==="recreate");if(!this.option||t==="recreate"){_h.call(this,i)}else{this.restoreData();this.mergeOption(i)}e=true}if(t==="timeline"||t==="media"){this.restoreData()}if(!t||t==="recreate"||t==="timeline"){var a=r.getTimelineOption(this);a&&(this.mergeOption(a),e=true)}if(!t||t==="recreate"||t==="media"){var n=r.getMediaOption(this,this._api);if(n.length){L(n,function(t){this.mergeOption(t,e=true)},this)}}return e},mergeOption:function(t){var e=this.option;var r=this._componentsMap;var i=[];oh(this);L(t,function(t,r){if(t==null){return}if(!Bu.hasClass(r)){e[r]=e[r]==null?y(t):x(e[r],t,true)}else if(r){i.push(r)}});Bu.topologicalTravel(i,Bu.getAllClassMainTypes(),a,this);function a(i,a){var n=Ga(t[i]);var o=Ua(r.get(i),n);Xa(o);L(o,function(t,e){var r=t.option;if(G(r)){t.keyInfo.mainType=i;t.keyInfo.subType=bh(i,r,t.exist)}});var s=wh(r,a);e[i]=[];r.set(i,[]);L(o,function(t,a){var n=t.exist;var o=t.option;K(G(o)||n,"Empty component definition");if(!o){n.mergeOption({},this);n.optionUpdated({},false)}else{var l=Bu.getClass(i,t.keyInfo.subType,true);if(n&&n instanceof l){n.name=t.keyInfo.name;n.mergeOption(o,this);n.optionUpdated(o,false)}else{var u=w({dependentModels:s,componentIndex:a},t.keyInfo);n=new l(o,this,this,u);w(n,u);n.init(o,this,this,u);n.optionUpdated(null,true)}}r.get(i)[a]=n;e[i][a]=n.option},this);if(i==="series"){Sh(this,r.get("series"))}}this._seriesIndicesMap=rt(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var t=y(this.option);L(t,function(e,r){if(Bu.hasClass(r)){var e=Ga(e);for(var i=e.length-1;i>=0;i--){if(Ya(e[i])){e.splice(i,1)}}t[r]=e}});delete t[gh];return t},getTheme:function(){return this._theme},getComponent:function(t,e){var r=this._componentsMap.get(t);if(r){return r[e||0]}},queryComponents:function(t){var e=t.mainType;if(!e){return[];
}var r=t.index;var i=t.id;var a=t.name;var n=this._componentsMap.get(e);if(!n||!n.length){return[]}var o;if(r!=null){if(!z(r)){r=[r]}o=N(k(r,function(t){return n[t]}),function(t){return!!t})}else if(i!=null){var s=z(i);o=N(n,function(t){return s&&T(i,t.id)>=0||!s&&t.id===i})}else if(a!=null){var l=z(a);o=N(n,function(t){return l&&T(a,t.name)>=0||!l&&t.name===a})}else{o=n.slice()}return Mh(o,t)},findComponents:function(t){var e=t.query;var r=t.mainType;var i=n(e);var a=i?this.queryComponents(i):this._componentsMap.get(r);return o(Mh(a,t));function n(t){var e=r+"Index";var i=r+"Id";var a=r+"Name";return t&&(t[e]!=null||t[i]!=null||t[a]!=null)?{mainType:r,index:t[e],id:t[i],name:t[a]}:null}function o(e){return t.filter?N(e,t.filter):e}},eachComponent:function(t,e,r){var i=this._componentsMap;if(typeof t==="function"){r=e;e=t;i.each(function(t,i){L(t,function(t,a){e.call(r,i,t,a)})})}else if(V(t)){L(i.get(t),e,r)}else if(G(t)){var a=this.findComponents(t);L(a,e,r)}},getSeriesByName:function(t){var e=this._componentsMap.get("series");return N(e,function(e){return e.name===t})},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(t){var e=this._componentsMap.get("series");return N(e,function(e){return e.subType===t})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(t,e){Ih(this);L(this._seriesIndices,function(r){var i=this._componentsMap.get("series")[r];t.call(e,i,r)},this)},eachRawSeries:function(t,e){L(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(t,e,r){Ih(this);L(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];if(a.subType===t){e.call(r,a,i)}},this)},eachRawSeriesByType:function(t,e,r){return L(this.getSeriesByType(t),e,r)},isSeriesFiltered:function(t){Ih(this);return this._seriesIndicesMap.get(t.componentIndex)==null},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){Ih(this);var r=N(this._componentsMap.get("series"),t,e);Sh(this,r)},restoreData:function(t){var e=this._componentsMap;Sh(this,e.get("series"));var r=[];e.each(function(t,e){r.push(e)});Bu.topologicalTravel(r,Bu.getAllClassMainTypes(),function(r,i){L(e.get(r),function(e){(r!=="series"||!yh(e,t))&&e.restoreData()})})}});function yh(t,e){if(e){var r=e.seiresIndex;var i=e.seriesId;var a=e.seriesName;return r!=null&&t.componentIndex!==r||i!=null&&t.id!==i||a!=null&&t.name!==a}}function xh(t,e){var r=t.color&&!t.colorLayer;L(e,function(e,i){if(i==="colorLayer"&&r){return}if(!Bu.hasClass(i)){if(typeof e==="object"){t[i]=!t[i]?y(e):x(t[i],e,false)}else{if(t[i]==null){t[i]=e}}}})}function _h(t){t=t;this.option={};this.option[gh]=1;this._componentsMap=rt({series:[]});this._seriesIndices;this._seriesIndicesMap;xh(t,this._theme.option);x(t,Wu,false);this.mergeOption(t)}function wh(t,e){if(!z(e)){e=e?[e]:[]}var r={};L(e,function(e){r[e]=(t.get(e)||[]).slice()});return r}function bh(t,e,r){var i=e.type?e.type:r?r.subType:Bu.determineSubType(t,e);return i}function Sh(t,e){t._seriesIndicesMap=rt(t._seriesIndices=k(e,function(t){return t.componentIndex})||[])}function Mh(t,e){return e.hasOwnProperty("subType")?N(t,function(t){return t.subType===e.subType}):t}function Ih(t){if(e){if(!t._seriesIndices){throw new Error("Option should contains series.")}}}A(mh,Zu);var Th=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function Dh(t){L(Th,function(e){this[e]=E(t[e],t)},this)}var Ah={};function Ch(){this._coordinateSystems=[]}Ch.prototype={constructor:Ch,create:function(t,e){var r=[];L(Ah,function(i,a){var n=i.create(t,e);r=r.concat(n||[])});this._coordinateSystems=r},update:function(t,e){L(this._coordinateSystems,function(r){r.update&&r.update(t,e)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}};Ch.register=function(t,e){Ah[t]=e};Ch.get=function(t){return Ah[t]};var Lh=L;var kh=y;var Ph=k;var Nh=x;var Oh=/^(min|max)?(.+)$/;function Eh(t){this._api=t;this._timelineOptions=[];this._mediaList=[];this._mediaDefault;this._currentMediaIndices=[];this._optionBackup;this._newBaseOption}Eh.prototype={constructor:Eh,setOption:function(t,e){if(t){L(Ga(t.series),function(t){t&&t.data&&F(t.data)&&Q(t.data)})}t=kh(t,true);var r=this._optionBackup;var i=Rh.call(this,t,e,!r);this._newBaseOption=i.baseOption;if(r){Gh(r.baseOption,i.baseOption);if(i.timelineOptions.length){r.timelineOptions=i.timelineOptions}if(i.mediaList.length){r.mediaList=i.mediaList}if(i.mediaDefault){r.mediaDefault=i.mediaDefault}}else{this._optionBackup=i}},mountOption:function(t){var e=this._optionBackup;this._timelineOptions=Ph(e.timelineOptions,kh);this._mediaList=Ph(e.mediaList,kh);this._mediaDefault=kh(e.mediaDefault);this._currentMediaIndices=[];return kh(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e;var r=this._timelineOptions;if(r.length){var i=t.getComponent("timeline");if(i){e=kh(r[i.getCurrentIndex()],true)}}return e},getMediaOption:function(t){var e=this._api.getWidth();var r=this._api.getHeight();var i=this._mediaList;var a=this._mediaDefault;var n=[];var o=[];if(!i.length&&!a){return o}for(var s=0,l=i.length;s<l;s++){if(zh(i[s].query,e,r)){n.push(s)}}if(!n.length&&a){n=[-1]}if(n.length&&!Vh(n,this._currentMediaIndices)){o=Ph(n,function(t){return kh(t===-1?a.option:i[t].option)})}this._currentMediaIndices=n;return o}};function Rh(t,e,r){var i=[];var a=[];var n;var o;var s=t.timeline;if(t.baseOption){o=t.baseOption}if(s||t.options){o=o||{};i=(t.options||[]).slice()}if(t.media){o=o||{};var l=t.media;Lh(l,function(t){if(t&&t.option){if(t.query){a.push(t)}else if(!n){n=t}}})}if(!o){o=t}if(!o.timeline){o.timeline=s}Lh([o].concat(i).concat(k(a,function(t){return t.option})),function(t){Lh(e,function(e){e(t,r)})});return{baseOption:o,timelineOptions:i,mediaDefault:n,mediaList:a}}function zh(t,e,r){var i={width:e,height:r,aspectratio:e/r};var a=true;L(t,function(t,e){var r=e.match(Oh);if(!r||!r[1]||!r[2]){return}var n=r[1];var o=r[2].toLowerCase();if(!Bh(i[o],t,n)){a=false}});return a}function Bh(t,e,r){if(r==="min"){return t>=e}else if(r==="max"){return t<=e}else{return t===e}}function Vh(t,e){return t.join(",")===e.join(",")}function Gh(t,e){e=e||{};Lh(e,function(e,r){if(e==null){return}var i=t[r];if(!Bu.hasClass(r)){t[r]=Nh(i,e,true)}else{e=Ga(e);i=Ga(i);var a=Ua(i,e);t[r]=Ph(a,function(t){return t.option&&t.exist?Nh(t.exist,t.option,true):t.exist||t.option})}})}var Wh=L;var Fh=G;var Hh=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Zh(t){var e=t&&t.itemStyle;if(!e){return}for(var r=0,i=Hh.length;r<i;r++){var a=Hh[r];var n=e.normal;var o=e.emphasis;if(n&&n[a]){t[a]=t[a]||{};if(!t[a].normal){t[a].normal=n[a]}else{x(t[a].normal,n[a])}n[a]=null}if(o&&o[a]){t[a]=t[a]||{};if(!t[a].emphasis){t[a].emphasis=o[a]}else{x(t[a].emphasis,o[a])}o[a]=null}}}function Uh(t,e,r){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var i=t[e].normal;var a=t[e].emphasis;if(i){if(r){t[e].normal=t[e].emphasis=null;b(t[e],i)}else{t[e]=i}}if(a){t.emphasis=t.emphasis||{};t.emphasis[e]=a}}}function Xh(t){Uh(t,"itemStyle");Uh(t,"lineStyle");Uh(t,"areaStyle");Uh(t,"label");Uh(t,"labelLine");Uh(t,"upperLabel");Uh(t,"edgeLabel")}function jh(t,e){var r=Fh(t)&&t[e];var i=Fh(r)&&r.textStyle;if(i){for(var a=0,n=Fa.length;a<n;a++){var e=Fa[a];if(i.hasOwnProperty(e)){r[e]=i[e]}}}}function Yh(t){if(t){Xh(t);jh(t,"label");t.emphasis&&jh(t.emphasis,"label")}}function qh(t){if(!Fh(t)){return}Zh(t);Xh(t);jh(t,"label");jh(t,"upperLabel");jh(t,"edgeLabel");if(t.emphasis){jh(t.emphasis,"label");jh(t.emphasis,"upperLabel");jh(t.emphasis,"edgeLabel")}var e=t.markPoint;if(e){Zh(e);Yh(e)}var r=t.markLine;if(r){Zh(r);Yh(r)}var i=t.markArea;if(i){Yh(i)}var a=t.data;if(t.type==="graph"){a=a||t.nodes;var n=t.links||t.edges;if(n&&!F(n)){for(var o=0;o<n.length;o++){Yh(n[o])}}L(t.categories,function(t){Xh(t)})}if(a&&!F(a)){for(var o=0;o<a.length;o++){Yh(a[o])}}var e=t.markPoint;if(e&&e.data){var s=e.data;for(var o=0;o<s.length;o++){Yh(s[o])}}var r=t.markLine;if(r&&r.data){var l=r.data;for(var o=0;o<l.length;o++){if(z(l[o])){Yh(l[o][0]);Yh(l[o][1])}else{Yh(l[o])}}}if(t.type==="gauge"){jh(t,"axisLabel");jh(t,"title");jh(t,"detail")}else if(t.type==="treemap"){Uh(t.breadcrumb,"itemStyle");L(t.levels,function(t){Xh(t)})}else if(t.type==="tree"){Xh(t.leaves)}}function Kh(t){return z(t)?t:t?[t]:[]}function $h(t){return(z(t)?t[0]:t)||{}}var Jh=function(t,e){Wh(Kh(t.series),function(t){Fh(t)&&qh(t)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&r.push("valueAxis","categoryAxis","logAxis","timeAxis");Wh(r,function(e){Wh(Kh(t[e]),function(t){if(t){jh(t,"axisLabel");jh(t.axisPointer,"label")}})});Wh(Kh(t.parallel),function(t){var e=t&&t.parallelAxisDefault;jh(e,"axisLabel");jh(e&&e.axisPointer,"label")});Wh(Kh(t.calendar),function(t){Uh(t,"itemStyle");jh(t,"dayLabel");jh(t,"monthLabel");jh(t,"yearLabel")});Wh(Kh(t.radar),function(t){jh(t,"name")});Wh(Kh(t.geo),function(t){if(Fh(t)){Yh(t);Wh(Kh(t.regions),function(t){Yh(t)})}});Wh(Kh(t.timeline),function(t){Yh(t);Uh(t,"label");Uh(t,"itemStyle");Uh(t,"controlStyle",true);var e=t.data;z(e)&&L(e,function(t){if(G(t)){Uh(t,"label");Uh(t,"itemStyle")}})});Wh(Kh(t.toolbox),function(t){Uh(t,"iconStyle");Wh(t.feature,function(t){Uh(t,"iconStyle")})});jh($h(t.axisPointer),"label");jh($h(t.tooltip).axisPointer,"label")};function Qh(t,e){e=e.split(",");var r=t;for(var i=0;i<e.length;i++){r=r&&r[e[i]];if(r==null){break}}return r}function tf(t,e,r,i){e=e.split(",");var a=t;var n;for(var o=0;o<e.length-1;o++){n=e[o];if(a[n]==null){a[n]={}}a=a[n]}if(i||a[e[o]]==null){a[e[o]]=r}}function ef(t){L(rf,function(e){if(e[0]in t&&!(e[1]in t)){t[e[1]]=t[e[0]]}})}var rf=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]];var af=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"];var nf=function(t,e){Jh(t,e);t.series=Ga(t.series);L(t.series,function(t){if(!G(t)){return}var e=t.type;if(e==="pie"||e==="gauge"){if(t.clockWise!=null){t.clockwise=t.clockWise}}if(e==="gauge"){var r=Qh(t,"pointer.color");r!=null&&tf(t,"itemStyle.normal.color",r)}ef(t)});if(t.dataRange){t.visualMap=t.dataRange}L(af,function(e){var r=t[e];if(r){if(!z(r)){r=[r]}L(r,function(t){ef(t)})}})};var of=function(t){var e=rt();t.eachSeries(function(t){var r=t.get("stack");if(r){var i=e.get(r)||e.set(r,[]);var a=t.getData();var n={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:t};if(!n.stackedDimension||!(n.isStackedByIndex||n.stackedByDimension)){return}i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel);i.push(n)}});e.each(sf)};function sf(t){L(t,function(e,r){var i=[];var a=[NaN,NaN];var n=[e.stackResultDimension,e.stackedOverDimension];var o=e.data;var s=e.isStackedByIndex;var l=o.map(n,function(n,l,u){var h=o.get(e.stackedDimension,u);if(isNaN(h)){return a}var f;var c;if(s){c=o.getRawIndex(u)}else{f=o.get(e.stackedByDimension,u)}var v=NaN;for(var d=r-1;d>=0;d--){var p=t[d];if(!s){c=p.data.rawIndexOf(p.stackedByDimension,f)}if(c>=0){var g=p.data.getByRawIndex(p.stackResultDimension,c);if(h>=0&&g>0||h<=0&&g<0){h+=g;v=g;break}}}i[0]=h;i[1]=v;return i});o.hostModel.setData(l);e.data=l})}function lf(t,r){if(!rh.isInstance(t)){t=rh.seriesDataToSource(t)}this._source=t;var i=this._data=t.data;var a=t.sourceFormat;if(a===Qu){if(e){if(r==null){throw new Error("Typed array data must specify dimension size")}}this._offset=0;this._dimSize=r;this._data=i}var n=hf[a===qu?a+"_"+t.seriesLayoutBy:a];if(e){K(n,"Invalide sourceFormat: "+a)}w(this,n)}var uf=lf.prototype;uf.pure=false;uf.persistent=true;uf.getSource=function(){return this._source};var hf={arrayRows_column:{pure:true,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:vf},arrayRows_row:{pure:true,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;var e=[];var r=this._data;for(var i=0;i<r.length;i++){var a=r[i];e.push(a?a[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:true,count:ff,getItem:cf,appendData:vf},keyedColumns:{pure:true,count:function(){var t=this._source.dimensionsDefine[0].name;var e=this._data[t];return e?e.length:0},getItem:function(t){var e=[];var r=this._source.dimensionsDefine;for(var i=0;i<r.length;i++){var a=this._data[r[i].name];e.push(a?a[t]:null)}return e},appendData:function(t){var e=this._data;L(t,function(t,r){var i=e[r]||(e[r]=[]);for(var a=0;a<(t||[]).length;a++){i.push(t[a])}})}},original:{count:ff,getItem:cf,appendData:vf},typedArray:{persistent:false,pure:true,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){t=t-this._offset;e=e||[];var r=this._dimSize*t;for(var i=0;i<this._dimSize;i++){e[i]=this._data[r+i]}return e},appendData:function(t){if(e){K(F(t),"Added data must be TypedArray if data in initialization is TypedArray")}this._data=t},clean:function(){this._offset+=this.count();this._data=null}}};function ff(){return this._data.length}function cf(t){return this._data[t]}function vf(t){for(var e=0;e<t.length;e++){this._data.push(t[e])}}var df={arrayRows:pf,objectRows:function(t,e,r,i){return r!=null?t[i]:t},keyedColumns:pf,original:function(t,e,r,i){var a=Ha(t);return r==null||!(a instanceof Array)?a:a[r]},typedArray:pf};function pf(t,e,r,i){return r!=null?t[r]:t}var gf={arrayRows:mf,objectRows:function(t,e,r,i){return yf(t[e],this._dimensionInfos[e])},keyedColumns:mf,original:function(t,e,r,i){var a=t&&(t.value==null?t:t.value);if(!this._rawData.pure&&Za(t)){this.hasItemOption=true}return yf(a instanceof Array?a[i]:a,this._dimensionInfos[e])},typedArray:function(t,e,r,i){return t[i]}};function mf(t,e,r,i){return yf(t[i],this._dimensionInfos[e])}function yf(t,e){var r=e&&e.type;if(r==="ordinal"){var i=e&&e.ordinalMeta;return i?i.parseAndCollect(t):t}if(r==="time"&&typeof t!=="number"&&t!=null&&t!=="-"){t=+Jl(t)}return t==null||t===""?NaN:+t}function xf(t,e,r){if(!t){return}var i=t.getRawDataItem(e);if(i==null){return}var a=t.getProvider().getSource().sourceFormat;var n;var o;var s=t.getDimensionInfo(r);if(s){n=s.name;o=s.index}return df[a](i,e,o,n)}function _f(t,e,r){if(!t){return}var i=t.getProvider().getSource().sourceFormat;if(i!==Yu&&i!==Ku){return}var a=t.getRawDataItem(e);if(i===Yu&&!G(a)){a=null}if(a){return a[r]}}var wf=/\{@(.+?)\}/g;var bf={getDataParams:function(t,e){var r=this.getData(e);var i=this.getRawValue(t,e);var a=r.getRawIndex(t);var n=r.getName(t);var o=r.getRawDataItem(t);var s=r.getItemVisual(t,"color");return{componentType:this.mainType,componentSubType:this.subType,seriesType:this.mainType==="series"?this.subType:null,seriesIndex:this.seriesIndex,seriesId:this.id,seriesName:this.name,name:n,dataIndex:a,data:o,dataType:e,value:i,color:s,marker:pu(s),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,r,i,a){e=e||"normal";var n=this.getData(r);var o=n.getItemModel(t);var s=this.getDataParams(t,r);if(i!=null&&s.value instanceof Array){s.value=s.value[i]}var l=o.get(e==="normal"?[a||"label","formatter"]:[e,a||"label","formatter"]);if(typeof l==="function"){s.status=e;return l(s)}else if(typeof l==="string"){var u=vu(l,s);return u.replace(wf,function(e,r){var i=r.length;if(r.charAt(0)==="["&&r.charAt(i-1)==="]"){r=+r.slice(1,i-1)}return xf(n,t,r)})}},getRawValue:function(t,e){return xf(this.getData(e),t)},formatTooltip:function(){}};function Sf(define){return new Mf(define)}function Mf(define){define=define||{};this._reset=define.reset;this._plan=define.plan;this._count=define.count;this._onDirty=define.onDirty;this._dirty=true;this.context}var If=Mf.prototype;If.perform=function(t){var r=this._upstream;var i=t&&t.skip;if(this._dirty&&r){var a=this.context;a.data=a.outputData=r.context.outputData}if(this.__pipeline){this.__pipeline.currentTask=this}var n;if(this._plan&&!i){n=this._plan(this.context)}var o=h(this._modBy);var s=this._modDataCount||0;var l=h(t&&t.modBy);var u=t&&t.modDataCount||0;if(o!==l||s!==u){n="reset"}function h(t){!(t>=1)&&(t=1);return t}var f;if(this._dirty||n==="reset"){this._dirty=false;f=Af(this,i)}this._modBy=l;this._modDataCount=u;var c=t&&t.step;if(r){if(e){K(r._outputDueEnd!=null)}this._dueEnd=r._outputDueEnd}else{if(e){K(!this._progress||this._count)}this._dueEnd=this._count?this._count(this.context):Infinity}if(this._progress){var v=this._dueIndex;var d=Math.min(c!=null?this._dueIndex+c:Infinity,this._dueEnd);if(!i&&(f||v<d)){var p=this._progress;if(z(p)){for(var g=0;g<p.length;g++){Df(this,p[g],v,d,l,u)}}else{Df(this,p,v,d,l,u)}}this._dueIndex=d;var m=this._settedOutputEnd!=null?this._settedOutputEnd:d;if(e){K(m>=this._outputDueEnd)}this._outputDueEnd=m}else{this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd}return this.unfinished()};var Tf=function(){var t;var e;var r;var i;var a;var n={reset:function(l,u,h,f){e=l;t=u;r=h;i=f;a=Math.ceil(i/r);n.next=r>1&&i>0?s:o}};return n;function o(){return e<t?e++:null}function s(){var n=e%a*r+Math.ceil(e/a);var o=e>=t?null:n<i?n:e;e++;return o}}();If.dirty=function(){this._dirty=true;this._onDirty&&this._onDirty(this.context)};function Df(t,e,r,i,a,n){Tf.reset(r,i,a,n);t._callingProgress=e;t._callingProgress({start:r,end:i,count:i-r,next:Tf.next},t.context)}function Af(t,e){t._dueIndex=t._outputDueEnd=t._dueEnd=0;t._settedOutputEnd=null;var r;var i;if(!e&&t._reset){r=t._reset(t.context);if(r&&r.progress){i=r.forceFirstProgress;r=r.progress}if(z(r)&&!r.length){r=null}}t._progress=r;t._modBy=t._modDataCount=null;var a=t._downstream;a&&a.dirty();return i}If.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd};If.pipe=function(t){if(e){K(t&&!t._disposed&&t!==this)}if(this._downstream!==t||this._dirty){this._downstream=t;t._upstream=this;t.dirty()}};If.dispose=function(){if(this._disposed){return}this._upstream&&(this._upstream._downstream=null);this._downstream&&(this._downstream._upstream=null);this._dirty=false;this._disposed=true};If.getUpstream=function(){return this._upstream};If.getDownstream=function(){return this._downstream};If.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t};var Cf=$a();var Lf=Bu.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.color",layoutMode:null,init:function(t,r,i,a){this.seriesIndex=this.componentIndex;this.dataTask=Sf({count:Nf,reset:Of});this.dataTask.context={model:this};this.mergeDefaultAndTheme(t,i);sh(this);var n=this.getInitialData(t,i);Rf(n,this);this.dataTask.context.data=n;if(e){K(n,"getInitialData returned invalid data.")}Cf(this).dataBeforeProcessed=n;kf(this)},mergeDefaultAndTheme:function(t,e){var r=this.layoutMode;var i=r?Ou(t):{};var a=this.subType;if(Bu.hasClass(a)){a+="Series"}x(t,e.getTheme().get(this.subType));x(t,this.getDefaultOption());Wa(t,"label",["show"]);this.fillDataTextStyle(t.data);if(r){Nu(t,i,r)}},mergeOption:function(t,e){t=x(this.option,t,true);this.fillDataTextStyle(t.data);var r=this.layoutMode;if(r){Nu(this.option,t,r)}sh(this);var i=this.getInitialData(t,e);Rf(i,this);this.dataTask.dirty();this.dataTask.context.data=i;Cf(this).dataBeforeProcessed=i;kf(this)},fillDataTextStyle:function(t){if(t&&!F(t)){var e=["show"];for(var r=0;r<t.length;r++){if(t[r]&&t[r].label){Wa(t[r],"label",e)}}}},getInitialData:function(){},appendData:function(t){var e=this.getRawData();e.appendData(t.data)},getData:function(t){var e=Bf(this);if(e){var r=e.context.data;return t==null?r:r.getLinkedData(t)}else{return Cf(this).data}},setData:function(t){var e=Bf(this);if(e){var r=e.context;if(r.data!==t&&e.modifyOutputEnd){e.setOutputEnd(t.count())}r.outputData=t;if(e!==this.dataTask){r.data=t}}Cf(this).data=t},getSource:function(){return nh(this)},getRawData:function(){return Cf(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(t,e,r){function i(r){var i=P(r,function(t,e,r){var i=n.getDimensionInfo(r);return t|=i&&i.tooltip!==false&&i.displayName!=null},0);var a=[];o.length?L(o,function(e){s(xf(n,t,e),e)}):L(r,s);function s(t,r){var o=n.getDimensionInfo(r);if(!o||o.otherDims.tooltip===false){return}var s=o.type;var l=pu({color:h,type:"subItem"});var u=(i?l+hu(o.displayName||"-")+": ":"")+hu(s==="ordinal"?t+"":s==="time"?e?"":mu("yyyy/MM/dd hh:mm:ss",t):nu(t));u&&a.push(u)}return(i?"<br/>":"")+a.join(i?"<br/>":", ")}function a(t){return hu(nu(t))}var n=this.getData();var o=n.mapDimension("defaultedTooltip",true);var s=o.length;var l=this.getRawValue(t);var u=z(l);var h=n.getItemVisual(t,"color");if(G(h)&&h.colorStops){h=(h.colorStops[0]||{}).color}h=h||"transparent";var f=s>1||u&&!s?i(l):s?a(xf(n,t,o[0])):a(u?l[0]:l);var c=pu(h);var v=n.getName(t);var d=this.name;if(!ja(this)){d=""}d=d?hu(d)+(!e?"<br/>":": "):"";return!e?d+c+(v?hu(v)+": "+f:f):c+d+f},isAnimationEnabled:function(){if(n.node){return false}var t=this.getShallow("animation");if(t){if(this.getData().count()>this.getShallow("animationThreshold")){t=false}}return t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,r){var i=this.ecModel;var a=Zu.getColorFromPalette.call(this,t,e,r);if(!a){a=i.getColorFromPalette(t,e,r)}return a},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,true)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});A(Lf,bf);A(Lf,Zu);function kf(t){var e=t.name;if(!ja(t)){t.name=Pf(t)||e}}function Pf(t){var e=t.getRawData();var r=e.mapDimension("seriesName",true);var i=[];L(r,function(t){var r=e.getDimensionInfo(t);r.displayName&&i.push(r.displayName)});return i.join(" ")}function Nf(t){return t.model.getRawData().count()}function Of(t){var e=t.model;e.setData(e.getRawData().cloneShallow());return Ef}function Ef(t,e){if(t.end>e.outputData.count()){e.model.getRawData().cloneShallow(e.outputData)}}function Rf(t,e){L(t.CHANGABLE_METHODS,function(r){t.wrapMethod(r,R(zf,e))})}function zf(t){var e=Bf(t);if(e){e.setOutputEnd(this.count())}}function Bf(t){var e=(t.ecModel||{}).scheduler;var r=e&&e.getPipeline(t.uid);if(r){var i=r.currentTask;if(i){var a=i.agentStubMap;if(a){i=a.get(t.uid)}}return i}}var Vf=function(){this.group=new fr;this.uid=El("viewComponent")};Vf.prototype={constructor:Vf,init:function(t,e){},render:function(t,e,r,i){},dispose:function(){}};var Gf=Vf.prototype;Gf.updateView=Gf.updateLayout=Gf.updateVisual=function(t,e,r,i){};ln(Vf);vn(Vf,{registerWhenExtend:true});var Wf=function(){var t=$a();return function(e){var r=t(e);var i=e.pipelineContext;var a=r.large;var n=r.progressiveRender;var o=r.large=i.large;var s=r.progressiveRender=i.progressiveRender;return!!(a^o||n^s)&&"reset"}};var Ff=$a();var Hf=Wf();function Zf(){this.group=new fr;this.uid=El("viewChart");this.renderTask=Sf({plan:Yf,reset:qf});this.renderTask.context={view:this}}Zf.prototype={type:"chart",init:function(t,e){},render:function(t,e,r,i){},highlight:function(t,e,r,i){jf(t.getData(),i,"emphasis")},downplay:function(t,e,r,i){jf(t.getData(),i,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null};var Uf=Zf.prototype;Uf.updateView=Uf.updateLayout=Uf.updateVisual=function(t,e,r,i){this.render(t,e,r,i)};function Xf(t,e){if(t){t.trigger(e);if(t.type==="group"){for(var r=0;r<t.childCount();r++){Xf(t.childAt(r),e)}}}}function jf(t,e,r){var i=Ka(t,e);if(i!=null){L(Ga(i),function(e){Xf(t.getItemGraphicEl(e),r)})}else{t.eachItemGraphicEl(function(t){Xf(t,r)})}}ln(Zf,["dispose"]);vn(Zf,{registerWhenExtend:true});Zf.markUpdateMethod=function(t,e){Ff(t).updateMethod=e};function Yf(t){return Hf(t.model)}function qf(t){var e=t.model;var r=t.ecModel;var i=t.api;var a=t.payload;var n=e.pipelineContext.progressiveRender;var o=t.view;var s=a&&Ff(a).updateMethod;var l=n?"incrementalPrepareRender":s&&o[s]?s:"render";if(l!=="render"){o[l](e,r,i,a)}return Kf[l]}var Kf={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:true,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};var $f="\0__throttleOriginMethod";var Jf="\0__throttleRate";var Qf="\0__throttleType";function tc(t,e,r){var i;var a=0;var n=0;var o=null;var s;var l;var u;var h;e=e||0;function f(){n=(new Date).getTime();o=null;t.apply(l,u||[])}var c=function(){i=(new Date).getTime();l=this;u=arguments;var t=h||e;var c=h||r;h=null;s=i-(c?a:n)-t;clearTimeout(o);if(c){o=setTimeout(f,t)}else{if(s>=0){f()}else{o=setTimeout(f,-s)}}a=i};c.clear=function(){if(o){clearTimeout(o);o=null}};c.debounceNextCall=function(t){h=t};return c}function ec(t,e,r,i){var a=t[e];if(!a){return}var n=a[$f]||a;var o=a[Qf];var s=a[Jf];if(s!==r||o!==i){if(r==null||!i){return t[e]=n}a=t[e]=tc(n,r,i==="debounce");a[$f]=n;a[Qf]=i;a[Jf]=r}return a}function rc(t,e){var r=t[e];if(r&&r[$f]){t[e]=r[$f]}}var ic={createOnAllSeries:true,performRawSeries:true,reset:function(t,e){var r=t.getData();var i=(t.visualColorAccessPath||"itemStyle.color").split(".");var a=t.get(i)||t.getColorFromPalette(t.name,null,e.getSeriesCount());r.setVisual("color",a);if(!e.isSeriesFiltered(t)){if(typeof a==="function"&&!(a instanceof Ts)){r.each(function(e){r.setItemVisual(e,"color",a(t.getDataParams(e)))})}var n=function(t,e){var r=t.getItemModel(e);var a=r.get(i,true);if(a!=null){t.setItemVisual(e,"color",a)}};return{dataEach:r.hasItemOption?n:null}}}};var ac={toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var nc=function(t,e){var r=e.getModel("aria");if(!r.get("show")){return}else if(r.get("description")){t.setAttribute("aria-label",r.get("description"));return}var i=0;e.eachSeries(function(t,e){++i},this);var a=r.get("data.maxCount")||10;var n=r.get("series.maxCount")||10;var o=Math.min(i,n);var s;if(i<1){return}else{var l=v();if(l){s=f(c("general.withTitle"),{title:l})}else{s=c("general.withoutTitle")}var u=[];var h=i>1?"series.multiple.prefix":"series.single.prefix";s+=f(c(h),{seriesCount:i});e.eachSeries(function(t,e){if(e<o){var r;var n=t.get("name");var s="series."+(i>1?"multiple":"single")+".";r=c(n?s+"withName":s+"withoutName");r=f(r,{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:d(t.subType)});var l=t.getData();window.data=l;if(l.count()>a){r+=f(c("data.partialData"),{displayCnt:a})}else{r+=c("data.allData")}var h=[];for(var v=0;v<l.count();v++){if(v<a){var p=l.getName(v);var g=xf(l,v);h.push(f(p?c("data.withName"):c("data.withoutName"),{name:p,value:g}))}}r+=h.join(c("data.separator.middle"))+c("data.separator.end");u.push(r)}});s+=u.join(c("series.multiple.separator.middle"))+c("series.multiple.separator.end");t.setAttribute("aria-label",s)}function f(t,e){if(typeof t!=="string"){return t}var r=t;L(e,function(t,e){r=r.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)});return r}function c(t){var e=r.get(t);if(e==null){var i=t.split(".");var a=ac.aria;for(var n=0;n<i.length;++n){a=a[i[n]]}return a}else{return e}}function v(){var t=e.getModel("title").option;if(t&&t.length){t=t[0]}return t&&t.text}function d(t){return ac.series.typeNames[t]||""}};var oc=Math.PI;var sc=function(t,e){e=e||{};b(e,{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var r=new xs({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});var i=new Ms({shape:{startAngle:-oc/2,endAngle:-oc/2+.1,r:10},style:{stroke:e.color,lineCap:"round",lineWidth:5},zlevel:e.zlevel,z:10001});var a=new xs({style:{fill:"none",text:e.text,textPosition:"right",textDistance:10,textFill:e.textColor},zlevel:e.zlevel,z:10001});i.animateShape(true).when(1e3,{endAngle:oc*3/2}).start("circularInOut");i.animateShape(true).when(1e3,{startAngle:oc*3/2}).delay(300).start("circularInOut");var n=new fr;n.add(i);n.add(a);n.add(r);n.resize=function(){var e=t.getWidth()/2;var n=t.getHeight()/2;i.setShape({cx:e,cy:n});var o=i.shape.r;a.setShape({x:e-o,y:n-o,width:o*2,height:o*2});r.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})};n.resize();return n};function lc(t,e,r,i){this.ecInstance=t;this.api=e;this.unfinished;var r=this._dataProcessorHandlers=r.slice();var i=this._visualHandlers=i.slice();this._allHandlers=r.concat(i);this._stageTaskMap=rt()}var uc=lc.prototype;uc.restoreData=function(t,e){t.restoreData(e);this._stageTaskMap.each(function(t){var e=t.overallTask;e&&e.dirty()})};uc.getPerformArgs=function(t,e){if(!t.__pipeline){return}var r=this._pipelineMap.get(t.__pipeline.id);var i=r.context;var a=!e&&r.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>r.blockIndex;var n=a?r.step:null;var o=i&&i.modDataCount;var s=o!=null?Math.ceil(o/n):null;return{step:n,modBy:s,modDataCount:o}};uc.getPipeline=function(t){return this._pipelineMap.get(t)};uc.updateStreamModes=function(t,e){var r=this._pipelineMap.get(t.uid);var i=t.getData();var a=i.count();var n=r.progressiveEnabled&&e.incrementalPrepareRender&&a>=r.threshold;var o=t.get("large")&&a>=t.get("largeThreshold");var s=t.get("progressiveChunkMode")==="mod"?a:null;t.pipelineContext=r.context={progressiveRender:n,modDataCount:s,large:o}};uc.restorePipelines=function(t){var e=this;var r=e._pipelineMap=rt();t.eachSeries(function(t){var i=t.getProgressive();var a=t.uid;r.set(a,{id:a,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:i&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0});Sc(e,t,t.dataTask)})};uc.prepareStageTasks=function(){var t=this._stageTaskMap;var e=this.ecInstance.getModel();var r=this.api;L(this._allHandlers,function(i){var a=t.get(i.uid)||t.set(i.uid,[]);i.reset&&cc(this,i,a,e,r);i.overallReset&&vc(this,i,a,e,r)},this)};uc.prepareView=function(t,e,r,i){var a=t.renderTask;var n=a.context;n.model=e;n.ecModel=r;n.api=i;a.__block=!t.incrementalPrepareRender;Sc(this,e,a)};uc.performDataProcessorTasks=function(t,e){hc(this,this._dataProcessorHandlers,t,e,{block:true})};uc.performVisualTasks=function(t,e,r){hc(this,this._visualHandlers,t,e,r);
};function hc(t,e,r,i,a){a=a||{};var n;L(e,function(e,s){if(a.visualType&&a.visualType!==e.visualType){return}var l=t._stageTaskMap.get(e.uid);var u=l.seriesTaskMap;var h=l.overallTask;if(h){var f;var c=h.agentStubMap;c.each(function(t){if(o(a,t)){t.dirty();f=true}});f&&h.dirty();fc(h,i);var v=t.getPerformArgs(h,a.block);c.each(function(t){t.perform(v)});n|=h.perform(v)}else if(u){u.each(function(s,l){if(o(a,s)){s.dirty()}var u=t.getPerformArgs(s,a.block);u.skip=!e.performRawSeries&&r.isSeriesFiltered(s.context.model);fc(s,i);n|=s.perform(u)})}});function o(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}t.unfinished|=n}uc.performSeriesTasks=function(t){var e;t.eachSeries(function(t){e|=t.dataTask.perform()});this.unfinished|=e};uc.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})};var fc=uc.updatePayload=function(t,e){e!=="remain"&&(t.context.payload=e)};function cc(t,e,r,i,a){var n=r.seriesTaskMap||(r.seriesTaskMap=rt());var o=e.seriesType;var s=e.getTargetSeries;if(e.createOnAllSeries){i.eachRawSeries(l)}else if(o){i.eachRawSeriesByType(o,l)}else if(s){s(i,a).each(l)}function l(r){var o=r.uid;var s=n.get(o)||n.set(o,Sf({plan:yc,reset:xc,count:bc}));s.context={model:r,ecModel:i,api:a,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:t};Sc(t,r,s)}var u=t._pipelineMap;n.each(function(t,e){if(!u.get(e)){t.dispose();n.removeKey(e)}})}function vc(t,e,r,i,a){var n=r.overallTask=r.overallTask||Sf({reset:dc});n.context={ecModel:i,api:a,overallReset:e.overallReset,scheduler:t};var o=n.agentStubMap=n.agentStubMap||rt();var s=e.seriesType;var l=e.getTargetSeries;var u=true;var h=e.modifyOutputEnd;if(s){i.eachRawSeriesByType(s,f)}else if(l){l(i,a).each(f)}else{u=false;L(i.getSeries(),f)}function f(e){var r=e.uid;var i=o.get(r);if(!i){i=o.set(r,Sf({reset:pc,onDirty:mc}));n.dirty()}i.context={model:e,overallProgress:u,modifyOutputEnd:h};i.agent=n;i.__block=u;Sc(t,e,i)}var c=t._pipelineMap;o.each(function(t,e){if(!c.get(e)){t.dispose();n.dirty();o.removeKey(e)}})}function dc(t){t.overallReset(t.ecModel,t.api,t.payload)}function pc(t,e){return t.overallProgress&&gc}function gc(){this.agent.dirty();this.getDownstream().dirty()}function mc(){this.agent&&this.agent.dirty()}function yc(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)}function xc(t){if(t.useClearVisual){t.data.clearAllVisual()}var e=t.resetDefines=Ga(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?k(e,function(t,e){return wc(e)}):_c}var _c=wc(0);function wc(t){return function(e,r){var i=r.data;var a=r.resetDefines[t];if(a&&a.dataEach){for(var n=e.start;n<e.end;n++){a.dataEach(i,n)}}else if(a&&a.progress){a.progress(e,i)}}}function bc(t){return t.data.count()}function Sc(t,e,r){var i=e.uid;var a=t._pipelineMap.get(i);!a.head&&(a.head=r);a.tail&&a.tail.pipe(r);a.tail=r;r.__idxInPipeline=a.count++;r.__pipeline=a}lc.wrapStageHandler=function(t,e){if(B(t)){t={overallReset:t,seriesType:Mc(t)}}t.uid=El("stageHandler");e&&(t.visualType=e);return t};function Mc(t){Dc=null;try{t(Ic,Tc)}catch(e){}return Dc}var Ic={};var Tc={};var Dc;Ac(Ic,mh);Ac(Tc,Dh);Ic.eachSeriesByType=Ic.eachRawSeriesByType=function(t){Dc=t};Ic.eachComponent=function(t){if(t.mainType==="series"&&t.subType){Dc=t.subType}};function Ac(t,e){for(var r in e.prototype){t[r]=at}}var Cc=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];var Lc={color:Cc,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Cc]};var kc="#eee";var Pc=function(){return{axisLine:{lineStyle:{color:kc}},axisTick:{lineStyle:{color:kc}},axisLabel:{textStyle:{color:kc}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:kc}}}};var Nc=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"];var Oc={color:Nc,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:kc},crossStyle:{color:kc}}},legend:{textStyle:{color:kc}},textStyle:{color:kc},title:{textStyle:{color:kc}},toolbox:{iconStyle:{normal:{borderColor:kc}}},dataZoom:{textStyle:{color:kc}},visualMap:{textStyle:{color:kc}},timeline:{lineStyle:{color:kc},itemStyle:{normal:{color:Nc[1]}},label:{normal:{textStyle:{color:kc}}},controlStyle:{normal:{color:kc,borderColor:kc}}},timeAxis:Pc(),logAxis:Pc(),valueAxis:Pc(),categoryAxis:Pc(),line:{symbol:"circle"},graph:{color:Nc},gauge:{title:{textStyle:{color:kc}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};Oc.categoryAxis.splitLine.show=false;Bu.extend({type:"dataset",defaultOption:{seriesLayoutBy:th,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){ah(this)}});Vf.extend({type:"dataset"});var Ec=K;var Rc=L;var zc=B;var Bc=G;var Vc=Bu.parseClassType;var Gc="4.1.0";var Wc={zrender:"4.0.4"};var Fc=1;var Hc=1e3;var Zc=5e3;var Uc=1e3;var Xc=2e3;var jc=3e3;var Yc=4e3;var qc=5e3;var Kc={PROCESSOR:{FILTER:Hc,STATISTIC:Zc},VISUAL:{LAYOUT:Uc,GLOBAL:Xc,CHART:jc,COMPONENT:Yc,BRUSH:qc}};var $c="__flagInMainProcess";var Jc="__optionUpdated";var Qc=/^[a-zA-Z0-9_]+$/;function tv(t){return function(e,r,i){e=e&&e.toLowerCase();Rt.prototype[t].call(this,e,r,i)}}function ev(){Rt.call(this)}ev.prototype.on=tv("on");ev.prototype.off=tv("off");ev.prototype.one=tv("one");A(ev,Rt);function rv(t,r,i){i=i||{};if(typeof r==="string"){r=Lv[r]}this.id;this.group;this._dom=t;var a="canvas";if(e){a=(typeof window==="undefined"?global:window).__ECHARTS__DEFAULT__RENDERER__||a}var n=this._zr=Ca(t,{renderer:i.renderer||a,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height});this._throttledZrFlush=tc(E(n.flush,n),17);var r=y(r);r&&nf(r,true);this._theme=r;this._chartsViews=[];this._chartsMap={};this._componentsViews=[];this._componentsMap={};this._coordSysMgr=new Ch;var o=this._api=Sv(this);function s(t,e){return t.__prio-e.__prio}wr(Cv,s);wr(Tv,s);this._scheduler=new lc(this,o,Tv,Cv);Rt.call(this);this._messageCenter=new ev;this._initEvents();this.resize=E(this.resize,this);this._pendingActions=[];n.animation.on("frame",this._onframe,this);cv(n,this);Q(this)}var iv=rv.prototype;iv._onframe=function(){if(this._disposed){return}var t=this._scheduler;if(this[Jc]){var e=this[Jc].silent;this[$c]=true;ov(this);nv.update.call(this);this[$c]=false;this[Jc]=false;hv.call(this,e);fv.call(this,e)}else if(t.unfinished){var r=Fc;var i=this._model;var a=this._api;t.unfinished=false;do{var n=+new Date;t.performSeriesTasks(i);t.performDataProcessorTasks(i);lv(this,i);t.performVisualTasks(i);mv(this,this._model,a,"remain");r-=+new Date-n}while(r>0&&t.unfinished);if(!t.unfinished){this._zr.flush()}}};iv.getDom=function(){return this._dom};iv.getZr=function(){return this._zr};iv.setOption=function(t,r,i){if(e){Ec(!this[$c],"`setOption` should not be called during main process.")}var a;if(Bc(r)){i=r.lazyUpdate;a=r.silent;r=r.notMerge}this[$c]=true;if(!this._model||r){var n=new Eh(this._api);var o=this._theme;var s=this._model=new mh(null,null,o,n);s.scheduler=this._scheduler;s.init(null,null,o,n)}this._model.setOption(t,Dv);if(i){this[Jc]={silent:a};this[$c]=false}else{ov(this);nv.update.call(this);this._zr.flush();this[Jc]=false;this[$c]=false;hv.call(this,a);fv.call(this,a)}};iv.setTheme=function(){console.log("ECharts#setTheme() is DEPRECATED in ECharts 3.0")};iv.getModel=function(){return this._model};iv.getOption=function(){return this._model&&this._model.getOption()};iv.getWidth=function(){return this._zr.getWidth()};iv.getHeight=function(){return this._zr.getHeight()};iv.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1};iv.getRenderedCanvas=function(t){if(!n.canvasSupported){return}t=t||{};t.pixelRatio=t.pixelRatio||1;t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor");var e=this._zr;return e.painter.getRenderedCanvas(t)};iv.getSvgDataUrl=function(){if(!n.svgSupported){return}var t=this._zr;var e=t.storage.getDisplayList();L(e,function(t){t.stopAnimation(true)});return t.painter.pathToDataUrl()};iv.getDataURL=function(t){t=t||{};var e=t.excludeComponents;var r=this._model;var i=[];var a=this;Rc(e,function(t){r.eachComponent({mainType:t},function(t){var e=a._componentsMap[t.__viewId];if(!e.group.ignore){i.push(e);e.group.ignore=true}})});var n=this._zr.painter.getType()==="svg"?this.getSvgDataUrl():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));Rc(i,function(t){t.group.ignore=false});return n};iv.getConnectedDataURL=function(t){if(!n.canvasSupported){return}var e=this.group;var r=Math.min;var i=Math.max;var a=Infinity;if(Nv[e]){var o=a;var s=a;var l=-a;var u=-a;var h=[];var f=t&&t.pixelRatio||1;L(Pv,function(a,n){if(a.group===e){var f=a.getRenderedCanvas(y(t));var c=a.getDom().getBoundingClientRect();o=r(c.left,o);s=r(c.top,s);l=i(c.right,l);u=i(c.bottom,u);h.push({dom:f,left:c.left,top:c.top})}});o*=f;s*=f;l*=f;u*=f;var c=l-o;var v=u-s;var d=S();d.width=c;d.height=v;var p=Ca(d);Rc(h,function(t){var e=new zi({style:{x:t.left*f-o,y:t.top*f-s,image:t.dom}});p.add(e)});p.refreshImmediately();return d.toDataURL("image/"+(t&&t.type||"png"))}else{return this.getDataURL(t)}};iv.convertToPixel=R(av,"convertToPixel");iv.convertFromPixel=R(av,"convertFromPixel");function av(t,r,i){var a=this._model;var n=this._coordSysMgr.getCoordinateSystems();var o;r=Qa(a,r);for(var s=0;s<n.length;s++){var l=n[s];if(l[t]&&(o=l[t](a,r,i))!=null){return o}}if(e){console.warn("No coordinate system that supports "+t+" found by the given finder.")}}iv.containPixel=function(t,r){var i=this._model;var a;t=Qa(i,t);L(t,function(t,i){i.indexOf("Models")>=0&&L(t,function(t){var n=t.coordinateSystem;if(n&&n.containPoint){a|=!!n.containPoint(r)}else if(i==="seriesModels"){var o=this._chartsMap[t.__viewId];if(o&&o.containPoint){a|=o.containPoint(r,t)}else{if(e){console.warn(i+": "+(o?"The found component do not support containPoint.":"No view mapping to the found component."))}}}else{if(e){console.warn(i+": containPoint is not supported")}}},this)},this);return!!a};iv.getVisual=function(t,r){var i=this._model;t=Qa(i,t,{defaultMainType:"series"});var a=t.seriesModel;if(e){if(!a){console.warn("There is no specified seires model")}}var n=a.getData();var o=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?n.indexOfRawIndex(t.dataIndex):null;return o!=null?n.getItemVisual(o,r):n.getVisual(r)};iv.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]};iv.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var nv={prepareAndUpdate:function(t){ov(this);nv.update.call(this,t)},update:function(t){var e=this._model;var r=this._api;var i=this._zr;var a=this._coordSysMgr;var o=this._scheduler;if(!e){return}o.restoreData(e,t);o.performSeriesTasks(e);a.create(e,r);o.performDataProcessorTasks(e,t);lv(this,e);a.update(e,r);dv(e);o.performVisualTasks(e,t);pv(this,e,r,t);var s=e.get("backgroundColor")||"transparent";if(!n.canvasSupported){var l=Te(s);s=ze(l,"rgb");if(l[3]===0){s="transparent"}}else{i.setBackgroundColor(s)}yv(e,r)},updateTransform:function(t){var e=this._model;var r=this;var i=this._api;if(!e){return}var a=[];e.eachComponent(function(n,o){var s=r.getViewOfComponentModel(o);if(s&&s.__alive){if(s.updateTransform){var l=s.updateTransform(o,e,i,t);l&&l.update&&a.push(s)}else{a.push(s)}}});var n=rt();e.eachSeries(function(a){var o=r._chartsMap[a.__viewId];if(o.updateTransform){var s=o.updateTransform(a,e,i,t);s&&s.update&&n.set(a.uid,1)}else{n.set(a.uid,1)}});dv(e);this._scheduler.performVisualTasks(e,t,{setDirty:true,dirtyMap:n});mv(r,e,i,t,n);yv(e,this._api)},updateView:function(t){var e=this._model;if(!e){return}Zf.markUpdateMethod(t,"updateView");dv(e);this._scheduler.performVisualTasks(e,t,{setDirty:true});pv(this,this._model,this._api,t);yv(e,this._api)},updateVisual:function(t){nv.update.call(this,t)},updateLayout:function(t){nv.update.call(this,t)}};function ov(t){var e=t._model;var r=t._scheduler;r.restorePipelines(e);r.prepareStageTasks();vv(t,"component",e,r);vv(t,"chart",e,r);r.plan()}function sv(t,e,r,i,a){var n=t._model;if(!i){Rc(t._componentsViews.concat(t._chartsViews),u);return}var o={};o[i+"Id"]=r[i+"Id"];o[i+"Index"]=r[i+"Index"];o[i+"Name"]=r[i+"Name"];var s={mainType:i,query:o};a&&(s.subType=a);var l=r.excludeSeriesId;if(l!=null){l=rt(Ga(l))}n&&n.eachComponent(s,function(e){if(!l||l.get(e.id)==null){u(t[i==="series"?"_chartsMap":"_componentsMap"][e.__viewId])}},t);function u(i){i&&i.__alive&&i[e]&&i[e](i.__model,n,t._api,r)}}iv.resize=function(t){if(e){Ec(!this[$c],"`resize` should not be called during main process.")}this._zr.resize(t);var r=this._model;this._loadingFX&&this._loadingFX.resize();if(!r){return}var i=r.resetOption("media");var a=t&&t.silent;this[$c]=true;i&&ov(this);nv.update.call(this);this[$c]=false;hv.call(this,a);fv.call(this,a)};function lv(t,e){var r=t._chartsMap;var i=t._scheduler;e.eachSeries(function(t){i.updateStreamModes(t,r[t.__viewId])})}iv.showLoading=function(t,r){if(Bc(t)){r=t;t=""}t=t||"default";this.hideLoading();if(!kv[t]){if(e){console.warn("Loading effects "+t+" not exists.")}return}var i=kv[t](this._api,r);var a=this._zr;this._loadingFX=i;a.add(i)};iv.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX);this._loadingFX=null};iv.makeActionFromEvent=function(t){var e=w({},t);e.type=Iv[t.type];return e};iv.dispatchAction=function(t,e){if(!Bc(e)){e={silent:!!e}}if(!Mv[t.type]){return}if(!this._model){return}if(this[$c]){this._pendingActions.push(t);return}uv.call(this,t,e.silent);if(e.flush){this._zr.flush(true)}else if(e.flush!==false&&n.browser.weChat){this._throttledZrFlush()}hv.call(this,e.silent);fv.call(this,e.silent)};function uv(t,e){var r=t.type;var i=t.escapeConnect;var a=Mv[r];var n=a.actionInfo;var o=(n.update||"update").split(":");var s=o.pop();o=o[0]!=null&&Vc(o[0]);this[$c]=true;var l=[t];var u=false;if(t.batch){u=true;l=k(t.batch,function(e){e=b(w({},e),t);e.batch=null;return e})}var h=[];var f;var c=r==="highlight"||r==="downplay";Rc(l,function(t){f=a.action(t,this._model,this._api);f=f||w({},t);f.type=n.event||f.type;h.push(f);if(c){sv(this,s,t,"series")}else if(o){sv(this,s,t,o.main,o.sub)}},this);if(s!=="none"&&!c&&!o){if(this[Jc]){ov(this);nv.update.call(this,t);this[Jc]=false}else{nv[s].call(this,t)}}if(u){f={type:n.event||r,escapeConnect:i,batch:h}}else{f=h[0]}this[$c]=false;!e&&this._messageCenter.trigger(f.type,f)}function hv(t){var e=this._pendingActions;while(e.length){var r=e.shift();uv.call(this,r,t)}}function fv(t){!t&&this.trigger("updated")}function cv(t,e){t.on("rendered",function(){e.trigger("rendered");if(t.animation.isFinished()&&!e[Jc]&&!e._scheduler.unfinished&&!e._pendingActions.length){e.trigger("finished")}})}iv.appendData=function(t){var r=t.seriesIndex;var i=this.getModel();var a=i.getSeriesByIndex(r);if(e){Ec(t.data&&a)}a.appendData(t);this._scheduler.unfinished=true};iv.on=tv("on");iv.off=tv("off");iv.one=tv("one");function vv(t,r,i,a){var n=r==="component";var o=n?t._componentsViews:t._chartsViews;var s=n?t._componentsMap:t._chartsMap;var l=t._zr;var u=t._api;for(var h=0;h<o.length;h++){o[h].__alive=false}n?i.eachComponent(function(t,e){t!=="series"&&f(e)}):i.eachSeries(f);function f(t){var r="_ec_"+t.id+"_"+t.type;var h=s[r];if(!h){var f=Vc(t.type);var c=n?Vf.getClass(f.main,f.sub):Zf.getClass(f.sub);if(e){Ec(c,f.sub+" does not exist.")}h=new c;h.init(i,u);s[r]=h;o.push(h);l.add(h.group)}t.__viewId=h.__id=r;h.__alive=true;h.__model=t;h.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex};!n&&a.prepareView(h,t,i,u)}for(var h=0;h<o.length;){var c=o[h];if(!c.__alive){!n&&c.renderTask.dispose();l.remove(c.group);c.dispose(i,u);o.splice(h,1);delete s[c.__id];c.__id=c.group.__ecComponentInfo=null}else{h++}}}function dv(t){t.clearColorPalette();t.eachSeries(function(t){t.clearColorPalette()})}function pv(t,e,r,i){gv(t,e,r,i);Rc(t._chartsViews,function(t){t.__alive=false});mv(t,e,r,i);Rc(t._chartsViews,function(t){if(!t.__alive){t.remove(e,r)}})}function gv(t,e,r,i,a){Rc(a||t._componentsViews,function(t){var a=t.__model;t.render(a,e,r,i);bv(a,t)})}function mv(t,e,r,i,a){var n=t._scheduler;var o;e.eachSeries(function(e){var r=t._chartsMap[e.__viewId];r.__alive=true;var s=r.renderTask;n.updatePayload(s,i);if(a&&a.get(e.uid)){s.dirty()}o|=s.perform(n.getPerformArgs(s));r.group.silent=!!e.get("silent");bv(e,r);wv(e,r)});n.unfinished|=o;_v(t._zr,e);nc(t._zr.dom,e)}function yv(t,e){Rc(Av,function(r){r(t,e)})}var xv=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];iv._initEvents=function(){Rc(xv,function(t){this._zr.on(t,function(e){var r=this.getModel();var i=e.target;var a;if(t==="globalout"){a={}}else if(i&&i.dataIndex!=null){var n=i.dataModel||r.getSeriesByIndex(i.seriesIndex);a=n&&n.getDataParams(i.dataIndex,i.dataType)||{}}else if(i&&i.eventData){a=w({},i.eventData)}if(a){a.event=e;a.type=t;this.trigger(t,a)}},this)},this);Rc(Iv,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)};iv.isDisposed=function(){return this._disposed};iv.clear=function(){this.setOption({series:[]},true)};iv.dispose=function(){if(this._disposed){if(e){console.warn("Instance "+this.id+" has been disposed")}return}this._disposed=true;en(this.getDom(),Rv,"");var t=this._api;var r=this._model;Rc(this._componentsViews,function(e){e.dispose(r,t)});Rc(this._chartsViews,function(e){e.dispose(r,t)});this._zr.dispose();delete Pv[this.id]};A(rv,Rt);function _v(t,e){var r=t.storage;var i=0;r.traverse(function(t){if(!t.isGroup){i++}});if(i>e.get("hoverLayerThreshold")&&!n.node){r.traverse(function(t){if(!t.isGroup){t.useHoverLayer=true}})}}function wv(t,r){var i=t.get("blendMode")||null;if(e){if(!n.canvasSupported&&i&&i!=="source-over"){console.warn("Only canvas support blendMode")}}r.group.traverse(function(t){if(!t.isGroup){if(t.style.blend!==i){t.setStyle("blend",i)}}if(t.eachPendingDisplayable){t.eachPendingDisplayable(function(t){t.setStyle("blend",i)})}})}function bv(t,e){var r=t.get("z");var i=t.get("zlevel");e.group.traverse(function(t){if(t.type!=="group"){r!=null&&(t.z=r);i!=null&&(t.zlevel=i)}})}function Sv(t){var e=t._coordSysMgr;return w(new Dh(t),{getCoordinateSystems:E(e.getCoordinateSystems,e),getComponentByElement:function(e){while(e){var r=e.__ecComponentInfo;if(r!=null){return t._model.getComponent(r.mainType,r.index)}e=e.parent}}})}var Mv={};var Iv={};var Tv=[];var Dv=[];var Av=[];var Cv=[];var Lv={};var kv={};var Pv={};var Nv={};var Ov=new Date-0;var Ev=new Date-0;var Rv="_echarts_instance_";var zv={};function Bv(t){var e=0;var r=1;var i=2;var a="__connectUpdateStatus";function n(t,e){for(var r=0;r<t.length;r++){var i=t[r];i[a]=e}}Rc(Iv,function(o,s){t._messageCenter.on(s,function(o){if(Nv[t.group]&&t[a]!==e){if(o&&o.escapeConnect){return}var s=t.makeActionFromEvent(o);var l=[];Rc(Pv,function(e){if(e!==t&&e.group===t.group){l.push(e)}});n(l,e);Rc(l,function(t){if(t[a]!==r){t.dispatchAction(s)}});n(l,i)}})})}function Vv(t,r,i){if(e){if(Aa.replace(".","")-0<Wc.zrender.replace(".","")-0){throw new Error("zrender/src "+Aa+" is too old for ECharts "+Gc+". Current version need ZRender "+Wc.zrender+"+")}if(!t){throw new Error("Initialize failed: invalid dom.")}}var a=Zv(t);if(a){if(e){console.warn("There is a chart instance already initialized on the dom.")}return a}if(e){if(H(t)&&t.nodeName.toUpperCase()!=="CANVAS"&&(!t.clientWidth&&(!i||i.width==null)||!t.clientHeight&&(!i||i.height==null))){console.warn("Can't get dom width or height")}}var n=new rv(t,r,i);n.id="ec_"+Ov++;Pv[n.id]=n;en(t,Rv,n.id);Bv(n);return n}function Gv(t){if(z(t)){var e=t;t=null;Rc(e,function(e){if(e.group!=null){t=e.group}});t=t||"g_"+Ev++;Rc(e,function(e){e.group=t})}Nv[t]=true;return t}function Wv(t){Nv[t]=false}var Fv=Wv;function Hv(t){if(typeof t==="string"){t=Pv[t]}else if(!(t instanceof rv)){t=Zv(t)}if(t instanceof rv&&!t.isDisposed()){t.dispose()}}function Zv(t){return Pv[rn(t,Rv)]}function Uv(t){return Pv[t]}function Xv(t,e){Lv[t]=e}function jv(t){Dv.push(t)}function Yv(t,e){ed(Tv,t,e,Hc)}function qv(t){Av.push(t)}function Kv(t,e,r){if(typeof e==="function"){r=e;e=""}var i=Bc(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase();e=t.event;Ec(Qc.test(i)&&Qc.test(e));if(!Mv[i]){Mv[i]={action:r,actionInfo:t}}Iv[e]=i}function $v(t,e){Ch.register(t,e)}function Jv(t){var e=Ch.get(t);if(e){return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()}}function Qv(t,e){ed(Cv,t,e,Uc,"layout")}function td(t,e){ed(Cv,t,e,jc,"visual")}function ed(t,r,i,a,n){if(zc(r)||Bc(r)){i=r;r=a}if(e){if(isNaN(r)||r==null){throw new Error("Illegal priority")}Rc(t,function(t){Ec(t.__raw!==i)})}var o=lc.wrapStageHandler(i,n);o.__prio=r;o.__raw=i;t.push(o);return o}function rd(t,e){kv[t]=e}function id(t){return Bu.extend(t)}function ad(t){return Vf.extend(t)}function nd(t){return Lf.extend(t)}function od(t){return Zf.extend(t)}function sd(t){m("createCanvas",t)}function ld(t,e,r){if(e.geoJson&&!e.features){r=e.specialAreas;e=e.geoJson}if(typeof e==="string"){e=typeof JSON!=="undefined"&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")()}zv[t]={geoJson:e,specialAreas:r}}function ud(t){return zv[t]}td(Xc,ic);jv(nf);Yv(Zc,of);rd("default",sc);Kv({type:"highlight",event:"highlight",update:"highlight"},at);Kv({type:"downplay",event:"downplay",update:"downplay"},at);Xv("light",Lc);Xv("dark",Oc);var hd={};function fd(t){return t}function cd(t,e,r,i,a){this._old=t;this._new=e;this._oldKeyGetter=r||fd;this._newKeyGetter=i||fd;this.context=a}cd.prototype={constructor:cd,add:function(t){this._add=t;return this},update:function(t){this._update=t;return this},remove:function(t){this._remove=t;return this},execute:function(){var t=this._old;var e=this._new;var r={};var i={};var a=[];var n=[];var o;vd(t,r,a,"_oldKeyGetter",this);vd(e,i,n,"_newKeyGetter",this);for(o=0;o<t.length;o++){var s=a[o];var l=i[s];if(l!=null){var u=l.length;if(u){u===1&&(i[s]=null);l=l.unshift()}else{i[s]=null}this._update&&this._update(l,o)}else{this._remove&&this._remove(o)}}for(var o=0;o<n.length;o++){var s=n[o];if(i.hasOwnProperty(s)){var l=i[s];if(l==null){continue}if(!l.length){this._add&&this._add(l)}else{for(var h=0,u=l.length;h<u;h++){this._add&&this._add(l[h])}}}}}};function vd(t,e,r,i,a){for(var n=0;n<t.length;n++){var o="_ec_"+a[i](t[n],n);var s=e[o];if(s==null){r.push(o);e[o]=n}else{if(!s.length){e[o]=s=[s]}s.push(n)}}}var dd=rt(["tooltip","label","itemName","itemId","seriesName"]);function pd(t){var r={};var i=r.encode={};var a=rt();var n=[];var o=[];L(t.dimensions,function(r){var s=t.getDimensionInfo(r);var l=s.coordDim;if(l){if(e){K(dd.get(l)==null)}var u=i[l];if(!i.hasOwnProperty(l)){u=i[l]=[]}u[s.coordDimIndex]=r;if(!s.isExtraCoord){a.set(l,1);if(md(s.type)){n[0]=r}}if(s.defaultTooltip){o.push(r)}}dd.each(function(t,e){var r=i[e];if(!i.hasOwnProperty(e)){r=i[e]=[]}var a=s.otherDims[e];if(a!=null&&a!==false){r[a]=s.name}})});var s=[];var l={};a.each(function(t,e){var r=i[e];l[e]=r[0];s=s.concat(r)});r.dataDimsOnCoord=s;r.encodeFirstDimNotExtra=l;var u=i.label;if(u&&u.length){n=u.slice()}var h=i.tooltip;if(h&&h.length){o=h.slice()}else if(!o.length){o=n.slice()}i.defaultedLabel=n;i.defaultedTooltip=o;return r}function gd(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function md(t){return!(t==="ordinal"||t==="time")}var yd=G;var xd="undefined";var _d="e\0\0";var wd={"float":typeof Float64Array===xd?Array:Float64Array,"int":typeof Int32Array===xd?Array:Int32Array,ordinal:Array,number:Array,time:Array};var bd=typeof Uint32Array===xd?Array:Uint32Array;var Sd=typeof Uint16Array===xd?Array:Uint16Array;function Md(t){return t._rawCount>65535?bd:Sd}function Id(t){var e=t.constructor;return e===Array?t.slice():new e(t)}var Td=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"];var Dd=["_extent","_approximateExtent","_rawExtent"];function Ad(t,e){L(Td.concat(e.__wrappedMethods||[]),function(r){if(e.hasOwnProperty(r)){t[r]=e[r]}});t.__wrappedMethods=e.__wrappedMethods;L(Dd,function(r){t[r]=y(e[r])});t._calculationInfo=w(e._calculationInfo)}var Cd=function(t,e){t=t||["x","y"];var r={};var i=[];var a={};for(var n=0;n<t.length;n++){var o=t[n];if(V(o)){o={name:o}}var s=o.name;o.type=o.type||"float";if(!o.coordDim){o.coordDim=s;o.coordDimIndex=0}o.otherDims=o.otherDims||{};i.push(s);r[s]=o;o.index=n;if(o.createInvertedIndices){a[s]=[]}}this.dimensions=i;this._dimensionInfos=r;this.hostModel=e;this.dataType;this._indices=null;this._count=0;this._rawCount=0;this._storage={};this._nameList=[];this._idList=[];this._optionModels=[];this._visual={};this._layout={};this._itemVisuals=[];this.hasItemVisual={};this._itemLayouts=[];this._graphicEls=[];this._chunkSize=1e5;this._chunkCount=0;this._rawData;this._rawExtent={};this._extent={};this._approximateExtent={};this._dimensionsSummary=pd(this);this._invertedIndicesMap=a;this._calculationInfo={}};var Ld=Cd.prototype;Ld.type="list";Ld.hasItemOption=true;Ld.getDimension=function(t){if(!isNaN(t)){t=this.dimensions[t]||t}return t};Ld.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]};Ld.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()};Ld.mapDimension=function(t,e){var r=this._dimensionsSummary;if(e==null){return r.encodeFirstDimNotExtra[t]}var i=r.encode[t];return e===true?(i||[]).slice():i&&i[e]};Ld.initData=function(t,r,i){var a=rh.isInstance(t)||C(t);if(a){t=new lf(t,this.dimensions.length)}if(e){if(!a&&(typeof t.getItem!="function"||typeof t.count!="function")){throw new Error("Inavlid data provider.")}}this._rawData=t;this._storage={};this._indices=null;this._nameList=r||[];this._idList=[];this._nameRepeatCount={};if(!i){this.hasItemOption=false}this.defaultDimValueGetter=gf[this._rawData.getSource().sourceFormat];this._dimValueGetter=i=i||this.defaultDimValueGetter;this._rawExtent={};this._initDataFromProvider(0,t.count());if(t.pure){this.hasItemOption=false}};Ld.getProvider=function(){return this._rawData};Ld.appendData=function(t){if(e){K(!this._indices,"appendData can only be called on raw data.")}var r=this._rawData;var i=this.count();r.appendData(t);var a=r.count();if(!r.persistent){a+=i}this._initDataFromProvider(i,a)};Ld._initDataFromProvider=function(t,e){if(t>=e){return}var r=this._chunkSize;var i=this._rawData;var a=this._storage;var n=this.dimensions;var o=n.length;var s=this._dimensionInfos;var l=this._nameList;var u=this._idList;var h=this._rawExtent;var f=this._nameRepeatCount={};var c;var v=this._chunkCount;var d=v-1;for(var p=0;p<o;p++){var g=n[p];if(!h[g]){h[g]=Gd()}var m=s[g];if(m.otherDims.itemName===0){c=this._nameDimIdx=p}if(m.otherDims.itemId===0){this._idDimIdx=p}var y=wd[m.type];if(!a[g]){a[g]=[]}var x=a[g][d];if(x&&x.length<r){var _=new y(Math.min(e-d*r,r));for(var w=0;w<x.length;w++){_[w]=x[w]}a[g][d]=_}for(var b=v*r;b<e;b+=r){a[g].push(new y(Math.min(e-b,r)))}this._chunkCount=a[g].length}var S=new Array(o);for(var M=t;M<e;M++){S=i.getItem(M,S);var I=Math.floor(M/r);var T=M%r;for(var b=0;b<o;b++){var g=n[b];var D=a[g][I];var A=this._dimValueGetter(S,g,M,b);D[T]=A;var C=h[g];if(A<C[0]){C[0]=A}if(A>C[1]){C[1]=A}}if(!i.pure){var L=l[M];if(S&&L==null){if(S.name!=null){l[M]=L=S.name}else if(c!=null){var k=n[c];var P=a[k][I];if(P){L=P[T];var N=s[k].ordinalMeta;if(N&&N.categories.length){L=N.categories[L]}}}}var O=S==null?null:S.id;if(O==null&&L!=null){f[L]=f[L]||0;O=L;if(f[L]>0){O+="__ec__"+f[L]}f[L]++}O!=null&&(u[M]=O)}}if(!i.persistent&&i.clean){i.clean()}this._rawCount=this._count=e;this._extent={};kd(this)};function kd(t){var e=t._invertedIndicesMap;L(e,function(r,i){var a=t._dimensionInfos[i];var n=a.ordinalMeta;if(n){r=e[i]=new bd(n.categories.length);for(var o=0;o<r.length;o++){r[o]=NaN}for(var o=0;o<t._count;o++){r[t.get(i,o)]=o}}})}function Pd(t,e,r){var i;if(e!=null){var a=t._chunkSize;var n=Math.floor(r/a);var o=r%a;var s=t.dimensions[e];var l=t._storage[s][n];if(l){i=l[o];var u=t._dimensionInfos[s].ordinalMeta;if(u&&u.categories.length){i=u.categories[i]}}}return i}Ld.count=function(){return this._count};Ld.getIndices=function(){var t;var e=this._indices;if(e){var r=e.constructor;var i=this._count;if(r===Array){t=new r(i);for(var a=0;a<i;a++){t[a]=e[a]}}else{t=new r(e.buffer,0,i)}}else{var r=Md(this);var t=new r(this.count());for(var a=0;a<t.length;a++){t[a]=a}}return t};Ld.get=function(t,e){if(!(e>=0&&e<this._count)){return NaN}var r=this._storage;if(!r[t]){return NaN}e=this.getRawIndex(e);var i=Math.floor(e/this._chunkSize);var a=e%this._chunkSize;var n=r[t][i];var o=n[a];return o};Ld.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount)){return NaN}var r=this._storage[t];if(!r){return NaN}var i=Math.floor(e/this._chunkSize);var a=e%this._chunkSize;var n=r[i];return n[a]};Ld._getFast=function(t,e){var r=Math.floor(e/this._chunkSize);var i=e%this._chunkSize;var a=this._storage[t][r];return a[i]};Ld.getValues=function(t,e){var r=[];if(!z(t)){e=t;t=this.dimensions}for(var i=0,a=t.length;i<a;i++){r.push(this.get(t[i],e))}return r};Ld.hasValue=function(t){var e=this._dimensionsSummary.dataDimsOnCoord;var r=this._dimensionInfos;for(var i=0,a=e.length;i<a;i++){if(r[e[i]].type!=="ordinal"&&isNaN(this.get(e[i],t))){return false}}return true};Ld.getDataExtent=function(t){t=this.getDimension(t);var e=this._storage[t];var r=Gd();if(!e){return r}var i=this.count();var a=!this._indices;var n;if(a){return this._rawExtent[t].slice()}n=this._extent[t];if(n){return n.slice()}n=r;var o=n[0];var s=n[1];for(var l=0;l<i;l++){var u=this._getFast(t,this.getRawIndex(l));u<o&&(o=u);u>s&&(s=u)}n=[o,s];this._extent[t]=n;return n};Ld.getApproximateExtent=function(t){t=this.getDimension(t);return this._approximateExtent[t]||this.getDataExtent(t)};Ld.setApproximateExtent=function(t,e){e=this.getDimension(e);this._approximateExtent[e]=t.slice()};Ld.getCalculationInfo=function(t){return this._calculationInfo[t]};Ld.setCalculationInfo=function(t,e){yd(t)?w(this._calculationInfo,t):this._calculationInfo[t]=e};Ld.getSum=function(t){var e=this._storage[t];var r=0;if(e){for(var i=0,a=this.count();i<a;i++){var n=this.get(t,i);if(!isNaN(n)){r+=n}}}return r};Ld.getMedian=function(t){var e=[];this.each(t,function(t,r){if(!isNaN(t)){e.push(t)}});var r=[].concat(e).sort(function(t,e){return t-e});var i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2};Ld.rawIndexOf=function(t,r){var i=t&&this._invertedIndicesMap[t];if(e){if(!i){throw new Error("Do not supported yet")}}var a=i[r];if(a==null||isNaN(a)){return-1}return a};Ld.indexOfName=function(t){for(var e=0,r=this.count();e<r;e++){if(this.getName(e)===t){return e}}return-1};Ld.indexOfRawIndex=function(t){if(!this._indices){return t}if(t>=this._rawCount||t<0){return-1}var e=this._indices;var r=e[t];if(r!=null&&r<this._count&&r===t){return t}var i=0;var a=this._count-1;while(i<=a){var n=(i+a)/2|0;if(e[n]<t){i=n+1}else if(e[n]>t){a=n-1}else{return n}}return-1};Ld.indicesOfNearest=function(t,e,r){var i=this._storage;var a=i[t];var n=[];if(!a){return n}if(r==null){r=Infinity}var o=Number.MAX_VALUE;var s=-1;for(var l=0,u=this.count();l<u;l++){var h=e-this.get(t,l);var f=Math.abs(h);if(h<=r&&f<=o){if(f<o||h>=0&&s<0){o=f;s=h;n.length=0}n.push(l)}}return n};Ld.getRawIndex=Nd;function Nd(t){return t}function Od(t){if(t<this._count&&t>=0){return this._indices[t]}return-1}Ld.getRawDataItem=function(t){if(!this._rawData.persistent){var e=[];for(var r=0;r<this.dimensions.length;r++){var i=this.dimensions[r];e.push(this.get(i,t))}return e}else{return this._rawData.getItem(this.getRawIndex(t))}};Ld.getName=function(t){var e=this.getRawIndex(t);return this._nameList[e]||Pd(this,this._nameDimIdx,e)||"";
};Ld.getId=function(t){return Ed(this,this.getRawIndex(t))};function Ed(t,e){var r=t._idList[e];if(r==null){r=Pd(t,t._idDimIdx,e)}if(r==null){r=_d+e}return r}function Rd(t){if(!z(t)){t=[t]}return t}function zd(t,e){for(var r=0;r<e.length;r++){if(!t._dimensionInfos[e[r]]){console.error("Unkown dimension "+e[r])}}}Ld.each=function(t,r,i,a){"use strict";if(!this._count){return}if(typeof t==="function"){a=i;i=r;r=t;t=[]}i=i||a||this;t=k(Rd(t),this.getDimension,this);if(e){zd(this,t)}var n=t.length;for(var o=0;o<this.count();o++){switch(n){case 0:r.call(i,o);break;case 1:r.call(i,this.get(t[0],o),o);break;case 2:r.call(i,this.get(t[0],o),this.get(t[1],o),o);break;default:var s=0;var l=[];for(;s<n;s++){l[s]=this.get(t[s],o)}l[s]=o;r.apply(i,l)}}};Ld.filterSelf=function(t,r,i,a){"use strict";if(!this._count){return}if(typeof t==="function"){a=i;i=r;r=t;t=[]}i=i||a||this;t=k(Rd(t),this.getDimension,this);if(e){zd(this,t)}var n=this.count();var o=Md(this);var s=new o(n);var l=[];var u=t.length;var h=0;var f=t[0];for(var c=0;c<n;c++){var v;var d=this.getRawIndex(c);if(u===0){v=r.call(i,c)}else if(u===1){var p=this._getFast(f,d);v=r.call(i,p,c)}else{for(var g=0;g<u;g++){l[g]=this._getFast(f,d)}l[g]=c;v=r.apply(i,l)}if(v){s[h++]=d}}if(h<n){this._indices=s}this._count=h;this._extent={};this.getRawIndex=this._indices?Od:Nd;return this};Ld.selectRange=function(t){"use strict";if(!this._count){return}var r=[];for(var i in t){if(t.hasOwnProperty(i)){r.push(i)}}if(e){zd(this,r)}var a=r.length;if(!a){return}var n=this.count();var o=Md(this);var s=new o(n);var l=0;var u=r[0];var h=t[u][0];var f=t[u][1];var c=false;if(!this._indices){var v=0;if(a===1){var d=this._storage[r[0]];for(var p=0;p<this._chunkCount;p++){var g=d[p];var m=Math.min(this._count-p*this._chunkSize,this._chunkSize);for(var y=0;y<m;y++){var x=g[y];if(x>=h&&x<=f||isNaN(x)){s[l++]=v}v++}}c=true}else if(a===2){var d=this._storage[u];var _=this._storage[r[1]];var w=t[r[1]][0];var b=t[r[1]][1];for(var p=0;p<this._chunkCount;p++){var g=d[p];var S=_[p];var m=Math.min(this._count-p*this._chunkSize,this._chunkSize);for(var y=0;y<m;y++){var x=g[y];var M=S[y];if((x>=h&&x<=f||isNaN(x))&&(M>=w&&M<=b||isNaN(M))){s[l++]=v}v++}}c=true}}if(!c){if(a===1){for(var y=0;y<n;y++){var I=this.getRawIndex(y);var x=this._getFast(u,I);if(x>=h&&x<=f||isNaN(x)){s[l++]=I}}}else{for(var y=0;y<n;y++){var T=true;var I=this.getRawIndex(y);for(var p=0;p<a;p++){var D=r[p];var x=this._getFast(i,I);if(x<t[D][0]||x>t[D][1]){T=false}}if(T){s[l++]=this.getRawIndex(y)}}}}if(l<n){this._indices=s}this._count=l;this._extent={};this.getRawIndex=this._indices?Od:Nd;return this};Ld.mapArray=function(t,e,r,i){"use strict";if(typeof t==="function"){i=r;r=e;e=t;t=[]}r=r||i||this;var a=[];this.each(t,function(){a.push(e&&e.apply(this,arguments))},r);return a};function Bd(t,e){var r=t.dimensions;var i=new Cd(k(r,t.getDimensionInfo,t),t.hostModel);Ad(i,t);var a=i._storage={};var n=t._storage;for(var o=0;o<r.length;o++){var s=r[o];if(n[s]){if(T(e,s)>=0){a[s]=Vd(n[s]);i._rawExtent[s]=Gd();i._extent[s]=null}else{a[s]=n[s]}}}return i}function Vd(t){var e=new Array(t.length);for(var r=0;r<t.length;r++){e[r]=Id(t[r])}return e}function Gd(){return[Infinity,-Infinity]}Ld.map=function(t,r,i,a){"use strict";i=i||a||this;t=k(Rd(t),this.getDimension,this);if(e){zd(this,t)}var n=Bd(this,t);n._indices=this._indices;n.getRawIndex=n._indices?Od:Nd;var o=n._storage;var s=[];var l=this._chunkSize;var u=t.length;var h=this.count();var f=[];var c=n._rawExtent;for(var v=0;v<h;v++){for(var d=0;d<u;d++){f[d]=this.get(t[d],v)}f[u]=v;var p=r&&r.apply(i,f);if(p!=null){if(typeof p!=="object"){s[0]=p;p=s}var g=this.getRawIndex(v);var m=Math.floor(g/l);var y=g%l;for(var x=0;x<p.length;x++){var _=t[x];var w=p[x];var b=c[_];var S=o[_];if(S){S[m][y]=w}if(w<b[0]){b[0]=w}if(w>b[1]){b[1]=w}}}}return n};Ld.downSample=function(t,e,r,i){var a=Bd(this,[t]);var n=a._storage;var o=[];var s=Math.floor(1/e);var l=n[t];var u=this.count();var h=this._chunkSize;var f=a._rawExtent[t];var c=new(Md(this))(u);var v=0;for(var d=0;d<u;d+=s){if(s>u-d){s=u-d;o.length=s}for(var p=0;p<s;p++){var g=this.getRawIndex(d+p);var m=Math.floor(g/h);var y=g%h;o[p]=l[m][y]}var x=r(o);var _=this.getRawIndex(Math.min(d+i(o,x)||0,u-1));var w=Math.floor(_/h);var b=_%h;l[w][b]=x;if(x<f[0]){f[0]=x}if(x>f[1]){f[1]=x}c[v++]=_}a._count=v;a._indices=c;a.getRawIndex=Od;return a};Ld.getItemModel=function(t){var e=this.hostModel;return new kl(this.getRawDataItem(t),e,e&&e.ecModel)};Ld.diff=function(t){var e=this;return new cd(t?t.getIndices():[],this.getIndices(),function(e){return Ed(t,e)},function(t){return Ed(e,t)})};Ld.getVisual=function(t){var e=this._visual;return e&&e[t]};Ld.setVisual=function(t,e){if(yd(t)){for(var r in t){if(t.hasOwnProperty(r)){this.setVisual(r,t[r])}}return}this._visual=this._visual||{};this._visual[t]=e};Ld.setLayout=function(t,e){if(yd(t)){for(var r in t){if(t.hasOwnProperty(r)){this.setLayout(r,t[r])}}return}this._layout[t]=e};Ld.getLayout=function(t){return this._layout[t]};Ld.getItemLayout=function(t){return this._itemLayouts[t]};Ld.setItemLayout=function(t,e,r){this._itemLayouts[t]=r?w(this._itemLayouts[t]||{},e):e};Ld.clearItemLayouts=function(){this._itemLayouts.length=0};Ld.getItemVisual=function(t,e,r){var i=this._itemVisuals[t];var a=i&&i[e];if(a==null&&!r){return this.getVisual(e)}return a};Ld.setItemVisual=function(t,e,r){var i=this._itemVisuals[t]||{};var a=this.hasItemVisual;this._itemVisuals[t]=i;if(yd(e)){for(var n in e){if(e.hasOwnProperty(n)){i[n]=e[n];a[n]=true}}return}i[e]=r;a[e]=true};Ld.clearAllVisual=function(){this._visual={};this._itemVisuals=[];this.hasItemVisual={}};var Wd=function(t){t.seriesIndex=this.seriesIndex;t.dataIndex=this.dataIndex;t.dataType=this.dataType};Ld.setItemGraphicEl=function(t,e){var r=this.hostModel;if(e){e.dataIndex=t;e.dataType=this.dataType;e.seriesIndex=r&&r.seriesIndex;if(e.type==="group"){e.traverse(Wd,e)}}this._graphicEls[t]=e};Ld.getItemGraphicEl=function(t){return this._graphicEls[t]};Ld.eachItemGraphicEl=function(t,e){L(this._graphicEls,function(r,i){if(r){t&&t.call(e,r,i)}})};Ld.cloneShallow=function(t){if(!t){var e=k(this.dimensions,this.getDimensionInfo,this);t=new Cd(e,this.hostModel)}t._storage=this._storage;Ad(t,this);if(this._indices){var r=this._indices.constructor;t._indices=new r(this._indices)}else{t._indices=null}t.getRawIndex=t._indices?Od:Nd;return t};Ld.wrapMethod=function(t,e){var r=this[t];if(typeof r!=="function"){return}this.__wrappedMethods=this.__wrappedMethods||[];this.__wrappedMethods.push(t);this[t]=function(){var t=r.apply(this,arguments);return e.apply(this,[t].concat(Y(arguments)))}};Ld.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"];Ld.CHANGABLE_METHODS=["filterSelf","selectRange"];function Fd(t,e,r){if(!rh.isInstance(e)){e=rh.seriesDataToSource(e)}r=r||{};t=(t||[]).slice();var i=(r.dimsDef||[]).slice();var a=rt(r.encodeDef);var n=rt();var o=rt();var s=[];var l=Hd(e,t,i,r.dimCount);for(var u=0;u<l;u++){var h=i[u]=w({},G(i[u])?i[u]:{name:i[u]});var f=h.name;var c=s[u]={otherDims:{}};if(f!=null&&n.get(f)==null){c.name=c.displayName=f;n.set(f,u)}h.type!=null&&(c.type=h.type);h.displayName!=null&&(c.displayName=h.displayName)}a.each(function(t,e){t=Ga(t).slice();var r=a.set(e,[]);L(t,function(t,i){V(t)&&(t=n.get(t));if(t!=null&&t<l){r[i]=t;d(s[t],e,i)}})});var v=0;L(t,function(t,e){var r;var t;var i;var n;if(V(t)){r=t;t={}}else{r=t.name;var o=t.ordinalMeta;t.ordinalMeta=null;t=y(t);t.ordinalMeta=o;i=t.dimsDef;n=t.otherDims;t.name=t.coordDim=t.coordDimIndex=t.dimsDef=t.otherDims=null}var l=Ga(a.get(r));if(!l.length){for(var u=0;u<(i&&i.length||1);u++){while(v<s.length&&s[v].coordDim!=null){v++}v<s.length&&l.push(v++)}}L(l,function(e,a){var o=s[e];d(b(o,t),r,a);if(o.name==null&&i){var l=i[a];!G(l)&&(l={name:l});o.name=o.displayName=l.name;o.defaultTooltip=l.defaultTooltip}n&&b(o.otherDims,n)})});function d(t,e,r){if(dd.get(e)!=null){t.otherDims[e]=r}else{t.coordDim=e;t.coordDimIndex=r;o.set(e,true)}}var p=r.generateCoord;var g=r.generateCoordCount;var m=g!=null;g=p?g||1:0;var x=p||"value";for(var _=0;_<l;_++){var c=s[_]=s[_]||{};var S=c.coordDim;if(S==null){c.coordDim=Zd(x,o,m);c.coordDimIndex=0;if(!p||g<=0){c.isExtraCoord=true}g--}c.name==null&&(c.name=Zd(c.coordDim,n));if(c.type==null&&dh(e,_,c.name)){c.type="ordinal"}}return s}function Hd(t,e,r,i){var a=Math.max(t.dimensionsDetectCount||1,e.length,r.length,i||0);L(e,function(t){var e=t.dimsDef;e&&(a=Math.max(a,e.length))});return a}function Zd(t,e,r){if(r||e.get(t)!=null){var i=0;while(e.get(t+i)!=null){i++}t+=i}e.set(t,true);return t}var Ud=function(t,e){e=e||{};return Fd(e.coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})};function Xd(t,e,r){r=r||{};var i=r.byIndex;var a=r.stackedCoordDimension;var n=!!(t&&t.get("stack"));var o;var s;var l;var u;L(e,function(t,r){if(V(t)){e[r]=t={name:t}}if(n&&!t.isExtraCoord){if(!i&&!o&&t.ordinalMeta){o=t}if(!s&&t.type!=="ordinal"&&t.type!=="time"&&(!a||a===t.coordDim)){s=t}}});if(s&&!i&&!o){i=true}if(s){l="__\0ecstackresult";u="__\0ecstackedover";if(o){o.createInvertedIndices=true}var h=s.coordDim;var f=s.type;var c=0;L(e,function(t){if(t.coordDim===h){c++}});e.push({name:l,coordDim:h,coordDimIndex:c,type:f,isExtraCoord:true,isCalculationCoord:true});c++;e.push({name:u,coordDim:u,coordDimIndex:c,type:f,isExtraCoord:true,isCalculationCoord:true})}return{stackedDimension:s&&s.name,stackedByDimension:o&&o.name,isStackedByIndex:i,stackedOverDimension:u,stackResultDimension:l}}function jd(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function Yd(t,e){return jd(t,e)?t.getCalculationInfo("stackResultDimension"):e}function qd(t,e,r){r=r||{};if(!rh.isInstance(t)){t=rh.seriesDataToSource(t)}var i=e.get("coordinateSystem");var a=Ch.get(i);var n=Uu(e);var o;if(n){o=k(n.coordSysDims,function(t){var e={name:t};var r=n.axisMap.get(t);if(r){var i=r.get("type");e.type=gd(i)}return e})}if(!o){o=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]}var s=Ud(t,{coordDimensions:o,generateCoord:r.generateCoord});var l;var u;n&&L(s,function(t,e){var r=t.coordDim;var i=n.categoryAxisMap.get(r);if(i){if(l==null){l=e}t.ordinalMeta=i.getOrdinalMeta()}if(t.otherDims.itemName!=null){u=true}});if(!u&&l!=null){s[l].otherDims.itemName=0}var h=Xd(e,s);var f=new Cd(s,e);f.setCalculationInfo(h);var c=l!=null&&Kd(t)?function(t,e,r,i){return i===l?r:this.defaultDimValueGetter(t,e,r,i)}:null;f.hasItemOption=false;f.initData(t,null,c);return f}function Kd(t){if(t.sourceFormat===Yu){var e=$d(t.data||[]);return e!=null&&!z(Ha(e))}}function $d(t){var e=0;while(e<t.length&&t[e]==null){e++}return t[e]}function Jd(t){this._setting=t||{};this._extent=[Infinity,-Infinity];this._interval=0;this.init&&this.init.apply(this,arguments)}Jd.prototype.parse=function(t){return t};Jd.prototype.getSetting=function(t){return this._setting[t]};Jd.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]};Jd.prototype.normalize=function(t){var e=this._extent;if(e[1]===e[0]){return.5}return(t-e[0])/(e[1]-e[0])};Jd.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]};Jd.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]);t[1]>e[1]&&(e[1]=t[1])};Jd.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))};Jd.prototype.getExtent=function(){return this._extent.slice()};Jd.prototype.setExtent=function(t,e){var r=this._extent;if(!isNaN(t)){r[0]=t}if(!isNaN(e)){r[1]=e}};Jd.prototype.isBlank=function(){return this._isBlank},Jd.prototype.setBlank=function(t){this._isBlank=t};Jd.prototype.getLabel=null;ln(Jd);vn(Jd,{registerWhenExtend:true});function Qd(t){this.categories=t.categories||[];this._needCollect=t.needCollect;this._deduplication=t.deduplication;this._map}Qd.createByAxisModel=function(t){var e=t.option;var r=e.data;var i=r&&k(r,rp);return new Qd({categories:i,needCollect:!i,deduplication:e.dedplication!==false})};var tp=Qd.prototype;tp.getOrdinal=function(t){return ep(this).get(t)};tp.parseAndCollect=function(t){var e;var r=this._needCollect;if(typeof t!=="string"&&!r){return t}if(r&&!this._deduplication){e=this.categories.length;this.categories[e]=t;return e}var i=ep(this);e=i.get(t);if(e==null){if(r){e=this.categories.length;this.categories[e]=t;i.set(t,e)}else{e=NaN}}return e};function ep(t){return t._map||(t._map=rt(t.categories))}function rp(t){if(G(t)&&t.value!=null){return t.value}else{return t+""}}var ip=Jd.prototype;var ap=Jd.extend({type:"ordinal",init:function(t,e){if(!t||z(t)){t=new Qd({categories:t})}this._ordinalMeta=t;this._extent=e||[0,t.categories.length-1]},parse:function(t){return typeof t==="string"?this._ordinalMeta.getOrdinal(t):Math.round(t)},contain:function(t){t=this.parse(t);return ip.contain.call(this,t)&&this._ordinalMeta.categories[t]!=null},normalize:function(t){return ip.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(ip.scale.call(this,t))},getTicks:function(){var t=[];var e=this._extent;var r=e[0];while(r<=e[1]){t.push(r);r++}return t},getLabel:function(t){if(!this.isBlank()){return this._ordinalMeta.categories[t]}},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:at,niceExtent:at});ap.create=function(){return new ap};var np=Fl;function op(t,e,r,i){var a={};var n=t[1]-t[0];var o=a.interval=eu(n/e,true);if(r!=null&&o<r){o=a.interval=r}if(i!=null&&o>i){o=a.interval=i}var s=a.intervalPrecision=sp(o);var l=a.niceTickExtent=[np(Math.ceil(t[0]/o)*o,s),np(Math.floor(t[1]/o)*o,s)];up(l,t);return a}function sp(t){return Ul(t)+2}function lp(t,e,r){t[e]=Math.max(Math.min(t[e],r[1]),r[0])}function up(t,e){!isFinite(t[0])&&(t[0]=e[0]);!isFinite(t[1])&&(t[1]=e[1]);lp(t,0,e);lp(t,1,e);if(t[0]>t[1]){t[0]=t[1]}}function hp(t,e,r,i){var a=[];if(!t){return a}var n=1e4;if(e[0]<r[0]){a.push(e[0])}var o=r[0];while(o<=r[1]){a.push(o);o=np(o+t,i);if(o===a[a.length-1]){break}if(a.length>n){return[]}}if(e[1]>(a.length?a[a.length-1]:r[1])){a.push(e[1])}return a}var fp=Fl;var cp=Jd.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var r=this._extent;if(!isNaN(t)){r[0]=parseFloat(t)}if(!isNaN(e)){r[1]=parseFloat(e)}},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]);t[1]>e[1]&&(e[1]=t[1]);cp.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t;this._niceExtent=this._extent.slice();this._intervalPrecision=sp(t)},getTicks:function(){return hp(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getLabel:function(t,e){if(t==null){return""}var r=e&&e.precision;if(r==null){r=Ul(t)||0}else if(r==="auto"){r=this._intervalPrecision}t=fp(t,r,true);return nu(t)},niceTicks:function(t,e,r){t=t||5;var i=this._extent;var a=i[1]-i[0];if(!isFinite(a)){return}if(a<0){a=-a;i.reverse()}var n=op(i,t,e,r);this._intervalPrecision=n.intervalPrecision;this._interval=n.interval;this._niceExtent=n.niceTickExtent},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]){if(e[0]!==0){var r=e[0];if(!t.fixMax){e[1]+=r/2;e[0]-=r/2}else{e[0]-=r/2}}else{e[1]=1}}var i=e[1]-e[0];if(!isFinite(i)){e[0]=0;e[1]=1}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var a=this._interval;if(!t.fixMin){e[0]=fp(Math.floor(e[0]/a)*a)}if(!t.fixMax){e[1]=fp(Math.ceil(e[1]/a)*a)}}});cp.create=function(){return new cp};var vp="__ec_stack_";var dp=.5;var pp=typeof Float32Array!=="undefined"?Float32Array:Array;function gp(t){return t.get("stack")||vp+t.seriesIndex}function mp(t){return t.dim+t.index}function yp(t){var e=[];var r=t.axis;var i="axis0";if(r.type!=="category"){return}var a=r.getBandWidth();for(var n=0;n<t.count||0;n++){e.push(b({bandWidth:a,axisKey:i,stackId:vp+n},t))}var o=wp(e);var s=[];for(var n=0;n<t.count;n++){var l=o[i][vp+n];l.offsetCenter=l.offset+l.width/2;s.push(l)}return s}function xp(t,e){var r=[];e.eachSeriesByType(t,function(t){if(Ip(t)&&!Tp(t)){r.push(t)}});return r}function _p(t){var e=[];L(t,function(t){var r=t.getData();var i=t.coordinateSystem;var a=i.getBaseAxis();var n=a.getExtent();var o=a.type==="category"?a.getBandWidth():Math.abs(n[1]-n[0])/r.count();var s=Wl(t.get("barWidth"),o);var l=Wl(t.get("barMaxWidth"),o);var u=t.get("barGap");var h=t.get("barCategoryGap");e.push({bandWidth:o,barWidth:s,barMaxWidth:l,barGap:u,barCategoryGap:h,axisKey:mp(a),stackId:gp(t)})});return wp(e)}function wp(t){var e={};L(t,function(t,r){var i=t.axisKey;var a=t.bandWidth;var n=e[i]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}};var o=n.stacks;e[i]=n;var s=t.stackId;if(!o[s]){n.autoWidthCount++}o[s]=o[s]||{width:0,maxWidth:0};var l=t.barWidth;if(l&&!o[s].width){o[s].width=l;l=Math.min(n.remainedWidth,l);n.remainedWidth-=l}var u=t.barMaxWidth;u&&(o[s].maxWidth=u);var h=t.barGap;h!=null&&(n.gap=h);var f=t.barCategoryGap;f!=null&&(n.categoryGap=f)});var r={};L(e,function(t,e){r[e]={};var i=t.stacks;var a=t.bandWidth;var n=Wl(t.categoryGap,a);var o=Wl(t.gap,1);var s=t.remainedWidth;var l=t.autoWidthCount;var u=(s-n)/(l+(l-1)*o);u=Math.max(u,0);L(i,function(t,e){var r=t.maxWidth;if(r&&r<u){r=Math.min(r,s);if(t.width){r=Math.min(r,t.width)}s-=r;t.width=r;l--}});u=(s-n)/(l+(l-1)*o);u=Math.max(u,0);var h=0;var f;L(i,function(t,e){if(!t.width){t.width=u}f=t;h+=t.width*(1+o)});if(f){h-=f.width*o}var c=-h/2;L(i,function(t,i){r[e][i]=r[e][i]||{offset:c,width:t.width};c+=t.width*(1+o)})});return r}function bp(t,e,r){if(t&&e){var i=t[mp(e)];if(i!=null&&r!=null){i=i[gp(r)]}return i}}function Sp(t,e){var r=xp(t,e);var i=_p(r);var a={};L(r,function(t){var e=t.getData();var r=t.coordinateSystem;var n=r.getBaseAxis();var o=gp(t);var s=i[mp(n)][o];var l=s.offset;var u=s.width;var h=r.getOtherAxis(n);var f=t.get("barMinHeight")||0;a[o]=a[o]||[];e.setLayout({offset:l,size:u});var c=e.mapDimension(h.dim);var v=e.mapDimension(n.dim);var d=jd(e,c);var p=h.isHorizontal();var g=Dp(n,h,d);for(var m=0,y=e.count();m<y;m++){var x=e.get(c,m);var _=e.get(v,m);if(isNaN(x)){continue}var w=x>=0?"p":"n";var b=g;if(d){if(!a[o][_]){a[o][_]={p:g,n:g}}b=a[o][_][w]}var S;var M;var I;var T;if(p){var D=r.dataToPoint([x,_]);S=b;M=D[1]+l;I=D[0]-g;T=u;if(Math.abs(I)<f){I=(I<0?-1:1)*f}d&&(a[o][_][w]+=I)}else{var D=r.dataToPoint([_,x]);S=D[0]+l;M=b;I=u;T=D[1]-g;if(Math.abs(T)<f){T=(T<=0?-1:1)*f}d&&(a[o][_][w]+=T)}e.setItemLayout(m,{x:S,y:M,width:I,height:T})}},this)}var Mp={seriesType:"bar",plan:Wf(),reset:function(t){if(!Ip(t)||!Tp(t)){return}var e=t.getData();var r=t.coordinateSystem;var i=r.getBaseAxis();var a=r.getOtherAxis(i);var n=e.mapDimension(a.dim);var o=e.mapDimension(i.dim);var s=a.isHorizontal();var l=s?0:1;var u=bp(_p([t]),i,t).width;if(!(u>dp)){u=dp}return{progress:h};function h(t,e){var h=new pp(t.count*2);var f;var c=[];var v=[];var d=0;while((f=t.next())!=null){v[l]=e.get(n,f);v[1-l]=e.get(o,f);c=r.dataToPoint(v,null,c);h[d++]=c[0];h[d++]=c[1]}e.setLayout({largePoints:h,barWidth:u,valueAxisStart:Dp(i,a,false),valueAxisHorizontal:s})}}};function Ip(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function Tp(t){return t.pipelineContext&&t.pipelineContext.large}function Dp(t,e,r){return T(t.getAxesOnZeroOf(),e)>=0||r?e.toGlobalCoord(e.dataToCoord(0)):e.getGlobalExtent()[0]}var Ap=cp.prototype;var Cp=Math.ceil;var Lp=Math.floor;var kp=1e3;var Pp=kp*60;var Np=Pp*60;var Op=Np*24;var Ep=function(t,e,r,i){while(r<i){var a=r+i>>>1;if(t[a][1]<e){r=a+1}else{i=a}}return r};var Rp=cp.extend({type:"time",getLabel:function(t){var e=this._stepLvl;var r=new Date(t);return mu(e[0],r,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]){e[0]-=Op;e[1]+=Op}if(e[1]===-Infinity&&e[0]===Infinity){var r=new Date;e[1]=+new Date(r.getFullYear(),r.getMonth(),r.getDate());e[0]=e[1]-Op}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var i=this._interval;if(!t.fixMin){e[0]=Fl(Lp(e[0]/i)*i)}if(!t.fixMax){e[1]=Fl(Cp(e[1]/i)*i)}},niceTicks:function(t,e,r){t=t||10;var i=this._extent;var a=i[1]-i[0];var n=a/t;if(e!=null&&n<e){n=e}if(r!=null&&n>r){n=r}var o=zp.length;var s=Ep(zp,n,0,o);var l=zp[Math.min(s,o-1)];var u=l[1];if(l[0]==="year"){var h=a/u;var f=eu(h/t,true);u*=f}var c=this.getSetting("useUTC")?0:new Date(+i[0]||+i[1]).getTimezoneOffset()*60*1e3;var v=[Math.round(Cp((i[0]-c)/u)*u+c),Math.round(Lp((i[1]-c)/u)*u+c)];up(v,i);this._stepLvl=l;this._interval=u;this._niceExtent=v},parse:function(t){return+Jl(t)}});L(["contain","normalize"],function(t){Rp.prototype[t]=function(e){return Ap[t].call(this,this.parse(e))}});var zp=[["hh:mm:ss",kp],["hh:mm:ss",kp*5],["hh:mm:ss",kp*10],["hh:mm:ss",kp*15],["hh:mm:ss",kp*30],["hh:mm\nMM-dd",Pp],["hh:mm\nMM-dd",Pp*5],["hh:mm\nMM-dd",Pp*10],["hh:mm\nMM-dd",Pp*15],["hh:mm\nMM-dd",Pp*30],["hh:mm\nMM-dd",Np],["hh:mm\nMM-dd",Np*2],["hh:mm\nMM-dd",Np*6],["hh:mm\nMM-dd",Np*12],["MM-dd\nyyyy",Op],["MM-dd\nyyyy",Op*2],["MM-dd\nyyyy",Op*3],["MM-dd\nyyyy",Op*4],["MM-dd\nyyyy",Op*5],["MM-dd\nyyyy",Op*6],["week",Op*7],["MM-dd\nyyyy",Op*10],["week",Op*14],["week",Op*21],["month",Op*31],["week",Op*42],["month",Op*62],["week",Op*42],["quarter",Op*380/4],["month",Op*31*4],["month",Op*31*5],["half-year",Op*380/2],["month",Op*31*8],["month",Op*31*10],["year",Op*380]];Rp.create=function(t){return new Rp({useUTC:t.ecModel.get("useUTC")})};var Bp=Jd.prototype;var Vp=cp.prototype;var Gp=Ul;var Wp=Fl;var Fp=Math.floor;var Hp=Math.ceil;var Zp=Math.pow;var Up=Math.log;var Xp=Jd.extend({type:"log",base:10,$constructor:function(){Jd.apply(this,arguments);this._originalScale=new cp},getTicks:function(){var t=this._originalScale;var e=this._extent;var r=t.getExtent();return k(Vp.getTicks.call(this),function(i){var a=Fl(Zp(this.base,i));a=i===e[0]&&t.__fixMin?jp(a,r[0]):a;a=i===e[1]&&t.__fixMax?jp(a,r[1]):a;return a},this)},getLabel:Vp.getLabel,scale:function(t){t=Bp.scale.call(this,t);return Zp(this.base,t)},setExtent:function(t,e){var r=this.base;t=Up(t)/Up(r);e=Up(e)/Up(r);Vp.setExtent.call(this,t,e)},getExtent:function(){var t=this.base;var e=Bp.getExtent.call(this);e[0]=Zp(t,e[0]);e[1]=Zp(t,e[1]);var r=this._originalScale;var i=r.getExtent();r.__fixMin&&(e[0]=jp(e[0],i[0]));r.__fixMax&&(e[1]=jp(e[1],i[1]));return e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=Up(t[0])/Up(e);t[1]=Up(t[1])/Up(e);Bp.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicks:function(t){t=t||10;var e=this._extent;var r=e[1]-e[0];if(r===Infinity||r<=0){return}var i=Ql(r);var a=t/r*i;if(a<=.5){i*=10}while(!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0){i*=10}var n=[Fl(Hp(e[0]/i)*i),Fl(Fp(e[1]/i)*i)];this._interval=i;this._niceExtent=n},niceExtent:function(t){Vp.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin;e.__fixMax=t.fixMax}});L(["contain","normalize"],function(t){Xp.prototype[t]=function(e){e=Up(e)/Up(this.base);return Bp[t].call(this,e)}});Xp.create=function(){return new Xp};function jp(t,e){return Wp(t,Gp(e))}function Yp(t,r){var i=t.type;var a=r.getMin();var n=r.getMax();var o=a!=null;var s=n!=null;var l=t.getExtent();var u;var h;var f;if(i==="ordinal"){u=r.getCategories().length}else{h=r.get("boundaryGap");if(!z(h)){h=[h||0,h||0]}if(typeof h[0]==="boolean"){if(e){console.warn("Boolean type for boundaryGap is only "+"allowed for ordinal axis. Please use string in "+'percentage instead, e.g., "20%". Currently, '+"boundaryGap is set to be 0.")}h=[0,0]}h[0]=Wl(h[0],1);h[1]=Wl(h[1],1);f=l[1]-l[0]||Math.abs(l[0])}if(a==null){a=i==="ordinal"?u?0:NaN:l[0]-h[0]*f}if(n==null){n=i==="ordinal"?u?u-1:NaN:l[1]+h[1]*f}if(a==="dataMin"){a=l[0]}else if(typeof a==="function"){a=a({min:l[0],max:l[1]})}if(n==="dataMax"){n=l[1]}else if(typeof n==="function"){n=n({min:l[0],max:l[1]})}(a==null||!isFinite(a))&&(a=NaN);(n==null||!isFinite(n))&&(n=NaN);t.setBlank(Z(a)||Z(n)||i==="ordinal"&&!t.getOrdinalMeta().categories.length);if(r.getNeedCrossZero()){if(a>0&&n>0&&!o){a=0}if(a<0&&n<0&&!s){n=0}}var c=r.ecModel;if(c&&i==="time"){var v=xp("bar",c);var d;L(v,function(t){d|=t.getBaseAxis()===r.axis});if(d){var p=_p(v);var g=qp(a,n,r,p);a=g.min;n=g.max}}return[a,n]}function qp(t,e,r,i){var a=r.axis.getExtent();var n=a[1]-a[0];var o=bp(i,r.axis);if(o===undefined){return{min:t,max:e}}var s=Infinity;L(o,function(t){s=Math.min(t.offset,s)});var l=-Infinity;L(o,function(t){l=Math.max(t.offset+t.width,l)});s=Math.abs(s);l=Math.abs(l);var u=s+l;var h=e-t;var f=1-(s+l)/n;var c=h/f-h;e+=c*(l/u);t-=c*(s/u);return{min:t,max:e}}function Kp(t,e){var r=Yp(t,e);var i=e.getMin()!=null;var a=e.getMax()!=null;var n=e.get("splitNumber");if(t.type==="log"){t.base=e.get("logBase")}var o=t.type;t.setExtent(r[0],r[1]);t.niceExtent({splitNumber:n,fixMin:i,fixMax:a,minInterval:o==="interval"||o==="time"?e.get("minInterval"):null,maxInterval:o==="interval"||o==="time"?e.get("maxInterval"):null});var s=e.get("interval");if(s!=null){t.setInterval&&t.setInterval(s)}}function $p(t,e){e=e||t.get("type");if(e){switch(e){case"category":return new ap(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[Infinity,-Infinity]);case"value":return new cp;default:return(Jd.getClass(e)||cp).create(t)}}}function Jp(t){var e=t.scale.getExtent();var r=e[0];var i=e[1];return!(r>0&&i>0||r<0&&i<0)}function Qp(t){var e=t.getLabelModel().get("formatter");var r=t.type==="category"?t.scale.getExtent()[0]:null;if(typeof e==="string"){e=function(t){return function(e){return t.replace("{value}",e!=null?e:"")}}(e);return e}else if(typeof e==="function"){return function(i,a){if(r!=null){a=i-r}return e(tg(t,i),a)}}else{return function(e){return t.scale.getLabel(e)}}}function tg(t,e){return t.type==="category"?t.scale.getLabel(e):e}function eg(t){var e=t.model;var r=t.scale;if(!e.get("axisLabel.show")||r.isBlank()){return}var i=t.type==="category";var a;var n;var o=r.getExtent();if(i){n=r.count()}else{a=r.getTicks();n=a.length}var s=t.getLabelModel();var l=Qp(t);var u;var h=1;if(n>40){h=Math.ceil(n/40)}for(var f=0;f<n;f+=h){var c=a?a[f]:o[0]+f;var v=l(c);var d=s.getTextRect(v);var p=rg(d,s.get("rotate")||0);u?u.union(p):u=p}return u}function rg(t,e){var r=e*Math.PI/180;var i=t.plain();var a=i.width;var n=i.height;var o=a*Math.cos(r)+n*Math.sin(r);var s=a*Math.sin(r)+n*Math.cos(r);var l=new hr(i.x,i.y,o,s);return l}var ig={getMin:function(t){var e=this.option;var r=!t&&e.rangeStart!=null?e.rangeStart:e.min;if(this.axis&&r!=null&&r!=="dataMin"&&typeof r!=="function"&&!Z(r)){r=this.axis.scale.parse(r)}return r},getMax:function(t){var e=this.option;var r=!t&&e.rangeEnd!=null?e.rangeEnd:e.max;if(this.axis&&r!=null&&r!=="dataMax"&&typeof r!=="function"&&!Z(r)){r=this.axis.scale.parse(r)}return r},getNeedCrossZero:function(){var t=this.option;return t.rangeStart!=null||t.rangeEnd!=null?false:!t.scale},getCoordSysModel:at,setRange:function(t,e){this.option.rangeStart=t;this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};var ag=Es({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var r=e.cx;var i=e.cy;var a=e.width/2;var n=e.height/2;t.moveTo(r,i-n);t.lineTo(r+a,i+n);t.lineTo(r-a,i+n);t.closePath()}});var ng=Es({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var r=e.cx;var i=e.cy;var a=e.width/2;var n=e.height/2;t.moveTo(r,i-n);t.lineTo(r+a,i);t.lineTo(r,i+n);t.lineTo(r-a,i);t.closePath()}});var og=Es({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var r=e.x;var i=e.y;var a=e.width/5*3;var n=Math.max(a,e.height);var o=a/2;var s=o*o/(n-o);var l=i-n+o+s;var u=Math.asin(s/o);var h=Math.cos(u)*o;var f=Math.sin(u);var c=Math.cos(u);var v=o*.6;var d=o*.7;t.moveTo(r-h,l+s);t.arc(r,l,o,Math.PI-u,Math.PI*2+u);t.bezierCurveTo(r+h-f*v,l+s+c*v,r,i-d,r,i);t.bezierCurveTo(r,i-d,r-h+f*v,l+s+c*v,r-h,l+s);t.closePath()}});var sg=Es({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var r=e.height;var i=e.width;var a=e.x;var n=e.y;var o=i/3*2;t.moveTo(a,n);t.lineTo(a+o,n+r);t.lineTo(a,n+r/4*3);t.lineTo(a-o,n+r);t.lineTo(a,n);t.closePath()}});var lg={line:_s,rect:xs,roundRect:xs,square:xs,circle:ls,diamond:ng,pin:og,arrow:sg,triangle:ag};var ug={line:function(t,e,r,i,a){a.x1=t;a.y1=e+i/2;a.x2=t+r;a.y2=e+i/2},rect:function(t,e,r,i,a){a.x=t;a.y=e;a.width=r;a.height=i},roundRect:function(t,e,r,i,a){a.x=t;a.y=e;a.width=r;a.height=i;a.r=Math.min(r,i)/4},square:function(t,e,r,i,a){var n=Math.min(r,i);a.x=t;a.y=e;a.width=n;a.height=n},circle:function(t,e,r,i,a){a.cx=t+r/2;a.cy=e+i/2;a.r=Math.min(r,i)/2},diamond:function(t,e,r,i,a){a.cx=t+r/2;a.cy=e+i/2;a.width=r;a.height=i},pin:function(t,e,r,i,a){a.x=t+r/2;a.y=e+i/2;a.width=r;a.height=i},arrow:function(t,e,r,i,a){a.x=t+r/2;a.y=e+i/2;a.width=r;a.height=i},triangle:function(t,e,r,i,a){a.cx=t+r/2;a.cy=e+i/2;a.width=r;a.height=i}};var hg={};L(lg,function(t,e){hg[e]=new t});var fg=Es({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var t=this.style;var e=this.shape;if(e.symbolType==="pin"&&t.textPosition==="inside"){t.textPosition=["50%","40%"];t.textAlign="center";t.textVerticalAlign="middle"}},buildPath:function(t,e,r){var i=e.symbolType;var a=hg[i];if(e.symbolType!=="none"){if(!a){i="rect";a=hg[i]}ug[i](e.x,e.y,e.width,e.height,a.shape);a.buildPath(t,a.shape,r)}}});function cg(t,e){if(this.type!=="image"){var r=this.style;var i=this.shape;if(i&&i.symbolType==="line"){r.stroke=t}else if(this.__isEmptyBrush){r.stroke=t;r.fill=e||"#fff"}else{r.fill&&(r.fill=t);r.stroke&&(r.stroke=t)}this.dirty(false)}}function vg(t,e,r,i,a,n,o){var s=t.indexOf("empty")===0;if(s){t=t.substr(5,1).toLowerCase()+t.substr(6)}var l;if(t.indexOf("image://")===0){l=Bs(t.slice(8),new hr(e,r,i,a),o?"center":"cover")}else if(t.indexOf("path://")===0){l=zs(t.slice(7),{},new hr(e,r,i,a),o?"center":"cover")}else{l=new fg({shape:{symbolType:t,x:e,y:r,width:i,height:a}})}l.__isEmptyBrush=s;l.setColor=cg;l.setColor(n);return l}function dg(t){return qd(t.getSource(),t)}var pg={isDimensionStacked:jd,enableDataStack:Xd,getStackedDimension:Yd};function gg(t,e){var r=e;if(!kl.isInstance(e)){r=new kl(e);A(r,ig)}var i=$p(r);i.setExtent(t[0],t[1]);Kp(i,r);return i}function mg(t){A(t,ig)}var yg=(Object.freeze||Object)({createList:dg,getLayoutRect:Lu,dataStack:pg,createScale:gg,mixinAxisModelCommonMethods:mg,completeDimensions:Fd,createDimensions:Ud,createSymbol:vg});var xg=1e-8;function _g(t,e){return Math.abs(t-e)<xg}function wg(t,e,r){var i=0;var a=t[0];if(!a){return false}for(var n=1;n<t.length;n++){var o=t[n];i+=Mo(a[0],a[1],o[0],o[1],e,r);a=o}var s=t[0];if(!_g(a[0],s[0])||!_g(a[1],s[1])){i+=Mo(a[0],a[1],s[0],s[1],e,r)}return i!==0}function bg(t,e,r){this.name=t;this.geometries=e;if(!r){var i=this.getBoundingRect();r=[i.x+i.width/2,i.y+i.height/2]}else{r=[r[0],r[1]]}this.center=r}bg.prototype={constructor:bg,properties:null,getBoundingRect:function(){var t=this._rect;if(t){return t}var e=Number.MAX_VALUE;var r=[e,e];var i=[-e,-e];var a=[];var n=[];var o=this.geometries;for(var s=0;s<o.length;s++){if(o[s].type!=="polygon"){continue}var l=o[s].exterior;Kn(l,a,n);Lt(r,r,a);kt(i,i,n)}if(s===0){r[0]=r[1]=i[0]=i[1]=0}return this._rect=new hr(r[0],r[1],i[0]-r[0],i[1]-r[1])},contain:function(t){var e=this.getBoundingRect();var r=this.geometries;if(!e.contain(t[0],t[1])){return false}t:for(var i=0,a=r.length;i<a;i++){if(r[i].type!=="polygon"){continue}var n=r[i].exterior;var o=r[i].interiors;if(wg(n,t[0],t[1])){for(var s=0;s<(o?o.length:0);s++){if(wg(o[s])){continue t}}return true}}return false},transformTo:function(t,e,r,i){var a=this.getBoundingRect();var n=a.width/a.height;if(!r){r=n*i}else if(!i){i=r/n}var o=new hr(t,e,r,i);var s=a.calculateTransform(o);var l=this.geometries;for(var u=0;u<l.length;u++){if(l[u].type!=="polygon"){continue}var h=l[u].exterior;
var f=l[u].interiors;for(var c=0;c<h.length;c++){Ct(h[c],h[c],s)}for(var v=0;v<(f?f.length:0);v++){for(var c=0;c<f[v].length;c++){Ct(f[v][c],f[v][c],s)}}}a=this._rect;a.copy(o);this.center=[a.x+a.width/2,a.y+a.height/2]}};function Sg(t){if(!t.UTF8Encoding){return t}var e=t.UTF8Scale;if(e==null){e=1024}var r=t.features;for(var i=0;i<r.length;i++){var a=r[i];var n=a.geometry;var o=n.coordinates;var s=n.encodeOffsets;for(var l=0;l<o.length;l++){var u=o[l];if(n.type==="Polygon"){o[l]=Mg(u,s[l],e)}else if(n.type==="MultiPolygon"){for(var h=0;h<u.length;h++){var f=u[h];u[h]=Mg(f,s[l][h],e)}}}}t.UTF8Encoding=false;return t}function Mg(t,e,r){var i=[];var a=e[0];var n=e[1];for(var o=0;o<t.length;o+=2){var s=t.charCodeAt(o)-64;var l=t.charCodeAt(o+1)-64;s=s>>1^-(s&1);l=l>>1^-(l&1);s+=a;l+=n;a=s;n=l;i.push([s/r,l/r])}return i}var Ig=function(t){Sg(t);return k(N(t.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var e=t.properties;var r=t.geometry;var i=r.coordinates;var a=[];if(r.type==="Polygon"){a.push({type:"polygon",exterior:i[0],interiors:i.slice(1)})}if(r.type==="MultiPolygon"){L(i,function(t){if(t[0]){a.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})}})}var n=new bg(e.name,a,e.cp);n.properties=e;return n})};var Tg=$a();function Dg(t){return t.type==="category"?Cg(t):Pg(t)}function Ag(t,e){return t.type==="category"?kg(t,e):{ticks:t.scale.getTicks()}}function Cg(t){var e=t.getLabelModel();var r=Lg(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function Lg(t,e){var r=Ng(t,"labels");var i=Wg(e);var a=Og(r,i);if(a){return a}var n;var o;if(B(i)){n=Gg(t,i)}else{o=i==="auto"?Rg(t):i;n=Vg(t,o)}return Eg(r,i,{labels:n,labelCategoryInterval:o})}function kg(t,e){var r=Ng(t,"ticks");var i=Wg(e);var a=Og(r,i);if(a){return a}var n;var o;if(!e.get("show")||t.scale.isBlank()){n=[]}if(B(i)){n=Gg(t,i,true)}else if(i==="auto"){var s=Lg(t,t.getLabelModel());o=s.labelCategoryInterval;n=k(s.labels,function(t){return t.tickValue})}else{o=i;n=Vg(t,o,true)}return Eg(r,i,{ticks:n,tickCategoryInterval:o})}function Pg(t){var e=t.scale.getTicks();var r=Qp(t);return{labels:k(e,function(e,i){return{formattedLabel:r(e,i),rawLabel:t.scale.getLabel(e),tickValue:e}})}}function Ng(t,e){return Tg(t)[e]||(Tg(t)[e]=[])}function Og(t,e){for(var r=0;r<t.length;r++){if(t[r].key===e){return t[r].value}}}function Eg(t,e,r){t.push({key:e,value:r});return r}function Rg(t){var e=Tg(t).autoInterval;return e!=null?e:Tg(t).autoInterval=t.calculateCategoryInterval()}function zg(t){var e=Bg(t);var r=Qp(t);var i=(e.axisRotate-e.labelRotate)/180*Math.PI;var a=t.scale;var n=a.getExtent();var o=a.count();if(n[1]-n[0]<1){return 0}var s=1;if(o>40){s=Math.max(1,Math.floor(o/40))}var l=n[0];var u=t.dataToCoord(l+1)-t.dataToCoord(l);var h=Math.abs(u*Math.cos(i));var f=Math.abs(u*Math.sin(i));var c=0;var v=0;for(;l<=n[1];l+=s){var d=0;var p=0;var g=$r(r(l),e.font,"center","top");d=g.width*1.3;p=g.height*1.3;c=Math.max(c,d,7);v=Math.max(v,p,7)}var m=c/h;var y=v/f;isNaN(m)&&(m=Infinity);isNaN(y)&&(y=Infinity);var x=Math.max(0,Math.floor(Math.min(m,y)));var _=Tg(t.model);var w=_.lastAutoInterval;var b=_.lastTickCount;if(w!=null&&b!=null&&Math.abs(w-x)<=1&&Math.abs(b-o)<=1&&w>x){x=w}else{_.lastTickCount=o;_.lastAutoInterval=x}return x}function Bg(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function Vg(t,e,r){var i=Qp(t);var a=t.scale;var n=a.getExtent();var o=t.getLabelModel();var s=[];var l=Math.max((e||0)+1,1);var u=n[0];var h=a.count();if(u!==0&&l>1&&h/l>2){u=Math.round(Math.ceil(u/l)*l)}var f={min:o.get("showMinLabel"),max:o.get("showMaxLabel")};if(f.min&&u!==n[0]){v(n[0])}var c=u;for(;c<=n[1];c+=l){v(c)}if(f.max&&c!==n[1]){v(n[1])}function v(t){s.push(r?t:{formattedLabel:i(t),rawLabel:a.getLabel(t),tickValue:t})}return s}function Gg(t,e,r){var i=t.scale;var a=Qp(t);var n=[];L(i.getTicks(),function(t){var o=i.getLabel(t);if(e(t,o)){n.push(r?t:{formattedLabel:a(t),rawLabel:o,tickValue:t})}});return n}function Wg(t){var e=t.get("interval");return e==null?"auto":e}var Fg=[0,1];var Hg=function(t,e,r){this.dim=t;this.scale=e;this._extent=r||[0,0];this.inverse=false;this.onBand=false};Hg.prototype={constructor:Hg,contain:function(t){var e=this._extent;var r=Math.min(e[0],e[1]);var i=Math.max(e[0],e[1]);return t>=r&&t<=i},containData:function(t){return this.contain(this.dataToCoord(t))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return Xl(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var r=this._extent;r[0]=t;r[1]=e},dataToCoord:function(t,e){var r=this._extent;var i=this.scale;t=i.normalize(t);if(this.onBand&&i.type==="ordinal"){r=r.slice();Zg(r,i.count())}return Gl(t,Fg,r,e)},coordToData:function(t,e){var r=this._extent;var i=this.scale;if(this.onBand&&i.type==="ordinal"){r=r.slice();Zg(r,i.count())}var a=Gl(t,r,Fg,e);return this.scale.scale(a)},pointToData:function(t,e){},getTicksCoords:function(t){t=t||{};var e=t.tickModel||this.getTickModel();var r=Ag(this,e);var i=r.ticks;var a=k(i,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this);var n=e.get("alignWithLabel");Ug(this,a,r.tickCategoryInterval,n,t.clamp);return a},getViewLabels:function(){return Dg(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent;var e=this.scale.getExtent();var r=e[1]-e[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/r},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return zg(this)}};function Zg(t,e){var r=t[1]-t[0];var i=e;var a=r/i/2;t[0]+=a;t[1]-=a}function Ug(t,e,r,i,a){var n=e.length;if(!t.onBand||i||!n){return}var o=t.getExtent();var s;if(n===1){e[0].coord=o[0];s=e[1]={coord:o[0]}}else{var l=e[1].coord-e[0].coord;L(e,function(t){t.coord-=l/2;var e=e||0;if(e%2>0){t.coord-=l/((e+1)*2)}});s={coord:e[n-1].coord+l};e.push(s)}var u=o[0]>o[1];if(h(e[0].coord,o[0])){a?e[0].coord=o[0]:e.shift()}if(a&&h(o[0],e[0].coord)){e.unshift({coord:o[0]})}if(h(o[1],s.coord)){a?s.coord=o[1]:e.pop()}if(a&&h(s.coord,o[1])){e.push({coord:o[1]})}function h(t,e){return u?t>e:t<e}}var Xg=Ig;var jg={};L(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(t){jg[t]=nt[t]});Lf.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,r){if(e){var i=t.coordinateSystem;if(i!=="polar"&&i!=="cartesian2d"){throw new Error("Line not support coordinateSystem besides cartesian and polar")}}return qd(this.getSource(),this)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,hoverAnimation:true,clipOverflow:true,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:false,smooth:false,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:true,showAllSymbol:"auto",connectNulls:false,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:Infinity}});function Yg(t,e){var r=t.mapDimension("defaultedLabel",true);var i=r.length;if(i===1){return xf(t,e,r[0])}else if(i){var a=[];for(var n=0;n<r.length;n++){var o=xf(t,e,r[n]);a.push(o)}return a.join(" ")}}function qg(t,e,r){fr.call(this);this.updateData(t,e,r)}var Kg=qg.prototype;var $g=qg.getSymbolSize=function(t,e){var r=t.getItemVisual(e,"symbolSize");return r instanceof Array?r.slice():[+r,+r]};function Jg(t){return[t[0]/2,t[1]/2]}function Qg(t,e){this.parent.drift(t,e)}Kg._createSymbol=function(t,e,r,i,a){this.removeAll();var n=e.getItemVisual(r,"color");var o=vg(t,-1,-1,2,2,n,a);o.attr({z2:100,culling:true,scale:Jg(i)});o.drift=Qg;this._symbolType=t;this.add(o)};Kg.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)};Kg.getSymbolPath=function(){return this.childAt(0)};Kg.getScale=function(){return this.childAt(0).scale};Kg.highlight=function(){this.childAt(0).trigger("emphasis")};Kg.downplay=function(){this.childAt(0).trigger("normal")};Kg.setZ=function(t,e){var r=this.childAt(0);r.zlevel=t;r.z=e};Kg.setDraggable=function(t){var e=this.childAt(0);e.draggable=t;e.cursor=t?"move":"pointer"};Kg.updateData=function(t,e,r){this.silent=false;var i=t.getItemVisual(e,"symbol")||"circle";var a=t.hostModel;var n=$g(t,e);var o=i!==this._symbolType;if(o){var s=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(i,t,e,n,s)}else{var l=this.childAt(0);l.silent=false;pl(l,{scale:Jg(n)},a,e)}this._updateCommon(t,e,n,r);if(o){var l=this.childAt(0);var u=r&&r.fadeIn;var h={scale:l.scale.slice()};u&&(h.style={opacity:l.style.opacity});l.scale=[0,0];u&&(l.style.opacity=0);gl(l,h,a,e)}this._seriesModel=a};var tm=["itemStyle"];var em=["emphasis","itemStyle"];var rm=["label"];var im=["emphasis","label"];Kg._updateCommon=function(t,e,r,i){var a=this.childAt(0);var n=t.hostModel;var o=t.getItemVisual(e,"color");if(a.type!=="image"){a.useStyle({strokeNoScale:true})}var s=i&&i.itemStyle;var l=i&&i.hoverItemStyle;var u=i&&i.symbolRotate;var h=i&&i.symbolOffset;var f=i&&i.labelModel;var c=i&&i.hoverLabelModel;var v=i&&i.hoverAnimation;var d=i&&i.cursorStyle;if(!i||t.hasItemOption){var p=i&&i.itemModel?i.itemModel:t.getItemModel(e);s=p.getModel(tm).getItemStyle(["color"]);l=p.getModel(em).getItemStyle();u=p.getShallow("symbolRotate");h=p.getShallow("symbolOffset");f=p.getModel(rm);c=p.getModel(im);v=p.getShallow("hoverAnimation");d=p.getShallow("cursor")}else{l=w({},l)}var g=a.style;a.attr("rotation",(u||0)*Math.PI/180||0);if(h){a.attr("position",[Wl(h[0],r[0]),Wl(h[1],r[1])])}d&&a.attr("cursor",d);a.setColor(o,i&&i.symbolInnerColor);a.setStyle(s);var m=t.getItemVisual(e,"opacity");if(m!=null){g.opacity=m}var y=t.getItemVisual(e,"liftZ");var x=a.__z2Origin;if(y!=null){if(x==null){a.__z2Origin=a.z2;a.z2+=y}}else if(x!=null){a.z2=x;a.__z2Origin=null}var _=i&&i.useNameLabel;al(g,l,f,c,{labelFetcher:n,labelDataIndex:e,defaultText:b,isRectText:true,autoColor:o});function b(e,r){return _?t.getName(e):Yg(t,e)}a.off("mouseover").off("mouseout").off("emphasis").off("normal");a.hoverStyle=l;il(a);var S=Jg(r);if(v&&n.isAnimationEnabled()){var M=function(){if(this.incremental){return}var t=S[1]/S[0];this.animateTo({scale:[Math.max(S[0]*1.1,S[0]+3),Math.max(S[1]*1.1,S[1]+3*t)]},400,"elasticOut")};var I=function(){if(this.incremental){return}this.animateTo({scale:S},400,"elasticOut")};a.on("mouseover",M).on("mouseout",I).on("emphasis",M).on("normal",I)}};Kg.fadeOut=function(t,e){var r=this.childAt(0);this.silent=r.silent=true;!(e&&e.keepLabel)&&(r.style.text=null);pl(r,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)};D(qg,fr);function am(t){this.group=new fr;this._symbolCtor=t||qg}var nm=am.prototype;function om(t,e,r,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(r))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&t.getItemVisual(r,"symbol")!=="none"}nm.updateData=function(t,e){e=sm(e);var r=this.group;var i=t.hostModel;var a=this._data;var n=this._symbolCtor;var o=lm(t);if(!a){r.removeAll()}t.diff(a).add(function(i){var a=t.getItemLayout(i);if(om(t,a,i,e)){var s=new n(t,i,o);s.attr("position",a);t.setItemGraphicEl(i,s);r.add(s)}}).update(function(s,l){var u=a.getItemGraphicEl(l);var h=t.getItemLayout(s);if(!om(t,h,s,e)){r.remove(u);return}if(!u){u=new n(t,s);u.attr("position",h)}else{u.updateData(t,s,o);pl(u,{position:h},i)}r.add(u);t.setItemGraphicEl(s,u)}).remove(function(t){var e=a.getItemGraphicEl(t);e&&e.fadeOut(function(){r.remove(e)})}).execute();this._data=t};nm.isPersistent=function(){return true};nm.updateLayout=function(){var t=this._data;if(t){t.eachItemGraphicEl(function(e,r){var i=t.getItemLayout(r);e.attr("position",i)})}};nm.incrementalPrepareUpdate=function(t){this._seriesScope=lm(t);this._data=null;this.group.removeAll()};nm.incrementalUpdate=function(t,e,r){r=sm(r);function i(t){if(!t.isGroup){t.incremental=t.useHoverLayer=true}}for(var a=t.start;a<t.end;a++){var n=e.getItemLayout(a);if(om(e,n,a,r)){var o=new this._symbolCtor(e,a,this._seriesScope);o.traverse(i);o.attr("position",n);this.group.add(o);e.setItemGraphicEl(a,o)}}};function sm(t){if(t!=null&&!G(t)){t={isIgnore:t}}return t||{}}nm.remove=function(t){var e=this.group;var r=this._data;if(r&&t){r.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})})}else{e.removeAll()}};function lm(t){var e=t.hostModel;return{itemStyle:e.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:e.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label"),cursorStyle:e.get("cursor")}}function um(t,e,r){var i=t.getBaseAxis();var a=t.getOtherAxis(i);var n=hm(a,r);var o=i.dim;var s=a.dim;var l=e.mapDimension(s);var u=e.mapDimension(o);var h=s==="x"||s==="radius"?1:0;var f=k(t.dimensions,function(t){return e.mapDimension(t)});var c;var v=e.getCalculationInfo("stackResultDimension");if(c|=jd(e,f[0])){f[0]=v}if(c|=jd(e,f[1])){f[1]=v}return{dataDimsForPoint:f,valueStart:n,valueAxisDim:s,baseAxisDim:o,stacked:!!c,valueDim:l,baseDim:u,baseDataOffset:h,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function hm(t,e){var r=0;var i=t.scale.getExtent();if(e==="start"){r=i[0]}else if(e==="end"){r=i[1]}else{if(i[0]>0){r=i[0]}else if(i[1]<0){r=i[1]}}return r}function fm(t,e,r,i){var a=NaN;if(t.stacked){a=r.get(r.getCalculationInfo("stackedOverDimension"),i)}if(isNaN(a)){a=t.valueStart}var n=t.baseDataOffset;var o=[];o[n]=r.get(t.baseDim,i);o[1-n]=a;return e.dataToPoint(o)}function cm(t,e){var r=[];e.diff(t).add(function(t){r.push({cmd:"+",idx:t})}).update(function(t,e){r.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){r.push({cmd:"-",idx:t})}).execute();return r}var vm=function(t,e,r,i,a,n,o,s){var l=cm(t,e);var u=[];var h=[];var f=[];var c=[];var v=[];var d=[];var p=[];var g=um(a,e,o);var m=um(n,t,s);for(var y=0;y<l.length;y++){var x=l[y];var _=true;switch(x.cmd){case"=":var w=t.getItemLayout(x.idx);var b=e.getItemLayout(x.idx1);if(isNaN(w[0])||isNaN(w[1])){w=b.slice()}u.push(w);h.push(b);f.push(r[x.idx]);c.push(i[x.idx1]);p.push(e.getRawIndex(x.idx1));break;case"+":var S=x.idx;u.push(a.dataToPoint([e.get(g.dataDimsForPoint[0],S),e.get(g.dataDimsForPoint[1],S)]));h.push(e.getItemLayout(S).slice());f.push(fm(g,a,e,S));c.push(i[S]);p.push(e.getRawIndex(S));break;case"-":var S=x.idx;var M=t.getRawIndex(S);if(M!==S){u.push(t.getItemLayout(S));h.push(n.dataToPoint([t.get(m.dataDimsForPoint[0],S),t.get(m.dataDimsForPoint[1],S)]));f.push(r[S]);c.push(fm(m,n,t,S));p.push(M)}else{_=false}}if(_){v.push(x);d.push(d.length)}}d.sort(function(t,e){return p[t]-p[e]});var I=[];var T=[];var D=[];var A=[];var C=[];for(var y=0;y<d.length;y++){var S=d[y];I[y]=u[S];T[y]=h[S];D[y]=f[S];A[y]=c[S];C[y]=v[S]}return{current:I,next:T,stackedOnCurrent:D,stackedOnNext:A,status:C}};var dm=Lt;var pm=kt;var gm=ct;var mm=lt;var ym=[];var xm=[];var _m=[];function wm(t){return isNaN(t[0])||isNaN(t[1])}function bm(t,e,r,i,a,n,o,s,l,u,h){if(u==="none"||!u){return Mm.apply(this,arguments)}else{return Sm.apply(this,arguments)}}function Sm(t,e,r,i,a,n,o,s,l,u,h){var f=0;var c=r;for(var v=0;v<i;v++){var d=e[c];if(c>=a||c<0){break}if(wm(d)){if(h){c+=n;continue}break}if(c===r){t[n>0?"moveTo":"lineTo"](d[0],d[1])}else{if(l>0){var p=e[f];var g=u==="y"?1:0;var m=(d[g]-p[g])*l;mm(xm,p);xm[g]=p[g]+m;mm(_m,d);_m[g]=d[g]-m;t.bezierCurveTo(xm[0],xm[1],_m[0],_m[1],d[0],d[1])}else{t.lineTo(d[0],d[1])}}f=c;c+=n}return v}function Mm(t,e,r,i,a,n,o,s,l,u,h){var f=0;var c=r;for(var v=0;v<i;v++){var d=e[c];if(c>=a||c<0){break}if(wm(d)){if(h){c+=n;continue}break}if(c===r){t[n>0?"moveTo":"lineTo"](d[0],d[1]);mm(xm,d)}else{if(l>0){var p=c+n;var g=e[p];if(h){while(g&&wm(e[p])){p+=n;g=e[p]}}var m=.5;var y=e[f];var g=e[p];if(!g||wm(g)){mm(_m,d)}else{if(wm(g)&&!h){g=d}vt(ym,g,y);var x;var _;if(u==="x"||u==="y"){var w=u==="x"?0:1;x=Math.abs(d[w]-y[w]);_=Math.abs(d[w]-g[w])}else{x=Mt(d,y);_=Mt(d,g)}m=_/(_+x);gm(_m,d,ym,-l*(1-m))}dm(xm,xm,s);pm(xm,xm,o);dm(_m,_m,s);pm(_m,_m,o);t.bezierCurveTo(xm[0],xm[1],_m[0],_m[1],d[0],d[1]);gm(xm,d,ym,l*m)}else{t.lineTo(d[0],d[1])}}f=c;c+=n}return v}function Im(t,e){var r=[Infinity,Infinity];var i=[-Infinity,-Infinity];if(e){for(var a=0;a<t.length;a++){var n=t[a];if(n[0]<r[0]){r[0]=n[0]}if(n[1]<r[1]){r[1]=n[1]}if(n[0]>i[0]){i[0]=n[0]}if(n[1]>i[1]){i[1]=n[1]}}}return{min:e?r:i,max:e?i:r}}var Tm=Wo.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:true,smoothMonotone:null,connectNulls:false},style:{fill:null,stroke:"#000"},brush:hs(Wo.prototype.brush),buildPath:function(t,e){var r=e.points;var i=0;var a=r.length;var n=Im(r,e.smoothConstraint);if(e.connectNulls){for(;a>0;a--){if(!wm(r[a-1])){break}}for(;i<a;i++){if(!wm(r[i])){break}}}while(i<a){i+=bm(t,r,i,a,a,1,n.min,n.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}});var Dm=Wo.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:true,smoothMonotone:null,connectNulls:false},brush:hs(Wo.prototype.brush),buildPath:function(t,e){var r=e.points;var i=e.stackedOnPoints;var a=0;var n=r.length;var o=e.smoothMonotone;var s=Im(r,e.smoothConstraint);var l=Im(i,e.smoothConstraint);if(e.connectNulls){for(;n>0;n--){if(!wm(r[n-1])){break}}for(;a<n;a++){if(!wm(r[a])){break}}}while(a<n){var u=bm(t,r,a,n,n,1,s.min,s.max,e.smooth,o,e.connectNulls);bm(t,i,a+u-1,u,n,-1,l.min,l.max,e.stackedOnSmooth,o,e.connectNulls);a+=u+1;t.closePath()}}});function Am(t,e){if(t.length!==e.length){return}for(var r=0;r<t.length;r++){var i=t[r];var a=e[r];if(i[0]!==a[0]||i[1]!==a[1]){return}}return true}function Cm(t){return typeof t==="number"?t:t?.5:0}function Lm(t){var e=t.getGlobalExtent();if(t.onBand){var r=t.getBandWidth()/2-1;var i=e[1]>e[0]?1:-1;e[0]+=i*r;e[1]-=i*r}return e}function km(t,e,r){if(!r.valueDim){return[]}var i=[];for(var a=0,n=e.count();a<n;a++){i.push(fm(r,t,e,a))}return i}function Pm(t,e,r,i){var a=Lm(t.getAxis("x"));var n=Lm(t.getAxis("y"));var o=t.getBaseAxis().isHorizontal();var s=Math.min(a[0],a[1]);var l=Math.min(n[0],n[1]);var u=Math.max(a[0],a[1])-s;var h=Math.max(n[0],n[1])-l;if(r){s-=.5;u+=.5;l-=.5;h+=.5}else{var f=i.get("lineStyle.width")||2;var c=i.get("clipOverflow")?f/2:Math.max(u,h);if(o){l-=c;h+=c*2}else{s-=c;u+=c*2}}var v=new xs({shape:{x:s,y:l,width:u,height:h}});if(e){v.shape[o?"width":"height"]=0;gl(v,{shape:{width:u,height:h}},i)}return v}function Nm(t,e,r,i){var a=t.getAngleAxis();var n=t.getRadiusAxis();var o=n.getExtent().slice();o[0]>o[1]&&o.reverse();var s=a.getExtent();var l=Math.PI/180;if(r){o[0]-=.5;o[1]+=.5}var u=new fs({shape:{cx:Fl(t.cx,1),cy:Fl(t.cy,1),r0:Fl(o[0],1),r:Fl(o[1],1),startAngle:-s[0]*l,endAngle:-s[1]*l,clockwise:a.inverse}});if(e){u.shape.endAngle=-s[0]*l;gl(u,{shape:{endAngle:-s[1]*l}},i)}return u}function Om(t,e,r,i){return t.type==="polar"?Nm(t,e,r,i):Pm(t,e,r,i)}function Em(t,e,r){var i=e.getBaseAxis();var a=i.dim==="x"||i.dim==="radius"?0:1;var n=[];for(var o=0;o<t.length-1;o++){var s=t[o+1];var l=t[o];n.push(l);var u=[];switch(r){case"end":u[a]=s[a];u[1-a]=l[1-a];n.push(u);break;case"middle":var h=(l[a]+s[a])/2;var f=[];u[a]=f[a]=h;u[1-a]=l[1-a];f[1-a]=s[1-a];n.push(u);n.push(f);break;default:u[a]=l[a];u[1-a]=s[1-a];n.push(u)}}t[o]&&n.push(t[o]);return n}function Rm(t,r){var i=t.getVisual("visualMeta");if(!i||!i.length||!t.count()){return}if(r.type!=="cartesian2d"){if(e){console.warn("Visual map on line style is only supported on cartesian2d.")}return}var a;var n;for(var o=i.length-1;o>=0;o--){var s=i[o].dimension;var l=t.dimensions[s];var u=t.getDimensionInfo(l);a=u&&u.coordDim;if(a==="x"||a==="y"){n=i[o];break}}if(!n){if(e){console.warn("Visual map on line style only support x or y dimension.")}return}var h=r.getAxis(a);var f=k(n.stops,function(t){return{coord:h.toGlobalCoord(h.dataToCoord(t.value)),color:t.color}});var c=f.length;var v=n.outerColors.slice();if(c&&f[0].coord>f[c-1].coord){f.reverse();v.reverse()}var d=10;var p=f[0].coord-d;var g=f[c-1].coord+d;var m=g-p;if(m<.001){return"transparent"}L(f,function(t){t.offset=(t.coord-p)/m});f.push({offset:c?f[c-1].offset:.5,color:v[1]||"transparent"});f.unshift({offset:c?f[0].offset:.5,color:v[0]||"transparent"});var y=new Ds(0,0,0,0,f,true);y[a]=p;y[a+"2"]=g;return y}function zm(t,e,r){var i=t.get("showAllSymbol");var a=i==="auto";if(i&&!a){return}var n=r.getAxesByScale("ordinal")[0];if(!n){return}if(a&&Bm(n,e)){return}var o=e.mapDimension(n.dim);var s={};L(n.getViewLabels(),function(t){s[t.tickValue]=1});return function(t){return!s.hasOwnProperty(e.get(o,t))}}function Bm(t,e){var r=t.getExtent();var i=Math.abs(r[1]-r[0])/t.scale.count();isNaN(i)&&(i=0);var a=e.count();var n=Math.max(1,Math.round(a/5));for(var o=0;o<a;o+=n){if(qg.getSymbolSize(e,o)[t.isHorizontal()?1:0]*1.5>i){return false}}return true}Zf.extend({type:"line",init:function(){var t=new fr;var e=new am;this.group.add(e.group);this._symbolDraw=e;this._lineGroup=t},render:function(t,e,r){var i=t.coordinateSystem;var a=this.group;var n=t.getData();var o=t.getModel("lineStyle");var s=t.getModel("areaStyle");var l=n.mapArray(n.getItemLayout);var u=i.type==="polar";var h=this._coordSys;var f=this._symbolDraw;var c=this._polyline;var v=this._polygon;var d=this._lineGroup;var p=t.get("animation");var g=!s.isEmpty();var m=s.get("origin");var y=um(i,n,m);var x=km(i,n,y);var _=t.get("showSymbol");var w=_&&!u&&zm(t,n,i);var S=this._data;S&&S.eachItemGraphicEl(function(t,e){if(t.__temp){a.remove(t);S.setItemGraphicEl(e,null)}});if(!_){f.remove()}a.add(d);var M=!u&&t.get("step");if(!(c&&h.type===i.type&&M===this._step)){_&&f.updateData(n,{isIgnore:w,clipShape:Om(i,false,true,t)});if(M){l=Em(l,i,M);x=Em(x,i,M)}c=this._newPolyline(l,i,p);if(g){v=this._newPolygon(l,x,i,p)}d.setClipPath(Om(i,true,false,t))}else{if(g&&!v){v=this._newPolygon(l,x,i,p)}else if(v&&!g){d.remove(v);v=this._polygon=null}d.setClipPath(Om(i,false,false,t));_&&f.updateData(n,{isIgnore:w,clipShape:Om(i,false,true,t)});n.eachItemGraphicEl(function(t){t.stopAnimation(true)});if(!Am(this._stackedOnPoints,x)||!Am(this._points,l)){if(p){this._updateAnimation(n,x,i,r,M,m)}else{if(M){l=Em(l,i,M);x=Em(x,i,M)}c.setShape({points:l});v&&v.setShape({points:l,stackedOnPoints:x})}}}var I=Rm(n,i)||n.getVisual("color");c.useStyle(b(o.getLineStyle(),{fill:"none",stroke:I,lineJoin:"bevel"}));var T=t.get("smooth");T=Cm(t.get("smooth"));c.setShape({smooth:T,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")});if(v){var D=n.getCalculationInfo("stackedOnSeries");var A=0;v.useStyle(b(s.getAreaStyle(),{fill:I,opacity:.7,lineJoin:"bevel"}));if(D){A=Cm(D.get("smooth"))}v.setShape({smooth:T,stackedOnSmooth:A,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=n;this._coordSys=i;this._stackedOnPoints=x;this._points=l;this._step=M;this._valueOrigin=m},dispose:function(){},highlight:function(t,e,r,i){var a=t.getData();var n=Ka(a,i);if(!(n instanceof Array)&&n!=null&&n>=0){var o=a.getItemGraphicEl(n);if(!o){var s=a.getItemLayout(n);if(!s){return}o=new qg(a,n);o.position=s;o.setZ(t.get("zlevel"),t.get("z"));o.ignore=isNaN(s[0])||isNaN(s[1]);o.__temp=true;a.setItemGraphicEl(n,o);o.stopSymbolAnimation(true);this.group.add(o)}o.highlight()}else{Zf.prototype.highlight.call(this,t,e,r,i)}},downplay:function(t,e,r,i){var a=t.getData();var n=Ka(a,i);if(n!=null&&n>=0){var o=a.getItemGraphicEl(n);if(o){if(o.__temp){a.setItemGraphicEl(n,null);this.group.remove(o)}else{o.downplay()}}}else{Zf.prototype.downplay.call(this,t,e,r,i)}},_newPolyline:function(t){var e=this._polyline;if(e){this._lineGroup.remove(e)}e=new Tm({shape:{points:t},silent:true,z2:10});this._lineGroup.add(e);this._polyline=e;return e},_newPolygon:function(t,e){var r=this._polygon;if(r){this._lineGroup.remove(r)}r=new Dm({shape:{points:t,stackedOnPoints:e},silent:true});this._lineGroup.add(r);this._polygon=r;return r},_updateAnimation:function(t,e,r,i,a,n){var o=this._polyline;var s=this._polygon;var l=t.hostModel;var u=vm(this._data,t,this._stackedOnPoints,e,this._coordSys,r,this._valueOrigin,n);var h=u.current;var f=u.stackedOnCurrent;var c=u.next;var v=u.stackedOnNext;if(a){h=Em(u.current,r,a);f=Em(u.stackedOnCurrent,r,a);c=Em(u.next,r,a);v=Em(u.stackedOnNext,r,a)}o.shape.__points=u.current;o.shape.points=h;pl(o,{shape:{points:c}},l);if(s){s.setShape({points:h,stackedOnPoints:f});pl(s,{shape:{points:c,stackedOnPoints:v}},l)}var d=[];var p=u.status;for(var g=0;g<p.length;g++){var m=p[g].cmd;if(m==="="){var y=t.getItemGraphicEl(p[g].idx1);if(y){d.push({el:y,ptIdx:g})}}}if(o.animators&&o.animators.length){o.animators[0].during(function(){for(var t=0;t<d.length;t++){var e=d[t].el;e.attr("position",o.shape.__points[d[t].ptIdx])}})}},remove:function(t){var e=this.group;var r=this._data;this._lineGroup.removeAll();this._symbolDraw.remove(true);r&&r.eachItemGraphicEl(function(t,i){if(t.__temp){e.remove(t);r.setItemGraphicEl(i,null)}});this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var Vm=function(t,e,r){return{seriesType:t,performRawSeries:true,reset:function(t,i,a){var n=t.getData();var o=t.get("symbol")||e;var s=t.get("symbolSize");var l=t.get("symbolKeepAspect");n.setVisual({legendSymbol:r||o,symbol:o,symbolSize:s,symbolKeepAspect:l});if(i.isSeriesFiltered(t)){return}var u=typeof s==="function";function h(e,r){if(typeof s==="function"){var i=t.getRawValue(r);var a=t.getDataParams(r);e.setItemVisual(r,"symbolSize",s(i,a))}if(e.hasItemOption){var n=e.getItemModel(r);var o=n.getShallow("symbol",true);var l=n.getShallow("symbolSize",true);var u=n.getShallow("symbolKeepAspect",true);if(o!=null){e.setItemVisual(r,"symbol",o)}if(l!=null){e.setItemVisual(r,"symbolSize",l)}if(u!=null){e.setItemVisual(r,"symbolKeepAspect",u)}}}return{dataEach:n.hasItemOption||u?h:null}}}};var Gm=function(t){return{seriesType:t,plan:Wf(),reset:function(t){var e=t.getData();var r=t.coordinateSystem;var i=t.pipelineContext;var a=i.large;if(!r){return}var n=k(r.dimensions,function(t){return e.mapDimension(t)}).slice(0,2);var o=n.length;var s=e.getCalculationInfo("stackResultDimension");if(jd(e,n[0])){n[0]=s}if(jd(e,n[1])){n[1]=s}function l(t,e){var i=t.end-t.start;var s=a&&new Float32Array(i*o);for(var l=t.start,u=0,h=[],f=[];l<t.end;l++){var c;if(o===1){var v=e.get(n[0],l);c=!isNaN(v)&&r.dataToPoint(v,null,f)}else{var v=h[0]=e.get(n[0],l);var d=h[1]=e.get(n[1],l);c=!isNaN(v)&&!isNaN(d)&&r.dataToPoint(h,null,f)}if(a){s[u++]=c?c[0]:NaN;s[u++]=c?c[1]:NaN}else{e.setItemLayout(l,c&&c.slice()||[NaN,NaN])}}a&&e.setLayout("symbolPoints",s)}return o&&{progress:l}}}};var Wm={average:function(t){var e=0;var r=0;for(var i=0;i<t.length;i++){if(!isNaN(t[i])){e+=t[i];r++}}return r===0?NaN:e/r},sum:function(t){var e=0;for(var r=0;r<t.length;r++){e+=t[r]||0}return e},max:function(t){var e=-Infinity;for(var r=0;r<t.length;r++){t[r]>e&&(e=t[r])}return isFinite(e)?e:NaN},min:function(t){var e=Infinity;for(var r=0;r<t.length;r++){t[r]<e&&(e=t[r])}return isFinite(e)?e:NaN},nearest:function(t){return t[0]}};var Fm=function(t,e){return Math.round(t.length/2)};var Hm=function(t){return{seriesType:t,modifyOutputEnd:true,reset:function(t,e,r){var i=t.getData();var a=t.get("sampling");var n=t.coordinateSystem;if(n.type==="cartesian2d"&&a){var o=n.getBaseAxis();var s=n.getOtherAxis(o);var l=o.getExtent();var u=l[1]-l[0];var h=Math.round(i.count()/u);if(h>1){var f;if(typeof a==="string"){f=Wm[a]}else if(typeof a==="function"){f=a}if(f){t.setData(i.downSample(i.mapDimension(s.dim),1/h,f,Fm))}}}}}};function Zm(t){return this._axes[t]}var Um=function(t){this._axes={};this._dimList=[];this.name=t||""};Um.prototype={constructor:Um,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return k(this._dimList,Zm,this)},getAxesByScale:function(t){t=t.toLowerCase();return N(this.getAxes(),function(e){return e.scale.type===t})},addAxis:function(t){var e=t.dim;this._axes[e]=t;this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){var r=this._dimList;var i=t instanceof Array?[]:{};for(var a=0;a<r.length;a++){var n=r[a];var o=this._axes[n];i[n]=o[e](t[n])}return i}};function Xm(t){Um.call(this,t)}Xm.prototype={constructor:Xm,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x");var r=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&r.contain(r.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,r){var i=this.getAxis("x");var a=this.getAxis("y");r=r||[];r[0]=i.toGlobalCoord(i.dataToCoord(t[0]));r[1]=a.toGlobalCoord(a.dataToCoord(t[1]));return r},clampData:function(t,e){var r=this.getAxis("x").scale;var i=this.getAxis("y").scale;var a=r.getExtent();var n=i.getExtent();var o=r.parse(t[0]);var s=i.parse(t[1]);e=e||[];e[0]=Math.min(Math.max(Math.min(a[0],a[1]),o),Math.max(a[0],a[1]));e[1]=Math.min(Math.max(Math.min(n[0],n[1]),s),Math.max(n[0],n[1]));return e},pointToData:function(t,e){var r=this.getAxis("x");var i=this.getAxis("y");e=e||[];e[0]=r.coordToData(r.toLocalCoord(t[0]));e[1]=i.coordToData(i.toLocalCoord(t[1]));return e},getOtherAxis:function(t){return this.getAxis(t.dim==="x"?"y":"x")}};D(Xm,Um);var jm=function(t,e,r,i,a){Hg.call(this,t,e,r);this.type=i||"value";this.position=a||"bottom"};jm.prototype={constructor:jm,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return t==="top"||t==="bottom"},getGlobalExtent:function(t){var e=this.getExtent();e[0]=this.toGlobalCoord(e[0]);e[1]=this.toGlobalCoord(e[1]);t&&e[0]>e[1]&&e.reverse();return e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),e)},toLocalCoord:null,toGlobalCoord:null};D(jm,Hg);var Ym={show:true,zlevel:0,z:0,inverse:false,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:false,triggerEvent:false,tooltip:{show:false},axisPointer:{},axisLine:{show:true,onZero:true,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:true,inside:false,length:5,lineStyle:{width:1}},axisLabel:{show:true,inside:false,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:true,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:false,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}};var qm={};qm.categoryAxis=x({boundaryGap:true,deduplication:null,splitLine:{show:false},axisTick:{alignWithLabel:false,interval:"auto"},axisLabel:{interval:"auto"}},Ym);qm.valueAxis=x({boundaryGap:[0,0],splitNumber:5},Ym);qm.timeAxis=b({scale:true,min:"dataMin",max:"dataMax"},qm.valueAxis);qm.logAxis=b({scale:true,logBase:10},qm.valueAxis);var Km=["value","category","time","log"];var $m=function(t,e,r,i){L(Km,function(a){e.extend({type:t+"Axis."+a,mergeDefaultAndTheme:function(e,i){var n=this.layoutMode;var o=n?Ou(e):{};var s=i.getTheme();x(e,s.get(a+"Axis"));x(e,this.getDefaultOption());e.type=r(t,e);if(n){Nu(e,o,n)}},optionUpdated:function(){var t=this.option;if(t.type==="category"){this.__ordinalMeta=Qd.createByAxisModel(this)}},getCategories:function(t){var e=this.option;if(e.type==="category"){if(t){return e.data}return this.__ordinalMeta.categories}},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:_([{},qm[a+"Axis"],i],true)})});Bu.registerSubTypeDefaulter(t+"Axis",R(r,t));
};var Jm=Bu.extend({type:"cartesian2dAxis",axis:null,init:function(){Jm.superApply(this,"init",arguments);this.resetRange()},mergeOption:function(){Jm.superApply(this,"mergeOption",arguments);this.resetRange()},restoreData:function(){Jm.superApply(this,"restoreData",arguments);this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function Qm(t,e){return e.type||(e.data?"category":"value")}x(Jm.prototype,ig);var ty={offset:0};$m("x",Jm,Qm,ty);$m("y",Jm,Qm,ty);Bu.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:false,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:false,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});function ey(t,e,r){return t.getCoordSysModel()===e}function ry(t,e,r){this._coordsMap={};this._coordsList=[];this._axesMap={};this._axesList=[];this._initCartesian(t,e,r);this.model=t}var iy=ry.prototype;iy.type="grid";iy.axisPointerEnabled=true;iy.getRect=function(){return this._rect};iy.update=function(t,e){var r=this._axesMap;this._updateScale(t,this.model);L(r.x,function(t){Kp(t.scale,t.model)});L(r.y,function(t){Kp(t.scale,t.model)});L(r.x,function(t){ay(r,"y",t)});L(r.y,function(t){ay(r,"x",t)});this.resize(this.model,e)};function ay(t,e,r){r.getAxesOnZeroOf=function(){return a?[a]:[]};var i=t[e];var a;var n=r.model;var o=n.get("axisLine.onZero");var s=n.get("axisLine.onZeroAxisIndex");if(!o){return}if(s!=null){if(ny(i[s])){a=i[s]}return}for(var l in i){if(i.hasOwnProperty(l)&&ny(i[l])){a=i[l];break}}}function ny(t){return t&&t.type!=="category"&&t.type!=="time"&&Jp(t)}iy.resize=function(t,e,r){var i=Lu(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=i;var a=this._axesList;n();if(!r&&t.get("containLabel")){L(a,function(t){if(!t.model.get("axisLabel.inside")){var e=eg(t);if(e){var r=t.isHorizontal()?"height":"width";var a=t.model.get("axisLabel.margin");i[r]-=e[r]+a;if(t.position==="top"){i.y+=e.height+a}else if(t.position==="left"){i.x+=e.width+a}}}});n()}function n(){L(a,function(t){var e=t.isHorizontal();var r=e?[0,i.width]:[0,i.height];var a=t.inverse?1:0;t.setExtent(r[a],r[1-a]);oy(t,e?i.x:i.y)})}};iy.getAxis=function(t,e){var r=this._axesMap[t];if(r!=null){if(e==null){for(var i in r){if(r.hasOwnProperty(i)){return r[i]}}}return r[e]}};iy.getAxes=function(){return this._axesList.slice()};iy.getCartesian=function(t,e){if(t!=null&&e!=null){var r="x"+t+"y"+e;return this._coordsMap[r]}if(G(t)){e=t.yAxisIndex;t=t.xAxisIndex}for(var i=0,a=this._coordsList;i<a.length;i++){if(a[i].getAxis("x").index===t||a[i].getAxis("y").index===e){return a[i]}}};iy.getCartesians=function(){return this._coordsList.slice()};iy.convertToPixel=function(t,e,r){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null};iy.convertFromPixel=function(t,e,r){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null};iy._findConvertTarget=function(t,e){var r=e.seriesModel;var i=e.xAxisModel||r&&r.getReferringComponents("xAxis")[0];var a=e.yAxisModel||r&&r.getReferringComponents("yAxis")[0];var n=e.gridModel;var o=this._coordsList;var s;var l;if(r){s=r.coordinateSystem;T(o,s)<0&&(s=null)}else if(i&&a){s=this.getCartesian(i.componentIndex,a.componentIndex)}else if(i){l=this.getAxis("x",i.componentIndex)}else if(a){l=this.getAxis("y",a.componentIndex)}else if(n){var u=n.coordinateSystem;if(u===this){s=this._coordsList[0]}}return{cartesian:s,axis:l}};iy.containPoint=function(t){var e=this._coordsList[0];if(e){return e.containPoint(t)}};iy._initCartesian=function(t,e,r){var i={left:false,right:false,top:false,bottom:false};var a={x:{},y:{}};var n={x:0,y:0};e.eachComponent("xAxis",o("x"),this);e.eachComponent("yAxis",o("y"),this);if(!n.x||!n.y){this._axesMap={};this._axesList=[];return}this._axesMap=a;L(a.x,function(e,r){L(a.y,function(i,a){var n="x"+r+"y"+a;var o=new Xm(n);o.grid=this;o.model=t;this._coordsMap[n]=o;this._coordsList.push(o);o.addAxis(e);o.addAxis(i)},this)},this);function o(r){return function(o,s){if(!ey(o,t,e)){return}var l=o.get("position");if(r==="x"){if(l!=="top"&&l!=="bottom"){l="bottom";if(i[l]){l=l==="top"?"bottom":"top"}}}else{if(l!=="left"&&l!=="right"){l="left";if(i[l]){l=l==="left"?"right":"left"}}}i[l]=true;var u=new jm(r,$p(o),[0,0],o.get("type"),l);var h=u.type==="category";u.onBand=h&&o.get("boundaryGap");u.inverse=o.get("inverse");o.axis=u;u.model=o;u.grid=this;u.index=s;this._axesList.push(u);a[r][s]=u;n[r]++}}};iy._updateScale=function(t,e){L(this._axesList,function(t){t.scale.setExtent(Infinity,-Infinity)});t.eachSeries(function(i){if(uy(i)){var a=ly(i,t);var n=a[0];var o=a[1];if(!ey(n,e,t)||!ey(o,e,t)){return}var s=this.getCartesian(n.componentIndex,o.componentIndex);var l=i.getData();var u=s.getAxis("x");var h=s.getAxis("y");if(l.type==="list"){r(l,u,i);r(l,h,i)}}},this);function r(t,e,r){L(t.mapDimension(e.dim,true),function(r){e.scale.unionExtentFromData(t,Yd(t,r))})}};iy.getTooltipAxes=function(t){var e=[];var r=[];L(this.getCartesians(),function(i){var a=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis();var n=i.getOtherAxis(a);T(e,a)<0&&e.push(a);T(r,n)<0&&r.push(n)});return{baseAxes:e,otherAxes:r}};function oy(t,e){var r=t.getExtent();var i=r[0]+r[1];t.toGlobalCoord=t.dim==="x"?function(t){return t+e}:function(t){return i-t+e};t.toLocalCoord=t.dim==="x"?function(t){return t-e}:function(t){return i-t+e}}var sy=["xAxis","yAxis"];function ly(t,r){return k(sy,function(r){var i=t.getReferringComponents(r)[0];if(e){if(!i){throw new Error(r+' "'+U(t.get(r+"Index"),t.get(r+"Id"),0)+'" not found')}}return i})}function uy(t){return t.get("coordinateSystem")==="cartesian2d"}ry.create=function(t,r){var i=[];t.eachComponent("grid",function(e,a){var n=new ry(e,t,r);n.name="grid_"+a;n.resize(e,r,true);e.coordinateSystem=n;i.push(n)});t.eachSeries(function(r){if(!uy(r)){return}var i=ly(r,t);var a=i[0];var n=i[1];var o=a.getCoordSysModel();if(e){if(!o){throw new Error('Grid "'+U(a.get("gridIndex"),a.get("gridId"),0)+'" not found')}if(a.getCoordSysModel()!==n.getCoordSysModel()){throw new Error("xAxis and yAxis must use the same grid")}}var s=o.coordinateSystem;r.coordinateSystem=s.getCartesian(a.componentIndex,n.componentIndex)});return i};ry.dimensions=ry.prototype.dimensions=Xm.prototype.dimensions;Ch.register("cartesian2d",ry);var hy=Math.PI;function fy(t){var e={componentType:t.mainType};e[t.mainType+"Index"]=t.componentIndex;return e}var cy=function(t,e){this.opt=e;this.axisModel=t;b(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:true});this.group=new fr;var r=new fr({position:e.position.slice(),rotation:e.rotation});r.updateTransform();this._transform=r.transform;this._dumbGroup=r};cy.prototype={constructor:cy,hasBuilder:function(t){return!!vy[t]},add:function(t){vy[t].call(this)},getGroup:function(){return this.group}};var vy={axisLine:function(){var t=this.opt;var e=this.axisModel;if(!e.get("axisLine.show")){return}var r=this.axisModel.axis.getExtent();var i=this._transform;var a=[r[0],0];var n=[r[1],0];if(i){Ct(a,a,i);Ct(n,n,i)}var o=w({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new _s(Fs({anid:"line",shape:{x1:a[0],y1:a[1],x2:n[0],y2:n[1]},style:o,strokeContainThreshold:t.strokeContainThreshold||5,silent:true,z2:1})));var s=e.get("axisLine.symbol");var l=e.get("axisLine.symbolSize");var u=e.get("axisLine.symbolOffset")||0;if(typeof u==="number"){u=[u,u]}if(s!=null){if(typeof s==="string"){s=[s,s]}if(typeof l==="string"||typeof l==="number"){l=[l,l]}var h=l[0];var f=l[1];L([{rotate:t.rotation+Math.PI/2,offset:u[0],r:0},{rotate:t.rotation-Math.PI/2,offset:u[1],r:Math.sqrt((a[0]-n[0])*(a[0]-n[0])+(a[1]-n[1])*(a[1]-n[1]))}],function(e,r){if(s[r]!=="none"&&s[r]!=null){var i=vg(s[r],-h/2,-f/2,h,f,o.stroke,true);var n=e.r+e.offset;var l=[a[0]+n*Math.cos(t.rotation),a[1]-n*Math.sin(t.rotation)];i.attr({rotation:e.rotate,position:l,silent:true});this.group.add(i)}},this)}},axisTickLabel:function(){var t=this.axisModel;var e=this.opt;var r=wy(this,t,e);var i=by(this,t,e);my(t,i,r)},axisName:function(){var t=this.opt;var e=this.axisModel;var r=U(t.axisName,e.get("name"));if(!r){return}var i=e.get("nameLocation");var a=t.nameDirection;var n=e.getModel("nameTextStyle");var o=e.get("nameGap")||0;var s=this.axisModel.axis.getExtent();var l=s[0]>s[1]?-1:1;var u=[i==="start"?s[0]-l*o:i==="end"?s[1]+l*o:(s[0]+s[1])/2,_y(i)?t.labelOffset+a*o:0];var h;var f=e.get("nameRotate");if(f!=null){f=f*hy/180}var c;if(_y(i)){h=dy(t.rotation,f!=null?f:t.rotation,a)}else{h=py(t,i,f||0,s);c=t.axisNameAvailableWidth;if(c!=null){c=Math.abs(c/Math.sin(h.rotation));!isFinite(c)&&(c=null)}}var v=n.getFont();var d=e.get("nameTruncate",true)||{};var p=d.ellipsis;var g=U(t.nameTruncateMaxWidth,d.maxWidth,c);var m=p!=null&&g!=null?xu(r,g,v,p,{minChar:2,placeholder:d.placeholder}):r;var y=e.get("tooltip",true);var x=e.mainType;var _={componentType:x,name:r,$vars:["name"]};_[x+"Index"]=e.componentIndex;var b=new ss({anid:"name",__fullText:r,__truncatedText:m,position:u,rotation:h.rotation,silent:gy(e),z2:1,tooltip:y&&y.show?w({content:r,formatter:function(){return r},formatterParams:_},y):null});nl(b.style,n,{text:m,textFont:v,textFill:n.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:h.textAlign,textVerticalAlign:h.textVerticalAlign});if(e.get("triggerEvent")){b.eventData=fy(e);b.eventData.targetType="axisName";b.eventData.name=r}this._dumbGroup.add(b);b.updateTransform();this.group.add(b);b.decomposeTransform()}};var dy=cy.innerTextLayout=function(t,e,r){var i=ql(e-t);var a;var n;if(Kl(i)){n=r>0?"top":"bottom";a="center"}else if(Kl(i-hy)){n=r>0?"bottom":"top";a="center"}else{n="middle";if(i>0&&i<hy){a=r>0?"right":"left"}else{a=r>0?"left":"right"}}return{rotation:i,textAlign:a,textVerticalAlign:n}};function py(t,e,r,i){var a=ql(r-t.rotation);var n;var o;var s=i[0]>i[1];var l=e==="start"&&!s||e!=="start"&&s;if(Kl(a-hy/2)){o=l?"bottom":"top";n="center"}else if(Kl(a-hy*1.5)){o=l?"top":"bottom";n="center"}else{o="middle";if(a<hy*1.5&&a>hy/2){n=l?"left":"right"}else{n=l?"right":"left"}}return{rotation:a,textAlign:n,textVerticalAlign:o}}function gy(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)}function my(t,e,r){var i=t.get("axisLabel.showMinLabel");var a=t.get("axisLabel.showMaxLabel");e=e||[];r=r||[];var n=e[0];var o=e[1];var s=e[e.length-1];var l=e[e.length-2];var u=r[0];var h=r[1];var f=r[r.length-1];var c=r[r.length-2];if(i===false){yy(n);yy(u)}else if(xy(n,o)){if(i){yy(o);yy(h)}else{yy(n);yy(u)}}if(a===false){yy(s);yy(f)}else if(xy(l,s)){if(a){yy(l);yy(c)}else{yy(s);yy(f)}}}function yy(t){t&&(t.ignore=true)}function xy(t,e,r){var i=t&&t.getBoundingRect().clone();var a=e&&e.getBoundingRect().clone();if(!i||!a){return}var n=Ut([]);qt(n,n,-t.rotation);i.applyTransform(jt([],n,t.getLocalTransform()));a.applyTransform(jt([],n,e.getLocalTransform()));return i.intersect(a)}function _y(t){return t==="middle"||t==="center"}function wy(t,e,r){var i=e.axis;if(!e.get("axisTick.show")||i.scale.isBlank()){return}var a=e.getModel("axisTick");var n=a.getModel("lineStyle");var o=a.get("length");var s=i.getTicksCoords();var l=[];var u=[];var h=t._transform;var f=[];for(var c=0;c<s.length;c++){var v=s[c].coord;l[0]=v;l[1]=0;u[0]=v;u[1]=r.tickDirection*o;if(h){Ct(l,l,h);Ct(u,u,h)}var d=new _s(Fs({anid:"tick_"+s[c].tickValue,shape:{x1:l[0],y1:l[1],x2:u[0],y2:u[1]},style:b(n.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),z2:2,silent:true}));t.group.add(d);f.push(d)}return f}function by(t,e,r){var i=e.axis;var a=U(r.axisLabelShow,e.get("axisLabel.show"));if(!a||i.scale.isBlank()){return}var n=e.getModel("axisLabel");var o=n.get("margin");var s=i.getViewLabels();var l=(U(r.labelRotate,n.get("rotate"))||0)*hy/180;var u=dy(r.rotation,l,r.labelDirection);var h=e.getCategories(true);var f=[];var c=gy(e);var v=e.get("triggerEvent");L(s,function(a,s){var l=a.tickValue;var d=a.formattedLabel;var p=a.rawLabel;var g=n;if(h&&h[l]&&h[l].textStyle){g=new kl(h[l].textStyle,n,e.ecModel)}var m=g.getTextColor()||e.get("axisLine.lineStyle.color");var y=i.dataToCoord(l);var x=[y,r.labelOffset+r.labelDirection*o];var _=new ss({anid:"label_"+l,position:x,rotation:u.rotation,silent:c,z2:10});nl(_.style,g,{text:d,textAlign:g.getShallow("align",true)||u.textAlign,textVerticalAlign:g.getShallow("verticalAlign",true)||g.getShallow("baseline",true)||u.textVerticalAlign,textFill:typeof m==="function"?m(i.type==="category"?p:i.type==="value"?l+"":l,s):m});if(v){_.eventData=fy(e);_.eventData.targetType="axisLabel";_.eventData.value=p}t._dumbGroup.add(_);_.updateTransform();f.push(_);t.group.add(_);_.decomposeTransform()});return f}var Sy=L;var My=R;function Iy(t,e){var r={axesInfo:{},seriesInvolved:false,coordSysAxesInfo:{},coordSysMap:{}};Ty(r,t,e);r.seriesInvolved&&Ay(r,t);return r}function Ty(t,e,r){var i=e.getComponent("tooltip");var a=e.getComponent("axisPointer");var n=a.get("link",true)||[];var o=[];Sy(r.getCoordinateSystems(),function(r){if(!r.axisPointerEnabled){return}var s=Ey(r.model);var l=t.coordSysAxesInfo[s]={};t.coordSysMap[s]=r;var u=r.model;var h=u.getModel("tooltip",i);Sy(r.getAxes(),My(d,false,null));if(r.getTooltipAxes&&i&&h.get("show")){var f=h.get("trigger")==="axis";var c=h.get("axisPointer.type")==="cross";var v=r.getTooltipAxes(h.get("axisPointer.axis"));if(f||c){Sy(v.baseAxes,My(d,c?"cross":true,f))}if(c){Sy(v.otherAxes,My(d,"cross",false))}}function d(i,s,u){var f=u.model.getModel("axisPointer",a);var c=f.get("show");if(!c||c==="auto"&&!i&&!Oy(f)){return}if(s==null){s=f.get("triggerTooltip")}f=i?Dy(u,h,a,e,i,s):f;var v=f.get("snap");var d=Ey(u.model);var p=s||v||u.type==="category";var g=t.axesInfo[d]={key:d,axis:u,coordSys:r,axisPointerModel:f,triggerTooltip:s,involveSeries:p,snap:v,useHandle:Oy(f),seriesModels:[]};l[d]=g;t.seriesInvolved|=p;var m=Cy(n,u);if(m!=null){var y=o[m]||(o[m]={axesInfo:{}});y.axesInfo[d]=g;y.mapper=n[m].mapper;g.linkGroup=y}}})}function Dy(t,e,r,i,a,n){var o=e.getModel("axisPointer");var s={};Sy(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){s[t]=y(o.get(t))});s.snap=t.type!=="category"&&!!n;if(o.get("type")==="cross"){s.type="line"}var l=s.label||(s.label={});l.show==null&&(l.show=false);if(a==="cross"){var u=o.get("label.show");l.show=u!=null?u:true;if(!n){var h=s.lineStyle=o.get("crossStyle");h&&b(l,h.textStyle)}}return t.model.getModel("axisPointer",new kl(s,r,i))}function Ay(t,e){e.eachSeries(function(e){var r=e.coordinateSystem;var i=e.get("tooltip.trigger",true);var a=e.get("tooltip.show",true);if(!r||i==="none"||i===false||i==="item"||a===false||e.get("axisPointer.show",true)===false){return}Sy(t.coordSysAxesInfo[Ey(r.model)],function(t){var i=t.axis;if(r.getAxis(i.dim)===i){t.seriesModels.push(e);t.seriesDataCount==null&&(t.seriesDataCount=0);t.seriesDataCount+=e.getData().count()}})},this)}function Cy(t,e){var r=e.model;var i=e.dim;for(var a=0;a<t.length;a++){var n=t[a]||{};if(Ly(n[i+"AxisId"],r.id)||Ly(n[i+"AxisIndex"],r.componentIndex)||Ly(n[i+"AxisName"],r.name)){return a}}}function Ly(t,e){return t==="all"||z(t)&&T(t,e)>=0||t===e}function ky(t){var e=Py(t);if(!e){return}var r=e.axisPointerModel;var i=e.axis.scale;var a=r.option;var n=r.get("status");var o=r.get("value");if(o!=null){o=i.parse(o)}var s=Oy(r);if(n==null){a.status=s?"show":"hide"}var l=i.getExtent().slice();l[0]>l[1]&&l.reverse();if(o==null||o>l[1]){o=l[1]}if(o<l[0]){o=l[0]}a.value=o;if(s){a.status=e.axis.scale.isBlank()?"hide":"show"}}function Py(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Ey(t)]}function Ny(t){var e=Py(t);return e&&e.axisPointerModel}function Oy(t){return!!t.get("handle.show")}function Ey(t){return t.type+"||"+t.id}var Ry=ad({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,r,i){this.axisPointerClass&&ky(t);Ry.superApply(this,"render",arguments);zy(this,t,e,r,i,true)},updateAxisPointer:function(t,e,r,i,a){zy(this,t,e,r,i,false)},remove:function(t,e){var r=this._axisPointer;r&&r.remove(e);Ry.superApply(this,"remove",arguments)},dispose:function(t,e){By(this,e);Ry.superApply(this,"dispose",arguments)}});function zy(t,e,r,i,a,n){var o=Ry.getAxisPointerClass(t.axisPointerClass);if(!o){return}var s=Ny(e);s?(t._axisPointer||(t._axisPointer=new o)).render(e,s,i,n):By(t,i)}function By(t,e,r){var i=t._axisPointer;i&&i.dispose(e,r);t._axisPointer=null}var Vy=[];Ry.registerAxisPointerClass=function(t,r){if(e){if(Vy[t]){throw new Error("axisPointer "+t+" exists")}}Vy[t]=r};Ry.getAxisPointerClass=function(t){return t&&Vy[t]};function Gy(t,e,r){r=r||{};var i=t.coordinateSystem;var a=e.axis;var n={};var o=a.getAxesOnZeroOf()[0];var s=a.position;var l=o?"onZero":s;var u=a.dim;var h=i.getRect();var f=[h.x,h.x+h.width,h.y,h.y+h.height];var c={left:0,right:1,top:0,bottom:1,onZero:2};var v=e.get("offset")||0;var d=u==="x"?[f[2]-v,f[3]+v]:[f[0]-v,f[1]+v];if(o){var p=o.toGlobalCoord(o.dataToCoord(0));d[c["onZero"]]=Math.max(Math.min(p,d[1]),d[0])}n.position=[u==="y"?d[c[l]]:f[0],u==="x"?d[c[l]]:f[3]];n.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};n.labelDirection=n.tickDirection=n.nameDirection=g[s];n.labelOffset=o?d[c[s]]-d[c["onZero"]]:0;if(e.get("axisTick.inside")){n.tickDirection=-n.tickDirection}if(U(r.labelInside,e.get("axisLabel.inside"))){n.labelDirection=-n.labelDirection}var m=e.get("axisLabel.rotate");n.labelRotate=l==="top"?-m:m;n.z2=1;return n}var Wy=["axisLine","axisTickLabel","axisName"];var Fy=["splitArea","splitLine"];var Hy=Ry.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(t,e,r,i){this.group.removeAll();var a=this._axisGroup;this._axisGroup=new fr;this.group.add(this._axisGroup);if(!t.get("show")){return}var n=t.getCoordSysModel();var o=Gy(n,t);var s=new cy(t,o);L(Wy,s.add,s);this._axisGroup.add(s.getGroup());L(Fy,function(e){if(t.get(e+".show")){this["_"+e](t,n)}},this);_l(a,this._axisGroup,t);Hy.superCall(this,"render",t,e,r,i)},remove:function(){this._splitAreaColors=null},_splitLine:function(t,e){var r=t.axis;if(r.scale.isBlank()){return}var i=t.getModel("splitLine");var a=i.getModel("lineStyle");var n=a.get("color");n=z(n)?n:[n];var o=e.coordinateSystem.getRect();var s=r.isHorizontal();var l=0;var u=r.getTicksCoords({tickModel:i});var h=[];var f=[];var c=a.getLineStyle();for(var v=0;v<u.length;v++){var d=r.toGlobalCoord(u[v].coord);if(s){h[0]=d;h[1]=o.y;f[0]=d;f[1]=o.y+o.height}else{h[0]=o.x;h[1]=d;f[0]=o.x+o.width;f[1]=d}var p=l++%n.length;var g=u[v].tickValue;this._axisGroup.add(new _s(Fs({anid:g!=null?"line_"+u[v].tickValue:null,shape:{x1:h[0],y1:h[1],x2:f[0],y2:f[1]},style:b({stroke:n[p]},c),silent:true})))}},_splitArea:function(t,e){var r=t.axis;if(r.scale.isBlank()){return}var i=t.getModel("splitArea");var a=i.getModel("areaStyle");var n=a.get("color");var o=e.coordinateSystem.getRect();var s=r.getTicksCoords({tickModel:i,clamp:true});if(!s.length){return}var l=n.length;var u=this._splitAreaColors;var h=rt();var f=0;if(u){for(var c=0;c<s.length;c++){var v=u.get(s[c].tickValue);if(v!=null){f=(v+(l-1)*c)%l;break}}}var d=r.toGlobalCoord(s[0].coord);var p=a.getAreaStyle();n=z(n)?n:[n];for(var c=1;c<s.length;c++){var g=r.toGlobalCoord(s[c].coord);var m;var y;var x;var _;if(r.isHorizontal()){m=d;y=o.y;x=g-m;_=o.height;d=m+x}else{m=o.x;y=d;x=o.width;_=g-y;d=y+_}var w=s[c-1].tickValue;w!=null&&h.set(w,f);this._axisGroup.add(new xs({anid:w!=null?"area_"+w:null,shape:{x:m,y:y,width:x,height:_},style:b({fill:n[f]},p),silent:true}));f=(f+1)%l}this._splitAreaColors=h}});Hy.extend({type:"xAxis"});Hy.extend({type:"yAxis"});ad({type:"grid",render:function(t,e){this.group.removeAll();if(t.get("show")){this.group.add(new xs({shape:t.coordinateSystem.getRect(),style:b({fill:t.get("backgroundColor")},t.getItemStyle()),silent:true,z2:-1}))}}});jv(function(t){if(t.xAxis&&t.yAxis&&!t.grid){t.grid={}}});td(Vm("line","circle","line"));Qv(Gm("line"));Yv(Kc.PROCESSOR.STATISTIC,Hm("line"));var Zy=Lf.extend({type:"series.__base_bar__",getInitialData:function(t,e){return qd(this.getSource(),this)},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var r=e.dataToPoint(e.clampData(t));var i=this.getData();var a=i.getLayout("offset");var n=i.getLayout("size");var o=e.getBaseAxis().isHorizontal()?0:1;r[o]+=a+n/2;return r}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,barMinHeight:0,barMinAngle:0,large:false,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});Zy.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return this.get("large")?this.get("progressive"):false},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold");var e=this.get("largeThreshold");if(e>t){t=e}return t}});function Uy(t,e,r,i,a,n,o){var s=r.getModel("label");var l=r.getModel("emphasis.label");al(t,e,s,l,{labelFetcher:a,labelDataIndex:n,defaultText:Yg(a.getData(),n),isRectText:true,autoColor:i});Xy(t);Xy(e)}function Xy(t,e){if(t.textPosition==="outside"){t.textPosition=e}}var jy=dn([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);var Yy={getBarItemStyle:function(t){var e=jy(this,t);if(this.getBorderLineDash){var r=this.getBorderLineDash();r&&(e.lineDash=r)}return e}};var qy=["itemStyle","barBorderWidth"];w(kl.prototype,Yy);od({type:"bar",render:function(t,r,i){this._updateDrawMode(t);var a=t.get("coordinateSystem");if(a==="cartesian2d"||a==="polar"){this._isLargeDraw?this._renderLarge(t,r,i):this._renderNormal(t,r,i)}else if(e){console.warn("Only cartesian2d and polar supported for bar.")}return this.group},incrementalPrepareRender:function(t,e,r){this._clear();this._updateDrawMode(t)},incrementalRender:function(t,e,r,i){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;if(this._isLargeDraw==null||e^this._isLargeDraw){this._isLargeDraw=e;this._clear()}},_renderNormal:function(t,e,r){var i=this.group;var a=t.getData();var n=this._data;var o=t.coordinateSystem;var s=o.getBaseAxis();var l;if(o.type==="cartesian2d"){l=s.isHorizontal()}else if(o.type==="polar"){l=s.dim==="angle"}var u=t.isAnimationEnabled()?t:null;a.diff(n).add(function(e){if(!a.hasValue(e)){return}var r=a.getItemModel(e);var n=Qy[o.type](a,e,r);var s=Ky[o.type](a,e,r,n,l,u);a.setItemGraphicEl(e,s);i.add(s);tx(s,a,e,r,n,t,l,o.type==="polar")}).update(function(e,r){var s=n.getItemGraphicEl(r);if(!a.hasValue(e)){i.remove(s);return}var h=a.getItemModel(e);var f=Qy[o.type](a,e,h);if(s){pl(s,{shape:f},u,e)}else{s=Ky[o.type](a,e,h,f,l,u,true)}a.setItemGraphicEl(e,s);i.add(s);tx(s,a,e,h,f,t,l,o.type==="polar")}).remove(function(t){var e=n.getItemGraphicEl(t);if(o.type==="cartesian2d"){e&&$y(t,u,e)}else{e&&Jy(t,u,e)}}).execute();this._data=a},_renderLarge:function(t,e,r){this._clear();ix(t,this.group)},_incrementalRenderLarge:function(t,e){ix(e,this.group,true)},dispose:at,remove:function(t){this._clear(t)},_clear:function(t){var e=this.group;var r=this._data;if(t&&t.get("animation")&&r&&!this._isLargeDraw){r.eachItemGraphicEl(function(e){if(e.type==="sector"){Jy(e.dataIndex,t,e)}else{$y(e.dataIndex,t,e)}})}else{e.removeAll()}this._data=null}});var Ky={cartesian2d:function(t,e,r,i,a,n,o){var s=new xs({shape:w({},i)});if(n){var l=s.shape;var u=a?"height":"width";var h={};l[u]=0;h[u]=i[u];Ml[o?"updateProps":"initProps"](s,{shape:h},n,e)}return s},polar:function(t,e,r,i,a,n,o){var s=i.startAngle<i.endAngle;var l=new fs({shape:b({clockwise:s},i)});if(n){var u=l.shape;var h=a?"r":"endAngle";var f={};u[h]=a?0:i.startAngle;f[h]=i[h];Ml[o?"updateProps":"initProps"](l,{shape:f},n,e)}return l}};function $y(t,e,r){r.style.text=null;pl(r,{shape:{width:0}},e,t,function(){r.parent&&r.parent.remove(r)})}function Jy(t,e,r){r.style.text=null;pl(r,{shape:{r:r.shape.r0}},e,t,function(){r.parent&&r.parent.remove(r)})}var Qy={cartesian2d:function(t,e,r){var i=t.getItemLayout(e);var a=ex(r,i);var n=i.width>0?1:-1;var o=i.height>0?1:-1;return{x:i.x+n*a/2,y:i.y+o*a/2,width:i.width-n*a,height:i.height-o*a}},polar:function(t,e,r){var i=t.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};function tx(t,e,r,i,a,n,o,s){var l=e.getItemVisual(r,"color");var u=e.getItemVisual(r,"opacity");var h=i.getModel("itemStyle");var f=i.getModel("emphasis.itemStyle").getBarItemStyle();if(!s){t.setShape("r",h.get("barBorderRadius")||0)}t.useStyle(b({fill:l,opacity:u},h.getBarItemStyle()));var c=i.getShallow("cursor");c&&t.attr("cursor",c);var v=o?a.height>0?"bottom":"top":a.width>0?"left":"right";if(!s){Uy(t.style,f,i,l,n,r,v)}il(t,f)}function ex(t,e){var r=t.get(qy)||0;return Math.min(r,Math.abs(e.width),Math.abs(e.height))}var rx=Wo.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){var r=e.points;var i=this.__startPoint;var a=this.__valueIdx;for(var n=0;n<r.length;n+=2){i[this.__valueIdx]=r[n+a];t.moveTo(i[0],i[1]);t.lineTo(r[n],r[n+1])}}});function ix(t,e,r){var i=t.getData();var a=[];var n=i.getLayout("valueAxisHorizontal")?1:0;a[1-n]=i.getLayout("valueAxisStart");var o=new rx({shape:{points:i.getLayout("largePoints")},incremental:!!r,__startPoint:a,__valueIdx:n});e.add(o);ax(o,t,i)}function ax(t,e,r){var i=r.getVisual("borderColor")||r.getVisual("color");var a=e.getModel("itemStyle").getItemStyle(["color","borderColor"]);t.useStyle(a);t.style.fill=null;t.style.stroke=i;t.style.lineWidth=r.getLayout("barWidth")}Qv(R(Sp,"bar"));Qv(Mp);td({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}});var nx=function(t,e,r){e=z(e)&&{coordDimensions:e}||w({},e);var i=t.getSource();var a=Ud(i,e);var n=new Cd(a,t);n.initData(i,r);return n};var ox={updateSelectedMap:function(t){this._targetList=z(t)?t.slice():[];this._selectTargetMap=P(t||[],function(t,e){t.set(e.name,e);return t},rt())},select:function(t,e){var r=e!=null?this._targetList[e]:this._selectTargetMap.get(t);var i=this.get("selectedMode");if(i==="single"){this._selectTargetMap.each(function(t){t.selected=false})}r&&(r.selected=true)},unSelect:function(t,e){var r=e!=null?this._targetList[e]:this._selectTargetMap.get(t);r&&(r.selected=false)},toggleSelected:function(t,e){var r=e!=null?this._targetList[e]:this._selectTargetMap.get(t);if(r!=null){this[r.selected?"unSelect":"select"](t,e);return r.selected}},isSelected:function(t,e){var r=e!=null?this._targetList[e]:this._selectTargetMap.get(t);return r&&r.selected}};var sx=nd({type:"series.pie",init:function(t){sx.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()};this.updateSelectedMap(this._createSelectableList());this._defaultLabelLine(t)},mergeOption:function(t){sx.superCall(this,"mergeOption",t);this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t,e){return nx(this,["value"])},_createSelectableList:function(){var t=this.getRawData();var e=t.mapDimension("value");var r=[];for(var i=0,a=t.count();i<a;i++){r.push({name:t.getName(i),value:t.get(e,i),selected:_f(t,i,"selected")})}return r},getDataParams:function(t){var e=this.getData();var r=sx.superCall(this,"getDataParams",t);var i=[];e.each(e.mapDimension("value"),function(t){i.push(t)});r.percent=jl(i,t,e.hostModel.get("percentPrecision"));r.$vars.push("percent");return r},_defaultLabelLine:function(t){Wa(t,"labelLine",["show"]);var e=t.labelLine;var r=t.emphasis.labelLine;e.show=e.show&&t.label.show;r.show=r.show&&t.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:true,hoverAnimation:true,center:["50%","50%"],radius:[0,"75%"],clockwise:true,startAngle:90,minAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:true,percentPrecision:2,stillShowZeroSum:true,label:{rotate:false,show:true,position:"outer"},labelLine:{show:true,length:15,length2:15,smooth:false,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationEasing:"cubicOut"}});A(sx,ox);function lx(t,e,r,i){var a=e.getData();var n=this.dataIndex;var o=a.getName(n);var s=e.get("selectedOffset");i.dispatchAction({type:"pieToggleSelect",from:t,name:o,seriesId:e.id});a.each(function(t){ux(a.getItemGraphicEl(t),a.getItemLayout(t),e.isSelected(a.getName(t)),s,r)})}function ux(t,e,r,i,a){var n=(e.startAngle+e.endAngle)/2;var o=Math.cos(n);var s=Math.sin(n);var l=r?i:0;var u=[o*l,s*l];a?t.animate().when(200,{position:u}).start("bounceOut"):t.attr("position",u)}function hx(t,e){fr.call(this);var r=new fs({z2:2});var i=new ys;var a=new ss;this.add(r);this.add(i);this.add(a);this.updateData(t,e,true);function n(){i.ignore=i.hoverIgnore;a.ignore=a.hoverIgnore}function o(){i.ignore=i.normalIgnore;a.ignore=a.normalIgnore}this.on("emphasis",n).on("normal",o).on("mouseover",n).on("mouseout",o)}var fx=hx.prototype;fx.updateData=function(t,e,r){var i=this.childAt(0);var a=t.hostModel;var n=t.getItemModel(e);var o=t.getItemLayout(e);var s=w({},o);s.label=null;if(r){i.setShape(s);var l=a.getShallow("animationType");if(l==="scale"){i.shape.r=o.r0;gl(i,{shape:{r:o.r}},a,e)}else{i.shape.endAngle=o.startAngle;pl(i,{shape:{endAngle:o.endAngle}},a,e)}}else{pl(i,{shape:s},a,e)}var u=t.getItemVisual(e,"color");i.useStyle(b({lineJoin:"bevel",fill:u},n.getModel("itemStyle").getItemStyle()));i.hoverStyle=n.getModel("emphasis.itemStyle").getItemStyle();var h=n.getShallow("cursor");h&&i.attr("cursor",h);ux(this,t.getItemLayout(e),a.isSelected(null,e),a.get("selectedOffset"),a.get("animation"));function f(){i.stopAnimation(true);i.animateTo({shape:{r:o.r+a.get("hoverOffset")}},300,"elasticOut")}function c(){i.stopAnimation(true);i.animateTo({shape:{r:o.r}},300,"elasticOut")}i.off("mouseover").off("mouseout").off("emphasis").off("normal");if(n.get("hoverAnimation")&&a.isAnimationEnabled()){i.on("mouseover",f).on("mouseout",c).on("emphasis",f).on("normal",c)}this._updateLabel(t,e);il(this)};fx._updateLabel=function(t,e){var r=this.childAt(1);var i=this.childAt(2);var a=t.hostModel;var n=t.getItemModel(e);var o=t.getItemLayout(e);var s=o.label;var l=t.getItemVisual(e,"color");pl(r,{shape:{points:s.linePoints||[[s.x,s.y],[s.x,s.y],[s.x,s.y]]}},a,e);pl(i,{style:{x:s.x,y:s.y}},a,e);i.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var u=n.getModel("label");var h=n.getModel("emphasis.label");var f=n.getModel("labelLine");var c=n.getModel("emphasis.labelLine");var l=t.getItemVisual(e,"color");al(i.style,i.hoverStyle={},u,h,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign,opacity:t.getItemVisual(e,"opacity")});i.ignore=i.normalIgnore=!u.get("show");i.hoverIgnore=!h.get("show");r.ignore=r.normalIgnore=!f.get("show");r.hoverIgnore=!c.get("show");r.setStyle({stroke:l,opacity:t.getItemVisual(e,"opacity")});r.setStyle(f.getModel("lineStyle").getLineStyle());r.hoverStyle=c.getModel("lineStyle").getLineStyle();var v=f.get("smooth");if(v&&v===true){v=.4}r.setShape({smooth:v})};D(hx,fr);var cx=Zf.extend({type:"pie",init:function(){var t=new fr;this._sectorGroup=t},render:function(t,e,r,i){if(i&&i.from===this.uid){return}var a=t.getData();var n=this._data;var o=this.group;var s=e.get("animation");var l=!n;var u=t.get("animationType");var h=R(lx,this.uid,t,s,r);var f=t.get("selectedMode");a.diff(n).add(function(t){var e=new hx(a,t);if(l&&u!=="scale"){e.eachChild(function(t){t.stopAnimation(true)})}f&&e.on("click",h);a.setItemGraphicEl(t,e);o.add(e)}).update(function(t,e){var r=n.getItemGraphicEl(e);r.updateData(a,t);r.off("click");f&&r.on("click",h);o.add(r);a.setItemGraphicEl(t,r);
}).remove(function(t){var e=n.getItemGraphicEl(t);o.remove(e)}).execute();if(s&&l&&a.count()>0&&u!=="scale"){var c=a.getItemLayout(0);var v=Math.max(r.getWidth(),r.getHeight())/2;var d=E(o.removeClipPath,o);o.setClipPath(this._createClipPath(c.cx,c.cy,v,c.startAngle,c.clockwise,d,t))}this._data=a},dispose:function(){},_createClipPath:function(t,e,r,i,a,n,o){var s=new fs({shape:{cx:t,cy:e,r0:0,r:r,startAngle:i,endAngle:i,clockwise:a}});gl(s,{shape:{endAngle:i+(a?1:-1)*Math.PI*2}},o,n);return s},containPoint:function(t,e){var r=e.getData();var i=r.getItemLayout(0);if(i){var a=t[0]-i.cx;var n=t[1]-i.cy;var o=Math.sqrt(a*a+n*n);return o<=i.r&&o>=i.r0}}});var vx=function(t,e){L(e,function(e){e.update="updateView";Kv(e,function(r,i){var a={};i.eachComponent({mainType:"series",subType:t,query:r},function(t){if(t[e.method]){t[e.method](r.name,r.dataIndex)}var i=t.getData();i.each(function(e){var r=i.getName(e);a[r]=t.isSelected(r)||false})});return{name:r.name,selected:a}})})};var dx=function(t){return{getTargetSeries:function(e){var r={};var i=rt();e.eachSeriesByType(t,function(t){t.__paletteScope=r;i.set(t.uid,t)});return i},reset:function(t,e){var r=t.getRawData();var i={};var a=t.getData();a.each(function(t){var e=a.getRawIndex(t);i[e]=t});r.each(function(e){var n=i[e];var o=n!=null&&a.getItemVisual(n,"color",true);if(!o){var s=r.getItemModel(e);var l=s.get("itemStyle.color")||t.getColorFromPalette(r.getName(e)||e+"",t.__paletteScope,r.count());r.setItemVisual(e,"color",l);if(n!=null){a.setItemVisual(n,"color",l)}}else{r.setItemVisual(e,"color",o)}})}}};function px(t,e,r,i,a,n,o){t.sort(function(t,e){return t.y-e.y});function s(e,r,i,a){for(var n=e;n<r;n++){t[n].y+=i;if(n>e&&n+1<r&&t[n+1].y>t[n].y+t[n].height){l(n,i/2);return}}l(r-1,i/2)}function l(e,r){for(var i=e;i>=0;i--){t[i].y-=r;if(i>0&&t[i].y>t[i-1].y+t[i-1].height){break}}}function u(t,e,r,i,a,n){var o=n>0?e?Number.MAX_VALUE:0:e?Number.MAX_VALUE:0;for(var s=0,l=t.length;s<l;s++){if(t[s].position==="center"){continue}var u=Math.abs(t[s].y-i);var h=t[s].len;var f=t[s].len2;var c=u<a+h?Math.sqrt((a+h+f)*(a+h+f)-u*u):Math.abs(t[s].x-r);if(e&&c>=o){c=o-10}if(!e&&c<=o){c=o+10}t[s].x=r+c*n;o=c}}var h=0;var f;var c=t.length;var v=[];var d=[];for(var p=0;p<c;p++){f=t[p].y-h;if(f<0){s(p,c,-f,a)}h=t[p].y+t[p].height}if(o-h<0){l(c-1,h-o)}for(var p=0;p<c;p++){if(t[p].y>=r){d.push(t[p])}else{v.push(t[p])}}u(v,false,e,r,i,a);u(d,true,e,r,i,a)}function gx(t,e,r,i,a,n){var o=[];var s=[];for(var l=0;l<t.length;l++){if(t[l].x<e){o.push(t[l])}else{s.push(t[l])}}px(s,e,r,i,1,a,n);px(o,e,r,i,-1,a,n);for(var l=0;l<t.length;l++){var u=t[l].linePoints;if(u){var h=u[1][0]-u[2][0];if(t[l].x<e){u[2][0]=t[l].x+3}else{u[2][0]=t[l].x-3}u[1][1]=u[2][1]=t[l].y;u[1][0]=u[2][0]+h}}}var mx=function(t,e,r,i){var a=t.getData();var n=[];var o;var s;var l=false;a.each(function(r){var i=a.getItemLayout(r);var u=a.getItemModel(r);var h=u.getModel("label");var f=h.get("position")||u.get("emphasis.label.position");var c=u.getModel("labelLine");var v=c.get("length");var d=c.get("length2");var p=(i.startAngle+i.endAngle)/2;var g=Math.cos(p);var m=Math.sin(p);var y;var x;var _;var w;o=i.cx;s=i.cy;var b=f==="inside"||f==="inner";if(f==="center"){y=i.cx;x=i.cy;w="center"}else{var S=(b?(i.r+i.r0)/2*g:i.r*g)+o;var M=(b?(i.r+i.r0)/2*m:i.r*m)+s;y=S+g*3;x=M+m*3;if(!b){var I=S+g*(v+e-i.r);var T=M+m*(v+e-i.r);var D=I+(g<0?-1:1)*d;var A=T;y=D+(g<0?-5:5);x=A;_=[[S,M],[I,T],[D,A]]}w=b?"center":g>0?"left":"right"}var C=h.getFont();var L=h.get("rotate")?g<0?-p+Math.PI:-p:0;var k=t.getFormattedLabel(r,"normal")||a.getName(r);var P=$r(k,C,w,"top");l=!!L;i.label={x:y,y:x,position:f,height:P.height,len:v,len2:d,linePoints:_,textAlign:w,verticalAlign:"middle",rotation:L,inside:b};if(!b){n.push(i.label)}});if(!l&&t.get("avoidLabelOverlap")){gx(n,o,s,e,r,i)}};var yx=Math.PI*2;var xx=Math.PI/180;var _x=function(t,e,r,i){e.eachSeriesByType(t,function(t){var e=t.getData();var i=e.mapDimension("value");var a=t.get("center");var n=t.get("radius");if(!z(n)){n=[0,n]}if(!z(a)){a=[a,a]}var o=r.getWidth();var s=r.getHeight();var l=Math.min(o,s);var u=Wl(a[0],o);var h=Wl(a[1],s);var f=Wl(n[0],l/2);var c=Wl(n[1],l/2);var v=-t.get("startAngle")*xx;var d=t.get("minAngle")*xx;var p=0;e.each(i,function(t){!isNaN(t)&&p++});var g=e.getSum(i);var m=Math.PI/(g||p)*2;var y=t.get("clockwise");var x=t.get("roseType");var _=t.get("stillShowZeroSum");var w=e.getDataExtent(i);w[0]=0;var b=yx;var S=0;var M=v;var I=y?1:-1;e.each(i,function(t,r){var i;if(isNaN(t)){e.setItemLayout(r,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:y,cx:u,cy:h,r0:f,r:x?NaN:c});return}if(x!=="area"){i=g===0&&_?m:t*m}else{i=yx/p}if(i<d){i=d;b-=d}else{S+=t}var a=M+I*i;e.setItemLayout(r,{angle:i,startAngle:M,endAngle:a,clockwise:y,cx:u,cy:h,r0:f,r:x?Gl(t,w,[f,c]):c});M=a});if(b<yx&&p){if(b<=.001){var T=yx/p;e.each(i,function(t,r){if(!isNaN(t)){var i=e.getItemLayout(r);i.angle=T;i.startAngle=v+I*r*T;i.endAngle=v+I*(r+1)*T}})}else{m=b/S;M=v;e.each(i,function(t,r){if(!isNaN(t)){var i=e.getItemLayout(r);var a=i.angle===d?d:t*m;i.startAngle=M;i.endAngle=M+I*a;M+=I*a}})}}mx(t,c,o,s)})};var bx=function(t){return{seriesType:t,reset:function(t,e){var r=e.findComponents({mainType:"legend"});if(!r||!r.length){return}var i=t.getData();i.filterSelf(function(t){var e=i.getName(t);for(var a=0;a<r.length;a++){if(!r[a].isSelected(e)){return false}}return true})}}};vx("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]);td(dx("pie"));Qv(R(_x,"pie"));Yv(bx("pie"));Lf.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(t,e){return qd(this.getSource(),this)},brushSelector:"point",getProgressive:function(){var t=this.option.progressive;if(t==null){return this.option.large?5e3:this.get("progressive")}return t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;if(t==null){return this.option.large?1e4:this.get("progressiveThreshold")}return t},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:true,hoverAnimation:true,symbolSize:10,large:false,largeThreshold:2e3,itemStyle:{opacity:.8}}});var Sx=4;var Mx=Es({shape:{points:null},symbolProxy:null,buildPath:function(t,e){var r=e.points;var i=e.size;var a=this.symbolProxy;var n=a.shape;var o=t.getContext?t.getContext():t;var s=o&&i[0]<Sx;if(s){return}for(var l=0;l<r.length;){var u=r[l++];var h=r[l++];if(isNaN(u)||isNaN(h)){continue}n.x=u-i[0]/2;n.y=h-i[1]/2;n.width=i[0];n.height=i[1];a.buildPath(t,n,true)}},afterBrush:function(t){var e=this.shape;var r=e.points;var i=e.size;var a=i[0]<Sx;if(!a){return}this.setTransform(t);for(var n=0;n<r.length;){var o=r[n++];var s=r[n++];if(isNaN(o)||isNaN(s)){continue}t.fillRect(o-i[0]/2,s-i[1]/2,i[0],i[1])}this.restoreTransform(t)},findDataIndex:function(t,e){var r=this.shape;var i=r.points;var a=r.size;var n=Math.max(a[0],4);var o=Math.max(a[1],4);for(var s=i.length/2-1;s>=0;s--){var l=s*2;var u=i[l]-n/2;var h=i[l+1]-o/2;if(t>=u&&e>=h&&t<=u+n&&e<=h+o){return s}}return-1}});function Ix(){this.group=new fr}var Tx=Ix.prototype;Tx.isPersistent=function(){return!this._incremental};Tx.updateData=function(t){this.group.removeAll();var e=new Mx({rectHover:true,cursor:"default"});e.setShape({points:t.getLayout("symbolPoints")});this._setCommon(e,t);this.group.add(e);this._incremental=null};Tx.updateLayout=function(t){if(this._incremental){return}var e=t.getLayout("symbolPoints");this.group.eachChild(function(t){if(t.startIndex!=null){var r=(t.endIndex-t.startIndex)*2;var i=t.startIndex*4*2;e=new Float32Array(e.buffer,i,r)}t.setShape("points",e)})};Tx.incrementalPrepareUpdate=function(t){this.group.removeAll();this._clearIncremental();if(t.count()>2e6){if(!this._incremental){this._incremental=new Cs({silent:true})}this.group.add(this._incremental)}else{this._incremental=null}};Tx.incrementalUpdate=function(t,e){var r;if(this._incremental){r=new Mx;this._incremental.addDisplayable(r,true)}else{r=new Mx({rectHover:true,cursor:"default",startIndex:t.start,endIndex:t.end});r.incremental=true;this.group.add(r)}r.setShape({points:e.getLayout("symbolPoints")});this._setCommon(r,e,!!this._incremental)};Tx._setCommon=function(t,e,r){var i=e.hostModel;var a=e.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]);t.symbolProxy=vg(e.getVisual("symbol"),0,0,0,0);t.setColor=t.symbolProxy.setColor;var n=t.shape.size[0]<Sx;t.useStyle(i.getModel("itemStyle").getItemStyle(n?["color","shadowBlur","shadowColor"]:["color"]));var o=e.getVisual("color");if(o){t.setColor(o)}if(!r){t.seriesIndex=i.seriesIndex;t.on("mousemove",function(e){t.dataIndex=null;var r=t.findDataIndex(e.offsetX,e.offsetY);if(r>=0){t.dataIndex=r+(t.startIndex||0)}})}};Tx.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};Tx._clearIncremental=function(){var t=this._incremental;if(t){t.clearDisplaybles()}};od({type:"scatter",render:function(t,e,r){var i=t.getData();var a=this._updateSymbolDraw(i,t);a.updateData(i);this._finished=true},incrementalPrepareRender:function(t,e,r){var i=t.getData();var a=this._updateSymbolDraw(i,t);a.incrementalPrepareUpdate(i);this._finished=false},incrementalRender:function(t,e,r){this._symbolDraw.incrementalUpdate(t,e.getData());this._finished=t.end===e.getData().count()},updateTransform:function(t,e,r){var i=t.getData();this.group.dirty();if(!this._finished||i.count()>1e4||!this._symbolDraw.isPersistent()){return{update:true}}else{var a=Gm().reset(t);if(a.progress){a.progress({start:0,end:i.count()},i)}this._symbolDraw.updateLayout(i)}},_updateSymbolDraw:function(t,e){var r=this._symbolDraw;var i=e.pipelineContext;var a=i.large;if(!r||a!==this._isLargeDraw){r&&r.remove();r=this._symbolDraw=a?new Ix:new am;this._isLargeDraw=a;this.group.removeAll()}this.group.add(r.group);return r},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(true);this._symbolDraw=null},dispose:function(){}});td(Vm("scatter","circle"));Qv(Gm("scatter"));function Dx(t,e,r){Hg.call(this,t,e,r);this.type="value";this.angle=0;this.name="";this.model}D(Dx,Hg);function Ax(t,e,r){this._model=t;this.dimensions=[];this._indicatorAxes=k(t.getIndicatorModels(),function(t,e){var r="indicator_"+e;var i=new Dx(r,new cp);i.name=t.get("name");i.model=t;t.axis=i;this.dimensions.push(r);return i},this);this.resize(t,r);this.cx;this.cy;this.r;this.startAngle}Ax.prototype.getIndicatorAxes=function(){return this._indicatorAxes};Ax.prototype.dataToPoint=function(t,e){var r=this._indicatorAxes[e];return this.coordToPoint(r.dataToCoord(t),e)};Ax.prototype.coordToPoint=function(t,e){var r=this._indicatorAxes[e];var i=r.angle;var a=this.cx+t*Math.cos(i);var n=this.cy-t*Math.sin(i);return[a,n]};Ax.prototype.pointToData=function(t){var e=t[0]-this.cx;var r=t[1]-this.cy;var i=Math.sqrt(e*e+r*r);e/=i;r/=i;var a=Math.atan2(-r,e);var n=Infinity;var o;var s=-1;for(var l=0;l<this._indicatorAxes.length;l++){var u=this._indicatorAxes[l];var h=Math.abs(a-u.angle);if(h<n){o=u;s=l;n=h}}return[s,+(o&&o.coodToData(i))]};Ax.prototype.resize=function(t,e){var r=t.get("center");var i=e.getWidth();var a=e.getHeight();var n=Math.min(i,a)/2;this.cx=Wl(r[0],i);this.cy=Wl(r[1],a);this.startAngle=t.get("startAngle")*Math.PI/180;this.r=Wl(t.get("radius"),n);L(this._indicatorAxes,function(t,e){t.setExtent(0,this.r);var r=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;r=Math.atan2(Math.sin(r),Math.cos(r));t.angle=r},this)};Ax.prototype.update=function(t,e){var r=this._indicatorAxes;var i=this._model;L(r,function(t){t.scale.setExtent(Infinity,-Infinity)});t.eachSeriesByType("radar",function(e,a){if(e.get("coordinateSystem")!=="radar"||t.getComponent("radar",e.get("radarIndex"))!==i){return}var n=e.getData();L(r,function(t){t.scale.unionExtentFromData(n,n.mapDimension(t.dim))})},this);var a=i.get("splitNumber");function n(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10));var r=t/e;if(r===2){r=5}else{r*=2}return r*e}L(r,function(t,e){var r=Yp(t.scale,t.model);Kp(t.scale,t.model);var i=t.model;var o=t.scale;var s=i.getMin();var l=i.getMax();var u=o.getInterval();if(s!=null&&l!=null){o.setExtent(+s,+l);o.setInterval((l-s)/a)}else if(s!=null){var h;do{h=s+u*a;o.setExtent(+s,h);o.setInterval(u);u=n(u)}while(h<r[1]&&isFinite(h)&&isFinite(r[1]))}else if(l!=null){var f;do{f=l-u*a;o.setExtent(f,+l);o.setInterval(u);u=n(u)}while(f>r[0]&&isFinite(f)&&isFinite(r[0]))}else{var c=o.getTicks().length-1;if(c>a){u=n(u)}var v=Math.round((r[0]+r[1])/2/u)*u;var d=Math.round(a/2);o.setExtent(Fl(v-d*u),Fl(v+(a-d)*u));o.setInterval(u)}})};Ax.dimensions=[];Ax.create=function(t,e){var r=[];t.eachComponent("radar",function(i){var a=new Ax(i,t,e);r.push(a);i.coordinateSystem=a});t.eachSeriesByType("radar",function(t){if(t.get("coordinateSystem")==="radar"){t.coordinateSystem=r[t.get("radarIndex")||0]}});return r};Ch.register("radar",Ax);var Cx=qm.valueAxis;function Lx(t,e){return b({show:e},t)}var kx=id({type:"radar",optionUpdated:function(){var t=this.get("boundaryGap");var e=this.get("splitNumber");var r=this.get("scale");var i=this.get("axisLine");var a=this.get("axisTick");var n=this.get("axisLabel");var o=this.get("name");var s=this.get("name.show");var l=this.get("name.formatter");var u=this.get("nameGap");var h=this.get("triggerEvent");var f=k(this.get("indicator")||[],function(f){if(f.max!=null&&f.max>0&&!f.min){f.min=0}else if(f.min!=null&&f.min<0&&!f.max){f.max=0}var c=o;if(f.color!=null){c=b({color:f.color},o)}f=x(y(f),{boundaryGap:t,splitNumber:e,scale:r,axisLine:i,axisTick:a,axisLabel:n,name:f.text,nameLocation:"end",nameGap:u,nameTextStyle:c,triggerEvent:h},false);if(!s){f.name=""}if(typeof l==="string"){var v=f.name;f.name=l.replace("{value}",v!=null?v:"")}else if(typeof l==="function"){f.name=l(f.name,f)}var d=w(new kl(f,null,this.ecModel),ig);d.mainType="radar";d.componentIndex=this.componentIndex;return d},this);this.getIndicatorModels=function(){return f}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:true},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:false,shape:"polygon",axisLine:x({lineStyle:{color:"#bbb"}},Cx.axisLine),axisLabel:Lx(Cx.axisLabel,false),axisTick:Lx(Cx.axisTick,false),splitLine:Lx(Cx.splitLine,true),splitArea:Lx(Cx.splitArea,true),indicator:[]}});var Px=["axisLine","axisTickLabel","axisName"];ad({type:"radar",render:function(t,e,r){var i=this.group;i.removeAll();this._buildAxes(t);this._buildSplitLineAndArea(t)},_buildAxes:function(t){var e=t.coordinateSystem;var r=e.getIndicatorAxes();var i=k(r,function(t){var r=new cy(t.model,{position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return r});L(i,function(t){L(Px,t.add,t);this.group.add(t.getGroup())},this)},_buildSplitLineAndArea:function(t){var r=t.coordinateSystem;var i=r.getIndicatorAxes();if(!i.length){return}var a=t.get("shape");var n=t.getModel("splitLine");var o=t.getModel("splitArea");var s=n.getModel("lineStyle");var l=o.getModel("areaStyle");var u=n.get("show");var h=o.get("show");var f=s.get("color");var c=l.get("color");f=z(f)?f:[f];c=z(c)?c:[c];var v=[];var d=[];function p(t,e,r){var i=r%e.length;t[i]=t[i]||[];return i}if(a==="circle"){var g=i[0].getTicksCoords();var m=r.cx;var y=r.cy;for(var x=0;x<g.length;x++){if(u){var _=p(v,f,x);v[_].push(new ls({shape:{cx:m,cy:y,r:g[x].coord}}))}if(h&&x<g.length-1){var _=p(d,c,x);d[_].push(new cs({shape:{cx:m,cy:y,r0:g[x].coord,r:g[x+1].coord}}))}}}else{var w;var S=k(i,function(t,e){var i=t.getTicksCoords();w=w==null?i.length-1:Math.min(i.length-1,w);return k(i,function(t){return r.coordToPoint(t.coord,e)})});var M=[];for(var x=0;x<=w;x++){var I=[];for(var T=0;T<i.length;T++){I.push(S[T][x])}if(I[0]){I.push(I[0].slice())}else{if(e){console.error("Can't draw value axis "+x)}}if(u){var _=p(v,f,x);v[_].push(new ys({shape:{points:I}}))}if(h&&M){var _=p(d,c,x-1);d[_].push(new ms({shape:{points:I.concat(M)}}))}M=I.slice().reverse()}}var D=s.getLineStyle();var A=l.getAreaStyle();L(d,function(t,e){this.group.add(Gs(t,{style:b({stroke:"none",fill:c[e%c.length]},A),silent:true}))},this);L(v,function(t,e){this.group.add(Gs(t,{style:b({fill:"none",stroke:f[e%f.length]},D),silent:true}))},this)}});var Nx=Lf.extend({type:"series.radar",dependencies:["radar"],init:function(t){Nx.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()}},getInitialData:function(t,e){return nx(this,{generateCoord:"indicator_",generateCoordCount:Infinity})},formatTooltip:function(t){var e=this.getData();var r=this.coordinateSystem;var i=r.getIndicatorAxes();var a=this.getData().getName(t);return hu(a===""?this.name:a)+"<br/>"+k(i,function(r,i){var a=e.get(e.mapDimension(r.dim),t);return hu(r.name+" : "+a)}).join("<br />")},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:true,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function Ox(t){if(!z(t)){t=[+t,+t]}return t}od({type:"radar",render:function(t,e,r){var i=t.coordinateSystem;var a=this.group;var n=t.getData();var o=this._data;function s(t,e){var r=t.getItemVisual(e,"symbol")||"circle";var i=t.getItemVisual(e,"color");if(r==="none"){return}var a=Ox(t.getItemVisual(e,"symbolSize"));var n=vg(r,-1,-1,2,2,i);n.attr({style:{strokeNoScale:true},z2:100,scale:[a[0]/2,a[1]/2]});return n}function l(e,r,i,a,n,o){i.removeAll();for(var l=0;l<r.length-1;l++){var u=s(a,n);if(u){u.__dimIdx=l;if(e[l]){u.attr("position",e[l]);Ml[o?"initProps":"updateProps"](u,{position:r[l]},t,n)}else{u.attr("position",r[l])}i.add(u)}}}function u(t){return k(t,function(t){return[i.cx,i.cy]})}n.diff(o).add(function(e){var r=n.getItemLayout(e);if(!r){return}var i=new ms;var a=new ys;var o={shape:{points:r}};i.shape.points=u(r);a.shape.points=u(r);gl(i,o,t,e);gl(a,o,t,e);var s=new fr;var h=new fr;s.add(a);s.add(i);s.add(h);l(a.shape.points,r,h,n,e,true);n.setItemGraphicEl(e,s)}).update(function(e,r){var i=o.getItemGraphicEl(r);var a=i.childAt(0);var s=i.childAt(1);var u=i.childAt(2);var h={shape:{points:n.getItemLayout(e)}};if(!h.shape.points){return}l(a.shape.points,h.shape.points,u,n,e,false);pl(a,h,t);pl(s,h,t);n.setItemGraphicEl(e,i)}).remove(function(t){a.remove(o.getItemGraphicEl(t))}).execute();n.eachItemGraphicEl(function(t,e){var r=n.getItemModel(e);var i=t.childAt(0);var o=t.childAt(1);var s=t.childAt(2);var l=n.getItemVisual(e,"color");a.add(t);i.useStyle(b(r.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:l}));i.hoverStyle=r.getModel("emphasis.lineStyle").getLineStyle();var u=r.getModel("areaStyle");var h=r.getModel("emphasis.areaStyle");var f=u.isEmpty()&&u.parentModel.isEmpty();var c=h.isEmpty()&&h.parentModel.isEmpty();c=c&&f;o.ignore=f;o.useStyle(b(u.getAreaStyle(),{fill:l,opacity:.7}));o.hoverStyle=h.getAreaStyle();var v=r.getModel("itemStyle").getItemStyle(["color"]);var d=r.getModel("emphasis.itemStyle").getItemStyle();var p=r.getModel("label");var g=r.getModel("emphasis.label");s.eachChild(function(t){t.setStyle(v);t.hoverStyle=y(d);al(t.style,t.hoverStyle,p,g,{labelFetcher:n.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:n.get(n.dimensions[t.__dimIdx],e),autoColor:l,isRectText:true})});function m(){o.attr("ignore",c)}function x(){o.attr("ignore",f)}t.off("mouseover").off("mouseout").off("normal").off("emphasis");t.on("emphasis",m).on("mouseover",m).on("normal",x).on("mouseout",x);il(t)});this._data=n},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}});var Ex=function(t){t.eachSeriesByType("radar",function(t){var e=t.getData();var r=[];var i=t.coordinateSystem;if(!i){return}function a(t,e){r[e]=r[e]||[];r[e][o]=i.dataToPoint(t,o)}var n=i.getIndicatorAxes();for(var o=0;o<n.length;o++){e.each(e.mapDimension(n[o].dim),a)}e.each(function(t){r[t][0]&&r[t].push(r[t][0].slice());e.setItemLayout(t,r[t])})})};var Rx=function(t){var e=t.polar;if(e){if(!z(e)){e=[e]}var r=[];L(e,function(e,i){if(e.indicator){if(e.type&&!e.shape){e.shape=e.type}t.radar=t.radar||[];if(!z(t.radar)){t.radar=[t.radar]}t.radar.push(e)}else{r.push(e)}});t.polar=r}L(t.series,function(t){if(t&&t.type==="radar"&&t.polarIndex){t.radarIndex=t.polarIndex}})};td(dx("radar"));td(Vm("radar","circle"));Qv(Ex);Yv(bx("radar"));jv(Rx);var zx=Ct;function Bx(){ie.call(this)}A(Bx,ie);function Vx(t){this.name=t;this.zoomLimit;ie.call(this);this._roamTransformable=new Bx;this._rawTransformable=new Bx;this._center;this._zoom}Vx.prototype={constructor:Vx,type:"view",dimensions:["x","y"],setBoundingRect:function(t,e,r,i){this._rect=new hr(t,e,r,i);return this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(t,e,r,i){this.transformTo(t,e,r,i);this._viewRect=new hr(t,e,r,i)},transformTo:function(t,e,r,i){var a=this.getBoundingRect();var n=this._rawTransformable;n.transform=a.calculateTransform(new hr(t,e,r,i));n.decomposeTransform();this._updateTransform()},setCenter:function(t){if(!t){return}this._center=t;this._updateCenterAndZoom()},setZoom:function(t){t=t||1;var e=this.zoomLimit;if(e){if(e.max!=null){t=Math.min(e.max,t)}if(e.min!=null){t=Math.max(e.min,t)}}this._zoom=t;this._updateCenterAndZoom()},getDefaultCenter:function(){var t=this.getBoundingRect();var e=t.x+t.width/2;var r=t.y+t.height/2;return[e,r]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var t=this._rawTransformable.getLocalTransform();var e=this._roamTransformable;var r=this.getDefaultCenter();var i=this.getCenter();var a=this.getZoom();i=Ct([],i,t);r=Ct([],r,t);e.origin=i;e.position=[r[0]-i[0],r[1]-i[1]];e.scale=[a,a];this._updateTransform()},_updateTransform:function(){var t=this._roamTransformable;var e=this._rawTransformable;e.parent=t;t.updateTransform();e.updateTransform();Xt(this.transform||(this.transform=[]),e.transform||Zt());this._rawTransform=e.getLocalTransform();this.invTransform=this.invTransform||[];$t(this.invTransform,this.transform);this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var t=this.getBoundingRect().clone();t.applyTransform(this.transform);return t},dataToPoint:function(t,e,r){var i=e?this._rawTransform:this.transform;r=r||[];return i?zx(r,t,i):lt(r,t)},pointToData:function(t){var e=this.invTransform;return e?zx([],t,e):[t[0],t[1]]},convertToPixel:R(Gx,"dataToPoint"),convertFromPixel:R(Gx,"pointToData"),containPoint:function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])}};A(Vx,ie);function Gx(t,e,r,i){var a=r.seriesModel;var n=a?a.coordinateSystem:null;return n===this?n[t](i):null}var Wx=[126,25];var Fx=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Hx=0;Hx<Fx.length;Hx++){for(var Zx=0;Zx<Fx[Hx].length;Zx++){Fx[Hx][Zx][0]/=10.5;Fx[Hx][Zx][1]/=-10.5/.75;Fx[Hx][Zx][0]+=Wx[0];Fx[Hx][Zx][1]+=Wx[1]}}var Ux=function(t){if(t.map==="china"){t.regions.push(new bg("",k(Fx,function(t){return{type:"polygon",exterior:t}}),Wx))}};var Xx={"":[32,80],"":[0,-10],"":[10,5],"":[-10,10],"":[5,5]};var jx=function(t){L(t.regions,function(t){var e=Xx[t.name];if(e){var r=t.center;r[0]+=e[0]/10.5;r[1]+=-e[1]/(10.5/.75)}})};var Yx={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};var qx=function(t){L(t.regions,function(t){var e=Yx[t.name];if(e){var r=t.center;r[0]=e[0];r[1]=e[1]}})};var Kx=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];var $x=function(t){if(t.map==="china"){for(var e=0,r=t.regions.length;e<r;++e){if(t.regions[e].name===""){t.regions[e].geometries.push({type:"polygon",exterior:Kx[0]})}}}};var Jx=[Ux,jx,qx,$x];function Qx(t,e,r,i,a){Vx.call(this,t);this.map=e;this._nameCoordMap=rt();this.loadGeoJson(r,i,a)}Qx.prototype={constructor:Qx,type:"geo",dimensions:["lng","lat"],containCoord:function(t){var e=this.regions;for(var r=0;r<e.length;r++){if(e[r].contain(t)){return true}}return false},loadGeoJson:function(t,e,r){try{this.regions=t?Ig(t):[]}catch(i){throw"Invalid geoJson format\n"+i.message}e=e||{};r=r||{};var a=this.regions;var n=rt();for(var o=0;o<a.length;o++){var s=a[o].name;s=r.hasOwnProperty(s)?r[s]:s;a[o].name=s;n.set(s,a[o]);this.addGeoCoord(s,a[o].center);var l=e[s];if(l){a[o].transformTo(l.left,l.top,l.width,l.height)}}this._regionsMap=n;this._rect=null;L(Jx,function(t){t(this)},this)},transformTo:function(t,e,r,i){var a=this.getBoundingRect();a=a.clone();a.y=-a.y-a.height;var n=this._rawTransformable;n.transform=a.calculateTransform(new hr(t,e,r,i));n.decomposeTransform();var o=n.scale;o[1]=-o[1];n.updateTransform();this._updateTransform()},getRegion:function(t){return this._regionsMap.get(t)},getRegionByCoord:function(t){var e=this.regions;for(var r=0;r<e.length;r++){if(e[r].contain(t)){return e[r]}}},addGeoCoord:function(t,e){this._nameCoordMap.set(t,e)},getGeoCoord:function(t){return this._nameCoordMap.get(t)},getBoundingRect:function(){if(this._rect){return this._rect}var t;var e=this.regions;for(var r=0;r<e.length;r++){var i=e[r].getBoundingRect();t=t||i.clone();t.union(i)}return this._rect=t||new hr(0,0,0,0)},dataToPoint:function(t,e,r){if(typeof t==="string"){t=this.getGeoCoord(t)}if(t){return Vx.prototype.dataToPoint.call(this,t,e,r)}},convertToPixel:R(t_,"dataToPoint"),convertFromPixel:R(t_,"pointToData")};A(Qx,Vx);function t_(t,e,r,i){var a=r.geoModel;var n=r.seriesModel;var o=a?a.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return o===this?o[t](i):null}function e_(t,r){var i=t.get("boundingCoords");if(i!=null){var a=i[0];var n=i[1];if(isNaN(a[0])||isNaN(a[1])||isNaN(n[0])||isNaN(n[1])){if(e){console.error("Invalid boundingCoords")}}else{this.setBoundingRect(a[0],a[1],n[0]-a[0],n[1]-a[1])}}var o=this.getBoundingRect();var s;var l=t.get("layoutCenter");var u=t.get("layoutSize");var h=r.getWidth();var f=r.getHeight();var c=t.get("aspectScale")||.75;var v=o.width/o.height*c;var d=false;if(l&&u){l=[Wl(l[0],h),Wl(l[1],f)];u=Wl(u,Math.min(h,f));if(!isNaN(l[0])&&!isNaN(l[1])&&!isNaN(u)){d=true}else{if(e){console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead.")}}}var p;if(d){var p={};if(v>1){p.width=u;p.height=u/v}else{p.height=u;p.width=u*v}p.y=l[1]-p.height/2;p.x=l[0]-p.width/2}else{s=t.getBoxLayoutParams();s.aspect=v;p=Lu(s,{width:h,height:f})}this.setViewRect(p.x,p.y,p.width,p.height);this.setCenter(t.get("center"));this.setZoom(t.get("zoom"))}function r_(t,e){L(e.get("geoCoord"),function(e,r){t.addGeoCoord(r,e)})}if(e){var i_=function(t){console.error("Map "+t+" not exists. You can download map file on http://echarts.baidu.com/download-map.html")}}var a_={dimensions:Qx.prototype.dimensions,create:function(t,r){var i=[];t.eachComponent("geo",function(t,a){var n=t.get("map");var o=ud(n);if(e){if(!o){i_(n)}}var s=new Qx(n+a,n,o&&o.geoJson,o&&o.specialAreas,t.get("nameMap"));s.zoomLimit=t.get("scaleLimit");i.push(s);r_(s,t);t.coordinateSystem=s;s.model=t;s.resize=e_;s.resize(t,r)});t.eachSeries(function(t){var e=t.get("coordinateSystem");if(e==="geo"){var r=t.get("geoIndex")||0;t.coordinateSystem=i[r]}});var a={};t.eachSeriesByType("map",function(t){if(!t.getHostGeoModel()){var e=t.getMapType();a[e]=a[e]||[];a[e].push(t)}});L(a,function(t,a){var n=ud(a);if(e){if(!n){i_(t[0].get("map"))}}var o=k(t,function(t){return t.get("nameMap")});var s=new Qx(a,a,n&&n.geoJson,n&&n.specialAreas,_(o));s.zoomLimit=U.apply(null,k(t,function(t){return t.get("scaleLimit")}));i.push(s);s.resize=e_;s.resize(t[0],r);L(t,function(t){t.coordinateSystem=s;r_(s,t)})});return i},getFilledRegions:function(t,r,i){var a=(t||[]).slice();i=i||{};var n=ud(r);var o=n&&n.geoJson;if(!o){if(e){i_(r)}return t}var s=rt();var l=o.features;for(var u=0;u<a.length;u++){s.set(a[u].name,a[u])}for(var u=0;u<l.length;u++){var h=l[u].properties.name;if(!s.get(h)){if(i.hasOwnProperty(h)){h=i[h]}a.push({name:h})}}return a}};$v("geo",a_);var n_=Lf.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:false,seriesGroup:[],init:function(t){n_.superApply(this,"init",arguments);this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t){return nx(this,["value"])},mergeOption:function(t){n_.superApply(this,"mergeOption",arguments);this.updateSelectedMap(this._createSelectableList())},_createSelectableList:function(){var t=this.getRawData();var e=t.mapDimension("value");var r=[];for(var i=0,a=t.count();i<a;i++){r.push({name:t.getName(i),value:t.get(e,i),selected:_f(t,i,"selected")})}r=a_.getFilledRegions(r,this.getMapType(),this.option.nameMap);return r},getHostGeoModel:function(){var t=this.option.geoIndex;return t!=null?this.dependentModels.geo[t]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},_fillOption:function(t,e){},getRawValue:function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},getRegionModel:function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},formatTooltip:function(t){var e=this.getData();var r=nu(this.getRawValue(t));var i=e.getName(t);var a=this.seriesGroup;var n=[];for(var o=0;o<a.length;o++){var s=a[o].originalData.indexOfName(i);var l=e.mapDimension("value");if(!isNaN(a[o].originalData.get(l,s))){n.push(hu(a[o].name))}}return n.join(", ")+"<br />"+hu(i+" : "+r)},getTooltipPosition:function(t){if(t!=null){var e=this.getData().getName(t);var r=this.coordinateSystem;var i=r.getRegion(e);return i&&r.dataToPoint(i.center)}},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:true,dataRangeHoverLink:true,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:false,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:true,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}}}});A(n_,ox);var o_="\0_ec_interaction_mutex";function s_(t,e,r){var i=h_(t);i[e]=r}function l_(t,e,r){var i=h_(t);var a=i[e];if(a===r){i[e]=null}}function u_(t,e){return!!h_(t)[e]}function h_(t){return t[o_]||(t[o_]={})}Kv({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){});function f_(t){this.pointerChecker;this._zr=t;this._opt={};var e=E;var r=e(c_,this);var i=e(v_,this);var a=e(d_,this);var n=e(p_,this);var o=e(g_,this);Rt.call(this);this.setPointerChecker=function(t){this.pointerChecker=t};this.enable=function(e,s){this.disable();this._opt=b(y(s)||{},{zoomOnMouseWheel:true,moveOnMouseMove:true,preventDefaultMouseMove:true});if(e==null){e=true}if(e===true||(e==="move"||e==="pan")){t.on("mousedown",r);t.on("mousemove",i);t.on("mouseup",a)}if(e===true||(e==="scale"||e==="zoom")){t.on("mousewheel",n);t.on("pinch",o)}};this.disable=function(){t.off("mousedown",r);t.off("mousemove",i);t.off("mouseup",a);t.off("mousewheel",n);t.off("pinch",o)};this.dispose=this.disable;this.isDragging=function(){return this._dragging};this.isPinching=function(){return this._pinching}}A(f_,Rt);function c_(t){if(oa(t)||t.target&&t.target.draggable){
return}var e=t.offsetX;var r=t.offsetY;if(this.pointerChecker&&this.pointerChecker(t,e,r)){this._x=e;this._y=r;this._dragging=true}}function v_(t){if(oa(t)||!y_(this,"moveOnMouseMove",t)||!this._dragging||t.gestureEvent==="pinch"||u_(this._zr,"globalPan")){return}var e=t.offsetX;var r=t.offsetY;var i=this._x;var a=this._y;var n=e-i;var o=r-a;this._x=e;this._y=r;this._opt.preventDefaultMouseMove&&na(t.event);this.trigger("pan",n,o,i,a,e,r)}function d_(t){if(!oa(t)){this._dragging=false}}function p_(t){if(!y_(this,"zoomOnMouseWheel",t)||t.wheelDelta===0){return}var e=t.wheelDelta>0?1.1:1/1.1;m_.call(this,t,e,t.offsetX,t.offsetY)}function g_(t){if(u_(this._zr,"globalPan")){return}var e=t.pinchScale>1?1.1:1/1.1;m_.call(this,t,e,t.pinchX,t.pinchY)}function m_(t,e,r,i){if(this.pointerChecker&&this.pointerChecker(t,r,i)){na(t.event);this.trigger("zoom",e,r,i)}}function y_(t,e,r){var i=t._opt[e];return i&&(!V(i)||r.event[i+"Key"])}function x_(t,e,r){var i=t.target;var a=i.position;a[0]+=e;a[1]+=r;i.dirty()}function __(t,e,r,i){var a=t.target;var n=t.zoomLimit;var o=a.position;var s=a.scale;var l=t.zoom=t.zoom||1;l*=e;if(n){var u=n.min||0;var h=n.max||Infinity;l=Math.max(Math.min(h,l),u)}var f=l/t.zoom;t.zoom=l;o[0]-=(r-o[0])*(f-1);o[1]-=(i-o[1])*(f-1);s[0]*=f;s[1]*=f;a.dirty()}var w_={axisPointer:1,tooltip:1,brush:1};function b_(t,e,r){var i=e.getComponentByElement(t.topTarget);var a=i&&i.coordinateSystem;return i&&i!==r&&!w_[i.mainType]&&(a&&a.model!==r)}function S_(t,e){var r=t.getItemStyle();var i=t.get("areaColor");if(i!=null){r.fill=i}return r}function M_(t,e,r,i,a){r.off("click");r.off("mousedown");if(e.get("selectedMode")){r.on("mousedown",function(){t._mouseDownFlag=true});r.on("click",function(n){if(!t._mouseDownFlag){return}t._mouseDownFlag=false;var o=n.target;while(!o.__regions){o=o.parent}if(!o){return}var s={type:(e.mainType==="geo"?"geo":"map")+"ToggleSelect",batch:k(o.__regions,function(t){return{name:t.name,from:a.uid}})};s[e.mainType+"Id"]=e.id;i.dispatchAction(s);I_(e,r)})}}function I_(t,e){e.eachChild(function(e){L(e.__regions,function(r){e.trigger(t.isSelected(r.name)?"emphasis":"normal")})})}function T_(t,e){var r=new fr;this._controller=new f_(t.getZr());this._controllerHost={target:e?r:null};this.group=r;this._updateGroup=e;this._mouseDownFlag}T_.prototype={constructor:T_,draw:function(t,e,r,i,a){var n=t.mainType==="geo";var o=t.getData&&t.getData();n&&e.eachComponent({mainType:"series",subType:"map"},function(e){if(!o&&e.getHostGeoModel()===t){o=e.getData()}});var s=t.coordinateSystem;var l=this.group;var u=s.scale;var h={position:s.position,scale:u};if(!l.childAt(0)||a){l.attr(h)}else{pl(l,h,t)}l.removeAll();var f=["itemStyle"];var c=["emphasis","itemStyle"];var v=["label"];var d=["emphasis","label"];var p=rt();L(s.regions,function(e){var r=p.get(e.name)||p.set(e.name,new fr);var i=new Is({shape:{paths:[]}});r.add(i);var a=t.getRegionModel(e.name)||t;var s=a.getModel(f);var h=a.getModel(c);var g=S_(s,u);var m=S_(h,u);var y=a.getModel(v);var x=a.getModel(d);var _;if(o){_=o.indexOfName(e.name);var w=o.getItemVisual(_,"color",true);if(w){g.fill=w}}L(e.geometries,function(t){if(t.type!=="polygon"){return}i.shape.paths.push(new ms({shape:{points:t.exterior}}));for(var e=0;e<(t.interiors?t.interiors.length:0);e++){i.shape.paths.push(new ms({shape:{points:t.interiors[e]}}))}});i.setStyle(g);i.style.strokeNoScale=true;i.culling=true;var b=y.get("show");var S=x.get("show");var M=o&&isNaN(o.get(o.mapDimension("value"),_));var I=o&&o.getItemLayout(_);if(n||M&&(b||S)||I&&I.showLabel){var T=!n?_:e.name;var D;if(!o||_>=0){D=t}var A=new ss({position:e.center.slice(),scale:[1/u[0],1/u[1]],z2:10,silent:true});al(A.style,A.hoverStyle={},y,x,{labelFetcher:D,labelDataIndex:T,defaultText:e.name,useInsideStyle:false},{textAlign:"center",textVerticalAlign:"middle"});r.add(A)}if(o){o.setItemGraphicEl(_,r)}else{var a=t.getRegionModel(e.name);i.eventData={componentType:"geo",geoIndex:t.componentIndex,name:e.name,region:a&&a.option||{}}}var C=r.__regions||(r.__regions=[]);C.push(e);il(r,m,{hoverSilentOnTouch:!!t.get("selectedMode")});l.add(r)});this._updateController(t,e,r);M_(this,t,l,r,i);I_(t,l)},remove:function(){this.group.removeAll();this._controller.dispose();this._controllerHost={}},_updateController:function(t,e,r){var i=t.coordinateSystem;var a=this._controller;var n=this._controllerHost;n.zoomLimit=t.get("scaleLimit");n.zoom=i.getZoom();a.enable(t.get("roam")||false);var o=t.mainType;function s(){var e={type:"geoRoam",componentType:o};e[o+"Id"]=t.id;return e}a.off("pan").on("pan",function(t,e){this._mouseDownFlag=false;x_(n,t,e);r.dispatchAction(w(s(),{dx:t,dy:e}))},this);a.off("zoom").on("zoom",function(t,e,i){this._mouseDownFlag=false;__(n,t,e,i);r.dispatchAction(w(s(),{zoom:t,originX:e,originY:i}));if(this._updateGroup){var a=this.group;var o=a.scale;a.traverse(function(t){if(t.type==="text"){t.attr("scale",[1/o[0],1/o[1]])}})}},this);a.setPointerChecker(function(e,a,n){return i.getViewRectAfterRoam().contain(a,n)&&!b_(e,r,t)})}};od({type:"map",render:function(t,e,r,i){if(i&&i.type==="mapToggleSelect"&&i.from===this.uid){return}var a=this.group;a.removeAll();if(t.getHostGeoModel()){return}if(!(i&&i.type==="geoRoam"&&i.componentType==="series"&&i.seriesId===t.id)){if(t.needsDrawMap){var n=this._mapDraw||new T_(r,true);a.add(n.group);n.draw(t,e,r,this,i);this._mapDraw=n}else{this._mapDraw&&this._mapDraw.remove();this._mapDraw=null}}else{var n=this._mapDraw;n&&a.add(n.group)}t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,r)},remove:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null;this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null},_renderSymbols:function(t,e,r){var i=t.originalData;var a=this.group;i.each(i.mapDimension("value"),function(e,r){if(isNaN(e)){return}var n=i.getItemLayout(r);if(!n||!n.point){return}var o=n.point;var s=n.offset;var l=new ls({style:{fill:t.getData().getVisual("color")},shape:{cx:o[0]+s*9,cy:o[1],r:3},silent:true,z2:!s?10:8});if(!s){var u=t.mainSeries.getData();var h=i.getName(r);var f=u.indexOfName(h);var c=i.getItemModel(r);var v=c.getModel("label");var d=c.getModel("emphasis.label");var p=u.getItemGraphicEl(f);var g=X(t.getFormattedLabel(r,"normal"),h);var m=X(t.getFormattedLabel(r,"emphasis"),g);var y=function(){var t=nl({},d,{text:d.get("show")?m:null},{isRectText:true,useInsideStyle:false},true);l.style.extendFrom(t);l.__mapOriginalZ2=l.z2;l.z2+=1};var x=function(){nl(l.style,v,{text:v.get("show")?g:null,textPosition:v.getShallow("position")||"bottom"},{isRectText:true,useInsideStyle:false});if(l.__mapOriginalZ2!=null){l.z2=l.__mapOriginalZ2;l.__mapOriginalZ2=null}};p.on("mouseover",y).on("mouseout",x).on("emphasis",y).on("normal",x);x()}a.add(l)})}});function D_(t,e,r){var i=t.getZoom();var a=t.getCenter();var n=e.zoom;var o=t.dataToPoint(a);if(e.dx!=null&&e.dy!=null){o[0]-=e.dx;o[1]-=e.dy;var a=t.pointToData(o);t.setCenter(a)}if(n!=null){if(r){var s=r.min||0;var l=r.max||Infinity;n=Math.max(Math.min(i*n,l),s)/i}t.scale[0]*=n;t.scale[1]*=n;var u=t.position;var h=(e.originX-u[0])*(n-1);var f=(e.originY-u[1])*(n-1);u[0]-=h;u[1]-=f;t.updateTransform();var a=t.pointToData(o);t.setCenter(a);t.setZoom(n*i)}return{center:t.getCenter(),zoom:t.getZoom()}}Kv({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,e){var r=t.componentType||"series";e.eachComponent({mainType:r,query:t},function(e){var i=e.coordinateSystem;if(i.type!=="geo"){return}var a=D_(i,t,e.get("scaleLimit"));e.setCenter&&e.setCenter(a.center);e.setZoom&&e.setZoom(a.zoom);if(r==="series"){L(e.seriesGroup,function(t){t.setCenter(a.center);t.setZoom(a.zoom)})}})});var A_=function(t){var e={};t.eachSeriesByType("map",function(r){var i=r.getMapType();if(r.getHostGeoModel()||e[i]){return}var a={};L(r.seriesGroup,function(e){var r=e.coordinateSystem;var i=e.originalData;if(e.get("showLegendSymbol")&&t.getComponent("legend")){i.each(i.mapDimension("value"),function(t,e){var n=i.getName(e);var o=r.getRegion(n);if(!o||isNaN(t)){return}var s=a[n]||0;var l=r.dataToPoint(o.center);a[n]=s+1;i.setItemLayout(e,{point:l,offset:s})})}});var n=r.getData();n.each(function(t){var e=n.getName(t);var r=n.getItemLayout(t)||{};r.showLabel=!a[e];n.setItemLayout(t,r)});e[i]=true})};var C_=function(t){t.eachSeriesByType("map",function(t){var e=t.get("color");var r=t.getModel("itemStyle");var i=r.get("areaColor");var a=r.get("color")||e[t.seriesIndex%e.length];t.getData().setVisual({areaColor:i,color:a})})};function L_(t,e){var r={};L(t,function(t){t.each(t.mapDimension("value"),function(e,i){var a="ec-"+t.getName(i);r[a]=r[a]||[];if(!isNaN(e)){r[a].push(e)}})});return t[0].map(t[0].mapDimension("value"),function(i,a){var n="ec-"+t[0].getName(a);var o=0;var s=Infinity;var l=-Infinity;var u=r[n].length;for(var h=0;h<u;h++){s=Math.min(s,r[n][h]);l=Math.max(l,r[n][h]);o+=r[n][h]}var f;if(e==="min"){f=s}else if(e==="max"){f=l}else if(e==="average"){f=o/u}else{f=o}return u===0?NaN:f})}var k_=function(t){var e={};t.eachSeriesByType("map",function(t){var r=t.getHostGeoModel();var i=r?"o"+r.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)});L(e,function(t,e){var r=L_(k(t,function(t){return t.getData()}),t[0].get("mapValueCalculation"));for(var i=0;i<t.length;i++){t[i].originalData=t[i].getData()}for(var i=0;i<t.length;i++){t[i].seriesGroup=t;t[i].needsDrawMap=i===0&&!t[i].getHostGeoModel();t[i].setData(r.cloneShallow());t[i].mainSeries=t[0]}})};var P_=function(t){var e=[];L(t.series,function(t){if(t&&t.type==="map"){e.push(t);t.map=t.map||t.mapType;b(t,t.mapLocation)}})};Qv(A_);td(C_);Yv(Kc.PROCESSOR.STATISTIC,k_);jv(P_);vx("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var N_=L;var O_="\0__link_datas";var E_="\0__link_mainData";function R_(t){var e=t.mainData;var r=t.datas;if(!r){r={main:e};t.datasAttr={main:"data"}}t.datas=t.mainData=null;F_(e,r,t);N_(r,function(r){N_(e.TRANSFERABLE_METHODS,function(e){r.wrapMethod(e,R(z_,t))})});e.wrapMethod("cloneShallow",R(V_,t));N_(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,R(B_,t))});K(r[e.dataType]===e)}function z_(t,e){if(W_(this)){var r=w({},this[O_]);r[this.dataType]=e;F_(e,r,t)}else{H_(e,this.dataType,this[E_],t)}return e}function B_(t,e){t.struct&&t.struct.update(this);return e}function V_(t,e){N_(e[O_],function(r,i){r!==e&&H_(r.cloneShallow(),i,e,t)});return e}function G_(t){var e=this[E_];return t==null||e==null?e:e[O_][t]}function W_(t){return t[E_]===t}function F_(t,e,r){t[O_]={};N_(e,function(e,i){H_(e,i,t,r)})}function H_(t,e,r,i){r[O_][e]=t;t[E_]=r;t.dataType=e;if(i.struct){t[i.structAttr]=i.struct;i.struct[i.datasAttr[e]]=t}t.getLinkedData=G_}var Z_=function(t,e){this.name=t||"";this.depth=0;this.height=0;this.parentNode=null;this.dataIndex=-1;this.children=[];this.viewChildren=[];this.hostTree=e};Z_.prototype={constructor:Z_,isRemoved:function(){return this.dataIndex<0},eachNode:function(t,e,r){if(typeof t==="function"){r=e;e=t;t=null}t=t||{};if(V(t)){t={order:t}}var i=t.order||"preorder";var a=this[t.attr||"children"];var n;i==="preorder"&&(n=e.call(r,this));for(var o=0;!n&&o<a.length;o++){a[o].eachNode(t,e,r)}i==="postorder"&&e.call(r,this)},updateDepthAndHeight:function(t){var e=0;this.depth=t;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(t+1);if(i.height>e){e=i.height}}this.height=e+1},getNodeById:function(t){if(this.getId()===t){return this}for(var e=0,r=this.children,i=r.length;e<i;e++){var a=r[e].getNodeById(t);if(a){return a}}},contains:function(t){if(t===this){return true}for(var e=0,r=this.children,i=r.length;e<i;e++){var a=r[e].contains(t);if(a){return a}}},getAncestors:function(t){var e=[];var r=t?this:this.parentNode;while(r){e.push(r);r=r.parentNode}e.reverse();return e},getValue:function(t){var e=this.hostTree.data;return e.get(e.getDimension(t||"value"),this.dataIndex)},setLayout:function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(t){if(this.dataIndex<0){return}var e=this.hostTree;var r=e.data.getItemModel(this.dataIndex);var i=this.getLevelModel();var a;if(!i&&(this.children.length===0||this.children.length!==0&&this.isExpand===false)){a=this.getLeavesModel()}return r.getModel(t,(i||a||e.hostModel).getModel(t))},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},getLeavesModel:function(){return this.hostTree.leavesModel},setVisual:function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},getVisual:function(t,e){return this.hostTree.data.getItemVisual(this.dataIndex,t,e)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(t){var e=t.parentNode;while(e){if(e===this){return true}e=e.parentNode}return false},isDescendantOf:function(t){return t!==this&&t.isAncestorOf(this)}};function U_(t,e,r){this.root;this.data;this._nodes=[];this.hostModel=t;this.levelModels=k(e||[],function(e){return new kl(e,t,t.ecModel)});this.leavesModel=new kl(r||{},t,t.ecModel)}U_.prototype={constructor:U_,type:"tree",eachNode:function(t,e,r){this.root.eachNode(t,e,r)},getNodeByDataIndex:function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},getNodeByName:function(t){return this.root.getNodeByName(t)},update:function(){var t=this.data;var e=this._nodes;for(var r=0,i=e.length;r<i;r++){e[r].dataIndex=-1}for(var r=0,i=t.count();r<i;r++){e[t.getRawIndex(r)].dataIndex=r}},clearLayouts:function(){this.data.clearItemLayouts()}};U_.createTree=function(t,e,r){var i=new U_(e,r.levels,r.leaves);var a=[];var n=1;o(t);function o(t,e){var r=t.value;n=Math.max(n,z(r)?r.length:1);a.push(t);var s=new Z_(t.name,i);e?X_(s,e):i.root=s;i._nodes.push(s);var l=t.children;if(l){for(var u=0;u<l.length;u++){o(l[u],s)}}}i.root.updateDepthAndHeight(0);var s=Ud(a,{coordDimensions:["value"],dimensionsCount:n});var l=new Cd(s,e);l.initData(a);R_({mainData:l,struct:i,structAttr:"tree"});i.update();return i};function X_(t,e){var r=e.children;if(t.parentNode===e){return}r.push(t);t.parentNode=e}Lf.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(t){var e={name:t.name,children:t.data};var r=t.leaves||{};var i={};i.leaves=r;var a=U_.createTree(e,this,i);var n=0;a.eachNode("preorder",function(t){if(t.depth>n){n=t.depth}});var o=t.expandAndCollapse;var s=o&&t.initialTreeDepth>=0?t.initialTreeDepth:n;a.root.eachNode("preorder",function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&e.collapsed!=null?!e.collapsed:t.depth<=s});return a.data},getOrient:function(){var t=this.get("orient");if(t==="horizontal"){t="LR"}else if(t==="vertical"){t="TB"}return t},formatTooltip:function(t){var e=this.getData().tree;var r=e.root.children[0];var i=e.getNodeByDataIndex(t);var a=i.getValue();var n=i.name;while(i&&i!==r){n=i.parentNode.name+"."+n;i=i.parentNode}return hu(n+(isNaN(a)||a==null?"":" : "+a))},defaultOption:{zlevel:0,z:2,left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:true,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:true,color:"#555"},leaves:{label:{show:true}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});function j_(t){t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};var e=[t];var r;var i;while(r=e.pop()){i=r.children;if(r.isExpand&&i.length){var a=i.length;for(var n=a-1;n>=0;n--){var o=i[n];o.hierNode={defaultAncestor:null,ancestor:o,prelim:0,modifier:0,change:0,shift:0,i:n,thread:null};e.push(o)}}}}function Y_(t,e){var r=t.isExpand?t.children:[];var i=t.parentNode.children;var a=t.hierNode.i?i[t.hierNode.i-1]:null;if(r.length){Q_(t);var n=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;if(a){t.hierNode.prelim=a.hierNode.prelim+e(t,a);t.hierNode.modifier=t.hierNode.prelim-n}else{t.hierNode.prelim=n}}else if(a){t.hierNode.prelim=a.hierNode.prelim+e(t,a)}t.parentNode.hierNode.defaultAncestor=tw(t,a,t.parentNode.hierNode.defaultAncestor||i[0],e)}function q_(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},true);t.hierNode.modifier+=t.parentNode.hierNode.modifier}function K_(t){return arguments.length?t:nw}function $_(t,e){var r={};t-=Math.PI/2;r.x=e*Math.cos(t);r.y=e*Math.sin(t);return r}function J_(t,e){return Lu(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Q_(t){var e=t.children;var r=e.length;var i=0;var a=0;while(--r>=0){var n=e[r];n.hierNode.prelim+=i;n.hierNode.modifier+=i;a+=n.hierNode.change;i+=n.hierNode.shift+a}}function tw(t,e,r,i){if(e){var a=t;var n=t;var o=n.parentNode.children[0];var s=e;var l=a.hierNode.modifier;var u=n.hierNode.modifier;var h=o.hierNode.modifier;var f=s.hierNode.modifier;while(s=ew(s),n=rw(n),s&&n){a=ew(a);o=rw(o);a.hierNode.ancestor=t;var c=s.hierNode.prelim+f-n.hierNode.prelim-u+i(s,n);if(c>0){aw(iw(s,t,r),t,c);u+=c;l+=c}f+=s.hierNode.modifier;u+=n.hierNode.modifier;l+=a.hierNode.modifier;h+=o.hierNode.modifier}if(s&&!ew(a)){a.hierNode.thread=s;a.hierNode.modifier+=f-l}if(n&&!rw(o)){o.hierNode.thread=n;o.hierNode.modifier+=u-h;r=t}}return r}function ew(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function rw(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function iw(t,e,r){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:r}function aw(t,e,r){var i=r/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=i;e.hierNode.shift+=r;e.hierNode.modifier+=r;e.hierNode.prelim+=r;t.hierNode.change+=i}function nw(t,e){return t.parentNode===e.parentNode?1:2}od({type:"tree",init:function(t,e){this._oldTree;this._mainGroup=new fr;this.group.add(this._mainGroup)},render:function(t,e,r,i){var a=t.getData();var n=t.layoutInfo;var o=this._mainGroup;var s=t.get("layout");if(s==="radial"){o.attr("position",[n.x+n.width/2,n.y+n.height/2])}else{o.attr("position",[n.x,n.y])}var l=this._data;var u={expandAndCollapse:t.get("expandAndCollapse"),layout:s,orient:t.getOrient(),curvature:t.get("lineStyle.curveness"),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),useNameLabel:true,fadeIn:true};a.diff(l).add(function(e){if(ow(a,e)){lw(a,e,null,o,t,u)}}).update(function(e,r){var i=l.getItemGraphicEl(r);if(!ow(a,e)){i&&uw(l,r,i,o,t,u);return}lw(a,e,i,o,t,u)}).remove(function(e){var r=l.getItemGraphicEl(e);if(r){uw(l,e,r,o,t,u)}}).execute();if(u.expandAndCollapse===true){a.eachItemGraphicEl(function(e,i){e.off("click").on("click",function(){r.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:i})})})}this._data=a},dispose:function(){},remove:function(){this._mainGroup.removeAll();this._data=null}});function ow(t,e){var r=t.getItemLayout(e);return r&&!isNaN(r.x)&&!isNaN(r.y)&&t.getItemVisual(e,"symbol")!=="none"}function sw(t,e,r){r.itemModel=e;r.itemStyle=e.getModel("itemStyle").getItemStyle();r.hoverItemStyle=e.getModel("emphasis.itemStyle").getItemStyle();r.lineStyle=e.getModel("lineStyle").getLineStyle();r.labelModel=e.getModel("label");r.hoverLabelModel=e.getModel("emphasis.label");if(t.isExpand===false&&t.children.length!==0){r.symbolInnerColor=r.itemStyle.fill}else{r.symbolInnerColor="#fff"}return r}function lw(t,e,r,i,a,n){var o=!r;var s=t.tree.getNodeByDataIndex(e);var l=s.getModel();var n=sw(s,l,n);var u=t.tree.root;var h=s.parentNode===u?s:s.parentNode||s;var f=t.getItemGraphicEl(h.dataIndex);var c=h.getLayout();var v=f?{x:f.position[0],y:f.position[1],rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:c;var d=s.getLayout();if(o){r=new qg(t,e,n);r.attr("position",[v.x,v.y])}else{r.updateData(t,e,n)}r.__radialOldRawX=r.__radialRawX;r.__radialOldRawY=r.__radialRawY;r.__radialRawX=d.rawX;r.__radialRawY=d.rawY;i.add(r);t.setItemGraphicEl(e,r);pl(r,{position:[d.x,d.y]},a);var p=r.getSymbolPath();if(n.layout==="radial"){var g=u.children[0];var m=g.getLayout();var y=g.children.length;var x;var _;if(d.x===m.x&&s.isExpand===true){var w={};w.x=(g.children[0].getLayout().x+g.children[y-1].getLayout().x)/2;w.y=(g.children[0].getLayout().y+g.children[y-1].getLayout().y)/2;x=Math.atan2(w.y-m.y,w.x-m.x);if(x<0){x=Math.PI*2+x}_=w.x<m.x;if(_){x=x-Math.PI}}else{x=Math.atan2(d.y-m.y,d.x-m.x);if(x<0){x=Math.PI*2+x}if(s.children.length===0||s.children.length!==0&&s.isExpand===false){_=d.x<m.x;if(_){x=x-Math.PI}}else{_=d.x>m.x;if(!_){x=x-Math.PI}}}var S=_?"left":"right";p.setStyle({textPosition:S,textRotation:-x,textOrigin:"center",verticalAlign:"middle"})}if(s.parentNode&&s.parentNode!==u){var M=r.__edge;if(!M){M=r.__edge=new Ss({shape:hw(n,v,v),style:b({opacity:0},n.lineStyle)})}pl(M,{shape:hw(n,c,d),style:{opacity:1}},a);i.add(M)}}function uw(t,e,r,i,a,n){var o=t.tree.getNodeByDataIndex(e);var s=t.tree.root;var l=o.getModel();var n=sw(o,l,n);var u=o.parentNode===s?o:o.parentNode||o;var h;while(h=u.getLayout(),h==null){u=u.parentNode===s?u:u.parentNode||u}pl(r,{position:[h.x+1,h.y+1]},a,function(){i.remove(r);t.setItemGraphicEl(e,null)});r.fadeOut(null,{keepLabel:true});var f=r.__edge;if(f){pl(f,{shape:hw(n,h,h),style:{opacity:0}},a,function(){i.remove(f)})}}function hw(t,e,r){var i;var a;var n;var o;var s=t.orient;if(t.layout==="radial"){var l=e.rawX;var u=e.rawY;var h=r.rawX;var f=r.rawY;var c=$_(l,u);var v=$_(l,u+(f-u)*t.curvature);var d=$_(h,f+(u-f)*t.curvature);var p=$_(h,f);return{x1:c.x,y1:c.y,x2:p.x,y2:p.y,cpx1:v.x,cpy1:v.y,cpx2:d.x,cpy2:d.y}}else{var l=e.x;var u=e.y;var h=r.x;var f=r.y;if(s==="LR"||s==="RL"){i=l+(h-l)*t.curvature;a=u;n=h+(l-h)*t.curvature;o=f}if(s==="TB"||s==="BT"){i=l;a=u+(f-u)*t.curvature;n=h;o=f+(u-f)*t.curvature}return{x1:l,y1:u,x2:h,y2:f,cpx1:i,cpy1:a,cpx2:n,cpy2:o}}}Kv({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var r=t.dataIndex;var i=e.getData().tree;var a=i.getNodeByDataIndex(r);a.isExpand=!a.isExpand})});function fw(t,e,r){var i=[t];var a=[];var n;while(n=i.pop()){a.push(n);if(n.isExpand){var o=n.children;if(o.length){for(var s=0;s<o.length;s++){i.push(o[s])}}}}while(n=a.pop()){e(n,r)}}function cw(t,e){var r=[t];var i;while(i=r.pop()){e(i);if(i.isExpand){var a=i.children;if(a.length){for(var n=a.length-1;n>=0;n--){r.push(a[n])}}}}}var vw=function(t,e){t.eachSeriesByType("tree",function(t){dw(t,e)})};function dw(t,e){var r=J_(t,e);t.layoutInfo=r;var i=t.get("layout");var a=0;var n=0;var o=null;if(i==="radial"){a=2*Math.PI;n=Math.min(r.height,r.width)/2;o=K_(function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth})}else{a=r.width;n=r.height;o=K_()}var s=t.getData().tree.root;var l=s.children[0];if(l){j_(s);fw(l,Y_,o);s.hierNode.modifier=-l.hierNode.prelim;cw(l,q_);var u=l;var h=l;var f=l;cw(l,function(t){var e=t.getLayout().x;if(e<u.getLayout().x){u=t}if(e>h.getLayout().x){h=t}if(t.depth>f.depth){f=t}});var c=u===h?1:o(u,h)/2;var v=c-u.getLayout().x;var d=0;var p=0;var g=0;var m=0;if(i==="radial"){d=a/(h.getLayout().x+c+v);p=n/(f.depth-1||1);cw(l,function(t){g=(t.getLayout().x+v)*d;m=(t.depth-1)*p;var e=$_(g,m);t.setLayout({x:e.x,y:e.y,rawX:g,rawY:m},true)})}else{var y=t.getOrient();if(y==="RL"||y==="LR"){p=n/(h.getLayout().x+c+v);d=a/(f.depth-1||1);cw(l,function(t){m=(t.getLayout().x+v)*p;g=y==="LR"?(t.depth-1)*d:a-(t.depth-1)*d;t.setLayout({x:g,y:m},true)})}else if(y==="TB"||y==="BT"){d=a/(h.getLayout().x+c+v);p=n/(f.depth-1||1);cw(l,function(t){g=(t.getLayout().x+v)*d;m=y==="TB"?(t.depth-1)*p:n-(t.depth-1)*p;t.setLayout({x:g,y:m},true)})}}}}td(Vm("tree","circle"));Qv(vw);function pw(t,e,r){if(t&&T(e,t.type)>=0){var i=r.getData().tree.root;var a=t.targetNode;if(a&&i.contains(a)){return{node:a}}var n=t.targetNodeId;if(n!=null&&(a=i.getNodeById(n))){return{node:a}}}}function gw(t){var e=[];while(t){t=t.parentNode;t&&e.push(t)}return e.reverse()}function mw(t,e){var r=gw(t);return T(r,e)>=0}function yw(t,e){var r=[];while(t){var i=t.dataIndex;r.push({name:t.name,dataIndex:i,value:e.getRawValue(i)});t=t.parentNode}r.reverse();return r}Lf.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],_viewRoot:null,defaultOption:{progressive:0,hoverLayerThreshold:Infinity,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:true,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,roam:true,nodeClick:"zoomToNode",animation:true,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:true,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:true,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:true},upperLabel:{show:false,position:[0,"50%"],height:20,color:"#fff",ellipsis:true,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:true,position:[0,"50%"],color:"#fff",ellipsis:true,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(t,e){var r={name:t.name,children:t.data};xw(r);var i=t.levels||[];i=t.levels=_w(i,e);var a={};a.levels=i;return U_.createTree(r,this,a).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(t){var e=this.getData();var r=this.getRawValue(t);var i=z(r)?nu(r[0]):nu(r);var a=e.getName(t);return hu(a+": "+i)},getDataParams:function(t){var e=Lf.prototype.getDataParams.apply(this,arguments);var r=this.getData().tree.getNodeByDataIndex(t);e.treePathInfo=yw(r,this);return e},setLayoutInfo:function(t){this.layoutInfo=this.layoutInfo||{};w(this.layoutInfo,t)},mapIdToIndex:function(t){var e=this._idIndexMap;if(!e){e=this._idIndexMap=rt();this._idIndexMapCount=0}var r=e.get(t);if(r==null){e.set(t,r=this._idIndexMapCount++)}return r},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;if(!t||t!==e&&!e.contains(t)){this._viewRoot=e}}});function xw(t){var e=0;L(t.children,function(t){xw(t);var r=t.value;z(r)&&(r=r[0]);e+=r});var r=t.value;if(z(r)){r=r[0]}if(r==null||isNaN(r)){r=e}if(r<0){r=0}z(t.value)?t.value[0]=r:t.value=r}function _w(t,e){var r=e.get("color");if(!r){return}t=t||[];var i;L(t,function(t){var e=new kl(t);var r=e.get("color");if(e.get("itemStyle.color")||r&&r!=="none"){i=true}});if(!i){var a=t[0]||(t[0]={});a.color=r.slice()}return t}var ww=8;var bw=8;var Sw=5;function Mw(t){this.group=new fr;t.add(this.group)}Mw.prototype={constructor:Mw,render:function(t,e,r,i){var a=t.getModel("breadcrumb");var n=this.group;n.removeAll();if(!a.get("show")||!r){return}var o=a.getModel("itemStyle");var s=o.getModel("textStyle");var l={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,l,s);this._renderContent(t,l,o,s,i);ku(n,l.pos,l.box)},_prepare:function(t,e,r){for(var i=t;i;i=i.parentNode){var a=i.getModel().get("name");var n=r.getTextRect(a);var o=Math.max(n.width+ww*2,e.emptyItemWidth);e.totalWidth+=o+bw;e.renderList.push({node:i,text:a,width:o})}},_renderContent:function(t,e,r,i,a){var n=0;var o=e.emptyItemWidth;var s=t.get("breadcrumb.height");var l=Cu(e.pos,e.box);var u=e.totalWidth;var h=e.renderList;for(var f=h.length-1;f>=0;f--){var c=h[f];var v=c.node;var d=c.width;var p=c.text;if(u>l.width){u-=d-o;d=o;p=null}var g=new ms({shape:{points:Iw(n,0,d,s,f===h.length-1,f===0)},style:b(r.getItemStyle(),{lineJoin:"bevel",text:p,textFill:i.getTextColor(),textFont:i.getFont()}),z:10,onclick:R(a,v)});this.group.add(g);Tw(g,t,v);n+=d+bw}},remove:function(){this.group.removeAll()}};function Iw(t,e,r,i,a,n){var o=[[a?t:t-Sw,e],[t+r,e],[t+r,e+i],[a?t:t-Sw,e+i]];!n&&o.splice(2,0,[t+r+Sw,e+i/2]);!a&&o.push([t,e+i/2]);return o}function Tw(t,e,r){t.eventData={componentType:"series",componentSubType:"treemap",seriesIndex:e.componentIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&yw(r,e)}}function Dw(){var t=[];var e={};var r;return{add:function(r,i,a,n,o){if(V(n)){o=n;n=0}if(e[r.id]){return false}e[r.id]=1;t.push({el:r,target:i,time:a,delay:n,easing:o});return true},done:function(t){r=t;return this},start:function(){var i=t.length;for(var a=0,n=t.length;a<n;a++){var o=t[a];o.el.animateTo(o.target,o.time,o.delay,o.easing,s)}return this;function s(){i--;if(!i){t.length=0;e={};r&&r()}}}}}var Aw=E;var Cw=fr;var Lw=xs;var kw=L;var Pw=3;var Nw=["label"];var Ow=["emphasis","label"];var Ew=["upperLabel"];var Rw=["emphasis","upperLabel"];var zw=10;var Bw=1;var Vw=2;var Gw=dn([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);var Ww=function(t){var e=Gw(t);e.stroke=e.fill=e.lineWidth=null;return e};od({type:"treemap",init:function(t,e){this._containerGroup;this._storage=Fw();this._oldTree;this._breadcrumb;this._controller;this._state="ready"},render:function(t,e,r,i){var a=e.findComponents({mainType:"series",subType:"treemap",query:i});if(T(a,t)<0){return}this.seriesModel=t;this.api=r;this.ecModel=e;var n=["treemapZoomToNode","treemapRootToNode"];var o=pw(i,n,t);var s=i&&i.type;var l=t.layoutInfo;var u=!this._oldTree;var h=this._storage;var f=s==="treemapRootToNode"&&o&&h?{rootNodeGroup:h.nodeGroup[o.node.getRawIndex()],direction:i.direction}:null;var c=this._giveContainerGroup(l);var v=this._doRender(c,t,f);!u&&(!s||s==="treemapZoomToNode"||s==="treemapRootToNode")?this._doAnimation(c,v,t,f):v.renderFinally();this._resetController(r);this._renderBreadcrumb(t,r,o)},_giveContainerGroup:function(t){var e=this._containerGroup;if(!e){e=this._containerGroup=new Cw;this._initEvents(e);this.group.add(e)}e.attr("position",[t.x,t.y]);return e},_doRender:function(t,e,r){var i=e.getData().tree;var a=this._oldTree;var n=Fw();var o=Fw();var s=this._storage;var l=[];var u=R(Hw,e,o,s,r,n,l);f(i.root?[i.root]:[],a&&a.root?[a.root]:[],t,i===a||!a,0);var h=c(s);this._oldTree=i;this._storage=o;return{lastsForAnimation:n,willDeleteEls:h,renderFinally:v};function f(t,e,r,i,a){if(i){e=t;kw(t,function(t,e){!t.isRemoved()&&o(e,e)})}else{new cd(e,t,n,n).add(o).update(o).remove(R(o,null)).execute()}function n(t){return t.getId()}function o(n,o){var s=n!=null?t[n]:null;var l=o!=null?e[o]:null;var h=u(s,l,r,a);h&&f(s&&s.viewChildren||[],l&&l.viewChildren||[],h,i,a+1)}}function c(t){var e=Fw();t&&kw(t,function(t,r){var i=e[r];kw(t,function(t){t&&(i.push(t),t.__tmWillDelete=1)})});return e}function v(){kw(h,function(t){kw(t,function(t){t.parent&&t.parent.remove(t)})});kw(l,function(t){t.invisible=true;t.dirty()})}},_doAnimation:function(t,e,r,i){if(!r.get("animation")){return}var a=r.get("animationDurationUpdate");var n=r.get("animationEasing");var o=Dw();kw(e.willDeleteEls,function(t,e){kw(t,function(t,r){if(t.invisible){return}var s=t.parent;var l;if(i&&i.direction==="drillDown"){l=s===i.rootNodeGroup?{shape:{x:0,y:0,width:s.__tmNodeWidth,height:s.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}}}else{var u=0;var h=0;if(!s.__tmWillDelete){u=s.__tmNodeWidth/2;h=s.__tmNodeHeight/2}l=e==="nodeGroup"?{position:[u,h],
style:{opacity:0}}:{shape:{x:u,y:h,width:0,height:0},style:{opacity:0}}}l&&o.add(t,l,a,n)})});kw(this._storage,function(t,r){kw(t,function(t,i){var s=e.lastsForAnimation[r][i];var l={};if(!s){return}if(r==="nodeGroup"){if(s.old){l.position=t.position.slice();t.attr("position",s.old)}}else{if(s.old){l.shape=w({},t.shape);t.setShape(s.old)}if(s.fadein){t.setStyle("opacity",0);l.style={opacity:1}}else if(t.style.opacity!==1){l.style={opacity:1}}}o.add(t,l,a,n)})},this);this._state="animating";o.done(Aw(function(){this._state="ready";e.renderFinally()},this)).start()},_resetController:function(t){var e=this._controller;if(!e){e=this._controller=new f_(t.getZr());e.enable(this.seriesModel.get("roam"));e.on("pan",Aw(this._onPan,this));e.on("zoom",Aw(this._onZoom,this))}var r=new hr(0,0,t.getWidth(),t.getHeight());e.setPointerChecker(function(t,e,i){return r.contain(e,i)})},_clearController:function(){var t=this._controller;if(t){t.dispose();t=null}},_onPan:function(t,e){if(this._state!=="animating"&&(Math.abs(t)>Pw||Math.abs(e)>Pw)){var r=this.seriesModel.getData().tree.root;if(!r){return}var i=r.getLayout();if(!i){return}this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+t,y:i.y+e,width:i.width,height:i.height}})}},_onZoom:function(t,e,r){if(this._state!=="animating"){var i=this.seriesModel.getData().tree.root;if(!i){return}var a=i.getLayout();if(!a){return}var n=new hr(a.x,a.y,a.width,a.height);var o=this.seriesModel.layoutInfo;e-=o.x;r-=o.y;var s=Zt();Yt(s,s,[-e,-r]);Kt(s,s,[t,t]);Yt(s,s,[e,r]);n.applyTransform(s);this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x,y:n.y,width:n.width,height:n.height}})}},_initEvents:function(t){t.on("click",function(t){if(this._state!=="ready"){return}var e=this.seriesModel.get("nodeClick",true);if(!e){return}var r=this.findTarget(t.offsetX,t.offsetY);if(!r){return}var i=r.node;if(i.getLayout().isLeafRoot){this._rootToNode(r)}else{if(e==="zoomToNode"){this._zoomToNode(r)}else if(e==="link"){var a=i.hostTree.data.getItemModel(i.dataIndex);var n=a.get("link",true);var o=a.get("target",true)||"blank";n&&window.open(n,o)}}},this)},_renderBreadcrumb:function(t,e,r){if(!r){r=t.get("leafDepth",true)!=null?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2);if(!r){r={node:t.getData().tree.root}}}(this._breadcrumb||(this._breadcrumb=new Mw(this.group))).render(t,e,r.node,Aw(i,this));function i(e){if(this._state!=="animating"){mw(t.getViewRoot(),e)?this._rootToNode({node:e}):this._zoomToNode({node:e})}}},remove:function(){this._clearController();this._containerGroup&&this._containerGroup.removeAll();this._storage=Fw();this._state="ready";this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},_rootToNode:function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},findTarget:function(t,e){var r;var i=this.seriesModel.getViewRoot();i.eachNode({attr:"viewChildren",order:"preorder"},function(i){var a=this._storage.background[i.getRawIndex()];if(a){var n=a.transformCoordToLocal(t,e);var o=a.shape;if(o.x<=n[0]&&n[0]<=o.x+o.width&&o.y<=n[1]&&n[1]<=o.y+o.height){r={node:i,offsetX:n[0],offsetY:n[1]}}else{return false}}},this);return r}});function Fw(){return{nodeGroup:[],background:[],content:[]}}function Hw(t,e,r,i,a,n,o,s,l,u){if(!o){return}var h=o.getLayout();if(!h||!h.isInView){return}var f=h.width;var c=h.height;var v=h.borderWidth;var d=h.invisible;var p=o.getRawIndex();var g=s&&s.getRawIndex();var m=o.viewChildren;var x=h.upperHeight;var _=m&&m.length;var b=o.getModel("itemStyle");var S=o.getModel("emphasis.itemStyle");var M=k("nodeGroup",Cw);if(!M){return}l.add(M);M.attr("position",[h.x||0,h.y||0]);M.__tmNodeWidth=f;M.__tmNodeHeight=c;if(h.isAboveViewRoot){return M}var I=k("background",Lw,u,Bw);I&&D(M,I,_&&h.upperHeight);if(!_){var T=k("content",Lw,u,Vw);T&&A(M,T)}return M;function D(e,r,i){r.dataIndex=o.dataIndex;r.seriesIndex=t.seriesIndex;r.setShape({x:0,y:0,width:f,height:c});var a=o.getVisual("borderColor",true);var n=S.get("borderColor");C(r,function(){var t=Ww(b);t.fill=a;var e=Gw(S);e.fill=n;if(i){var o=f-2*v;L(t,e,a,o,x,{x:v,y:0,width:o,height:x})}else{t.text=e.text=null}r.setStyle(t);il(r,e)});e.add(r)}function A(e,r){r.dataIndex=o.dataIndex;r.seriesIndex=t.seriesIndex;var i=Math.max(f-2*v,0);var a=Math.max(c-2*v,0);r.culling=true;r.setShape({x:v,y:v,width:i,height:a});var n=o.getVisual("color",true);C(r,function(){var t=Ww(b);t.fill=n;var e=Gw(S);L(t,e,n,i,a);r.setStyle(t);il(r,e)});e.add(r)}function C(t,e){if(!d){e();if(!t.__tmWillVisible){t.invisible=false}}else{!t.invisible&&n.push(t)}}function L(e,r,i,a,n,s){var l=o.getModel();var u=U(t.getFormattedLabel(o.dataIndex,"normal",null,null,s?"upperLabel":"label"),l.get("name"));if(!s&&h.isLeafRoot){var f=t.get("drillDownIcon",true);u=f?f+" "+u:u}var c=l.getModel(s?Ew:Nw);var v=l.getModel(s?Rw:Ow);var d=c.getShallow("show");al(e,r,c,v,{defaultText:d?u:null,autoColor:i,isRectText:true});s&&(e.textRect=y(s));e.truncate=d&&c.get("ellipsis")?{outerWidth:a,outerHeight:n,minChar:2}:null}function k(t,i,n,o){var s=g!=null&&r[t][g];var l=a[t];if(s){r[t][g]=null;P(l,s,t)}else if(!d){s=new i({z:Zw(n,o)});s.__tmDepth=n;s.__tmStorageName=t;N(l,s,t)}return e[t][p]=s}function P(t,e,r){var i=t[p]={};i.old=r==="nodeGroup"?e.position.slice():w({},e.shape)}function N(t,e,r){var n=t[p]={};var s=o.parentNode;if(s&&(!i||i.direction==="drillDown")){var l=0;var u=0;var h=a.background[s.getRawIndex()];if(!i&&h&&h.old){l=h.old.width;u=h.old.height}n.old=r==="nodeGroup"?[0,u]:{x:l,y:u,width:0,height:0}}n.fadein=r!=="nodeGroup"}}function Zw(t,e){var r=t*zw+e;return(r-1)/r}var Uw=function(){};var Xw=["treemapZoomToNode","treemapRender","treemapMove"];for(var jw=0;jw<Xw.length;jw++){Kv({type:Xw[jw],update:"updateView"},Uw)}Kv({type:"treemapRootToNode",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"treemap",query:t},r);function r(e,r){var i=["treemapZoomToNode","treemapRootToNode"];var a=pw(t,i,e);if(a){var n=e.getViewRoot();if(n){t.direction=mw(n,a.node)?"rollUp":"drillDown"}e.resetViewRoot(a.node)}}});var Yw=L;var qw=G;var Kw=-1;var $w=function(t){var e=t.mappingMethod;var r=t.type;var i=this.option=y(t);this.type=r;this.mappingMethod=e;this._normalizeData=hb[e];var a=Jw[r];this.applyVisual=a.applyVisual;this.getColorMapper=a.getColorMapper;this._doMap=a._doMap[e];if(e==="piecewise"){eb(i);Qw(i)}else if(e==="category"){i.categories?tb(i):eb(i,true)}else{K(e!=="linear"||i.dataExtent);eb(i)}};$w.prototype={constructor:$w,mapValueToVisual:function(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizer:function(){return E(this._normalizeData,this)}};var Jw=$w.visualHandlers={color:{applyVisual:ab("color"),getColorMapper:function(){var t=this.option;return E(t.mappingMethod==="category"?function(t,e){!e&&(t=this._normalizeData(t));return nb.call(this,t)}:function(e,r,i){var a=!!i;!r&&(e=this._normalizeData(e));i=ke(e,t.parsedVisual,i);return a?i:ze(i,"rgba")},this)},_doMap:{linear:function(t){return ze(ke(t,this.option.parsedVisual),"rgba")},category:nb,piecewise:function(t,e){var r=lb.call(this,e);if(r==null){r=ze(ke(t,this.option.parsedVisual),"rgba")}return r},fixed:ob}},colorHue:rb(function(t,e){return Ee(t,e)}),colorSaturation:rb(function(t,e){return Ee(t,null,e)}),colorLightness:rb(function(t,e){return Ee(t,null,null,e)}),colorAlpha:rb(function(t,e){return Re(t,e)}),opacity:{applyVisual:ab("opacity"),_doMap:sb([0,1])},liftZ:{applyVisual:ab("liftZ"),_doMap:{linear:ob,category:ob,piecewise:ob,fixed:ob}},symbol:{applyVisual:function(t,e,r){var i=this.mapValueToVisual(t);if(V(i)){r("symbol",i)}else if(qw(i)){for(var a in i){if(i.hasOwnProperty(a)){r(a,i[a])}}}},_doMap:{linear:ib,category:nb,piecewise:function(t,e){var r=lb.call(this,e);if(r==null){r=ib.call(this,t)}return r},fixed:ob}},symbolSize:{applyVisual:ab("symbolSize"),_doMap:sb([0,1])}};function Qw(t){var e=t.pieceList;t.hasSpecialVisual=false;L(e,function(e,r){e.originIndex=r;if(e.visual!=null){t.hasSpecialVisual=true}})}function tb(t){var e=t.categories;var r=t.visual;var i=t.categoryMap={};Yw(e,function(t,e){i[t]=e});if(!z(r)){var a=[];if(G(r)){Yw(r,function(t,e){var r=i[e];a[r!=null?r:Kw]=t})}else{a[Kw]=r}r=ub(t,a)}for(var n=e.length-1;n>=0;n--){if(r[n]==null){delete i[e[n]];e.pop()}}}function eb(t,e){var r=t.visual;var i=[];if(G(r)){Yw(r,function(t){i.push(t)})}else if(r!=null){i.push(r)}var a={color:1,symbol:1};if(!e&&i.length===1&&!a.hasOwnProperty(t.type)){i[1]=i[0]}ub(t,i)}function rb(t){return{applyVisual:function(e,r,i){e=this.mapValueToVisual(e);i("color",t(r("color"),e))},_doMap:sb([0,1])}}function ib(t){var e=this.option.visual;return e[Math.round(Gl(t,[0,1],[0,e.length-1],true))]||{}}function ab(t){return function(e,r,i){i(t,this.mapValueToVisual(e))}}function nb(t){var e=this.option.visual;return e[this.option.loop&&t!==Kw?t%e.length:t]}function ob(){return this.option.visual[0]}function sb(t){return{linear:function(e){return Gl(e,t,this.option.visual,true)},category:nb,piecewise:function(e,r){var i=lb.call(this,r);if(i==null){i=Gl(e,t,this.option.visual,true)}return i},fixed:ob}}function lb(t){var e=this.option;var r=e.pieceList;if(e.hasSpecialVisual){var i=$w.findPieceIndex(t,r);var a=r[i];if(a&&a.visual){return a.visual[this.type]}}}function ub(t,e){t.visual=e;if(t.type==="color"){t.parsedVisual=k(e,function(t){return Te(t)})}return e}var hb={linear:function(t){return Gl(t,this.option.dataExtent,[0,1],true)},piecewise:function(t){var e=this.option.pieceList;var r=$w.findPieceIndex(t,e,true);if(r!=null){return Gl(r,[0,e.length-1],[0,1],true)}},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return e==null?Kw:e},fixed:at};$w.listVisualTypes=function(){var t=[];L(Jw,function(e,r){t.push(r)});return t};$w.addVisualHandler=function(t,e){Jw[t]=e};$w.isValidType=function(t){return Jw.hasOwnProperty(t)};$w.eachVisual=function(t,e,r){if(G(t)){L(t,e,r)}else{e.call(r,t)}};$w.mapVisual=function(t,e,r){var i;var a=z(t)?[]:G(t)?{}:(i=true,null);$w.eachVisual(t,function(t,n){var o=e.call(r,t,n);i?a=o:a[n]=o});return a};$w.retrieveVisuals=function(t){var e={};var r;t&&Yw(Jw,function(i,a){if(t.hasOwnProperty(a)){e[a]=t[a];r=true}});return r?e:null};$w.prepareVisualTypes=function(t){if(qw(t)){var e=[];Yw(t,function(t,r){e.push(r)});t=e}else if(z(t)){t=t.slice()}else{return[]}t.sort(function(t,e){return e==="color"&&t!=="color"&&t.indexOf("color")===0?1:-1});return t};$w.dependsOn=function(t,e){return e==="color"?!!(t&&t.indexOf(e)===0):t===e};$w.findPieceIndex=function(t,e,r){var i;var a=Infinity;for(var n=0,o=e.length;n<o;n++){var s=e[n].value;if(s!=null){if(s===t||typeof s==="string"&&s===t+""){return n}r&&f(s,n)}}for(var n=0,o=e.length;n<o;n++){var l=e[n];var u=l.interval;var h=l.close;if(u){if(u[0]===-Infinity){if(fb(h[1],t,u[1])){return n}}else if(u[1]===Infinity){if(fb(h[0],u[0],t)){return n}}else if(fb(h[0],u[0],t)&&fb(h[1],t,u[1])){return n}r&&f(u[0],n);r&&f(u[1],n)}}if(r){return t===Infinity?e.length-1:t===-Infinity?0:i}function f(e,r){var n=Math.abs(e-t);if(n<a){a=n;i=r}}};function fb(t,e,r){return t?e<=r:e<r}var cb=z;var vb="itemStyle";var db={seriesType:"treemap",reset:function(t,e,r,i){var a=t.getData().tree;var n=a.root;var o=t.getModel(vb);if(n.isRemoved()){return}var s=k(a.levelModels,function(t){return t?t.get(vb):null});pb(n,{},s,o,t.getViewRoot().getAncestors(),t)}};function pb(t,e,r,i,a,n){var o=t.getModel();var s=t.getLayout();if(!s||s.invisible||!s.isInView){return}var l=t.getModel(vb);var u=r[t.depth];var h=gb(l,e,u,i);var f=l.get("borderColor");var c=l.get("borderColorSaturation");var v;if(c!=null){v=mb(h,t);f=yb(c,v)}t.setVisual("borderColor",f);var d=t.viewChildren;if(!d||!d.length){v=mb(h,t);t.setVisual("color",v)}else{var p=_b(t,o,s,l,h,d);L(d,function(t,e){if(t.depth>=a.length||t===a[t.depth]){var s=bb(o,h,t,e,p,n);pb(t,s,r,i,a,n)}})}}function gb(t,e,r,i){var a=w({},e);L(["color","colorAlpha","colorSaturation"],function(n){var o=t.get(n,true);o==null&&r&&(o=r[n]);o==null&&(o=e[n]);o==null&&(o=i.get(n));o!=null&&(a[n]=o)});return a}function mb(t){var e=xb(t,"color");if(e){var r=xb(t,"colorAlpha");var i=xb(t,"colorSaturation");if(i){e=Ee(e,null,null,i)}if(r){e=Re(e,r)}return e}}function yb(t,e){return e!=null?Ee(e,null,null,t):null}function xb(t,e){var r=t[e];if(r!=null&&r!=="none"){return r}}function _b(t,e,r,i,a,n){if(!n||!n.length){return}var o=wb(e,"color")||a.color!=null&&a.color!=="none"&&(wb(e,"colorAlpha")||wb(e,"colorSaturation"));if(!o){return}var s=e.get("visualMin");var l=e.get("visualMax");var u=r.dataExtent.slice();s!=null&&s<u[0]&&(u[0]=s);l!=null&&l>u[1]&&(u[1]=l);var h=e.get("colorMappingBy");var f={type:o.name,dataExtent:u,visual:o.range};if(f.type==="color"&&(h==="index"||h==="id")){f.mappingMethod="category";f.loop=true}else{f.mappingMethod="linear"}var c=new $w(f);c.__drColorMappingBy=h;return c}function wb(t,e){var r=t.get(e);return cb(r)&&r.length?{name:e,range:r}:null}function bb(t,e,r,i,a,n){var o=w({},e);if(a){var s=a.type;var l=s==="color"&&a.__drColorMappingBy;var u=l==="index"?i:l==="id"?n.mapIdToIndex(r.getId()):r.getValue(t.get("visualDimension"));o[s]=a.mapValueToVisual(u)}return o}var Sb=Math.max;var Mb=Math.min;var Ib=U;var Tb=L;var Db=["itemStyle","borderWidth"];var Ab=["itemStyle","gapWidth"];var Cb=["upperLabel","show"];var Lb=["upperLabel","height"];var kb={seriesType:"treemap",reset:function(t,e,r,i){var a=r.getWidth();var n=r.getHeight();var o=t.option;var s=Lu(t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()});var l=o.size||[];var u=Wl(Ib(s.width,l[0]),a);var h=Wl(Ib(s.height,l[1]),n);var f=i&&i.type;var c=["treemapZoomToNode","treemapRootToNode"];var v=pw(i,c,t);var d=f==="treemapRender"||f==="treemapMove"?i.rootRect:null;var p=t.getViewRoot();var g=gw(p);if(f!=="treemapMove"){var m=f==="treemapZoomToNode"?Vb(t,v,p,u,h):d?[d.width,d.height]:[u,h];var y=o.sort;if(y&&y!=="asc"&&y!=="desc"){y="desc"}var x={squareRatio:o.squareRatio,sort:y,leafDepth:o.leafDepth};p.hostTree.clearLayouts();var _={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};p.setLayout(_);Pb(p,x,false,0);var _=p.getLayout();Tb(g,function(t,e){var r=(g[e+1]||p).getValue();t.setLayout(w({dataExtent:[r,r],borderWidth:0,upperHeight:0},_))})}var b=t.getData().tree.root;b.setLayout(Gb(s,d,v),true);t.setLayoutInfo(s);Wb(b,new hr((-s.x),(-s.y),a,n),g,p,0)}};function Pb(t,e,r,i){var a;var n;if(t.isRemoved()){return}var o=t.getLayout();a=o.width;n=o.height;var s=t.getModel();var l=s.get(Db);var u=s.get(Ab)/2;var h=Fb(s);var f=Math.max(l,h);var c=l-u;var v=f-u;var s=t.getModel();t.setLayout({borderWidth:l,upperHeight:f,upperLabelHeight:h},true);a=Sb(a-2*c,0);n=Sb(n-c-v,0);var d=a*n;var p=Nb(t,s,d,e,r,i);if(!p.length){return}var g={x:c,y:v,width:a,height:n};var m=Mb(a,n);var y=Infinity;var x=[];x.area=0;for(var _=0,w=p.length;_<w;){var b=p[_];x.push(b);x.area+=b.getLayout().area;var S=zb(x,m,e.squareRatio);if(S<=y){_++;y=S}else{x.area-=x.pop().getLayout().area;Bb(x,m,g,u,false);m=Mb(g.width,g.height);x.length=x.area=0;y=Infinity}}if(x.length){Bb(x,m,g,u,true)}if(!r){var M=s.get("childrenVisibleMin");if(M!=null&&d<M){r=true}}for(var _=0,w=p.length;_<w;_++){Pb(p[_],e,r,i+1)}}function Nb(t,e,r,i,a,n){var o=t.children||[];var s=i.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=i.leafDepth!=null&&i.leafDepth<=n;if(a&&!l){return t.viewChildren=[]}o=N(o,function(t){return!t.isRemoved()});Eb(o,s);var u=Rb(e,o,s);if(u.sum===0){return t.viewChildren=[]}u.sum=Ob(e,r,u.sum,s,o);if(u.sum===0){return t.viewChildren=[]}for(var h=0,f=o.length;h<f;h++){var c=o[h].getValue()/u.sum*r;o[h].setLayout({area:c})}if(l){o.length&&t.setLayout({isLeafRoot:true},true);o.length=0}t.viewChildren=o;t.setLayout({dataExtent:u.dataExtent},true);return o}function Ob(t,e,r,i,a){if(!i){return r}var n=t.get("visibleMin");var o=a.length;var s=o;for(var l=o-1;l>=0;l--){var u=a[i==="asc"?o-l-1:l].getValue();if(u/r*e<n){s=l;r-=u}}i==="asc"?a.splice(0,o-s):a.splice(s,o-s);return r}function Eb(t,e){if(e){t.sort(function(t,r){var i=e==="asc"?t.getValue()-r.getValue():r.getValue()-t.getValue();return i===0?e==="asc"?t.dataIndex-r.dataIndex:r.dataIndex-t.dataIndex:i})}return t}function Rb(t,e,r){var i=0;for(var a=0,n=e.length;a<n;a++){i+=e[a].getValue()}var o=t.get("visualDimension");var s;if(!e||!e.length){s=[NaN,NaN]}else if(o==="value"&&r){s=[e[e.length-1].getValue(),e[0].getValue()];r==="asc"&&s.reverse()}else{var s=[Infinity,-Infinity];Tb(e,function(t){var e=t.getValue(o);e<s[0]&&(s[0]=e);e>s[1]&&(s[1]=e)})}return{sum:i,dataExtent:s}}function zb(t,e,r){var i=0;var a=Infinity;for(var n=0,o,s=t.length;n<s;n++){o=t[n].getLayout().area;if(o){o<a&&(a=o);o>i&&(i=o)}}var l=t.area*t.area;var u=e*e*r;return l?Sb(u*i/l,l/(u*a)):Infinity}function Bb(t,e,r,i,a){var n=e===r.width?0:1;var o=1-n;var s=["x","y"];var l=["width","height"];var u=r[s[n]];var h=e?t.area/e:0;if(a||h>r[l[o]]){h=r[l[o]]}for(var f=0,c=t.length;f<c;f++){var v=t[f];var d={};var p=h?v.getLayout().area/h:0;var g=d[l[o]]=Sb(h-2*i,0);var m=r[s[n]]+r[l[n]]-u;var y=f===c-1||m<p?m:p;var x=d[l[n]]=Sb(y-2*i,0);d[s[o]]=r[s[o]]+Mb(i,g/2);d[s[n]]=u+Mb(i,x/2);u+=y;v.setLayout(d,true)}r[s[o]]+=h;r[l[o]]-=h}function Vb(t,e,r,i,a){var n=(e||{}).node;var o=[i,a];if(!n||n===r){return o}var s;var l=i*a;var u=l*t.option.zoomToNodeRatio;while(s=n.parentNode){var h=0;var f=s.children;for(var c=0,v=f.length;c<v;c++){h+=f[c].getValue()}var d=n.getValue();if(d===0){return o}u*=h/d;var p=s.getModel();var g=p.get(Db);var m=Math.max(g,Fb(p,g));u+=4*g*g+(3*g+m)*Math.pow(u,.5);u>Yl&&(u=Yl);n=s}u<l&&(u=l);var y=Math.pow(u/l,.5);return[i*y,a*y]}function Gb(t,e,r){if(e){return{x:e.x,y:e.y}}var i={x:0,y:0};if(!r){return i}var a=r.node;var n=a.getLayout();if(!n){return i}var o=[n.width/2,n.height/2];var s=a;while(s){var l=s.getLayout();o[0]+=l.x;o[1]+=l.y;s=s.parentNode}return{x:t.width/2-o[0],y:t.height/2-o[1]}}function Wb(t,e,r,i,a){var n=t.getLayout();var o=r[a];var s=o&&o===t;if(o&&!s||a===r.length&&t!==i){return}t.setLayout({isInView:true,invisible:!s&&!e.intersect(n),isAboveViewRoot:s},true);var l=new hr(e.x-n.x,e.y-n.y,e.width,e.height);Tb(t.viewChildren||[],function(t){Wb(t,l,r,i,a+1)})}function Fb(t){return t.get(Cb)?t.get(Lb):0}td(db);Qv(kb);function Hb(t){return"_EC_"+t}var Zb=function(t){this._directed=t||false;this.nodes=[];this.edges=[];this._nodesMap={};this._edgesMap={};this.data;this.edgeData};var Ub=Zb.prototype;Ub.type="graph";Ub.isDirected=function(){return this._directed};Ub.addNode=function(t,r){t=t||""+r;var i=this._nodesMap;if(i[Hb(t)]){if(e){console.error("Graph nodes have duplicate name or id")}return}var a=new Xb(t,r);a.hostGraph=this;this.nodes.push(a);i[Hb(t)]=a;return a};Ub.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]};Ub.getNodeById=function(t){return this._nodesMap[Hb(t)]};Ub.addEdge=function(t,e,r){var i=this._nodesMap;var a=this._edgesMap;if(typeof t==="number"){t=this.nodes[t]}if(typeof e==="number"){e=this.nodes[e]}if(!Xb.isInstance(t)){t=i[Hb(t)]}if(!Xb.isInstance(e)){e=i[Hb(e)]}if(!t||!e){return}var n=t.id+"-"+e.id;if(a[n]){return}var o=new jb(t,e,r);o.hostGraph=this;if(this._directed){t.outEdges.push(o);e.inEdges.push(o)}t.edges.push(o);if(t!==e){e.edges.push(o)}this.edges.push(o);a[n]=o;return o};Ub.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]};Ub.getEdge=function(t,e){if(Xb.isInstance(t)){t=t.id}if(Xb.isInstance(e)){e=e.id}var r=this._edgesMap;if(this._directed){return r[t+"-"+e]}else{return r[t+"-"+e]||r[e+"-"+t]}};Ub.eachNode=function(t,e){var r=this.nodes;var i=r.length;for(var a=0;a<i;a++){if(r[a].dataIndex>=0){t.call(e,r[a],a)}}};Ub.eachEdge=function(t,e){var r=this.edges;var i=r.length;for(var a=0;a<i;a++){if(r[a].dataIndex>=0&&r[a].node1.dataIndex>=0&&r[a].node2.dataIndex>=0){t.call(e,r[a],a)}}};Ub.breadthFirstTraverse=function(t,e,r,i){if(!Xb.isInstance(e)){e=this._nodesMap[Hb(e)]}if(!e){return}var a=r==="out"?"outEdges":r==="in"?"inEdges":"edges";for(var n=0;n<this.nodes.length;n++){this.nodes[n].__visited=false}if(t.call(i,e,null)){return}var o=[e];while(o.length){var s=o.shift();var l=s[a];for(var n=0;n<l.length;n++){var u=l[n];var h=u.node1===s?u.node2:u.node1;if(!h.__visited){if(t.call(i,h,s)){return}o.push(h);h.__visited=true}}}};Ub.update=function(){var t=this.data;var e=this.edgeData;var r=this.nodes;var i=this.edges;for(var a=0,n=r.length;a<n;a++){r[a].dataIndex=-1}for(var a=0,n=t.count();a<n;a++){r[t.getRawIndex(a)].dataIndex=a}e.filterSelf(function(t){var r=i[e.getRawIndex(t)];return r.node1.dataIndex>=0&&r.node2.dataIndex>=0});for(var a=0,n=i.length;a<n;a++){i[a].dataIndex=-1}for(var a=0,n=e.count();a<n;a++){i[e.getRawIndex(a)].dataIndex=a}};Ub.clone=function(){var t=new Zb(this._directed);var e=this.nodes;var r=this.edges;for(var i=0;i<e.length;i++){t.addNode(e[i].id,e[i].dataIndex)}for(var i=0;i<r.length;i++){var a=r[i];t.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return t};function Xb(t,e){this.id=t==null?"":t;this.inEdges=[];this.outEdges=[];this.edges=[];this.hostGraph;this.dataIndex=e==null?-1:e}Xb.prototype={constructor:Xb,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(t){if(this.dataIndex<0){return}var e=this.hostGraph;var r=e.data.getItemModel(this.dataIndex);return r.getModel(t)}};function jb(t,e,r){this.node1=t;this.node2=e;this.dataIndex=r==null?-1:r}jb.prototype.getModel=function(t){if(this.dataIndex<0){return}var e=this.hostGraph;var r=e.edgeData.getItemModel(this.dataIndex);return r.getModel(t)};var Yb=function(t,e){return{getValue:function(r){var i=this[t][e];return i.get(i.getDimension(r||"value"),this.dataIndex)},setVisual:function(r,i){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,r,i)},getVisual:function(r,i){return this[t][e].getItemVisual(this.dataIndex,r,i)},setLayout:function(r,i){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,r,i)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}};A(Xb,Yb("hostGraph","data"));A(jb,Yb("hostGraph","edgeData"));Zb.Node=Xb;Zb.Edge=jb;hn(Xb);hn(jb);var qb=function(t,e,r,i,a){var n=new Zb(i);for(var o=0;o<t.length;o++){n.addNode(U(t[o].id,t[o].name,o),o)}var s=[];var l=[];var u=0;for(var o=0;o<e.length;o++){var h=e[o];var f=h.source;var c=h.target;if(n.addEdge(f,c,u)){l.push(h);s.push(U(h.id,f+" > "+c));u++}}var v=r.get("coordinateSystem");var d;if(v==="cartesian2d"||v==="polar"){d=qd(t,r)}else{var p=Ch.get(v);var g=p&&p.type!=="view"?p.dimensions||[]:[];if(T(g,"value")<0){g.concat(["value"])}var m=Ud(t,{coordDimensions:g});d=new Cd(m,r);d.initData(t)}var y=new Cd(["value"],r);y.initData(l,s);a&&a(d,y);R_({mainData:d,struct:n,structAttr:"graph",datas:{node:d,edge:y},datasAttr:{node:"data",edge:"edgeData"}});n.update();return n};var Kb=nd({type:"series.graph",init:function(t){Kb.superApply(this,"init",arguments);this.legendDataProvider=function(){return this._categoriesData};this.fillDataTextStyle(t.edges||t.links);this._updateCategoriesData()},mergeOption:function(t){Kb.superApply(this,"mergeOption",arguments);this.fillDataTextStyle(t.edges||t.links);this._updateCategoriesData()},mergeDefaultAndTheme:function(t){Kb.superApply(this,"mergeDefaultAndTheme",arguments);Wa(t,["edgeLabel"],["show"])},getInitialData:function(t,e){var r=t.edges||t.links||[];var i=t.data||t.nodes||[];var a=this;if(i&&r){return qb(i,r,this,true,n).data}function n(t,r){t.wrapMethod("getItemModel",function(t){var e=a._categoriesModels;var r=t.getShallow("category");var i=e[r];if(i){i.parentModel=t.parentModel;t.parentModel=i}return t});var i=a.getModel("edgeLabel");var n=new kl({label:i.option},i.parentModel,e);var o=a.getModel("emphasis.edgeLabel");var s=new kl({emphasis:{label:o.option}},o.parentModel,e);r.wrapMethod("getItemModel",function(t){t.customizeGetParent(l);return t});function l(t){t=this.parsePath(t);return t&&t[0]==="label"?n:t&&t[0]==="emphasis"&&t[1]==="label"?s:this.parentModel}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,e,r){if(r==="edge"){var i=this.getData();var a=this.getDataParams(t,r);var n=i.graph.getEdgeByIndex(t);var o=i.getName(n.node1.dataIndex);var s=i.getName(n.node2.dataIndex);var l=[];o!=null&&l.push(o);s!=null&&l.push(s);l=hu(l.join(" > "));if(a.value){l+=" : "+hu(a.value)}return l}else{return Kb.superApply(this,"formatTooltip",arguments)}},_updateCategoriesData:function(){var t=k(this.option.categories||[],function(t){return t.value!=null?t:w({value:0},t)});var e=new Cd(["value"],this);e.initData(t);this._categoriesData=e;this._categoriesModels=e.mapArray(function(t){return e.getItemModel(t,true)})},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},isAnimationEnabled:function(){return Kb.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:true,hoverAnimation:true,layout:null,focusNodeAdjacency:false,circular:{rotateLabel:false},force:{initLayout:null,repulsion:[0,50],gravity:.1,edgeLength:30,layoutAnimation:true},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle"},draggable:false,roam:false,center:null,zoom:1,nodeScaleRatio:.6,label:{show:false,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,curveness:0,opacity:.5},emphasis:{label:{show:true}}}});var $b=_s.prototype;var Jb=Ss.prototype;function Qb(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var tS=Es({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(t,e){(Qb(e)?$b:Jb).buildPath(t,e)},pointAt:function(t){return Qb(this.shape)?$b.pointAt.call(this,t):Jb.pointAt.call(this,t)},tangentAt:function(t){var e=this.shape;var r=Qb(e)?[e.x2-e.x1,e.y2-e.y1]:Jb.tangentAt.call(this,t);return bt(r,r)}});var eS=["fromSymbol","toSymbol"];function rS(t){return"_"+t+"Type"}function iS(t,e,r){var i=e.getItemVisual(r,"color");var a=e.getItemVisual(r,t);var n=e.getItemVisual(r,t+"Size");if(!a||a==="none"){return}if(!z(n)){n=[n,n]}var o=vg(a,-n[0]/2,-n[1]/2,n[0],n[1],i);o.name=t;return o}function aS(t){var e=new tS({name:"line"});nS(e.shape,t);return e}function nS(t,e){var r=e[0];var i=e[1];var a=e[2];t.x1=r[0];t.y1=r[1];t.x2=i[0];t.y2=i[1];t.percent=1;if(a){t.cpx1=a[0];t.cpy1=a[1]}else{t.cpx1=NaN;t.cpy1=NaN}}function oS(){var t=this;var e=t.childOfName("fromSymbol");var r=t.childOfName("toSymbol");var i=t.childOfName("label");if(!e&&!r&&i.ignore){return}var a=1;var n=this.parent;while(n){if(n.scale){a/=n.scale[0]}n=n.parent}var o=t.childOfName("line");if(!this.__dirty&&!o.__dirty){return}var s=o.shape.percent;var l=o.pointAt(0);var u=o.pointAt(s);var h=vt([],u,l);bt(h,h);if(e){e.attr("position",l);var f=o.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(f[1],f[0]));e.attr("scale",[a*s,a*s])}if(r){r.attr("position",u);var f=o.tangentAt(1);r.attr("rotation",-Math.PI/2-Math.atan2(f[1],f[0]));r.attr("scale",[a*s,a*s])}if(!i.ignore){i.attr("position",u);var c;var v;var d;var p=5*a;if(i.__position==="end"){c=[h[0]*p+u[0],h[1]*p+u[1]];v=h[0]>.8?"left":h[0]<-.8?"right":"center";d=h[1]>.8?"top":h[1]<-.8?"bottom":"middle"}else if(i.__position==="middle"){var g=s/2;var f=o.tangentAt(g);var m=[f[1],-f[0]];var y=o.pointAt(g);if(m[1]>0){m[0]=-m[0];m[1]=-m[1]}c=[y[0]+m[0]*p,y[1]+m[1]*p];v="center";d="bottom";var x=-Math.atan2(f[1],f[0]);if(u[0]<l[0]){x=Math.PI+x}i.attr("rotation",x)}else{c=[-h[0]*p+l[0],-h[1]*p+l[1]];v=h[0]>.8?"right":h[0]<-.8?"left":"center";d=h[1]>.8?"bottom":h[1]<-.8?"top":"middle"}i.attr({style:{textVerticalAlign:i.__verticalAlign||d,textAlign:i.__textAlign||v},position:c,scale:[a,a]})}}function sS(t,e,r){fr.call(this);this._createLine(t,e,r)}var lS=sS.prototype;lS.beforeUpdate=oS;lS._createLine=function(t,e,r){var i=t.hostModel;var a=t.getItemLayout(e);var n=aS(a);n.shape.percent=0;gl(n,{shape:{percent:1}},i,e);this.add(n);var o=new ss({name:"label"});this.add(o);L(eS,function(r){var i=iS(r,t,e);this.add(i);this[rS(r)]=t.getItemVisual(e,r)},this);this._updateCommonStl(t,e,r)};lS.updateData=function(t,e,r){var i=t.hostModel;var a=this.childOfName("line");var n=t.getItemLayout(e);var o={shape:{}};nS(o.shape,n);pl(a,o,i,e);L(eS,function(r){var i=t.getItemVisual(e,r);var a=rS(r);if(this[a]!==i){this.remove(this.childOfName(r));var n=iS(r,t,e);this.add(n)}this[a]=i},this);this._updateCommonStl(t,e,r)};lS._updateCommonStl=function(t,e,r){var i=t.hostModel;var a=this.childOfName("line");var n=r&&r.lineStyle;var o=r&&r.hoverLineStyle;var s=r&&r.labelModel;var l=r&&r.hoverLabelModel;if(!r||t.hasItemOption){var u=t.getItemModel(e);n=u.getModel("lineStyle").getLineStyle();o=u.getModel("emphasis.lineStyle").getLineStyle();s=u.getModel("label");l=u.getModel("emphasis.label")}var h=t.getItemVisual(e,"color");var f=j(t.getItemVisual(e,"opacity"),n.opacity,1);a.useStyle(b({strokeNoScale:true,fill:"none",stroke:h,opacity:f},n));a.hoverStyle=o;L(eS,function(t){var e=this.childOfName(t);if(e){e.setColor(h);e.setStyle({opacity:f})}},this);var c=s.getShallow("show");var v=l.getShallow("show");var d=this.childOfName("label");var p;var g;if(c||v){p=h||"#000";g=i.getFormattedLabel(e,"normal",t.dataType);if(g==null){var m=i.getRawValue(e);g=m==null?t.getName(e):isFinite(m)?Fl(m):m}}var y=c?g:null;var x=v?X(i.getFormattedLabel(e,"emphasis",t.dataType),g):null;var _=d.style;if(y!=null||x!=null){nl(d.style,s,{text:y},{autoColor:p});d.__textAlign=_.textAlign;d.__verticalAlign=_.textVerticalAlign;d.__position=s.get("position")||"middle"}if(x!=null){d.hoverStyle={text:x,textFill:l.getTextColor(true),fontStyle:l.getShallow("fontStyle"),fontWeight:l.getShallow("fontWeight"),fontSize:l.getShallow("fontSize"),fontFamily:l.getShallow("fontFamily")}}else{d.hoverStyle={text:null}}d.ignore=!c&&!v;il(this)};lS.highlight=function(){this.trigger("emphasis")};lS.downplay=function(){this.trigger("normal")};lS.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))};lS.setLinePoints=function(t){var e=this.childOfName("line");nS(e.shape,t);e.dirty()};D(sS,fr);function uS(t){this._ctor=t||sS;this.group=new fr}var hS=uS.prototype;hS.isPersistent=function(){return true};hS.updateData=function(t){var e=this;var r=e.group;var i=e._lineData;e._lineData=t;if(!i){r.removeAll()}var a=vS(t);t.diff(i).add(function(r){fS(e,t,r,a)}).update(function(r,n){cS(e,i,t,n,r,a)}).remove(function(t){r.remove(i.getItemGraphicEl(t))}).execute()};function fS(t,e,r,i){var a=e.getItemLayout(r);if(!pS(a)){return}var n=new t._ctor(e,r,i);e.setItemGraphicEl(r,n);t.group.add(n)}function cS(t,e,r,i,a,n){var o=e.getItemGraphicEl(i);if(!pS(r.getItemLayout(a))){t.group.remove(o);return}if(!o){o=new t._ctor(r,a,n)}else{o.updateData(r,a,n)}r.setItemGraphicEl(a,o);t.group.add(o)}hS.updateLayout=function(){var t=this._lineData;if(!t){return}t.eachItemGraphicEl(function(e,r){e.updateLayout(t,r)},this)};hS.incrementalPrepareUpdate=function(t){this._seriesScope=vS(t);this._lineData=null;this.group.removeAll()};hS.incrementalUpdate=function(t,e){function r(t){if(!t.isGroup){t.incremental=t.useHoverLayer=true}}for(var i=t.start;i<t.end;i++){var a=e.getItemLayout(i);if(pS(a)){var n=new this._ctor(e,i,this._seriesScope);n.traverse(r);this.group.add(n);e.setItemGraphicEl(i,n)}}};function vS(t){var e=t.hostModel;return{lineStyle:e.getModel("lineStyle").getLineStyle(),hoverLineStyle:e.getModel("emphasis.lineStyle").getLineStyle(),labelModel:e.getModel("label"),
hoverLabelModel:e.getModel("emphasis.label")}}hS.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};hS._clearIncremental=function(){var t=this._incremental;if(t){t.clearDisplaybles()}};function dS(t){return isNaN(t[0])||isNaN(t[1])}function pS(t){return!dS(t[0])&&!dS(t[1])}var gS=[];var mS=[];var yS=[];var xS=Rn;var _S=Tt;var wS=Math.abs;function bS(t,e,r){var i=t[0];var a=t[1];var n=t[2];var o=Infinity;var s;var l=r*r;var u=.1;for(var h=.1;h<=.9;h+=.1){gS[0]=xS(i[0],a[0],n[0],h);gS[1]=xS(i[1],a[1],n[1],h);var f=wS(_S(gS,e)-l);if(f<o){o=f;s=h}}for(var c=0;c<32;c++){var v=s+u;mS[0]=xS(i[0],a[0],n[0],s);mS[1]=xS(i[1],a[1],n[1],s);yS[0]=xS(i[0],a[0],n[0],v);yS[1]=xS(i[1],a[1],n[1],v);var f=_S(mS,e)-l;if(wS(f)<.01){break}var d=_S(yS,e)-l;u/=2;if(f<0){if(d>=0){s=s+u}else{s=s-u}}else{if(d>=0){s=s-u}else{s=s+u}}}return s}var SS=function(t,e){var r=[];var i=Gn;var a=[[],[],[]];var n=[[],[]];var o=[];e/=2;function s(t){var e=t.getVisual("symbolSize");if(e instanceof Array){e=(e[0]+e[1])/2}return e}t.eachEdge(function(t,l){var u=t.getLayout();var h=t.getVisual("fromSymbol");var f=t.getVisual("toSymbol");if(!u.__original){u.__original=[ut(u[0]),ut(u[1])];if(u[2]){u.__original.push(ut(u[2]))}}var c=u.__original;if(u[2]!=null){lt(a[0],c[0]);lt(a[1],c[2]);lt(a[2],c[1]);if(h&&h!="none"){var v=s(t.node1);var d=bS(a,c[0],v*e);i(a[0][0],a[1][0],a[2][0],d,r);a[0][0]=r[3];a[1][0]=r[4];i(a[0][1],a[1][1],a[2][1],d,r);a[0][1]=r[3];a[1][1]=r[4]}if(f&&f!="none"){var v=s(t.node2);var d=bS(a,c[1],v*e);i(a[0][0],a[1][0],a[2][0],d,r);a[1][0]=r[1];a[2][0]=r[2];i(a[0][1],a[1][1],a[2][1],d,r);a[1][1]=r[1];a[2][1]=r[2]}lt(u[0],a[0]);lt(u[1],a[2]);lt(u[2],a[1])}else{lt(n[0],c[0]);lt(n[1],c[1]);vt(o,n[1],n[0]);bt(o,o);if(h&&h!="none"){var v=s(t.node1);ct(n[0],n[0],o,v*e)}if(f&&f!="none"){var v=s(t.node2);ct(n[1],n[1],o,-v*e)}lt(u[0],n[0]);lt(u[1],n[1])}})};var MS=["itemStyle","opacity"];var IS=["lineStyle","opacity"];function TS(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function DS(t,e,r){var i=t.getGraphicEl();var a=TS(t,e);if(r!=null){a==null&&(a=1);a*=r}i.downplay&&i.downplay();i.traverse(function(t){if(t.type!=="group"){t.setStyle("opacity",a)}})}function AS(t,e){var r=TS(t,e);var i=t.getGraphicEl();i.highlight&&i.highlight();i.traverse(function(t){if(t.type!=="group"){t.setStyle("opacity",r)}})}od({type:"graph",init:function(t,e){var r=new am;var i=new uS;var a=this.group;this._controller=new f_(e.getZr());this._controllerHost={target:a};a.add(r.group);a.add(i.group);this._symbolDraw=r;this._lineDraw=i;this._firstRender=true},render:function(t,e,r){var i=t.coordinateSystem;this._model=t;this._nodeScaleRatio=t.get("nodeScaleRatio");var a=this._symbolDraw;var n=this._lineDraw;var o=this.group;if(i.type==="view"){var s={position:i.position,scale:i.scale};if(this._firstRender){o.attr(s)}else{pl(o,s,t)}}SS(t.getGraph(),this._getNodeGlobalScale(t));var l=t.getData();a.updateData(l);var u=t.getEdgeData();n.updateData(u);this._updateNodeAndLinkScale();this._updateController(t,e,r);clearTimeout(this._layoutTimeout);var h=t.forceLayout;var f=t.get("force.layoutAnimation");if(h){this._startForceLayoutIteration(h,f)}l.eachItemGraphicEl(function(e,i){var a=l.getItemModel(i);e.off("drag").off("dragend");var n=l.getItemModel(i).get("draggable");if(n){e.on("drag",function(){if(h){h.warmUp();!this._layouting&&this._startForceLayoutIteration(h,f);h.setFixed(i);l.setItemLayout(i,e.position)}},this).on("dragend",function(){if(h){h.setUnfixed(i)}},this)}e.setDraggable(n&&h);e.off("mouseover",e.__focusNodeAdjacency);e.off("mouseout",e.__unfocusNodeAdjacency);if(a.get("focusNodeAdjacency")){e.on("mouseover",e.__focusNodeAdjacency=function(){r.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex})});e.on("mouseout",e.__unfocusNodeAdjacency=function(){r.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t.id})})}},this);l.graph.eachEdge(function(e){var i=e.getGraphicEl();i.off("mouseover",i.__focusNodeAdjacency);i.off("mouseout",i.__unfocusNodeAdjacency);if(e.getModel().get("focusNodeAdjacency")){i.on("mouseover",i.__focusNodeAdjacency=function(){r.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex})});i.on("mouseout",i.__unfocusNodeAdjacency=function(){r.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t.id})})}});var c=t.get("layout")==="circular"&&t.get("circular.rotateLabel");var v=l.getLayout("cx");var d=l.getLayout("cy");l.eachItemGraphicEl(function(t,e){var r=t.getSymbolPath();if(c){var i=l.getItemLayout(e);var a=Math.atan2(i[1]-d,i[0]-v);if(a<0){a=Math.PI*2+a}var n=i[0]<v;if(n){a=a-Math.PI}var o=n?"left":"right";r.setStyle({textRotation:-a,textPosition:o,textOrigin:"center"});r.hoverStyle&&(r.hoverStyle.textPosition=o)}else{r.setStyle({textRotation:0})}});this._firstRender=false},dispose:function(){this._controller&&this._controller.dispose();this._controllerHost={}},focusNodeAdjacency:function(t,e,r,i){var a=this._model.getData();var n=a.graph;var o=i.dataIndex;var s=i.edgeDataIndex;var l=n.getNodeByIndex(o);var u=n.getEdgeByIndex(s);if(!l&&!u){return}n.eachNode(function(t){DS(t,MS,.1)});n.eachEdge(function(t){DS(t,IS,.1)});if(l){AS(l,MS);L(l.edges,function(t){if(t.dataIndex<0){return}AS(t,IS);AS(t.node1,MS);AS(t.node2,MS)})}if(u){AS(u,IS);AS(u.node1,MS);AS(u.node2,MS)}},unfocusNodeAdjacency:function(t,e,r,i){var a=this._model.getData().graph;a.eachNode(function(t){DS(t,MS)});a.eachEdge(function(t){DS(t,IS)})},_startForceLayoutIteration:function(t,e){var r=this;(function i(){t.step(function(t){r.updateLayout(r._model);(r._layouting=!t)&&(e?r._layoutTimeout=setTimeout(i,16):i())})})()},_updateController:function(t,e,r){var i=this._controller;var a=this._controllerHost;var n=this.group;i.setPointerChecker(function(e,i,a){var o=n.getBoundingRect();o.applyTransform(n.transform);return o.contain(i,a)&&!b_(e,r,t)});if(t.coordinateSystem.type!=="view"){i.disable();return}i.enable(t.get("roam"));a.zoomLimit=t.get("scaleLimit");a.zoom=t.coordinateSystem.getZoom();i.off("pan").off("zoom").on("pan",function(e,i){x_(a,e,i);r.dispatchAction({seriesId:t.id,type:"graphRoam",dx:e,dy:i})}).on("zoom",function(e,i,n){__(a,e,i,n);r.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:e,originX:i,originY:n});this._updateNodeAndLinkScale();SS(t.getGraph(),this._getNodeGlobalScale(t));this._lineDraw.updateLayout()},this)},_updateNodeAndLinkScale:function(){var t=this._model;var e=t.getData();var r=this._getNodeGlobalScale(t);var i=[r,r];e.eachItemGraphicEl(function(t,e){t.attr("scale",i)})},_getNodeGlobalScale:function(t){var e=t.coordinateSystem;if(e.type!=="view"){return 1}var r=this._nodeScaleRatio;var i=e.scale;var a=i&&i[0]||1;var n=e.getZoom();var o=(n-1)*r+1;return o/a},updateLayout:function(t){SS(t.getGraph(),this._getNodeGlobalScale(t));this._symbolDraw.updateLayout();this._lineDraw.updateLayout()},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove();this._lineDraw&&this._lineDraw.remove()}});var CS={type:"graphRoam",event:"graphRoam",update:"none"};Kv(CS,function(t,e){e.eachComponent({mainType:"series",query:t},function(e){var r=e.coordinateSystem;var i=D_(r,t);e.setCenter&&e.setCenter(i.center);e.setZoom&&e.setZoom(i.zoom)})});Kv({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series.graph:focusNodeAdjacency"},function(){});Kv({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series.graph:unfocusNodeAdjacency"},function(){});var LS=function(t){var e=t.findComponents({mainType:"legend"});if(!e||!e.length){return}t.eachSeriesByType("graph",function(t){var r=t.getCategoriesData();var i=t.getGraph();var a=i.data;var n=r.mapArray(r.getName);a.filterSelf(function(t){var r=a.getItemModel(t);var i=r.getShallow("category");if(i!=null){if(typeof i==="number"){i=n[i]}for(var o=0;o<e.length;o++){if(!e[o].isSelected(i)){return false}}}return true})},this)};var kS=function(t){var e={};t.eachSeriesByType("graph",function(t){var r=t.getCategoriesData();var i=t.getData();var a={};r.each(function(i){var n=r.getName(i);a["ec-"+n]=i;var o=r.getItemModel(i);var s=o.get("itemStyle.color")||t.getColorFromPalette(n,e);r.setItemVisual(i,"color",s)});if(r.count()){i.each(function(t){var e=i.getItemModel(t);var n=e.getShallow("category");if(n!=null){if(typeof n==="string"){n=a["ec-"+n]}if(!i.getItemVisual(t,"color",true)){i.setItemVisual(t,"color",r.getItemVisual(n,"color"))}}})}})};function PS(t){if(!(t instanceof Array)){t=[t,t]}return t}var NS=function(t){t.eachSeriesByType("graph",function(t){var e=t.getGraph();var r=t.getEdgeData();var i=PS(t.get("edgeSymbol"));var a=PS(t.get("edgeSymbolSize"));var n="lineStyle.color".split(".");var o="lineStyle.opacity".split(".");r.setVisual("fromSymbol",i&&i[0]);r.setVisual("toSymbol",i&&i[1]);r.setVisual("fromSymbolSize",a&&a[0]);r.setVisual("toSymbolSize",a&&a[1]);r.setVisual("color",t.get(n));r.setVisual("opacity",t.get(o));r.each(function(t){var i=r.getItemModel(t);var a=e.getEdgeByIndex(t);var s=PS(i.getShallow("symbol",true));var l=PS(i.getShallow("symbolSize",true));var u=i.get(n);var h=i.get(o);switch(u){case"source":u=a.node1.getVisual("color");break;case"target":u=a.node2.getVisual("color");break}s[0]&&a.setVisual("fromSymbol",s[0]);s[1]&&a.setVisual("toSymbol",s[1]);l[0]&&a.setVisual("fromSymbolSize",l[0]);l[1]&&a.setVisual("toSymbolSize",l[1]);a.setVisual("color",u);a.setVisual("opacity",h)})})};function OS(t){var e=t.coordinateSystem;if(e&&e.type!=="view"){return}var r=t.getGraph();r.eachNode(function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])});ES(r)}function ES(t){t.eachEdge(function(t){var e=t.getModel().get("lineStyle.curveness")||0;var r=ut(t.node1.getLayout());var i=ut(t.node2.getLayout());var a=[r,i];if(+e){a.push([(r[0]+i[0])/2-(r[1]-i[1])*e,(r[1]+i[1])/2-(i[0]-r[0])*e])}t.setLayout(a)})}var RS=function(t,e){t.eachSeriesByType("graph",function(t){var e=t.get("layout");var r=t.coordinateSystem;if(r&&r.type!=="view"){var i=t.getData();var a=[];L(r.dimensions,function(t){a=a.concat(i.mapDimension(t,true))});for(var n=0;n<i.count();n++){var o=[];var s=false;for(var l=0;l<a.length;l++){var u=i.get(a[l],n);if(!isNaN(u)){s=true}o.push(u)}if(s){i.setItemLayout(n,r.dataToPoint(o))}else{i.setItemLayout(n,[NaN,NaN])}}ES(i.graph)}else if(!e||e==="none"){OS(t)}})};function zS(t){var e=t.coordinateSystem;if(e&&e.type!=="view"){return}var r=e.getBoundingRect();var i=t.getData();var a=i.graph;var n=0;var o=i.getSum("value");var s=Math.PI*2/(o||i.count());var l=r.width/2+r.x;var u=r.height/2+r.y;var h=Math.min(r.width,r.height)/2;a.eachNode(function(t){var e=t.getValue("value");n+=s*(o?e:1)/2;t.setLayout([h*Math.cos(n)+l,h*Math.sin(n)+u]);n+=s*(o?e:1)/2});i.setLayout({cx:l,cy:u});a.eachEdge(function(t){var e=t.getModel().get("lineStyle.curveness")||0;var r=ut(t.node1.getLayout());var i=ut(t.node2.getLayout());var a;var n=(r[0]+i[0])/2;var o=(r[1]+i[1])/2;if(+e){e*=3;a=[l*e+n*(1-e),u*e+o*(1-e)]}t.setLayout([r,i,a])})}var BS=function(t){t.eachSeriesByType("graph",function(t){if(t.get("layout")==="circular"){zS(t)}})};var VS=ct;function GS(t,e,r){var i=r.rect;var a=i.width;var n=i.height;var o=[i.x+a/2,i.y+n/2];var s=r.gravity==null?.1:r.gravity;for(var l=0;l<t.length;l++){var u=t[l];if(!u.p){u.p=st(a*(Math.random()-.5)+o[0],n*(Math.random()-.5)+o[1])}u.pp=ut(u.p);u.edges=null}var h=.6;return{warmUp:function(){h=.5},setFixed:function(e){t[e].fixed=true},setUnfixed:function(e){t[e].fixed=false},step:function(r){var i=[];var a=t.length;for(var n=0;n<e.length;n++){var l=e[n];var u=l.n1;var f=l.n2;vt(i,f.p,u.p);var c=dt(i)-l.d;var v=f.w/(u.w+f.w);if(isNaN(v)){v=0}bt(i,i);!u.fixed&&VS(u.p,u.p,i,v*c*h);!f.fixed&&VS(f.p,f.p,i,-(1-v)*c*h)}for(var n=0;n<a;n++){var d=t[n];if(!d.fixed){vt(i,o,d.p);VS(d.p,d.p,i,s*h)}}for(var n=0;n<a;n++){var u=t[n];for(var p=n+1;p<a;p++){var f=t[p];vt(i,f.p,u.p);var c=dt(i);if(c===0){ht(i,Math.random()-.5,Math.random()-.5);c=1}var g=(u.rep+f.rep)/c/c;!u.fixed&&VS(u.pp,u.pp,i,g);!f.fixed&&VS(f.pp,f.pp,i,-g)}}var m=[];for(var n=0;n<a;n++){var d=t[n];if(!d.fixed){vt(m,d.p,d.pp);VS(d.p,d.p,m,h);lt(d.pp,d.p)}}h=h*.992;r&&r(t,e,h<.01)}}}var WS=function(t){t.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(e&&e.type!=="view"){return}if(t.get("layout")==="force"){var r=t.preservedPoints||{};var i=t.getGraph();var a=i.data;var n=i.edgeData;var o=t.getModel("force");var s=o.get("initLayout");if(t.preservedPoints){a.each(function(t){var e=a.getId(t);a.setItemLayout(t,r[e]||[NaN,NaN])})}else if(!s||s==="none"){OS(t)}else if(s==="circular"){zS(t)}var l=a.getDataExtent("value");var u=n.getDataExtent("value");var h=o.get("repulsion");var f=o.get("edgeLength");if(!z(h)){h=[h,h]}if(!z(f)){f=[f,f]}f=[f[1],f[0]];var c=a.mapArray("value",function(t,e){var r=a.getItemLayout(e);var i=Gl(t,l,h);if(isNaN(i)){i=(h[0]+h[1])/2}return{w:i,rep:i,fixed:a.getItemModel(e).get("fixed"),p:!r||isNaN(r[0])||isNaN(r[1])?null:r}});var v=n.mapArray("value",function(t,e){var r=i.getEdgeByIndex(e);var a=Gl(t,u,f);if(isNaN(a)){a=(f[0]+f[1])/2}return{n1:c[r.node1.dataIndex],n2:c[r.node2.dataIndex],d:a,curveness:r.getModel().get("lineStyle.curveness")||0}});var e=t.coordinateSystem;var d=e.getBoundingRect();var p=GS(c,v,{rect:d,gravity:o.get("gravity")});var g=p.step;p.step=function(t){for(var e=0,n=c.length;e<n;e++){if(c[e].fixed){lt(c[e].p,i.getNodeByIndex(e).getLayout())}}g(function(e,n,o){for(var s=0,l=e.length;s<l;s++){if(!e[s].fixed){i.getNodeByIndex(s).setLayout(e[s].p)}r[a.getId(s)]=e[s].p}for(var s=0,l=n.length;s<l;s++){var u=n[s];var h=i.getEdgeByIndex(s);var f=u.n1.p;var c=u.n2.p;var v=h.getLayout();v=v?v.slice():[];v[0]=v[0]||[];v[1]=v[1]||[];lt(v[0],f);lt(v[1],c);if(+u.curveness){v[2]=[(f[0]+c[0])/2-(f[1]-c[1])*u.curveness,(f[1]+c[1])/2-(c[0]-f[0])*u.curveness]}h.setLayout(v)}t&&t(o)})};t.forceLayout=p;t.preservedPoints=r;p.step()}else{t.forceLayout=null}})};function FS(t,e,r){var i=t.getBoxLayoutParams();i.aspect=r;return Lu(i,{width:e.getWidth(),height:e.getHeight()})}var HS=function(t,e){var r=[];t.eachSeriesByType("graph",function(t){var i=t.get("coordinateSystem");if(!i||i==="view"){var a=t.getData();var n=a.mapArray(function(t){var e=a.getItemModel(t);return[+e.get("x"),+e.get("y")]});var o=[];var s=[];Kn(n,o,s);if(s[0]-o[0]===0){s[0]+=1;o[0]-=1}if(s[1]-o[1]===0){s[1]+=1;o[1]-=1}var l=(s[0]-o[0])/(s[1]-o[1]);var u=FS(t,e,l);if(isNaN(l)){o=[u.x,u.y];s=[u.x+u.width,u.y+u.height]}var h=s[0]-o[0];var f=s[1]-o[1];var c=u.width;var v=u.height;var d=t.coordinateSystem=new Vx;d.zoomLimit=t.get("scaleLimit");d.setBoundingRect(o[0],o[1],h,f);d.setViewRect(u.x,u.y,c,v);d.setCenter(t.get("center"));d.setZoom(t.get("zoom"));r.push(d)}});return r};Yv(LS);td(Vm("graph","circle",null));td(kS);td(NS);Qv(RS);Qv(BS);Qv(WS);$v("graphView",{create:HS});var ZS=Lf.extend({type:"series.gauge",getInitialData:function(t,e){var r=t.data||[];if(!z(r)){r=[r]}t.data=r;return nx(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:true,radius:"75%",startAngle:225,endAngle:-45,clockwise:true,min:0,max:100,splitNumber:10,axisLine:{show:true,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:true,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:true,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:true,distance:5,color:"auto"},pointer:{show:true,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:true,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:true,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var US=Wo.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(t,e){var r=Math.cos;var i=Math.sin;var a=e.r;var n=e.width;var o=e.angle;var s=e.x-r(o)*n*(n>=a/3?1:2);var l=e.y-i(o)*n*(n>=a/3?1:2);o=e.angle-Math.PI/2;t.moveTo(s,l);t.lineTo(e.x+r(o)*n,e.y+i(o)*n);t.lineTo(e.x+r(e.angle)*a,e.y+i(e.angle)*a);t.lineTo(e.x-r(o)*n,e.y-i(o)*n);t.lineTo(s,l);return}});function XS(t,e){var r=t.get("center");var i=e.getWidth();var a=e.getHeight();var n=Math.min(i,a);var o=Wl(r[0],e.getWidth());var s=Wl(r[1],e.getHeight());var l=Wl(t.get("radius"),n/2);return{cx:o,cy:s,r:l}}function jS(t,e){if(e){if(typeof e==="string"){t=e.replace("{value}",t!=null?t:"")}else if(typeof e==="function"){t=e(t)}}return t}var YS=Math.PI*2;var qS=Zf.extend({type:"gauge",render:function(t,e,r){this.group.removeAll();var i=t.get("axisLine.lineStyle.color");var a=XS(t,r);this._renderMain(t,e,r,i,a)},dispose:function(){},_renderMain:function(t,e,r,i,a){var n=this.group;var o=t.getModel("axisLine");var s=o.getModel("lineStyle");var l=t.get("clockwise");var u=-t.get("startAngle")/180*Math.PI;var h=-t.get("endAngle")/180*Math.PI;var f=(h-u)%YS;var c=u;var v=s.get("width");for(var d=0;d<i.length;d++){var p=Math.min(Math.max(i[d][0],0),1);var h=u+f*p;var g=new fs({shape:{startAngle:c,endAngle:h,cx:a.cx,cy:a.cy,clockwise:l,r0:a.r-v,r:a.r},silent:true});g.setStyle({fill:i[d][1]});g.setStyle(s.getLineStyle(["color","borderWidth","borderColor"]));n.add(g);c=h}var m=function(t){if(t<=0){return i[0][1]}for(var e=0;e<i.length;e++){if(i[e][0]>=t&&(e===0?0:i[e-1][0])<t){return i[e][1]}}return i[e-1][1]};if(!l){var y=u;u=h;h=y}this._renderTicks(t,e,r,m,a,u,h,l);this._renderPointer(t,e,r,m,a,u,h,l);this._renderTitle(t,e,r,m,a);this._renderDetail(t,e,r,m,a)},_renderTicks:function(t,e,r,i,a,n,o,s){var l=this.group;var u=a.cx;var h=a.cy;var f=a.r;var c=+t.get("min");var v=+t.get("max");var d=t.getModel("splitLine");var p=t.getModel("axisTick");var g=t.getModel("axisLabel");var m=t.get("splitNumber");var y=p.get("splitNumber");var x=Wl(d.get("length"),f);var _=Wl(p.get("length"),f);var w=n;var b=(o-n)/m;var S=b/y;var M=d.getModel("lineStyle").getLineStyle();var I=p.getModel("lineStyle").getLineStyle();for(var T=0;T<=m;T++){var D=Math.cos(w);var A=Math.sin(w);if(d.get("show")){var C=new _s({shape:{x1:D*f+u,y1:A*f+h,x2:D*(f-x)+u,y2:A*(f-x)+h},style:M,silent:true});if(M.stroke==="auto"){C.setStyle({stroke:i(T/m)})}l.add(C)}if(g.get("show")){var L=jS(Fl(T/m*(v-c)+c),g.get("formatter"));var k=g.get("distance");var P=i(T/m);l.add(new ss({style:nl({},g,{text:L,x:D*(f-x-k)+u,y:A*(f-x-k)+h,textVerticalAlign:A<-.4?"top":A>.4?"bottom":"middle",textAlign:D<-.4?"left":D>.4?"right":"center"},{autoColor:P}),silent:true}))}if(p.get("show")&&T!==m){for(var N=0;N<=y;N++){var D=Math.cos(w);var A=Math.sin(w);var O=new _s({shape:{x1:D*f+u,y1:A*f+h,x2:D*(f-_)+u,y2:A*(f-_)+h},silent:true,style:I});if(I.stroke==="auto"){O.setStyle({stroke:i((T+N/y)/m)})}l.add(O);w+=S}w-=S}else{w+=b}}},_renderPointer:function(t,e,r,i,a,n,o,s){var l=this.group;var u=this._data;if(!t.get("pointer.show")){u&&u.eachItemGraphicEl(function(t){l.remove(t)});return}var h=[+t.get("min"),+t.get("max")];var f=[n,o];var c=t.getData();var v=c.mapDimension("value");c.diff(u).add(function(e){var r=new US({shape:{angle:n}});gl(r,{shape:{angle:Gl(c.get(v,e),h,f,true)}},t);l.add(r);c.setItemGraphicEl(e,r)}).update(function(e,r){var i=u.getItemGraphicEl(r);pl(i,{shape:{angle:Gl(c.get(v,e),h,f,true)}},t);l.add(i);c.setItemGraphicEl(e,i)}).remove(function(t){var e=u.getItemGraphicEl(t);l.remove(e)}).execute();c.eachItemGraphicEl(function(t,e){var r=c.getItemModel(e);var n=r.getModel("pointer");t.setShape({x:a.cx,y:a.cy,width:Wl(n.get("width"),a.r),r:Wl(n.get("length"),a.r)});t.useStyle(r.getModel("itemStyle").getItemStyle());if(t.style.fill==="auto"){t.setStyle("fill",i(Gl(c.get(v,e),h,[0,1],true)))}il(t,r.getModel("emphasis.itemStyle").getItemStyle())});this._data=c},_renderTitle:function(t,e,r,i,a){var n=t.getData();var o=n.mapDimension("value");var s=t.getModel("title");if(s.get("show")){var l=s.get("offsetCenter");var u=a.cx+Wl(l[0],a.r);var h=a.cy+Wl(l[1],a.r);var f=+t.get("min");var c=+t.get("max");var v=t.getData().get(o,0);var d=i(Gl(v,[f,c],[0,1],true));this.group.add(new ss({silent:true,style:nl({},s,{x:u,y:h,text:n.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:d,forceRich:true})}))}},_renderDetail:function(t,e,r,i,a){var n=t.getModel("detail");var o=+t.get("min");var s=+t.get("max");if(n.get("show")){var l=n.get("offsetCenter");var u=a.cx+Wl(l[0],a.r);var h=a.cy+Wl(l[1],a.r);var f=Wl(n.get("width"),a.r);var c=Wl(n.get("height"),a.r);var v=t.getData();var d=v.get(v.mapDimension("value"),0);var p=i(Gl(d,[o,s],[0,1],true));this.group.add(new ss({silent:true,style:nl({},n,{x:u,y:h,text:jS(d,n.get("formatter")),textWidth:isNaN(f)?null:f,textHeight:isNaN(c)?null:c,textAlign:"center",textVerticalAlign:"middle"},{autoColor:p,forceRich:true})}))}}});var KS=nd({type:"series.funnel",init:function(t){KS.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()};this._defaultLabelLine(t)},getInitialData:function(t,e){return nx(this,["value"])},_defaultLabelLine:function(t){Wa(t,"labelLine",["show"]);var e=t.labelLine;var r=t.emphasis.labelLine;e.show=e.show&&t.label.show;r.show=r.show&&t.emphasis.label.show},getDataParams:function(t){var e=this.getData();var r=KS.superCall(this,"getDataParams",t);var i=e.mapDimension("value");var a=e.getSum(i);r.percent=!a?0:+(e.get(i,t)/a*100).toFixed(2);r.$vars.push("percent");return r},defaultOption:{zlevel:0,z:2,legendHoverLink:true,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{show:true,position:"outer"},labelLine:{show:true,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:true}}}});function $S(t,e){fr.call(this);var r=new ms;var i=new ys;var a=new ss;this.add(r);this.add(i);this.add(a);this.updateData(t,e,true);function n(){i.ignore=i.hoverIgnore;a.ignore=a.hoverIgnore}function o(){i.ignore=i.normalIgnore;a.ignore=a.normalIgnore}this.on("emphasis",n).on("normal",o).on("mouseover",n).on("mouseout",o)}var JS=$S.prototype;var QS=["itemStyle","opacity"];JS.updateData=function(t,e,r){var i=this.childAt(0);var a=t.hostModel;var n=t.getItemModel(e);var o=t.getItemLayout(e);var s=t.getItemModel(e).get(QS);s=s==null?1:s;i.useStyle({});if(r){i.setShape({points:o.points});i.setStyle({opacity:0});gl(i,{style:{opacity:s}},a,e)}else{pl(i,{style:{opacity:s},shape:{points:o.points}},a,e)}var l=n.getModel("itemStyle");var u=t.getItemVisual(e,"color");i.setStyle(b({lineJoin:"round",fill:u},l.getItemStyle(["opacity"])));i.hoverStyle=l.getModel("emphasis").getItemStyle();this._updateLabel(t,e);il(this)};JS._updateLabel=function(t,e){var r=this.childAt(1);var i=this.childAt(2);var a=t.hostModel;var n=t.getItemModel(e);var o=t.getItemLayout(e);var s=o.label;var l=t.getItemVisual(e,"color");pl(r,{shape:{points:s.linePoints||s.linePoints}},a,e);pl(i,{style:{x:s.x,y:s.y}},a,e);i.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var u=n.getModel("label");var h=n.getModel("emphasis.label");var f=n.getModel("labelLine");var c=n.getModel("emphasis.labelLine");var l=t.getItemVisual(e,"color");al(i.style,i.hoverStyle={},u,h,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign});i.ignore=i.normalIgnore=!u.get("show");i.hoverIgnore=!h.get("show");r.ignore=r.normalIgnore=!f.get("show");r.hoverIgnore=!c.get("show");r.setStyle({stroke:l});r.setStyle(f.getModel("lineStyle").getLineStyle());r.hoverStyle=c.getModel("lineStyle").getLineStyle()};D($S,fr);var tM=Zf.extend({type:"funnel",render:function(t,e,r){var i=t.getData();var a=this._data;var n=this.group;i.diff(a).add(function(t){var e=new $S(i,t);i.setItemGraphicEl(t,e);n.add(e)}).update(function(t,e){var r=a.getItemGraphicEl(e);r.updateData(i,t);n.add(r);i.setItemGraphicEl(t,r)}).remove(function(t){var e=a.getItemGraphicEl(t);n.remove(e)}).execute();this._data=i},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}});function eM(t,e){return Lu(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function rM(t,e){var r=t.mapDimension("value");var i=t.mapArray(r,function(t){return t});var a=[];var n=e==="ascending";for(var o=0,s=t.count();o<s;o++){a[o]=o}if(typeof e==="function"){a.sort(e)}else if(e!=="none"){a.sort(function(t,e){return n?i[t]-i[e]:i[e]-i[t]})}return a}function iM(t){t.each(function(e){var r=t.getItemModel(e);var i=r.getModel("label");var a=i.get("position");var n=r.getModel("labelLine");var o=t.getItemLayout(e);var s=o.points;var l=a==="inner"||a==="inside"||a==="center";var u;var h;var f;var c;if(l){h=(s[0][0]+s[1][0]+s[2][0]+s[3][0])/4;f=(s[0][1]+s[1][1]+s[2][1]+s[3][1])/4;u="center";c=[[h,f],[h,f]]}else{var v;var d;var p;var g=n.get("length");if(a==="left"){v=(s[3][0]+s[0][0])/2;d=(s[3][1]+s[0][1])/2;p=v-g;h=p-5;u="right"}else{v=(s[1][0]+s[2][0])/2;d=(s[1][1]+s[2][1])/2;p=v+g;h=p+5;u="left"}var m=d;c=[[v,d],[p,m]];f=m}o.label={linePoints:c,x:h,y:f,verticalAlign:"middle",textAlign:u,inside:l}})}var aM=function(t,e,r){t.eachSeriesByType("funnel",function(t){var r=t.getData();var i=r.mapDimension("value");var a=t.get("sort");var n=eM(t,e);var o=rM(r,a);var s=[Wl(t.get("minSize"),n.width),Wl(t.get("maxSize"),n.width)];var l=r.getDataExtent(i);var u=t.get("min");var h=t.get("max");if(u==null){u=Math.min(l[0],0)}if(h==null){h=l[1]}var f=t.get("funnelAlign");var c=t.get("gap");var v=(n.height-c*(r.count()-1))/r.count();var d=n.y;var p=function(t,e){var a=r.get(i,t)||0;var o=Gl(a,[u,h],s,true);var l;switch(f){case"left":l=n.x;break;case"center":l=n.x+(n.width-o)/2;break;case"right":l=n.x+n.width-o;break}return[[l,e],[l+o,e]]};if(a==="ascending"){v=-v;c=-c;d+=n.height;o=o.reverse()}for(var g=0;g<o.length;g++){var m=o[g];var y=o[g+1];var x=r.getItemModel(m);var _=x.get("itemStyle.height");if(_==null){_=v}else{_=Wl(_,n.height);if(a==="ascending"){_=-_}}var w=p(m,d);var b=p(y,d+_);d+=_+c;r.setItemLayout(m,{points:w.concat(b.slice().reverse())})}iM(r)})};td(dx("funnel"));Qv(aM);Yv(bx("funnel"));var nM=function(t){oM(t);sM(t)};function oM(t){if(t.parallel){return}var e=false;L(t.series,function(t){if(t&&t.type==="parallel"){e=true}});if(e){t.parallel=[{}]}}function sM(t){var e=Ga(t.parallelAxis);L(e,function(e){if(!G(e)){return}var r=e.parallelIndex||0;var i=Ga(t.parallel)[r];if(i&&i.parallelAxisDefault){x(e,i.parallelAxisDefault,false)}})}var lM=function(t,e,r,i,a){Hg.call(this,t,e,r);this.type=i||"value";this.axisIndex=a};lM.prototype={constructor:lM,model:null,isHorizontal:function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"}};D(lM,Hg);var uM=function(t,e,r,i,a,n){e[0]=fM(e[0],r);e[1]=fM(e[1],r);t=t||0;var o=r[1]-r[0];if(a!=null){a=fM(a,[0,o])}if(n!=null){n=Math.max(n,a!=null?a:0)}if(i==="all"){a=n=Math.abs(e[1]-e[0]);i=0}var s=hM(e,i);e[i]+=t;var l=a||0;var u=r.slice();s.sign<0?u[0]+=l:u[1]-=l;e[i]=fM(e[i],u);var h=hM(e,i);if(a!=null&&(h.sign!==s.sign||h.span<a)){e[1-i]=e[i]+s.sign*a}var h=hM(e,i);if(n!=null&&h.span>n){e[1-i]=e[i]+h.sign*n}return e};function hM(t,e){var r=t[e]-t[1-e];return{span:Math.abs(r),sign:r>0?-1:r<0?1:e?-1:1}}function fM(t,e){return Math.min(e[1],Math.max(e[0],t))}var cM=L;var vM=Math.min;var dM=Math.max;var pM=Math.floor;var gM=Math.ceil;var mM=Fl;var yM=Math.PI;function xM(t,e,r){this._axesMap=rt();this._axesLayout={};this.dimensions=t.dimensions;this._rect;this._model=t;this._init(t,e,r)}xM.prototype={type:"parallel",constructor:xM,_init:function(t,e,r){var i=t.dimensions;var a=t.parallelAxisIndex;cM(i,function(t,r){var i=a[r];var n=e.getComponent("parallelAxis",i);var o=this._axesMap.set(t,new lM(t,$p(n),[0,0],n.get("type"),i));var s=o.type==="category";o.onBand=s&&n.get("boundaryGap");o.inverse=n.get("inverse");n.axis=o;o.model=n;o.coordinateSystem=n.coordinateSystem=this},this)},update:function(t,e){this._updateAxesFromSeries(this._model,t)},containPoint:function(t){var e=this._makeLayoutInfo();var r=e.axisBase;var i=e.layoutBase;var a=e.pixelDimIndex;var n=t[1-a];var o=t[a];return n>=r&&n<=r+e.axisLength&&o>=i&&o<=i+e.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(t,e){e.eachSeries(function(r){if(!t.contains(r,e)){return}var i=r.getData();cM(this.dimensions,function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(i,i.mapDimension(t));Kp(e.scale,e.model)},this)},this)},resize:function(t,e){this._rect=Lu(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var t=this._model;var e=this._rect;var r=["x","y"];var i=["width","height"];var a=t.get("layout");var n=a==="horizontal"?0:1;var o=e[i[n]];var s=[0,o];var l=this.dimensions.length;var u=_M(t.get("axisExpandWidth"),s);var h=_M(t.get("axisExpandCount")||0,[0,l]);var f=t.get("axisExpandable")&&l>3&&l>h&&h>1&&u>0&&o>0;var c=t.get("axisExpandWindow");var v;if(!c){v=_M(u*(h-1),s);var d=t.get("axisExpandCenter")||pM(l/2);c=[u*d-v/2];c[1]=c[0]+v}else{v=_M(c[1]-c[0],s);c[1]=c[0]+v}var p=(o-v)/(l-h);p<3&&(p=0);var g=[pM(mM(c[0]/u,1))+1,gM(mM(c[1]/u,1))-1];var m=p/u*c[0];return{layout:a,pixelDimIndex:n,layoutBase:e[r[n]],layoutLength:o,axisBase:e[r[1-n]],axisLength:e[i[1-n]],axisExpandable:f,axisExpandWidth:u,axisCollapseWidth:p,axisExpandWindow:c,axisCount:l,winInnerIndices:g,axisExpandWindow0Pos:m}},_layoutAxes:function(){var t=this._rect;var e=this._axesMap;var r=this.dimensions;var i=this._makeLayoutInfo();var a=i.layout;e.each(function(t){var e=[0,i.axisLength];var r=t.inverse?1:0;t.setExtent(e[r],e[1-r])});cM(r,function(e,r){var n=(i.axisExpandable?bM:wM)(r,i);var o={horizontal:{x:n.position,y:i.axisLength},vertical:{x:0,y:n.position}};var s={horizontal:yM/2,vertical:0};var l=[o[a].x+t.x,o[a].y+t.y];var u=s[a];var h=Zt();qt(h,h,u);Yt(h,h,l);this._axesLayout[e]={position:l,rotation:u,transform:h,axisNameAvailableWidth:n.axisNameAvailableWidth,axisLabelShow:n.axisLabelShow,nameTruncateMaxWidth:n.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(t){return this._axesMap.get(t)},dataToPoint:function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},eachActiveState:function(t,e,r,i){r==null&&(r=0);i==null&&(i=t.count());var a=this._axesMap;var n=this.dimensions;var o=[];var s=[];L(n,function(e){o.push(t.mapDimension(e));s.push(a.get(e).model)});var l=this.hasAxisBrushed();for(var u=r;u<i;u++){var h;if(!l){h="normal"}else{h="active";var f=t.getValues(o,u);for(var c=0,v=n.length;c<v;c++){var d=s[c].getActiveState(f[c]);if(d==="inactive"){h="inactive";break}}}e(h,u)}},hasAxisBrushed:function(){var t=this.dimensions;var e=this._axesMap;var r=false;for(var i=0,a=t.length;i<a;i++){if(e.get(t[i]).model.getActiveState()!=="normal"){r=true}}return r},axisCoordToPoint:function(t,e){var r=this._axesLayout[e];return yl([t,0],r.transform)},getAxisLayout:function(t){return y(this._axesLayout[t])},getSlidedAxisExpandWindow:function(t){var e=this._makeLayoutInfo();var r=e.pixelDimIndex;var i=e.axisExpandWindow.slice();var a=i[1]-i[0];var n=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t)){return{behavior:"none",axisExpandWindow:i}}var o=t[r]-e.layoutBase-e.axisExpandWindow0Pos;var s;var l="slide";var u=e.axisCollapseWidth;var h=this._model.get("axisExpandSlideTriggerArea");var f=h[0]!=null;if(u){if(f&&u&&o<a*h[0]){l="jump";s=o-a*h[2]}else if(f&&u&&o>a*(1-h[0])){l="jump";s=o-a*(1-h[2])}else{(s=o-a*h[1])>=0&&(s=o-a*(1-h[1]))<=0&&(s=0)}s*=e.axisExpandWidth/u;s?uM(s,i,n,"all"):l="none"}else{var a=i[1]-i[0];var c=n[1]*o/a;i=[dM(0,c-a/2)];i[1]=vM(n[1],i[0]+a);i[0]=i[1]-a}return{axisExpandWindow:i,behavior:l}}};function _M(t,e){return vM(dM(t,e[0]),e[1])}function wM(t,e){var r=e.layoutLength/(e.axisCount-1);return{position:r*t,axisNameAvailableWidth:r,axisLabelShow:true}}function bM(t,e){var r=e.layoutLength;var i=e.axisExpandWidth;var a=e.axisCount;var n=e.axisCollapseWidth;var o=e.winInnerIndices;var s;var l=n;var u=false;var h;if(t<o[0]){s=t*n;h=n}else if(t<=o[1]){s=e.axisExpandWindow0Pos+t*i-e.axisExpandWindow[0];l=i;u=true;
}else{s=r-(a-1-t)*n;h=n}return{position:s,axisNameAvailableWidth:l,axisLabelShow:u,nameTruncateMaxWidth:h}}function SM(t,e){var r=[];t.eachComponent("parallel",function(i,a){var n=new xM(i,t,e);n.name="parallel_"+a;n.resize(i,e);i.coordinateSystem=n;n.model=i;r.push(n)});t.eachSeries(function(e){if(e.get("coordinateSystem")==="parallel"){var r=t.queryComponents({mainType:"parallel",index:e.get("parallelIndex"),id:e.get("parallelId")})[0];e.coordinateSystem=r.coordinateSystem}});return r}Ch.register("parallel",{create:SM});var MM=Bu.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return dn([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(t){var e=this.activeIntervals=y(t);if(e){for(var r=e.length-1;r>=0;r--){Hl(e[r])}}},getActiveState:function(t){var e=this.activeIntervals;if(!e.length){return"normal"}if(t==null||isNaN(t)){return"inactive"}if(e.length===1){var r=e[0];if(r[0]<=t&&t<=r[1]){return"active"}}else{for(var i=0,a=e.length;i<a;i++){if(e[i][0]<=t&&t<=e[i][1]){return"active"}}}return"inactive"}});var IM={type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:true,z:10};x(MM.prototype,ig);function TM(t,e){return e.type||(e.data?"category":"value")}$m("parallel",MM,TM,IM);Bu.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:false,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){Bu.prototype.init.apply(this,arguments);this.mergeOption({})},mergeOption:function(t){var e=this.option;t&&x(e,t,true);this._initDimensions()},contains:function(t,e){var r=t.get("parallelIndex");return r!=null&&e.getComponent("parallel",r)===this},setAxisExpand:function(t){L(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(e){if(t.hasOwnProperty(e)){this.option[e]=t[e]}},this)},_initDimensions:function(){var t=this.dimensions=[];var e=this.parallelAxisIndex=[];var r=N(this.dependentModels.parallelAxis,function(t){return(t.get("parallelIndex")||0)===this.componentIndex},this);L(r,function(r){t.push("dim"+r.get("dim"));e.push(r.componentIndex)})}});var DM={type:"axisAreaSelect",event:"axisAreaSelected"};Kv(DM,function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(e){e.axis.model.setActiveIntervals(t.intervals)})});Kv("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(e){e.setAxisExpand(t)})});var AM=R;var CM=L;var LM=k;var kM=Math.min;var PM=Math.max;var NM=Math.pow;var OM=1e4;var EM=6;var RM=6;var zM="globalPan";var BM={w:[0,0],e:[0,1],n:[1,0],s:[1,1]};var VM={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"};var GM={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:true,brushMode:"single",removeOnClick:false};var WM=0;function FM(t){if(e){K(t)}Rt.call(this);this._zr=t;this.group=new fr;this._brushType;this._brushOption;this._panels;this._track=[];this._dragging;this._covers=[];this._creatingCover;this._creatingPanel;this._enableGlobalPan;if(e){this._mounted}this._uid="brushController_"+WM++;this._handlers={};CM(wI,function(t,e){this._handlers[e]=E(t,this)},this)}FM.prototype={constructor:FM,enableBrush:function(t){if(e){K(this._mounted)}this._brushType&&ZM(this);t.brushType&&HM(this,t);return this},setPanels:function(t){if(t&&t.length){var e=this._panels={};L(t,function(t){e[t.panelId]=y(t)})}else{this._panels=null}return this},mount:function(t){t=t||{};if(e){this._mounted=true}this._enableGlobalPan=t.enableGlobalPan;var r=this.group;this._zr.add(r);r.attr({position:t.position||[0,0],rotation:t.rotation||0,scale:t.scale||[1,1]});this._transform=r.getLocalTransform();return this},eachCover:function(t,e){CM(this._covers,t,e)},updateCovers:function(t){if(e){K(this._mounted)}t=k(t,function(t){return x(y(GM),t,true)});var r="\0-brush-index-";var i=this._covers;var a=this._covers=[];var n=this;var o=this._creatingCover;new cd(i,t,l,s).add(u).update(u).remove(h).execute();return this;function s(t,e){return(t.id!=null?t.id:r+e)+"-"+t.brushType}function l(t,e){return s(t.__brushOption,e)}function u(e,r){var s=t[e];if(r!=null&&i[r]===o){a[e]=i[r]}else{var l=a[e]=r!=null?(i[r].__brushOption=s,i[r]):XM(n,UM(n,s));qM(n,l)}}function h(t){if(i[t]!==o){n.group.remove(i[t])}}},unmount:function(){if(e){if(!this._mounted){return}}this.enableBrush(false);QM(this);this._zr.remove(this.group);if(e){this._mounted=false}return this},dispose:function(){this.unmount();this.off()}};A(FM,Rt);function HM(t,e){var r=t._zr;if(!t._enableGlobalPan){s_(r,zM,t._uid)}CM(t._handlers,function(t,e){r.on(e,t)});t._brushType=e.brushType;t._brushOption=x(y(GM),e,true)}function ZM(t){var e=t._zr;l_(e,zM,t._uid);CM(t._handlers,function(t,r){e.off(r,t)});t._brushType=t._brushOption=null}function UM(t,e){var r=SI[e.brushType].createCover(t,e);r.__brushOption=e;YM(r,e);t.group.add(r);return r}function XM(t,e){var r=KM(e);if(r.endCreating){r.endCreating(t,e);YM(e,e.__brushOption)}return e}function jM(t,e){var r=e.__brushOption;KM(e).updateCoverShape(t,e,r.range,r)}function YM(t,e){var r=e.z;r==null&&(r=OM);t.traverse(function(t){t.z=r;t.z2=r})}function qM(t,e){KM(e).updateCommon(t,e);jM(t,e)}function KM(t){return SI[t.__brushOption.brushType]}function $M(t,e,r){var i=t._panels;if(!i){return true}var a;var n=t._transform;CM(i,function(t){t.isTargetByCursor(e,r,n)&&(a=t)});return a}function JM(t,e){var r=t._panels;if(!r){return true}var i=e.__brushOption.panelId;return i!=null?r[i]:true}function QM(t){var e=t._covers;var r=e.length;CM(e,function(e){t.group.remove(e)},t);e.length=0;return!!r}function tI(t,e){var r=LM(t._covers,function(t){var e=t.__brushOption;var r=y(e.range);return{brushType:e.brushType,panelId:e.panelId,range:r}});t.trigger("brush",r,{isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function eI(t){var e=t._track;if(!e.length){return false}var r=e[e.length-1];var i=e[0];var a=r[0]-i[0];var n=r[1]-i[1];var o=NM(a*a+n*n,.5);return o>EM}function rI(t){var e=t.length-1;e<0&&(e=0);return[t[0],t[e]]}function iI(t,e,r,i){var a=new fr;a.add(new xs({name:"main",style:sI(r),silent:true,draggable:true,cursor:"move",drift:AM(t,e,a,"nswe"),ondragend:AM(tI,e,{isEnd:true})}));CM(i,function(r){a.add(new xs({name:r,style:{opacity:0},draggable:true,silent:true,invisible:true,drift:AM(t,e,a,r),ondragend:AM(tI,e,{isEnd:true})}))});return a}function aI(t,e,r,i){var a=i.brushStyle.lineWidth||0;var n=PM(a,RM);var o=r[0][0];var s=r[1][0];var l=o-a/2;var u=s-a/2;var h=r[0][1];var f=r[1][1];var c=h-n+a/2;var v=f-n+a/2;var d=h-o;var p=f-s;var g=d+a;var m=p+a;oI(t,e,"main",o,s,d,p);if(i.transformable){oI(t,e,"w",l,u,n,m);oI(t,e,"e",c,u,n,m);oI(t,e,"n",l,u,g,n);oI(t,e,"s",l,v,g,n);oI(t,e,"nw",l,u,n,n);oI(t,e,"ne",c,u,n,n);oI(t,e,"sw",l,v,n,n);oI(t,e,"se",c,v,n,n)}}function nI(t,e){var r=e.__brushOption;var i=r.transformable;var a=e.childAt(0);a.useStyle(sI(r));a.attr({silent:!i,cursor:i?"move":"default"});CM(["w","e","n","s","se","sw","ne","nw"],function(r){var a=e.childOfName(r);var n=hI(t,r);a&&a.attr({silent:!i,invisible:!i,cursor:i?VM[n]+"-resize":null})})}function oI(t,e,r,i,a,n,o){var s=e.childOfName(r);s&&s.setShape(pI(dI(t,e,[[i,a],[i+n,a+o]])))}function sI(t){return b({strokeNoScale:true},t.brushStyle)}function lI(t,e,r,i){var a=[kM(t,r),kM(e,i)];var n=[PM(t,r),PM(e,i)];return[[a[0],n[0]],[a[1],n[1]]]}function uI(t){return ml(t.group)}function hI(t,e){if(e.length>1){e=e.split("");var r=[hI(t,e[0]),hI(t,e[1])];(r[0]==="e"||r[0]==="w")&&r.reverse();return r.join("")}else{var i={w:"left",e:"right",n:"top",s:"bottom"};var a={left:"w",right:"e",top:"n",bottom:"s"};var r=xl(i[e],uI(t));return a[r]}}function fI(t,e,r,i,a,n,o,s){var l=i.__brushOption;var u=t(l.range);var h=vI(r,n,o);CM(a.split(""),function(t){var e=BM[t];u[e[0]][e[1]]+=h[e[0]]});l.range=e(lI(u[0][0],u[1][0],u[0][1],u[1][1]));qM(r,i);tI(r,{isEnd:false})}function cI(t,e,r,i,a){var n=e.__brushOption.range;var o=vI(t,r,i);CM(n,function(t){t[0]+=o[0];t[1]+=o[1]});qM(t,e);tI(t,{isEnd:false})}function vI(t,e,r){var i=t.group;var a=i.transformCoordToLocal(e,r);var n=i.transformCoordToLocal(0,0);return[a[0]-n[0],a[1]-n[1]]}function dI(t,e,r){var i=JM(t,e);return i&&i!==true?i.clipPath(r,t._transform):y(r)}function pI(t){var e=kM(t[0][0],t[1][0]);var r=kM(t[0][1],t[1][1]);var i=PM(t[0][0],t[1][0]);var a=PM(t[0][1],t[1][1]);return{x:e,y:r,width:i-e,height:a-r}}function gI(t,e,r){if(!t._brushType){return}var i=t._zr;var a=t._covers;var n=$M(t,e,r);if(!t._dragging){for(var o=0;o<a.length;o++){var s=a[o].__brushOption;if(n&&(n===true||s.panelId===n.panelId)&&SI[s.brushType].contain(a[o],r[0],r[1])){return}}}n&&i.setCursorStyle("crosshair")}function mI(t){var e=t.event;e.preventDefault&&e.preventDefault()}function yI(t,e,r){return t.childOfName("main").contain(e,r)}function xI(t,e,r,i){var a=t._creatingCover;var n=t._creatingPanel;var o=t._brushOption;var s;t._track.push(r.slice());if(eI(t)||a){if(n&&!a){o.brushMode==="single"&&QM(t);var l=y(o);l.brushType=_I(l.brushType,n);l.panelId=n===true?null:n.panelId;a=t._creatingCover=UM(t,l);t._covers.push(a)}if(a){var u=SI[_I(t._brushType,n)];var h=a.__brushOption;h.range=u.getCreatingRange(dI(t,a,t._track));if(i){XM(t,a);u.updateCommon(t,a)}jM(t,a);s={isEnd:i}}}else if(i&&o.brushMode==="single"&&o.removeOnClick){if($M(t,e,r)&&QM(t)){s={isEnd:i,removeOnClick:true}}}return s}function _I(t,r){if(t==="auto"){if(e){K(r&&r.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"')}return r.defaultBrushType}return t}var wI={mousedown:function(t){if(this._dragging){bI.call(this,t)}else if(!t.target||!t.target.draggable){mI(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var r=this._creatingPanel=$M(this,t,e);if(r){this._dragging=true;this._track=[e.slice()]}}},mousemove:function(t){var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);gI(this,t,e);if(this._dragging){mI(t);var r=xI(this,t,e,false);r&&tI(this,r)}},mouseup:bI};function bI(t){if(this._dragging){mI(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);var r=xI(this,t,e,true);this._dragging=false;this._track=[];this._creatingCover=null;r&&tI(this,r)}}var SI={lineX:MI(0),lineY:MI(1),rect:{createCover:function(t,e){return iI(AM(fI,function(t){return t},function(t){return t}),t,e,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(t){var e=rI(t);return lI(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,r,i){aI(t,e,r,i)},updateCommon:nI,contain:yI},polygon:{createCover:function(t,e){var r=new fr;r.add(new ys({name:"main",style:sI(e),silent:true}));return r},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0));e.add(new ms({name:"main",draggable:true,drift:AM(cI,t,e),ondragend:AM(tI,t,{isEnd:true})}))},updateCoverShape:function(t,e,r,i){e.childAt(0).setShape({points:dI(t,e,r)})},updateCommon:nI,contain:yI}};function MI(t){return{createCover:function(e,r){return iI(AM(fI,function(e){var r=[e,[0,100]];t&&r.reverse();return r},function(e){return e[t]}),e,r,[["w","e"],["n","s"]][t])},getCreatingRange:function(e){var r=rI(e);var i=kM(r[0][t],r[1][t]);var a=PM(r[0][t],r[1][t]);return[i,a]},updateCoverShape:function(e,r,i,a){var n;var o=JM(e,r);if(o!==true&&o.getLinearBrushOtherExtent){n=o.getLinearBrushOtherExtent(t,e._transform)}else{var s=e._zr;n=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[i,n];t&&l.reverse();aI(e,r,l,a)},updateCommon:nI,contain:yI}}function II(t){t=AI(t);return function(e,r){return wl(e,t)}}function TI(t,e){t=AI(t);return function(r){var i=e!=null?e:r;var a=i?t.width:t.height;var n=i?t.x:t.y;return[n,n+(a||0)]}}function DI(t,e,r){t=AI(t);return function(i,a,n){return t.contain(a[0],a[1])&&!b_(i,e,r)}}function AI(t){return hr.create(t)}var CI=["axisLine","axisTickLabel","axisName"];var LI=ad({type:"parallelAxis",init:function(t,e){LI.superApply(this,"init",arguments);(this._brushController=new FM(e.getZr())).on("brush",E(this._onBrush,this))},render:function(t,e,r,i){if(kI(t,e,i)){return}this.axisModel=t;this.api=r;this.group.removeAll();var a=this._axisGroup;this._axisGroup=new fr;this.group.add(this._axisGroup);if(!t.get("show")){return}var n=NI(t,e);var o=n.coordinateSystem;var s=t.getAreaSelectStyle();var l=s.width;var u=t.axis.dim;var h=o.getAxisLayout(u);var f=w({strokeContainThreshold:l},h);var c=new cy(t,f);L(CI,c.add,c);this._axisGroup.add(c.getGroup());this._refreshBrushController(f,s,t,n,l,r);var v=i&&i.animation===false?null:t;_l(a,this._axisGroup,v)},_refreshBrushController:function(t,e,r,i,a,n){var o=r.axis.getExtent();var s=o[1]-o[0];var l=Math.min(30,Math.abs(s)*.1);var u=hr.create({x:o[0],y:-a/2,width:s,height:a});u.x-=l;u.width+=2*l;this._brushController.mount({enableGlobalPan:true,rotation:t.rotation,position:t.position}).setPanels([{panelId:"pl",clipPath:II(u),isTargetByCursor:DI(u,n,i),getLinearBrushOtherExtent:TI(u,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:true}).updateCovers(PI(r))},_onBrush:function(t,e){var r=this.axisModel;var i=r.axis;var a=k(t,function(t){return[i.coordToData(t.range[0],true),i.coordToData(t.range[1],true)]});if(!r.option.realtime===e.isEnd||e.removeOnClick){this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:r.id,intervals:a})}},dispose:function(){this._brushController.dispose()}});function kI(t,e,r){return r&&r.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:r})[0]===t}function PI(t){var e=t.axis;return k(t.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],true),e.dataToCoord(t[1],true)]}})}function NI(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}var OI=5;ad({type:"parallel",render:function(t,e,r){this._model=t;this._api=r;if(!this._handlers){this._handlers={};L(EI,function(t,e){r.getZr().on(e,this._handlers[e]=E(t,this))},this)}ec(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},dispose:function(t,e){L(this._handlers,function(t,r){e.getZr().off(r,t)});this._handlers=null},_throttledDispatchExpand:function(t){this._dispatchExpand(t)},_dispatchExpand:function(t){t&&this._api.dispatchAction(w({type:"parallelAxisExpand"},t))}});var EI={mousedown:function(t){if(RI(this,"click")){this._mouseDownPoint=[t.offsetX,t.offsetY]}},mouseup:function(t){var e=this._mouseDownPoint;if(RI(this,"click")&&e){var r=[t.offsetX,t.offsetY];var i=Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2);if(i>OI){return}var a=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);a.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:a.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(this._mouseDownPoint||!RI(this,"mousemove")){return}var e=this._model;var r=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);var i=r.behavior;i==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce"));this._throttledDispatchExpand(i==="none"?null:{axisExpandWindow:r.axisExpandWindow,animation:i==="jump"?null:false})}};function RI(t,e){var r=t._model;return r.get("axisExpandable")&&r.get("axisExpandTriggerOn")===e}jv(nM);Lf.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(t,e){var r=this.getSource();zI(r,this);return qd(r,this)},getRawIndicesByActiveState:function(t){var e=this.coordinateSystem;var r=this.getData();var i=[];e.eachActiveState(r,function(e,a){if(t===e){i.push(r.getRawIndex(a))}});return i},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:false},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:false}},progressive:500,smooth:false,animationEasing:"linear"}});function zI(t,e){if(t.encodeDefine){return}var r=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(!r){return}var i=t.encodeDefine=rt();L(r.dimensions,function(t){var e=BI(t);i.set(t,e)})}function BI(t){return+t.replace("dim","")}var VI=.3;var GI=Zf.extend({type:"parallel",init:function(){this._dataGroup=new fr;this.group.add(this._dataGroup);this._data;this._initialized},render:function(t,e,r,i){var a=this._dataGroup;var n=t.getData();var o=this._data;var s=t.coordinateSystem;var l=s.dimensions;var u=ZI(t);n.diff(o).add(h).update(f).remove(c).execute();function h(t){var e=HI(n,a,t,l,s);UI(e,n,t,u)}function f(e,r){var a=o.getItemGraphicEl(r);var h=FI(n,e,l,s);n.setItemGraphicEl(e,a);var f=i&&i.animation===false?null:t;pl(a,{shape:{points:h}},f,e);UI(a,n,e,u)}function c(t){var e=o.getItemGraphicEl(t);a.remove(e)}if(!this._initialized){this._initialized=true;var v=WI(s,t,function(){setTimeout(function(){a.removeClipPath()})});a.setClipPath(v)}this._data=n},incrementalPrepareRender:function(t,e,r){this._initialized=true;this._data=null;this._dataGroup.removeAll()},incrementalRender:function(t,e,r){var i=e.getData();var a=e.coordinateSystem;var n=a.dimensions;var o=ZI(e);for(var s=t.start;s<t.end;s++){var l=HI(i,this._dataGroup,s,n,a);l.incremental=true;UI(l,i,s,o)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll();this._data=null}});function WI(t,e,r){var i=t.model;var a=t.getRect();var n=new xs({shape:{x:a.x,y:a.y,width:a.width,height:a.height}});var o=i.get("layout")==="horizontal"?"width":"height";n.setShape(o,0);gl(n,{shape:{width:a.width,height:a.height}},e,r);return n}function FI(t,e,r,i){var a=[];for(var n=0;n<r.length;n++){var o=r[n];var s=t.get(t.mapDimension(o),e);if(!XI(s,i.getAxis(o).type)){a.push(i.dataToPoint(s,o))}}return a}function HI(t,e,r,i,a){var n=FI(t,r,i,a);var o=new ys({shape:{points:n},silent:true,z2:10});e.add(o);t.setItemGraphicEl(r,o);return o}function ZI(t){var e=t.get("smooth",true);e===true&&(e=VI);return{lineStyle:t.getModel("lineStyle").getLineStyle(),smooth:e!=null?e:VI}}function UI(t,e,r,i){var a=i.lineStyle;if(e.hasItemOption){var n=e.getItemModel(r).getModel("lineStyle");a=n.getLineStyle()}t.useStyle(a);var o=t.style;o.fill=null;o.stroke=e.getItemVisual(r,"color");o.opacity=e.getItemVisual(r,"opacity");i.smooth&&(t.shape.smooth=i.smooth)}function XI(t,e){return e==="category"?t==null:t==null||isNaN(t)}var jI=["lineStyle","normal","opacity"];var YI={seriesType:"parallel",reset:function(t,e,r){var i=t.getModel("itemStyle");var a=t.getModel("lineStyle");var n=e.get("color");var o=a.get("color")||i.get("color")||n[t.seriesIndex%n.length];var s=t.get("inactiveOpacity");var l=t.get("activeOpacity");var u=t.getModel("lineStyle").getLineStyle();var h=t.coordinateSystem;var f=t.getData();var c={normal:u.opacity,active:l,inactive:s};f.setVisual("color",o);function v(t,e){h.eachActiveState(e,function(t,r){var i=c[t];if(t==="normal"&&e.hasItemOption){var a=e.getItemModel(r).get(jI,true);a!=null&&(i=a)}e.setItemVisual(r,"opacity",i)},t.start,t.end)}return{progress:v}}};td(YI);var qI=Lf.extend({type:"series.sankey",layoutInfo:null,getInitialData:function(t){var e=t.edges||t.links;var r=t.data||t.nodes;if(r&&e){var i=qb(r,e,this,true);return i.data}},setNodePosition:function(t,e){var r=this.option.data[t];r.localX=e[0];r.localY=e[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(t,e,r){if(r==="edge"){var i=this.getDataParams(t,r);var a=i.data;var n=a.source+" -- "+a.target;if(i.value){n+=" : "+i.value}return hu(n)}return qI.superCall(this,"formatTooltip",t,e)},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",nodeWidth:20,nodeGap:8,draggable:true,layoutIterations:32,label:{show:true,position:"right",color:"#000",fontSize:12},itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:true},lineStyle:{opacity:.6}},animationEasing:"linear",animationDuration:1e3}});var KI=Es({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0},buildPath:function(t,e){var r=e.extent/2;t.moveTo(e.x1,e.y1-r);t.bezierCurveTo(e.cpx1,e.cpy1-r,e.cpx2,e.cpy2-r,e.x2,e.y2-r);t.lineTo(e.x2,e.y2+r);t.bezierCurveTo(e.cpx2,e.cpy2+r,e.cpx1,e.cpy1+r,e.x1,e.y1+r);t.closePath()}});od({type:"sankey",_model:null,render:function(t,e,r){var i=t.getGraph();var a=this.group;var n=t.layoutInfo;var o=n.width;var s=n.height;var l=t.getData();var u=t.getData("edge");this._model=t;a.removeAll();a.attr("position",[n.x,n.y]);i.eachEdge(function(e){var r=new KI;r.dataIndex=e.dataIndex;r.seriesIndex=t.seriesIndex;r.dataType="edge";var i=e.getModel("lineStyle");var n=i.get("curveness");var l=e.node1.getLayout();var h=e.node1.getModel();var f=h.get("localX");var c=h.get("localY");var v=e.node2.getLayout();var d=e.node2.getModel();var p=d.get("localX");var g=d.get("localY");var m=e.getLayout();r.shape.extent=Math.max(1,m.dy);var y=(f!=null?f*o:l.x)+l.dx;var x=(c!=null?c*s:l.y)+m.sy+m.dy/2;var _=p!=null?p*o:v.x;var w=(g!=null?g*s:v.y)+m.ty+m.dy/2;var b=y*(1-n)+_*n;var S=x;var M=y*n+_*(1-n);var I=w;r.setShape({x1:y,y1:x,x2:_,y2:w,cpx1:b,cpy1:S,cpx2:M,cpy2:I});r.setStyle(i.getItemStyle());switch(r.style.fill){case"source":r.style.fill=e.node1.getVisual("color");break;case"target":r.style.fill=e.node2.getVisual("color");break}il(r,e.getModel("emphasis.lineStyle").getItemStyle());a.add(r);u.setItemGraphicEl(e.dataIndex,r)});i.eachNode(function(e){var r=e.getLayout();var i=e.getModel();var n=i.get("localX");var u=i.get("localY");var h=i.getModel("label");var f=i.getModel("emphasis.label");var c=new xs({shape:{x:n!=null?n*o:r.x,y:u!=null?u*s:r.y,width:r.dx,height:r.dy},style:i.getModel("itemStyle").getItemStyle()});var v=e.getModel("emphasis.itemStyle").getItemStyle();al(c.style,v,h,f,{labelFetcher:t,labelDataIndex:e.dataIndex,defaultText:e.id,isRectText:true});c.setStyle("fill",e.getVisual("color"));il(c,v);a.add(c);l.setItemGraphicEl(e.dataIndex,c);c.dataType="node"});var h=t.get("draggable");if(h){l.eachItemGraphicEl(function(e,i){e.drift=function(e,a){this.shape.x+=e;this.shape.y+=a;this.dirty();r.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:l.getRawIndex(i),localX:this.shape.x/o,localY:this.shape.y/s})};e.draggable=true;e.cursor="move"})}if(!this._data&&t.get("animation")){a.setClipPath($I(a.getBoundingRect(),t,function(){a.removeClipPath()}))}this._data=t.getData()},dispose:function(){}});function $I(t,e,r){var i=new xs({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});gl(i,{shape:{width:t.width+20,height:t.height+20}},e,r);return i}Kv({type:"dragNode",event:"dragNode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})});function JI(){var t=[];var e=[];function r(e,i){if(i>=t.length){return e}var a=-1;var n=e.length;var o=t[i++];var s={};var l={};while(++a<n){var u=o(e[a]);var h=l[u];if(h){h.push(e[a])}else{l[u]=[e[a]]}}L(l,function(t,e){s[e]=r(t,i)});return s}function i(r,a){if(a>=t.length){return r}var n=[];var o=e[a++];L(r,function(t,e){n.push({key:e,values:i(t,a)})});if(o){return n.sort(function(t,e){return o(t.key,e.key)})}else{return n}}return{key:function(e){t.push(e);return this},sortKeys:function(r){e[t.length-1]=r;return this},entries:function(t){return i(r(t,0),0)}}}var QI=function(t,e,r){t.eachSeriesByType("sankey",function(t){var r=t.get("nodeWidth");var i=t.get("nodeGap");var a=tT(t,e);t.layoutInfo=a;var n=a.width;var o=a.height;var s=t.getGraph();var l=s.nodes;var u=s.edges;rT(l);var h=N(l,function(t){return t.getLayout().value===0});var f=h.length!==0?0:t.get("layoutIterations");eT(l,u,r,i,n,o,f)})};function tT(t,e){return Lu(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function eT(t,e,r,i,a,n,o){iT(t,e,r,a);oT(t,e,n,i,o);vT(t)}function rT(t){L(t,function(t){var e=gT(t.outEdges,_T);var r=gT(t.inEdges,_T);var i=Math.max(e,r);t.setLayout({value:i},true)})}function iT(t,r,i,a){var n=[];var o=[];var s=[];var l=[];var u=0;var h=0;for(var f=0;f<r.length;f++){n[f]=1}for(var f=0;f<t.length;f++){o[f]=t[f].inEdges.length;if(o[f]===0){s.push(t[f])}}while(s.length){L(s,function(e){e.setLayout({x:u},true);e.setLayout({dx:i},true);L(e.outEdges,function(e){var i=r.indexOf(e);n[i]=0;var a=e.node2;var s=t.indexOf(a);if(--o[s]===0){l.push(a)}})});++u;s=l;l=[]}for(var f=0;f<n.length;f++){if(e){if(n[f]===1){throw new Error("Sankey is a DAG, the original data has cycle!")}}}aT(t,u);h=(a-i)/(u-1);nT(t,h)}function aT(t,e){L(t,function(t){if(!t.outEdges.length){t.setLayout({x:e-1},true)}})}function nT(t,e){L(t,function(t){var r=t.getLayout().x*e;t.setLayout({x:r},true)})}function oT(t,e,r,i,a){var n=JI().key(function(t){return t.getLayout().x}).sortKeys(xT).entries(t).map(function(t){return t.values});sT(t,n,e,r,i);lT(n,i,r);for(var o=1;a>0;a--){o*=.99;uT(n,o);lT(n,i,r);fT(n,o);lT(n,i,r)}}function sT(t,e,r,i,a){var n=[];L(e,function(t){var e=t.length;var r=0;L(t,function(t){r+=t.getLayout().value});var o=(i-(e-1)*a)/r;n.push(o)});n.sort(function(t,e){return t-e});var o=n[0];L(e,function(t){L(t,function(t,e){t.setLayout({y:e},true);var r=t.getLayout().value*o;t.setLayout({dy:r},true)})});L(r,function(t){var e=+t.getValue()*o;t.setLayout({dy:e},true)})}function lT(t,e,r){L(t,function(t){var i;var a;var n=0;var o=t.length;var s;t.sort(yT);for(s=0;s<o;s++){i=t[s];a=n-i.getLayout().y;if(a>0){var l=i.getLayout().y+a;i.setLayout({y:l},true)}n=i.getLayout().y+i.getLayout().dy+e}a=n-e-r;if(a>0){var l=i.getLayout().y-a;i.setLayout({y:l},true);n=i.getLayout().y;for(s=o-2;s>=0;--s){i=t[s];a=i.getLayout().y+i.getLayout().dy+e-n;if(a>0){l=i.getLayout().y-a;i.setLayout({y:l},true)}n=i.getLayout().y}}})}function uT(t,e){L(t.slice().reverse(),function(t){L(t,function(t){if(t.outEdges.length){var r=gT(t.outEdges,hT)/gT(t.outEdges,_T);var i=t.getLayout().y+(r-mT(t))*e;t.setLayout({y:i},true)}})})}function hT(t){return mT(t.node2)*t.getValue()}function fT(t,e){L(t,function(t){L(t,function(t){if(t.inEdges.length){var r=gT(t.inEdges,cT)/gT(t.inEdges,_T);var i=t.getLayout().y+(r-mT(t))*e;t.setLayout({y:i},true)}})})}function cT(t){return mT(t.node1)*t.getValue()}function vT(t){L(t,function(t){t.outEdges.sort(dT);t.inEdges.sort(pT)});L(t,function(t){var e=0;var r=0;L(t.outEdges,function(t){t.setLayout({sy:e},true);e+=t.getLayout().dy});L(t.inEdges,function(t){t.setLayout({ty:r},true);r+=t.getLayout().dy})})}function dT(t,e){return t.node2.getLayout().y-e.node2.getLayout().y}function pT(t,e){return t.node1.getLayout().y-e.node1.getLayout().y}function gT(t,e){var r=0;var i=t.length;var a=-1;while(++a<i){var n=+e.call(t,t[a],a);if(!isNaN(n)){r+=n}}return r}function mT(t){return t.getLayout().y+t.getLayout().dy/2}function yT(t,e){return t.getLayout().y-e.getLayout().y}function xT(t,e){return t-e}function _T(t){return t.getValue()}var wT=function(t,e){t.eachSeriesByType("sankey",function(t){var e=t.getGraph();var r=e.nodes;if(r.length){var i=Infinity;var a=-Infinity;L(r,function(t){var e=t.getLayout().value;if(e<i){i=e}if(e>a){a=e}});L(r,function(e){var r=new $w({type:"color",mappingMethod:"linear",dataExtent:[i,a],visual:t.get("color")});var n=r.mapValueToVisual(e.getLayout().value);e.setVisual("color",n);var o=e.getModel();var s=o.get("itemStyle.color");if(s!=null){e.setVisual("color",s)}})}})};Qv(QI);td(wT);var bT={_baseAxisDim:null,getInitialData:function(t,e){var r;var i=e.getComponent("xAxis",this.get("xAxisIndex"));var a=e.getComponent("yAxis",this.get("yAxisIndex"));var n=i.get("type");var o=a.get("type");var s;if(n==="category"){t.layout="horizontal";r=i.getOrdinalMeta();s=true}else if(o==="category"){t.layout="vertical";r=a.getOrdinalMeta();s=true}else{t.layout=t.layout||"horizontal"}var l=["x","y"];var u=t.layout==="horizontal"?0:1;var h=this._baseAxisDim=l[u];var f=l[1-u];var c=[i,a];var v=c[u].get("type");var d=c[1-u].get("type");var p=t.data;if(p&&s){var g=[];L(p,function(t,e){var r;if(t.value&&z(t.value)){r=t.value.slice();t.value.unshift(e)}else if(z(t)){r=t.slice();t.unshift(e)}else{r=t}g.push(r)});t.data=g}var m=this.defaultValueDimensions;return nx(this,{coordDimensions:[{name:h,type:gd(v),ordinalMeta:r,otherDims:{tooltip:false,itemName:0},dimsDef:["base"]},{name:f,type:gd(d),dimsDef:m.slice()}],dimensionsCount:m.length+1})},getBaseAxis:function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis}};var ST=Lf.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:true},{name:"Q1",defaultTooltip:true},{name:"median",defaultTooltip:true},{name:"Q3",defaultTooltip:true},{name:"max",defaultTooltip:true}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,hoverAnimation:true,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}});A(ST,bT,true);var MT=["itemStyle"];var IT=["emphasis","itemStyle"];var TT=Zf.extend({type:"boxplot",render:function(t,e,r){var i=t.getData();var a=this.group;var n=this._data;if(!this._data){a.removeAll()}var o=t.get("layout")==="horizontal"?1:0;i.diff(n).add(function(t){if(i.hasValue(t)){var e=i.getItemLayout(t);var r=AT(e,i,t,o,true);i.setItemGraphicEl(t,r);a.add(r)}}).update(function(t,e){var r=n.getItemGraphicEl(e);if(!i.hasValue(t)){a.remove(r);return}var s=i.getItemLayout(t);if(!r){r=AT(s,i,t,o)}else{CT(s,r,i,t)}a.add(r);i.setItemGraphicEl(t,r)}).remove(function(t){var e=n.getItemGraphicEl(t);e&&a.remove(e)}).execute();this._data=i},remove:function(t){var e=this.group;var r=this._data;this._data=null;r&&r.eachItemGraphicEl(function(t){t&&e.remove(t)})},dispose:at});var DT=Wo.extend({type:"boxplotBoxPath",shape:{},buildPath:function(t,e){var r=e.points;var i=0;t.moveTo(r[i][0],r[i][1]);i++;for(;i<4;i++){t.lineTo(r[i][0],r[i][1])}t.closePath();for(;i<r.length;i++){t.moveTo(r[i][0],r[i][1]);i++;t.lineTo(r[i][0],r[i][1])}}});function AT(t,e,r,i,a){var n=t.ends;var o=new DT({shape:{points:a?LT(n,i,t):n}});CT(t,o,e,r,a);return o}function CT(t,e,r,i,a){var n=r.hostModel;var o=Ml[a?"initProps":"updateProps"];o(e,{shape:{points:t.ends}},n,i);var s=r.getItemModel(i);var l=s.getModel(MT);var u=r.getItemVisual(i,"color");var h=l.getItemStyle(["borderColor"]);h.stroke=u;h.strokeNoScale=true;e.useStyle(h);e.z2=100;var f=s.getModel(IT).getItemStyle();il(e,f)}function LT(t,e,r){return k(t,function(t){t=t.slice();t[e]=r.initBaseline;return t})}var kT=["itemStyle","borderColor"];var PT=function(t,e){var r=t.get("color");t.eachRawSeriesByType("boxplot",function(e){var i=r[e.seriesIndex%r.length];var a=e.getData();a.setVisual({legendSymbol:"roundRect",color:e.get(kT)||i});if(!t.isSeriesFiltered(e)){a.each(function(t){var e=a.getItemModel(t);a.setItemVisual(t,{color:e.get(kT,true)})})}})};var NT=L;var OT=function(t){var e=ET(t);NT(e,function(t){var e=t.seriesModels;if(!e.length){return}RT(t);NT(e,function(e,r){zT(e,t.boxOffsetList[r],t.boxWidthList[r])})})};function ET(t){var e=[];var r=[];t.eachSeriesByType("boxplot",function(t){var i=t.getBaseAxis();var a=T(r,i);if(a<0){a=r.length;r[a]=i;e[a]={axis:i,seriesModels:[]}}e[a].seriesModels.push(t)});return e}function RT(t){var e;var r=t.axis;var i=t.seriesModels;var a=i.length;var n=t.boxWidthList=[];var o=t.boxOffsetList=[];var s=[];var l;if(r.type==="category"){l=r.getBandWidth()}else{var u=0;NT(i,function(t){u=Math.max(u,t.getData().count())});e=r.getExtent(),Math.abs(e[1]-e[0])/u}NT(i,function(t){var e=t.get("boxWidth");if(!z(e)){e=[e,e]}s.push([Wl(e[0],l)||0,Wl(e[1],l)||0]);
});var h=l*.8-2;var f=h/a*.3;var c=(h-f*(a-1))/a;var v=c/2-h/2;NT(i,function(t,e){o.push(v);v+=f+c;n.push(Math.min(Math.max(c,s[e][0]),s[e][1]))})}function zT(t,e,r){var i=t.coordinateSystem;var a=t.getData();var n=r/2;var o=t.get("layout")==="horizontal"?0:1;var s=1-o;var l=["x","y"];var u=a.mapDimension(l[o]);var h=a.mapDimension(l[s],true);if(u==null||h.length<5){return}for(var f=0;f<a.count();f++){var c=a.get(u,f);var v=x(c,h[2],f);var d=x(c,h[0],f);var p=x(c,h[1],f);var g=x(c,h[3],f);var m=x(c,h[4],f);var y=[];_(y,p,0);_(y,g,1);y.push(d,p,m,g);w(y,d);w(y,m);w(y,v);a.setItemLayout(f,{initBaseline:v[s],ends:y})}function x(t,r,n){var l=a.get(r,n);var u=[];u[o]=t;u[s]=l;var h;if(isNaN(t)||isNaN(l)){h=[NaN,NaN]}else{h=i.dataToPoint(u);h[o]+=e}return h}function _(t,e,r){var i=e.slice();var a=e.slice();i[o]+=n;a[o]-=n;r?t.push(i,a):t.push(a,i)}function w(t,e){var r=e.slice();var i=e.slice();r[o]-=n;i[o]+=n;t.push(r,i)}}td(PT);Qv(OT);var BT=Lf.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:true},{name:"close",defaultTooltip:true},{name:"lowest",defaultTooltip:true},{name:"highest",defaultTooltip:true}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,hoverAnimation:true,layout:null,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:true,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:false,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(t,e,r){var i=e.getItemLayout(t);return i&&r.rect(i.brushRect)}});A(BT,bT,true);var VT=["itemStyle"];var GT=["emphasis","itemStyle"];var WT=["color","color0","borderColor","borderColor0"];var FT=Zf.extend({type:"candlestick",render:function(t,e,r){this._updateDrawMode(t);this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},incrementalPrepareRender:function(t,e,r){this._clear();this._updateDrawMode(t)},incrementalRender:function(t,e,r,i){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;if(this._isLargeDraw==null||e^this._isLargeDraw){this._isLargeDraw=e;this._clear()}},_renderNormal:function(t){var e=t.getData();var r=this._data;var i=this.group;var a=e.getLayout("isSimpleBox");if(!this._data){i.removeAll()}e.diff(r).add(function(r){if(e.hasValue(r)){var n;var o=e.getItemLayout(r);n=ZT(o,r,true);gl(n,{shape:{points:o.ends}},t,r);UT(n,e,r,a);i.add(n);e.setItemGraphicEl(r,n)}}).update(function(n,o){var s=r.getItemGraphicEl(o);if(!e.hasValue(n)){i.remove(s);return}var l=e.getItemLayout(n);if(!s){s=ZT(l,n)}else{pl(s,{shape:{points:l.ends}},t,n)}UT(s,e,n,a);i.add(s);e.setItemGraphicEl(n,s)}).remove(function(t){var e=r.getItemGraphicEl(t);e&&i.remove(e)}).execute();this._data=e},_renderLarge:function(t){this._clear();YT(t,this.group)},_incrementalRenderNormal:function(t,e){var r=e.getData();var i=r.getLayout("isSimpleBox");var a;while((a=t.next())!=null){var n;var o=r.getItemLayout(a);n=ZT(o,a);UT(n,r,a,i);n.incremental=true;this.group.add(n)}},_incrementalRenderLarge:function(t,e){YT(e,this.group,true)},remove:function(t){this._clear()},_clear:function(){this.group.removeAll();this._data=null},dispose:at});var HT=Wo.extend({type:"normalCandlestickBox",shape:{},buildPath:function(t,e){var r=e.points;if(this.__simpleBox){t.moveTo(r[4][0],r[4][1]);t.lineTo(r[6][0],r[6][1])}else{t.moveTo(r[0][0],r[0][1]);t.lineTo(r[1][0],r[1][1]);t.lineTo(r[2][0],r[2][1]);t.lineTo(r[3][0],r[3][1]);t.closePath();t.moveTo(r[4][0],r[4][1]);t.lineTo(r[5][0],r[5][1]);t.moveTo(r[6][0],r[6][1]);t.lineTo(r[7][0],r[7][1])}}});function ZT(t,e,r){var i=t.ends;return new HT({shape:{points:r?XT(i,t):i},z2:100})}function UT(t,e,r,i){var a=e.getItemModel(r);var n=a.getModel(VT);var o=e.getItemVisual(r,"color");var s=e.getItemVisual(r,"borderColor")||o;var l=n.getItemStyle(WT);t.useStyle(l);t.style.strokeNoScale=true;t.style.fill=o;t.style.stroke=s;t.__simpleBox=i;var u=a.getModel(GT).getItemStyle();il(t,u)}function XT(t,e){return k(t,function(t){t=t.slice();t[1]=e.initBaseline;return t})}var jT=Wo.extend({type:"largeCandlestickBox",shape:{},buildPath:function(t,e){var r=e.points;for(var i=0;i<r.length;){if(this.__sign===r[i++]){var a=r[i++];t.moveTo(a,r[i++]);t.lineTo(a,r[i++])}else{i+=3}}}});function YT(t,e,r){var i=t.getData();var a=i.getLayout("largePoints");var n=new jT({shape:{points:a},__sign:1});e.add(n);var o=new jT({shape:{points:a},__sign:-1});e.add(o);qT(1,n,t,i);qT(-1,o,t,i);if(r){n.incremental=true;o.incremental=true}}function qT(t,e,r,i){var a=t>0?"P":"N";var n=i.getVisual("borderColor"+a)||i.getVisual("color"+a);var o=r.getModel(VT).getItemStyle(WT);e.useStyle(o);e.style.fill=null;e.style.stroke=n}var KT=function(t){if(!t||!z(t.series)){return}L(t.series,function(t){if(G(t)&&t.type==="k"){t.type="candlestick"}})};var $T=["itemStyle","borderColor"];var JT=["itemStyle","borderColor0"];var QT=["itemStyle","color"];var tD=["itemStyle","color0"];var eD={seriesType:"candlestick",plan:Wf(),performRawSeries:true,reset:function(t,e){var r=t.getData();var i=t.pipelineContext.large;r.setVisual({legendSymbol:"roundRect",colorP:n(1,t),colorN:n(-1,t),borderColorP:o(1,t),borderColorN:o(-1,t)});if(e.isSeriesFiltered(t)){return}return!i&&{progress:a};function a(t,e){var r;while((r=t.next())!=null){var i=e.getItemModel(r);var a=e.getItemLayout(r).sign;e.setItemVisual(r,{color:n(a,i),borderColor:o(a,i)})}}function n(t,e){return e.get(t>0?QT:tD)}function o(t,e){return e.get(t>0?$T:JT)}}};var rD=typeof Float32Array!=="undefined"?Float32Array:Array;var iD={seriesType:"candlestick",plan:Wf(),reset:function(t){var e=t.coordinateSystem;var r=t.getData();var i=nD(t,r);var a=0;var n=1;var o=["x","y"];var s=r.mapDimension(o[a]);var l=r.mapDimension(o[n],true);var u=l[0];var h=l[1];var f=l[2];var c=l[3];r.setLayout({candleWidth:i,isSimpleBox:i<=1.3});if(s==null||l.length<4){return}return{progress:t.pipelineContext.large?d:v};function v(t,r){var o;while((o=t.next())!=null){var l=r.get(s,o);var v=r.get(u,o);var d=r.get(h,o);var p=r.get(f,o);var g=r.get(c,o);var m=Math.min(v,d);var y=Math.max(v,d);var x=M(m,l);var _=M(y,l);var w=M(p,l);var b=M(g,l);var S=[];I(S,_,0);I(S,x,1);S.push(D(b),D(_),D(w),D(x));r.setItemLayout(o,{sign:aD(r,o,v,d,h),initBaseline:v>d?_[n]:x[n],ends:S,brushRect:T(p,g,l)})}function M(t,r){var i=[];i[a]=r;i[n]=t;return isNaN(r)||isNaN(t)?[NaN,NaN]:e.dataToPoint(i)}function I(t,e,r){var n=e.slice();var o=e.slice();n[a]=Zs(n[a]+i/2,1,false);o[a]=Zs(o[a]-i/2,1,true);r?t.push(n,o):t.push(o,n)}function T(t,e,r){var o=M(t,r);var s=M(e,r);o[a]-=i/2;s[a]-=i/2;return{x:o[0],y:o[1],width:n?i:s[0]-o[0],height:n?s[1]-o[1]:i}}function D(t){t[a]=Zs(t[a],1);return t}}function d(t,r){var i=new rD(t.count*5);var o=0;var l;var v=[];var d=[];var p;while((p=t.next())!=null){var g=r.get(s,p);var m=r.get(u,p);var y=r.get(h,p);var x=r.get(f,p);var _=r.get(c,p);if(isNaN(g)||isNaN(x)||isNaN(_)){i[o++]=NaN;o+=4;continue}i[o++]=aD(r,p,m,y,h);v[a]=g;v[n]=x;l=e.dataToPoint(v,null,d);i[o++]=l?l[0]:NaN;i[o++]=l?l[1]:NaN;v[n]=_;l=e.dataToPoint(v,null,d);i[o++]=l?l[1]:NaN}r.setLayout("largePoints",i)}}};function aD(t,e,r,i,a){var n;if(r>i){n=-1}else if(r<i){n=1}else{n=e>0?t.get(a,e-1)<=i?1:-1:1}return n}function nD(t,e){var r=t.getBaseAxis();var i;var a=r.type==="category"?r.getBandWidth():(i=r.getExtent(),Math.abs(i[1]-i[0])/e.count());var n=Wl(X(t.get("barMaxWidth"),a),a);var o=Wl(X(t.get("barMinWidth"),1),a);var s=t.get("barWidth");return s!=null?Wl(s,a):Math.max(Math.min(a/2,n),o)}jv(KT);td(eD);Qv(iD);Lf.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(t,e){return qd(this.getSource(),this)},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:true,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var oD=3;function sD(t){if(!z(t)){t=[+t,+t]}return t}function lD(t,e){t.eachChild(function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?e.color:null,fill:e.brushType==="fill"?e.color:null}})})}function uD(t,e){fr.call(this);var r=new qg(t,e);var i=new fr;this.add(r);this.add(i);i.beforeUpdate=function(){this.attr(r.getScale())};this.updateData(t,e)}var hD=uD.prototype;hD.stopEffectAnimation=function(){this.childAt(1).removeAll()};hD.startEffectAnimation=function(t){var e=t.symbolType;var r=t.color;var i=this.childAt(1);for(var a=0;a<oD;a++){var n=vg(e,-1,-1,2,2,r);n.attr({style:{strokeNoScale:true},z2:99,silent:true,scale:[.5,.5]});var o=-a/oD*t.period+t.effectOffset;n.animate("",true).when(t.period,{scale:[t.rippleScale/2,t.rippleScale/2]}).delay(o).start();n.animateStyle(true).when(t.period,{opacity:0}).delay(o).start();i.add(n)}lD(i,t)};hD.updateEffectAnimation=function(t){var e=this._effectCfg;var r=this.childAt(1);var i=["symbolType","period","rippleScale"];for(var a=0;a<i.length;a++){var n=i[a];if(e[n]!==t[n]){this.stopEffectAnimation();this.startEffectAnimation(t);return}}lD(r,t)};hD.highlight=function(){this.trigger("emphasis")};hD.downplay=function(){this.trigger("normal")};hD.updateData=function(t,e){var r=t.hostModel;this.childAt(0).updateData(t,e);var i=this.childAt(1);var a=t.getItemModel(e);var n=t.getItemVisual(e,"symbol");var o=sD(t.getItemVisual(e,"symbolSize"));var s=t.getItemVisual(e,"color");i.attr("scale",o);i.traverse(function(t){t.attr({fill:s})});var l=a.getShallow("symbolOffset");if(l){var u=i.position;u[0]=Wl(l[0],o[0]);u[1]=Wl(l[1],o[1])}i.rotation=(a.getShallow("symbolRotate")||0)*Math.PI/180||0;var h={};h.showEffectOn=r.get("showEffectOn");h.rippleScale=a.get("rippleEffect.scale");h.brushType=a.get("rippleEffect.brushType");h.period=a.get("rippleEffect.period")*1e3;h.effectOffset=e/t.count();h.z=a.getShallow("z")||0;h.zlevel=a.getShallow("zlevel")||0;h.symbolType=n;h.color=s;this.off("mouseover").off("mouseout").off("emphasis").off("normal");if(h.showEffectOn==="render"){this._effectCfg?this.updateEffectAnimation(h):this.startEffectAnimation(h);this._effectCfg=h}else{this._effectCfg=null;this.stopEffectAnimation();var f=this.childAt(0);var c=function(){f.highlight();if(h.showEffectOn!=="render"){this.startEffectAnimation(h)}};var v=function(){f.downplay();if(h.showEffectOn!=="render"){this.stopEffectAnimation()}};this.on("mouseover",c,this).on("mouseout",v,this).on("emphasis",c,this).on("normal",v,this)}this._effectCfg=h};hD.fadeOut=function(t){this.off("mouseover").off("mouseout").off("emphasis").off("normal");t&&t()};D(uD,fr);od({type:"effectScatter",init:function(){this._symbolDraw=new am(uD)},render:function(t,e,r){var i=t.getData();var a=this._symbolDraw;a.updateData(i);this.group.add(a.group)},updateTransform:function(t,e,r){var i=t.getData();this.group.dirty();var a=Gm().reset(t);if(a.progress){a.progress({start:0,end:i.count()},i)}this._symbolDraw.updateLayout(i)},_updateGroupTransform:function(t){var e=t.coordinateSystem;if(e&&e.getRoamTransform){this.group.transform=Jt(e.getRoamTransform());this.group.decomposeTransform()}},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(e)},dispose:function(){}});td(Vm("effectScatter","circle"));Qv(Gm("effectScatter"));var fD=typeof Uint32Array==="undefined"?Array:Uint32Array;var cD=typeof Float64Array==="undefined"?Array:Float64Array;function vD(t){var r=t.data;if(r&&r[0]&&r[0][0]&&r[0][0].coord){if(e){console.warn("Lines data configuration has been changed to"+" { coords:[[1,2],[2,3]] }")}t.data=k(r,function(t){var e=[t[0].coord,t[1].coord];var r={coords:e};if(t[0].name){r.fromName=t[0].name}if(t[1].name){r.toName=t[1].name}return _([r,t[0],t[1]])})}}var dD=Lf.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(t){t.data=t.data||[];vD(t);var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords;this._flatCoordsOffset=e.flatCoordsOffset;if(e.flatCoords){t.data=new Float32Array(e.count)}dD.superApply(this,"init",arguments)},mergeOption:function(t){t.data=t.data||[];vD(t);if(t.data){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords;this._flatCoordsOffset=e.flatCoordsOffset;if(e.flatCoords){t.data=new Float32Array(e.count)}}dD.superApply(this,"mergeOption",arguments)},appendData:function(t){var e=this._processFlatCoordsArray(t.data);if(e.flatCoords){if(!this._flatCoords){this._flatCoords=e.flatCoords;this._flatCoordsOffset=e.flatCoordsOffset}else{this._flatCoords=it(this._flatCoords,e.flatCoords);this._flatCoordsOffset=it(this._flatCoordsOffset,e.flatCoordsOffset)}t.data=new Float32Array(e.count)}this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var r=this.getData().getItemModel(t);var i=r.option instanceof Array?r.option:r.getShallow("coords");if(e){if(!(i instanceof Array&&i.length>0&&i[0]instanceof Array)){throw new Error("Invalid coords "+JSON.stringify(i)+". Lines must have 2d coords array in data item.")}}return i},getLineCoordsCount:function(t){if(this._flatCoordsOffset){return this._flatCoordsOffset[t*2+1]}else{return this._getCoordsFromItemModel(t).length}},getLineCoords:function(t,e){if(this._flatCoordsOffset){var r=this._flatCoordsOffset[t*2];var i=this._flatCoordsOffset[t*2+1];for(var a=0;a<i;a++){e[a]=e[a]||[];e[a][0]=this._flatCoords[r+a*2];e[a][1]=this._flatCoords[r+a*2+1]}return i}else{var n=this._getCoordsFromItemModel(t);for(var a=0;a<n.length;a++){e[a]=e[a]||[];e[a][0]=n[a][0];e[a][1]=n[a][1]}return n.length}},_processFlatCoordsArray:function(t){var r=0;if(this._flatCoords){r=this._flatCoords.length}if(typeof t[0]==="number"){var i=t.length;var a=new fD(i);var n=new cD(i);var o=0;var s=0;var l=0;for(var u=0;u<i;){l++;var h=t[u++];a[s++]=o+r;a[s++]=h;for(var f=0;f<h;f++){var c=t[u++];var v=t[u++];n[o++]=c;n[o++]=v;if(u>i){if(e){throw new Error("Invalid data format.")}}}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,s),flatCoords:n,count:l}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},getInitialData:function(t,r){if(e){var i=Ch.get(t.coordinateSystem);if(!i){throw new Error("Unkown coordinate system "+t.coordinateSystem)}}var a=new Cd(["value"],this);a.hasItemOption=false;a.initData(t.data,[],function(t,e,r,i){if(t instanceof Array){return NaN}else{a.hasItemOption=true;var n=t.value;if(n!=null){return n instanceof Array?n[i]:n}}});return a},formatTooltip:function(t){var e=this.getData();var r=e.getItemModel(t);var i=r.get("name");if(i){return i}var a=r.get("fromName");var n=r.get("toName");var o=[];a!=null&&o.push(a);n!=null&&o.push(n);return hu(o.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var t=this.option.progressive;if(t==null){return this.option.large?1e4:this.get("progressive")}return t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;if(t==null){return this.option.large?2e4:this.get("progressiveThreshold")}return t},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:true,hoverAnimation:true,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:false,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:true,trailLength:.2},large:false,largeThreshold:2e3,polyline:false,label:{show:false,position:"end"},lineStyle:{opacity:.5}}});function pD(t,e,r){fr.call(this);this.add(this.createLine(t,e,r));this._updateEffectSymbol(t,e)}var gD=pD.prototype;gD.createLine=function(t,e,r){return new sS(t,e,r)};gD._updateEffectSymbol=function(t,e){var r=t.getItemModel(e);var i=r.getModel("effect");var a=i.get("symbolSize");var n=i.get("symbol");if(!z(a)){a=[a,a]}var o=i.get("color")||t.getItemVisual(e,"color");var s=this.childAt(1);if(this._symbolType!==n){this.remove(s);s=vg(n,-.5,-.5,1,1,o);s.z2=100;s.culling=true;this.add(s)}if(!s){return}s.setStyle("shadowColor",o);s.setStyle(i.getItemStyle(["color"]));s.attr("scale",a);s.setColor(o);s.attr("scale",a);this._symbolType=n;this._updateEffectAnimation(t,i,e)};gD._updateEffectAnimation=function(t,e,r){var i=this.childAt(1);if(!i){return}var a=this;var n=t.getItemLayout(r);var o=e.get("period")*1e3;var s=e.get("loop");var l=e.get("constantSpeed");var u=U(e.get("delay"),function(e){return e/t.count()*o/3});var h=typeof u==="function";i.ignore=true;this.updateAnimationPoints(i,n);if(l>0){o=this.getLineLength(i)/l*1e3}if(o!==this._period||s!==this._loop){i.stopAnimation();var f=u;if(h){f=u(r)}if(i.__t>0){f=-o*i.__t}i.__t=0;var c=i.animate("",s).when(o,{__t:1}).delay(f).during(function(){a.updateSymbolPosition(i)});if(!s){c.done(function(){a.remove(i)})}c.start()}this._period=o;this._loop=s};gD.getLineLength=function(t){return Mt(t.__p1,t.__cp1)+Mt(t.__cp1,t.__p2)};gD.updateAnimationPoints=function(t,e){t.__p1=e[0];t.__p2=e[1];t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]};gD.updateData=function(t,e,r){this.childAt(0).updateData(t,e,r);this._updateEffectSymbol(t,e)};gD.updateSymbolPosition=function(t){var e=t.__p1;var r=t.__p2;var i=t.__cp1;var a=t.__t;var n=t.position;var o=Rn;var s=zn;n[0]=o(e[0],i[0],r[0],a);n[1]=o(e[1],i[1],r[1],a);var l=s(e[0],i[0],r[0],a);var u=s(e[1],i[1],r[1],a);t.rotation=-Math.atan2(u,l)-Math.PI/2;t.ignore=false};gD.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var r=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,r,e)};D(pD,fr);function mD(t,e,r){fr.call(this);this._createPolyline(t,e,r)}var yD=mD.prototype;yD._createPolyline=function(t,e,r){var i=t.getItemLayout(e);var a=new ys({shape:{points:i}});this.add(a);this._updateCommonStl(t,e,r)};yD.updateData=function(t,e,r){var i=t.hostModel;var a=this.childAt(0);var n={shape:{points:t.getItemLayout(e)}};pl(a,n,i,e);this._updateCommonStl(t,e,r)};yD._updateCommonStl=function(t,e,r){var i=this.childAt(0);var a=t.getItemModel(e);var n=t.getItemVisual(e,"color");var o=r&&r.lineStyle;var s=r&&r.hoverLineStyle;if(!r||t.hasItemOption){o=a.getModel("lineStyle").getLineStyle();s=a.getModel("emphasis.lineStyle").getLineStyle()}i.useStyle(b({strokeNoScale:true,fill:"none",stroke:n},o));i.hoverStyle=s;il(this)};yD.updateLayout=function(t,e){var r=this.childAt(0);r.setShape("points",t.getItemLayout(e))};D(mD,fr);function xD(t,e,r){pD.call(this,t,e,r);this._lastFrame=0;this._lastFramePercent=0}var _D=xD.prototype;_D.createLine=function(t,e,r){return new mD(t,e,r)};_D.updateAnimationPoints=function(t,e){this._points=e;var r=[0];var i=0;for(var a=1;a<e.length;a++){var n=e[a-1];var o=e[a];i+=Mt(n,o);r.push(i)}if(i===0){return}for(var a=0;a<r.length;a++){r[a]/=i}this._offsets=r;this._length=i};_D.getLineLength=function(t){return this._length};_D.updateSymbolPosition=function(t){var e=t.__t;var r=this._points;var i=this._offsets;var a=r.length;if(!i){return}var n=this._lastFrame;var o;if(e<this._lastFramePercent){var s=Math.min(n+1,a-1);for(o=s;o>=0;o--){if(i[o]<=e){break}}o=Math.min(o,a-2)}else{for(var o=n;o<a;o++){if(i[o]>e){break}}o=Math.min(o-1,a-2)}At(t.position,r[o],r[o+1],(e-i[o])/(i[o+1]-i[o]));var l=r[o+1][0]-r[o][0];var u=r[o+1][1]-r[o][1];t.rotation=-Math.atan2(u,l)-Math.PI/2;this._lastFrame=o;this._lastFramePercent=e;t.ignore=false};D(xD,pD);var wD=Es({shape:{polyline:false,curveness:0,segs:[]},buildPath:function(t,e){var r=e.segs;var i=e.curveness;if(e.polyline){for(var a=0;a<r.length;){var n=r[a++];if(n>0){t.moveTo(r[a++],r[a++]);for(var o=1;o<n;o++){t.lineTo(r[a++],r[a++])}}}}else{for(var a=0;a<r.length;){var s=r[a++];var l=r[a++];var u=r[a++];var h=r[a++];t.moveTo(s,l);if(i>0){var f=(s+u)/2-(l-h)*i;var c=(l+h)/2-(u-s)*i;t.quadraticCurveTo(f,c,u,h)}else{t.lineTo(u,h)}}}},findDataIndex:function(t,e){var r=this.shape;var i=r.segs;var a=r.curveness;if(r.polyline){var n=0;for(var o=0;o<i.length;){var s=i[o++];if(s>0){var l=i[o++];var u=i[o++];for(var h=1;h<s;h++){var f=i[o++];var c=i[o++];if(mo(l,u,f,c)){return n}}}n++}}else{var n=0;for(var o=0;o<i.length;){var l=i[o++];var u=i[o++];var f=i[o++];var c=i[o++];if(a>0){var v=(l+f)/2-(u-c)*a;var d=(u+c)/2-(f-l)*a;if(xo(l,u,v,d,f,c)){return n}}else{if(mo(l,u,f,c)){return n}}n++}}return-1}});function bD(){this.group=new fr}var SD=bD.prototype;SD.isPersistent=function(){return!this._incremental};SD.updateData=function(t){this.group.removeAll();var e=new wD({rectHover:true,cursor:"default"});e.setShape({segs:t.getLayout("linesPoints")});this._setCommon(e,t);this.group.add(e);this._incremental=null};SD.incrementalPrepareUpdate=function(t){this.group.removeAll();this._clearIncremental();if(t.count()>5e5){if(!this._incremental){this._incremental=new Cs({silent:true})}this.group.add(this._incremental)}else{this._incremental=null}};SD.incrementalUpdate=function(t,e){var r=new wD;r.setShape({segs:e.getLayout("linesPoints")});this._setCommon(r,e,!!this._incremental);if(!this._incremental){r.rectHover=true;r.cursor="default";r.__startIndex=t.start;this.group.add(r)}else{this._incremental.addDisplayable(r,true)}};SD.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};SD._setCommon=function(t,e,r){var i=e.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get("lineStyle.curveness")});t.useStyle(i.getModel("lineStyle").getLineStyle());t.style.strokeNoScale=true;var a=e.getVisual("color");if(a){t.setStyle("stroke",a)}t.setStyle("fill");if(!r){t.seriesIndex=i.seriesIndex;t.on("mousemove",function(e){t.dataIndex=null;var r=t.findDataIndex(e.offsetX,e.offsetY);if(r>0){t.dataIndex=r+t.__startIndex}})}};SD._clearIncremental=function(){var t=this._incremental;if(t){t.clearDisplaybles()}};var MD={seriesType:"lines",plan:Wf(),reset:function(t){var e=t.coordinateSystem;var r=t.get("polyline");var i=t.pipelineContext.large;function a(a,n){var o=[];if(i){var s;var l=a.end-a.start;if(r){var u=0;for(var h=a.start;h<a.end;h++){u+=t.getLineCoordsCount(h)}s=new Float32Array(l+u*2)}else{s=new Float32Array(l*4)}var f=0;var c=[];for(var h=a.start;h<a.end;h++){var v=t.getLineCoords(h,o);if(r){s[f++]=v}for(var d=0;d<v;d++){c=e.dataToPoint(o[d],false,c);s[f++]=c[0];s[f++]=c[1]}}n.setLayout("linesPoints",s)}else{for(var h=a.start;h<a.end;h++){var p=n.getItemModel(h);var v=t.getLineCoords(h,o);var g=[];if(r){for(var m=0;m<v;m++){g.push(e.dataToPoint(o[m]))}}else{g[0]=e.dataToPoint(o[0]);g[1]=e.dataToPoint(o[1]);var y=p.get("lineStyle.curveness");if(+y){g[2]=[(g[0][0]+g[1][0])/2-(g[0][1]-g[1][1])*y,(g[0][1]+g[1][1])/2-(g[1][0]-g[0][0])*y]}}n.setItemLayout(h,g)}}}return{progress:a}}};od({type:"lines",init:function(){},render:function(t,r,i){var a=t.getData();var n=this._updateLineDraw(a,t);var o=t.get("zlevel");var s=t.get("effect.trailLength");var l=i.getZr();var u=l.painter.getType()==="svg";if(!u){l.painter.getLayer(o).clear(true)}if(this._lastZlevel!=null&&!u){l.configLayer(this._lastZlevel,{motionBlur:false})}if(this._showEffect(t)&&s){if(e){var h=false;r.eachSeries(function(e){if(e!==t&&e.get("zlevel")===o){h=true}});h&&console.warn("Lines with trail effect should have an individual zlevel")}if(!u){l.configLayer(o,{motionBlur:true,lastFrameAlpha:Math.max(Math.min(s/10+.9,1),0)})}}n.updateData(a);this._lastZlevel=o;this._finished=true},incrementalPrepareRender:function(t,e,r){var i=t.getData();var a=this._updateLineDraw(i,t);a.incrementalPrepareUpdate(i);this._clearLayer(r);this._finished=false},incrementalRender:function(t,e,r){this._lineDraw.incrementalUpdate(t,e.getData());this._finished=t.end===e.getData().count()},updateTransform:function(t,e,r){var i=t.getData();var a=t.pipelineContext;if(!this._finished||a.large||a.progressiveRender){return{update:true}}else{var n=MD.reset(t);if(n.progress){n.progress({start:0,end:i.count()},i)}this._lineDraw.updateLayout();this._clearLayer(r)}},_updateLineDraw:function(t,r){var i=this._lineDraw;var a=this._showEffect(r);var n=!!r.get("polyline");var o=r.pipelineContext;var s=o.large;if(e){if(a&&s){console.warn("Large lines not support effect")}}if(!i||a!==this._hasEffet||n!==this._isPolyline||s!==this._isLargeDraw){if(i){i.remove()}i=this._lineDraw=s?new bD:new uS(n?a?xD:mD:a?pD:sS);this._hasEffet=a;this._isPolyline=n;this._isLargeDraw=s;this.group.removeAll()}this.group.add(i.group);return i},_showEffect:function(t){return!!t.get("effect.show")},_clearLayer:function(t){var e=t.getZr();var r=e.painter.getType()==="svg";if(!r&&this._lastZlevel!=null){e.painter.getLayer(this._lastZlevel).clear(true)}},remove:function(t,e){this._lineDraw&&this._lineDraw.remove();this._lineDraw=null;this._clearLayer(e)},dispose:function(){}});function ID(t){if(!(t instanceof Array)){t=[t,t]}return t}var TD="lineStyle.opacity".split(".");var DD={seriesType:"lines",reset:function(t,e,r){var i=ID(t.get("symbol"));var a=ID(t.get("symbolSize"));var n=t.getData();n.setVisual("fromSymbol",i&&i[0]);n.setVisual("toSymbol",i&&i[1]);n.setVisual("fromSymbolSize",a&&a[0]);n.setVisual("toSymbolSize",a&&a[1]);n.setVisual("opacity",t.get(TD));function o(t,e){var r=t.getItemModel(e);var i=ID(r.getShallow("symbol",true));var a=ID(r.getShallow("symbolSize",true));var n=r.get(TD);i[0]&&t.setItemVisual(e,"fromSymbol",i[0]);i[1]&&t.setItemVisual(e,"toSymbol",i[1]);a[0]&&t.setItemVisual(e,"fromSymbolSize",a[0]);a[1]&&t.setItemVisual(e,"toSymbolSize",a[1]);t.setItemVisual(e,"opacity",n)}return{dataEach:n.hasItemOption?o:null}}};Qv(MD);td(DD);Lf.extend({type:"series.heatmap",getInitialData:function(t,e){return qd(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var t=Ch.get(this.get("coordinateSystem"));if(t&&t.dimensions){return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"}},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});var AD=256;function CD(){var t=S();this.canvas=t;this.blurSize=30;this.pointSize=20;this.maxOpacity=1;this.minOpacity=0;this._gradientPixels={}}CD.prototype={update:function(t,e,r,i,a,n){var o=this._getBrush();var s=this._getGradient(t,a,"inRange");var l=this._getGradient(t,a,"outOfRange");var u=this.pointSize+this.blurSize;var h=this.canvas;var f=h.getContext("2d");var c=t.length;h.width=e;h.height=r;for(var v=0;v<c;++v){var d=t[v];var p=d[0];var g=d[1];var m=d[2];var y=i(m);f.globalAlpha=y;f.drawImage(o,p-u,g-u)}if(!h.width||!h.height){return h}var x=f.getImageData(0,0,h.width,h.height);var _=x.data;var w=0;var b=_.length;var S=this.minOpacity;var M=this.maxOpacity;var I=M-S;while(w<b){var y=_[w+3]/256;var T=Math.floor(y*(AD-1))*4;if(y>0){var D=n(y)?s:l;y>0&&(y=y*I+S);_[w++]=D[T];_[w++]=D[T+1];_[w++]=D[T+2];_[w++]=D[T+3]*y*256}else{w+=4}}f.putImageData(x,0,0);return h},_getBrush:function(){var t=this._brushCanvas||(this._brushCanvas=S());var e=this.pointSize+this.blurSize;var r=e*2;t.width=r;t.height=r;var i=t.getContext("2d");i.clearRect(0,0,r,r);i.shadowOffsetX=r;i.shadowBlur=this.blurSize;i.shadowColor="#000";i.beginPath();i.arc(-e,e,this.pointSize,0,Math.PI*2,true);i.closePath();i.fill();return t},_getGradient:function(t,e,r){var i=this._gradientPixels;var a=i[r]||(i[r]=new Uint8ClampedArray(256*4));var n=[0,0,0,0];var o=0;for(var s=0;s<256;s++){e[r](s/255,true,n);a[o++]=n[0];a[o++]=n[1];a[o++]=n[2];a[o++]=n[3]}return a}};function LD(t,e,r){var i=t[1]-t[0];e=k(e,function(e){return{interval:[(e.interval[0]-t[0])/i,(e.interval[1]-t[0])/i]}});var a=e.length;var n=0;return function(t){for(var i=n;i<a;i++){var o=e[i].interval;if(o[0]<=t&&t<=o[1]){n=i;break}}if(i===a){for(var i=n-1;i>=0;i--){var o=e[i].interval;if(o[0]<=t&&t<=o[1]){n=i;break}}}return i>=0&&i<a&&r[i]}}function kD(t,e){var r=t[1]-t[0];e=[(e[0]-t[0])/r,(e[1]-t[0])/r];return function(t){return t>=e[0]&&t<=e[1]}}function PD(t){var e=t.dimensions;return e[0]==="lng"&&e[1]==="lat"}od({type:"heatmap",render:function(t,r,i){var a;r.eachComponent("visualMap",function(e){e.eachTargetSeries(function(r){if(r===t){a=e}})});if(e){if(!a){throw new Error("Heatmap must use with visualMap")}}this.group.removeAll();this._incrementalDisplayable=null;var n=t.coordinateSystem;if(n.type==="cartesian2d"||n.type==="calendar"){this._renderOnCartesianAndCalendar(t,i,0,t.getData().count())}else if(PD(n)){this._renderOnGeo(n,t,a,i)}},incrementalPrepareRender:function(t,e,r){this.group.removeAll()},incrementalRender:function(t,e,r,i){var a=e.coordinateSystem;if(a){this._renderOnCartesianAndCalendar(e,i,t.start,t.end,true)}},_renderOnCartesianAndCalendar:function(t,r,i,a,n){var o=t.coordinateSystem;var s;var l;if(o.type==="cartesian2d"){var u=o.getAxis("x");var h=o.getAxis("y");if(e){if(!(u.type==="category"&&h.type==="category")){throw new Error("Heatmap on cartesian must have two category axes")}if(!(u.onBand&&h.onBand)){throw new Error("Heatmap on cartesian must have two axes with boundaryGap true")}}s=u.getBandWidth();l=h.getBandWidth()}var f=this.group;var c=t.getData();var v="itemStyle";var d="emphasis.itemStyle";var p="label";var g="emphasis.label";var m=t.getModel(v).getItemStyle(["color"]);var y=t.getModel(d).getItemStyle();var x=t.getModel(p);var _=t.getModel(g);var b=o.type;var S=b==="cartesian2d"?[c.mapDimension("x"),c.mapDimension("y"),c.mapDimension("value")]:[c.mapDimension("time"),c.mapDimension("value")];for(var M=i;M<a;M++){var I;if(b==="cartesian2d"){if(isNaN(c.get(S[2],M))){continue}var T=o.dataToPoint([c.get(S[0],M),c.get(S[1],M)]);I=new xs({shape:{x:T[0]-s/2,y:T[1]-l/2,width:s,height:l},style:{fill:c.getItemVisual(M,"color"),opacity:c.getItemVisual(M,"opacity")}})}else{if(isNaN(c.get(S[1],M))){continue}I=new xs({z2:1,shape:o.dataToRect([c.get(S[0],M)]).contentShape,style:{fill:c.getItemVisual(M,"color"),opacity:c.getItemVisual(M,"opacity")}})}var D=c.getItemModel(M);if(c.hasItemOption){m=D.getModel(v).getItemStyle(["color"]);y=D.getModel(d).getItemStyle();x=D.getModel(p);_=D.getModel(g)}var A=t.getRawValue(M);var C="-";if(A&&A[2]!=null){C=A[2]}al(m,y,x,_,{labelFetcher:t,labelDataIndex:M,defaultText:C,isRectText:true});I.setStyle(m);il(I,c.hasItemOption?y:w({},y));I.incremental=n;if(n){I.useHoverLayer=true}f.add(I);c.setItemGraphicEl(M,I)}},_renderOnGeo:function(t,e,r,i){var a=r.targetVisuals.inRange;var n=r.targetVisuals.outOfRange;var o=e.getData();var s=this._hmLayer||(this._hmLayer||new CD);s.blurSize=e.get("blurSize");s.pointSize=e.get("pointSize");s.minOpacity=e.get("minOpacity");s.maxOpacity=e.get("maxOpacity");var l=t.getViewRect().clone();var u=t.getRoamTransform();l.applyTransform(u);var h=Math.max(l.x,0);var f=Math.max(l.y,0);var c=Math.min(l.width+l.x,i.getWidth());var v=Math.min(l.height+l.y,i.getHeight());var d=c-h;var p=v-f;var g=[o.mapDimension("lng"),o.mapDimension("lat"),o.mapDimension("value")];var m=o.mapArray(g,function(e,r,i){var a=t.dataToPoint([e,r]);a[0]-=h;a[1]-=f;a.push(i);return a});var y=r.getExtent();var x=r.type==="visualMap.continuous"?kD(y,r.option.range):LD(y,r.getPieceList(),r.option.selected);s.update(m,d,p,a.color.getNormalizer(),{inRange:a.color.getColorMapper(),outOfRange:n.color.getColorMapper()},x);var _=new zi({style:{width:d,height:p,x:h,y:f,image:s.canvas},silent:true});this.group.add(_)},dispose:function(){}});var ND=Zy.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:false,symbolRepeatDirection:"end",symbolClip:false,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:false},getInitialData:function(t){t.stack=null;return ND.superApply(this,"getInitialData",arguments)}});var OD=["itemStyle","borderWidth"];var ED=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}];var RD=new ls;var zD=od({type:"pictorialBar",render:function(t,e,r){var i=this.group;var a=t.getData();var n=this._data;var o=t.coordinateSystem;var s=o.getBaseAxis();var l=!!s.isHorizontal();var u=o.grid.getRect();var h={ecSize:{width:r.getWidth(),height:r.getHeight()},
seriesModel:t,coordSys:o,coordSysExtent:[[u.x,u.x+u.width],[u.y,u.y+u.height]],isHorizontal:l,valueDim:ED[+l],categoryDim:ED[1-l]};a.diff(n).add(function(t){if(!a.hasValue(t)){return}var e=qD(a,t);var r=BD(a,t,e,h);var n=QD(a,h,r);a.setItemGraphicEl(t,n);i.add(n);nA(n,h,r)}).update(function(t,e){var r=n.getItemGraphicEl(e);if(!a.hasValue(t)){i.remove(r);return}var o=qD(a,t);var s=BD(a,t,o,h);var l=rA(a,s);if(r&&l!==r.__pictorialShapeStr){i.remove(r);a.setItemGraphicEl(t,null);r=null}if(r){tA(r,h,s)}else{r=QD(a,h,s,true)}a.setItemGraphicEl(t,r);r.__pictorialSymbolMeta=s;i.add(r);nA(r,h,s)}).remove(function(t){var e=n.getItemGraphicEl(t);e&&eA(n,t,e.__pictorialSymbolMeta.animationModel,e)}).execute();this._data=a;return this.group},dispose:at,remove:function(t,e){var r=this.group;var i=this._data;if(t.get("animation")){if(i){i.eachItemGraphicEl(function(e){eA(i,e.dataIndex,t,e)})}}else{r.removeAll()}}});function BD(t,e,r,i){var a=t.getItemLayout(e);var n=r.get("symbolRepeat");var o=r.get("symbolClip");var s=r.get("symbolPosition")||"start";var l=r.get("symbolRotate");var u=(l||0)*Math.PI/180||0;var h=r.get("symbolPatternSize")||2;var f=r.isAnimationEnabled();var c={dataIndex:e,layout:a,itemModel:r,symbolType:t.getItemVisual(e,"symbol")||"circle",color:t.getItemVisual(e,"color"),symbolClip:o,symbolRepeat:n,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:h,rotation:u,animationModel:f?r:null,hoverAnimation:f&&r.get("hoverAnimation"),z2:r.getShallow("z",true)||0};VD(r,n,a,i,c);WD(t,e,a,n,o,c.boundingLength,c.pxSign,h,i,c);FD(r,c.symbolScale,u,i,c);var v=c.symbolSize;var d=r.get("symbolOffset");if(z(d)){d=[Wl(d[0],v[0]),Wl(d[1],v[1])]}HD(r,v,a,n,o,d,s,c.valueLineWidth,c.boundingLength,c.repeatCutLength,i,c);return c}function VD(t,e,r,i,a){var n=i.valueDim;var o=t.get("symbolBoundingData");var s=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis());var l=s.toGlobalCoord(s.dataToCoord(0));var u=1-+(r[n.wh]<=0);var h;if(z(o)){var f=[GD(s,o[0])-l,GD(s,o[1])-l];f[1]<f[0]&&f.reverse();h=f[u]}else if(o!=null){h=GD(s,o)-l}else if(e){h=i.coordSysExtent[n.index][u]-l}else{h=r[n.wh]}a.boundingLength=h;if(e){a.repeatCutLength=r[n.wh]}a.pxSign=h>0?1:h<0?-1:0}function GD(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function WD(t,e,r,i,a,n,o,s,l,u){var h=l.valueDim;var f=l.categoryDim;var c=Math.abs(r[f.wh]);var v=t.getItemVisual(e,"symbolSize");if(z(v)){v=v.slice()}else{if(v==null){v="100%"}v=[v,v]}v[f.index]=Wl(v[f.index],c);v[h.index]=Wl(v[h.index],i?c:Math.abs(n));u.symbolSize=v;var d=u.symbolScale=[v[0]/s,v[1]/s];d[h.index]*=(l.isHorizontal?-1:1)*o}function FD(t,e,r,i,a){var n=t.get(OD)||0;if(n){RD.attr({scale:e.slice(),rotation:r});RD.updateTransform();n/=RD.getLineScale();n*=e[i.valueDim.index]}a.valueLineWidth=n}function HD(t,e,r,i,a,n,o,s,l,u,h,f){var c=h.categoryDim;var v=h.valueDim;var d=f.pxSign;var p=Math.max(e[v.index]+s,0);var g=p;if(i){var m=Math.abs(l);var y=U(t.get("symbolMargin"),"15%")+"";var x=false;if(y.lastIndexOf("!")===y.length-1){x=true;y=y.slice(0,y.length-1)}y=Wl(y,e[v.index]);var _=Math.max(p+y*2,0);var b=x?0:y*2;var S=iu(i);var M=S?i:oA((m+b)/_);var I=m-M*p;y=I/2/(x?M:M-1);_=p+y*2;b=x?0:y*2;if(!S&&i!=="fixed"){M=u?oA((Math.abs(u)+b)/_):0}g=M*_-b;f.repeatTimes=M;f.symbolMargin=y}var T=d*(g/2);var D=f.pathPosition=[];D[c.index]=r[c.wh]/2;D[v.index]=o==="start"?T:o==="end"?l-T:l/2;if(n){D[0]+=n[0];D[1]+=n[1]}var A=f.bundlePosition=[];A[c.index]=r[c.xy];A[v.index]=r[v.xy];var C=f.barRectShape=w({},r);C[v.wh]=d*Math.max(Math.abs(r[v.wh]),Math.abs(D[v.index]+T));C[c.wh]=r[c.wh];var L=f.clipShape={};L[c.xy]=-r[c.xy];L[c.wh]=h.ecSize[c.wh];L[v.xy]=0;L[v.wh]=r[v.wh]}function ZD(t){var e=t.symbolPatternSize;var r=vg(t.symbolType,-e/2,-e/2,e,e,t.color);r.attr({culling:true});r.type!=="image"&&r.setStyle({strokeNoScale:true});return r}function UD(t,e,r,i){var a=t.__pictorialBundle;var n=r.symbolSize;var o=r.valueLineWidth;var s=r.pathPosition;var l=e.valueDim;var u=r.repeatTimes||0;var h=0;var f=n[e.valueDim.index]+o+r.symbolMargin*2;iA(t,function(t){t.__pictorialAnimationIndex=h;t.__pictorialRepeatTimes=u;if(h<u){aA(t,null,d(h),r,i)}else{aA(t,null,{scale:[0,0]},r,i,function(){a.remove(t)})}JD(t,r);h++});for(;h<u;h++){var c=ZD(r);c.__pictorialAnimationIndex=h;c.__pictorialRepeatTimes=u;a.add(c);var v=d(h);aA(c,{position:v.position,scale:[0,0]},{scale:v.scale,rotation:v.rotation},r,i);c.on("mouseover",p).on("mouseout",g);JD(c,r)}function d(t){var e=s.slice();var i=r.pxSign;var a=t;if(r.symbolRepeatDirection==="start"?i>0:i<0){a=u-1-t}e[l.index]=f*(a-u/2+.5)+s[l.index];return{position:e,scale:r.symbolScale.slice(),rotation:r.rotation}}function p(){iA(t,function(t){t.trigger("emphasis")})}function g(){iA(t,function(t){t.trigger("normal")})}}function XD(t,e,r,i){var a=t.__pictorialBundle;var n=t.__pictorialMainPath;if(!n){n=t.__pictorialMainPath=ZD(r);a.add(n);aA(n,{position:r.pathPosition.slice(),scale:[0,0],rotation:r.rotation},{scale:r.symbolScale.slice()},r,i);n.on("mouseover",o).on("mouseout",s)}else{aA(n,null,{position:r.pathPosition.slice(),scale:r.symbolScale.slice(),rotation:r.rotation},r,i)}JD(n,r);function o(){this.trigger("emphasis")}function s(){this.trigger("normal")}}function jD(t,e,r){var i=w({},e.barRectShape);var a=t.__pictorialBarRect;if(!a){a=t.__pictorialBarRect=new xs({z2:2,shape:i,silent:true,style:{stroke:"transparent",fill:"transparent",lineWidth:0}});t.add(a)}else{aA(a,null,{shape:i},e,r)}}function YD(t,e,r,i){if(r.symbolClip){var a=t.__pictorialClipPath;var n=w({},r.clipShape);var o=e.valueDim;var s=r.animationModel;var l=r.dataIndex;if(a){pl(a,{shape:n},s,l)}else{n[o.wh]=0;a=new xs({shape:n});t.__pictorialBundle.setClipPath(a);t.__pictorialClipPath=a;var u={};u[o.wh]=r.clipShape[o.wh];Ml[i?"updateProps":"initProps"](a,{shape:u},s,l)}}}function qD(t,e){var r=t.getItemModel(e);r.getAnimationDelayParams=KD;r.isAnimationEnabled=$D;return r}function KD(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function $D(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function JD(t,e){t.off("emphasis").off("normal");var r=e.symbolScale.slice();e.hoverAnimation&&t.on("emphasis",function(){this.animateTo({scale:[r[0]*1.1,r[1]*1.1]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:r.slice()},400,"elasticOut")})}function QD(t,e,r,i){var a=new fr;var n=new fr;a.add(n);a.__pictorialBundle=n;n.attr("position",r.bundlePosition.slice());if(r.symbolRepeat){UD(a,e,r)}else{XD(a,e,r)}jD(a,r,i);YD(a,e,r,i);a.__pictorialShapeStr=rA(t,r);a.__pictorialSymbolMeta=r;return a}function tA(t,e,r){var i=r.animationModel;var a=r.dataIndex;var n=t.__pictorialBundle;pl(n,{position:r.bundlePosition.slice()},i,a);if(r.symbolRepeat){UD(t,e,r,true)}else{XD(t,e,r,true)}jD(t,r,true);YD(t,e,r,true)}function eA(t,e,r,i){var a=i.__pictorialBarRect;a&&(a.style.text=null);var n=[];iA(i,function(t){n.push(t)});i.__pictorialMainPath&&n.push(i.__pictorialMainPath);i.__pictorialClipPath&&(r=null);L(n,function(t){pl(t,{scale:[0,0]},r,e,function(){i.parent&&i.parent.remove(i)})});t.setItemGraphicEl(e,null)}function rA(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function iA(t,e,r){L(t.__pictorialBundle.children(),function(i){i!==t.__pictorialBarRect&&e.call(r,i)})}function aA(t,e,r,i,a,n){e&&t.attr(e);if(i.symbolClip&&!a){r&&t.attr(r)}else{r&&Ml[a?"updateProps":"initProps"](t,r,i.animationModel,i.dataIndex,n)}}function nA(t,e,r){var i=r.color;var a=r.dataIndex;var n=r.itemModel;var o=n.getModel("itemStyle").getItemStyle(["color"]);var s=n.getModel("emphasis.itemStyle").getItemStyle();var l=n.getShallow("cursor");iA(t,function(t){t.setColor(i);t.setStyle(b({fill:i,opacity:r.opacity},o));il(t,s);l&&(t.cursor=l);t.z2=r.z2});var u={};var h=e.valueDim.posDesc[+(r.boundingLength>0)];var f=t.__pictorialBarRect;Uy(f.style,u,n,i,e.seriesModel,a,h);il(f,u)}function oA(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}Qv(R(Sp,"pictorialBar"));td(Vm("pictorialBar","roundRect"));var sA=function(t,e,r,i,a){Hg.call(this,t,e,r);this.type=i||"value";this.position=a||"bottom";this.orient=null};sA.prototype={constructor:sA,model:null,isHorizontal:function(){var t=this.position;return t==="top"||t==="bottom"},pointToData:function(t,e){return this.coordinateSystem.pointToData(t,e)[0]},toGlobalCoord:null,toLocalCoord:null};D(sA,Hg);function lA(t,e,r){this.dimension="single";this.dimensions=["single"];this._axis=null;this._rect;this._init(t,e,r);this.model=t}lA.prototype={type:"singleAxis",axisPointerEnabled:true,constructor:lA,_init:function(t,e,r){var i=this.dimension;var a=new sA(i,$p(t),[0,0],t.get("type"),t.get("position"));var n=a.type==="category";a.onBand=n&&t.get("boundaryGap");a.inverse=t.get("inverse");a.orient=t.get("orient");t.axis=a;a.model=t;a.coordinateSystem=this;this._axis=a},update:function(t,e){t.eachSeries(function(t){if(t.coordinateSystem===this){var e=t.getData();L(e.mapDimension(this.dimension,true),function(t){this._axis.scale.unionExtentFromData(e,t)},this);Kp(this._axis.scale,this._axis.model)}},this)},resize:function(t,e){this._rect=Lu({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()});this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var t=this._rect;var e=this._axis;var r=e.isHorizontal();var i=r?[0,t.width]:[0,t.height];var a=e.reverse?1:0;e.setExtent(i[a],i[1-a]);this._updateAxisTransform(e,r?t.x:t.y)},_updateAxisTransform:function(t,e){var r=t.getExtent();var i=r[0]+r[1];var a=t.isHorizontal();t.toGlobalCoord=a?function(t){return t+e}:function(t){return i-t+e};t.toLocalCoord=a?function(t){return t-e}:function(t){return i-t+e}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(t){var e=this.getRect();var r=this.getAxis();var i=r.orient;if(i==="horizontal"){return r.contain(r.toLocalCoord(t[0]))&&(t[1]>=e.y&&t[1]<=e.y+e.height)}else{return r.contain(r.toLocalCoord(t[1]))&&(t[0]>=e.y&&t[0]<=e.y+e.height)}},pointToData:function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t[e.orient==="horizontal"?0:1]))]},dataToPoint:function(t){var e=this.getAxis();var r=this.getRect();var i=[];var a=e.orient==="horizontal"?0:1;if(t instanceof Array){t=t[0]}i[a]=e.toGlobalCoord(e.dataToCoord(+t));i[1-a]=a===0?r.y+r.height/2:r.x+r.width/2;return i}};function uA(t,e){var r=[];t.eachComponent("singleAxis",function(i,a){var n=new lA(i,t,e);n.name="single_"+a;n.resize(i,e);i.coordinateSystem=n;r.push(n)});t.eachSeries(function(e){if(e.get("coordinateSystem")==="singleAxis"){var r=t.queryComponents({mainType:"singleAxis",index:e.get("singleAxisIndex"),id:e.get("singleAxisId")})[0];e.coordinateSystem=r&&r.coordinateSystem}});return r}Ch.register("single",{create:uA,dimensions:lA.prototype.dimensions});function hA(t,e){e=e||{};var r=t.coordinateSystem;var i=t.axis;var a={};var n=i.position;var o=i.orient;var s=r.getRect();var l=[s.x,s.x+s.width,s.y,s.y+s.height];var u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};a.position=[o==="vertical"?u.vertical[n]:l[0],o==="horizontal"?u.horizontal[n]:l[3]];var h={horizontal:0,vertical:1};a.rotation=Math.PI/2*h[o];var f={top:-1,bottom:1,right:1,left:-1};a.labelDirection=a.tickDirection=a.nameDirection=f[n];if(t.get("axisTick.inside")){a.tickDirection=-a.tickDirection}if(U(e.labelInside,t.get("axisLabel.inside"))){a.labelDirection=-a.labelDirection}var c=e.rotate;c==null&&(c=t.get("axisLabel.rotate"));a.labelRotation=n==="top"?-c:c;a.z2=1;return a}var fA=["axisLine","axisTickLabel","axisName"];var cA="splitLine";var vA=Ry.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(t,e,r,i){var a=this.group;a.removeAll();var n=hA(t);var o=new cy(t,n);L(fA,o.add,o);a.add(o.getGroup());if(t.get(cA+".show")){this["_"+cA](t)}vA.superCall(this,"render",t,e,r,i)},_splitLine:function(t){var e=t.axis;if(e.scale.isBlank()){return}var r=t.getModel("splitLine");var i=r.getModel("lineStyle");var a=i.get("width");var n=i.get("color");n=n instanceof Array?n:[n];var o=t.coordinateSystem.getRect();var s=e.isHorizontal();var l=[];var u=0;var h=e.getTicksCoords({tickModel:r});var f=[];var c=[];for(var v=0;v<h.length;++v){var d=e.toGlobalCoord(h[v].coord);if(s){f[0]=d;f[1]=o.y;c[0]=d;c[1]=o.y+o.height}else{f[0]=o.x;f[1]=d;c[0]=o.x+o.width;c[1]=d}var p=u++%n.length;l[p]=l[p]||[];l[p].push(new _s(Fs({shape:{x1:f[0],y1:f[1],x2:c[0],y2:c[1]},style:{lineWidth:a},silent:true})))}for(var v=0;v<l.length;++v){this.group.add(Gs(l[v],{style:{stroke:n[v%n.length],lineDash:i.getLineDash(a),lineWidth:a},silent:true}))}}});var dA=Bu.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});var pA={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:true,lineStyle:{width:2,type:"solid"}},tooltip:{show:true},axisTick:{show:true,length:6,lineStyle:{width:2}},axisLabel:{show:true,interval:"auto"},splitLine:{show:true,lineStyle:{type:"dashed",opacity:.2}}};function gA(t,e){return e.type||(e.data?"category":"value")}x(dA.prototype,ig);$m("single",dA,gA,pA);var mA=function(t,e){var r=[];var i=t.seriesIndex;var a;if(i==null||!(a=e.getSeriesByIndex(i))){return{point:[]}}var n=a.getData();var o=Ka(n,t);if(o==null||o<0||z(o)){return{point:[]}}var s=n.getItemGraphicEl(o);var l=a.coordinateSystem;if(a.getTooltipPosition){r=a.getTooltipPosition(o)||[]}else if(l&&l.dataToPoint){r=l.dataToPoint(n.getValues(k(l.dimensions,function(t){return n.mapDimension(t)}),o,true))||[]}else if(s){var u=s.getBoundingRect().clone();u.applyTransform(s.transform);r=[u.x+u.width/2,u.y+u.height/2]}return{point:r,el:s}};var yA=L;var xA=R;var _A=$a();var wA=function(t,e,r){var i=t.currTrigger;var a=[t.x,t.y];var n=t;var o=t.dispatchAction||E(r.dispatchAction,r);var s=e.getComponent("axisPointer").coordSysAxesInfo;if(!s){return}if(kA(a)){a=mA({seriesIndex:n.seriesIndex,dataIndex:n.dataIndex},e).point}var l=kA(a);var u=n.axesInfo;var h=s.axesInfo;var f=i==="leave"||kA(a);var c={};var v={};var d={list:[],map:{}};var p={showPointer:xA(MA,v),showTooltip:xA(IA,d)};yA(s.coordSysMap,function(t,e){var r=l||t.containPoint(a);yA(s.coordSysAxesInfo[e],function(t,e){var i=t.axis;var n=CA(u,t);if(!f&&r&&(!u||n)){var o=n&&n.value;if(o==null&&!l){o=i.pointToData(a)}o!=null&&bA(t,o,p,false,c)}})});var g={};yA(h,function(t,e){var r=t.linkGroup;if(r&&!v[e]){yA(r.axesInfo,function(e,i){var a=v[i];if(e!==t&&a){var n=a.value;r.mapper&&(n=t.axis.scale.parse(r.mapper(n,LA(e),LA(t))));g[t.key]=n}})}});yA(g,function(t,e){bA(h[e],t,p,true,c)});TA(v,h,c);DA(d,a,t,o);AA(h,o,r);return c};function bA(t,e,r,i,a){var n=t.axis;if(n.scale.isBlank()||!n.containData(e)){return}if(!t.involveSeries){r.showPointer(t,e);return}var o=SA(e,t);var s=o.payloadBatch;var l=o.snapToValue;if(s[0]&&a.seriesIndex==null){w(a,s[0])}if(!i&&t.snap){if(n.containData(l)&&l!=null){e=l}}r.showPointer(t,e,s,a);r.showTooltip(t,o,l)}function SA(t,e){var r=e.axis;var i=r.dim;var a=t;var n=[];var o=Number.MAX_VALUE;var s=-1;yA(e.seriesModels,function(e,l){var u=e.getData().mapDimension(i,true);var h;var f;if(e.getAxisTooltipData){var c=e.getAxisTooltipData(u,t,r);f=c.dataIndices;h=c.nestestValue}else{f=e.getData().indicesOfNearest(u[0],t,r.type==="category"?.5:null);if(!f.length){return}h=e.getData().get(u[0],f[0])}if(h==null||!isFinite(h)){return}var v=t-h;var d=Math.abs(v);if(d<=o){if(d<o||v>=0&&s<0){o=d;s=v;a=h;n.length=0}yA(f,function(t){n.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})})}});return{payloadBatch:n,snapToValue:a}}function MA(t,e,r,i){t[e.key]={value:r,payloadBatch:i}}function IA(t,e,r,i){var a=r.payloadBatch;var n=e.axis;var o=n.model;var s=e.axisPointerModel;if(!e.triggerTooltip||!a.length){return}var l=e.coordSys.model;var u=Ey(l);var h=t.map[u];if(!h){h=t.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]};t.list.push(h)}h.dataByAxis.push({axisDim:n.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:i,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:a.slice()})}function TA(t,e,r){var i=r.axesInfo=[];yA(e,function(e,r){var a=e.axisPointerModel.option;var n=t[r];if(n){!e.useHandle&&(a.status="show");a.value=n.value;a.seriesDataIndices=(n.payloadBatch||[]).slice()}else{!e.useHandle&&(a.status="hide")}a.status==="show"&&i.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:a.value})})}function DA(t,e,r,i){if(kA(e)||!t.list.length){i({type:"hideTip"});return}var a=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:true,x:e[0],y:e[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:a.dataIndexInside,dataIndex:a.dataIndex,seriesIndex:a.seriesIndex,dataByCoordSys:t.list})}function AA(t,e,r){var i=r.getZr();var a="axisPointerLastHighlights";var n=_A(i)[a]||{};var o=_A(i)[a]={};yA(t,function(t,e){var r=t.axisPointerModel.option;r.status==="show"&&yA(r.seriesDataIndices,function(t){var e=t.seriesIndex+" | "+t.dataIndex;o[e]=t})});var s=[];var l=[];L(n,function(t,e){!o[e]&&l.push(t)});L(o,function(t,e){!n[e]&&s.push(t)});l.length&&r.dispatchAction({type:"downplay",escapeConnect:true,batch:l});s.length&&r.dispatchAction({type:"highlight",escapeConnect:true,batch:s})}function CA(t,e){for(var r=0;r<(t||[]).length;r++){var i=t[r];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex){return i}}}function LA(t){var e=t.axis.model;var r={};var i=r.axisDim=t.axis.dim;r.axisIndex=r[i+"AxisIndex"]=e.componentIndex;r.axisName=r[i+"AxisName"]=e.name;r.axisId=r[i+"AxisId"]=e.id;return r}function kA(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}var PA=id({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:false,triggerTooltip:true,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:true,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:false,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var NA=$a();var OA=L;function EA(t,e,r){if(n.node){return}var i=e.getZr();NA(i).records||(NA(i).records={});RA(i,e);var a=NA(i).records[t]||(NA(i).records[t]={});a.handler=r}function RA(t,e){if(NA(t).initialized){return}NA(t).initialized=true;r("click",R(VA,"click"));r("mousemove",R(VA,"mousemove"));r("globalout",BA);function r(r,i){t.on(r,function(r){var a=GA(e);OA(NA(t).records,function(t){t&&i(t,r,a.dispatchAction)});zA(a.pendings,e)})}}function zA(t,e){var r=t.showTip.length;var i=t.hideTip.length;var a;if(r){a=t.showTip[r-1]}else if(i){a=t.hideTip[i-1]}if(a){a.dispatchAction=null;e.dispatchAction(a)}}function BA(t,e,r){t.handler("leave",null,r)}function VA(t,e,r,i){e.handler(t,r,i)}function GA(t){var e={showTip:[],hideTip:[]};var r=function(i){var a=e[i.type];if(a){a.push(i)}else{i.dispatchAction=r;t.dispatchAction(i)}};return{dispatchAction:r,pendings:e}}function WA(t,e){if(n.node){return}var r=e.getZr();var i=(NA(r).records||{})[t];if(i){NA(r).records[t]=null}}var FA=ad({type:"axisPointer",render:function(t,e,r){var i=e.getComponent("tooltip");var a=t.get("triggerOn")||(i&&i.get("triggerOn")||"mousemove|click");EA("axisPointer",r,function(t,e,r){if(a!=="none"&&(t==="leave"||a.indexOf(t)>=0)){r({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})}})},remove:function(t,e){WA(e.getZr(),"axisPointer");FA.superApply(this._model,"remove",arguments)},dispose:function(t,e){WA("axisPointer",e);FA.superApply(this._model,"dispose",arguments)}});var HA=$a();var ZA=y;var UA=E;function XA(){}XA.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:false,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(t,e,r,i){var a=e.get("value");var n=e.get("status");this._axisModel=t;this._axisPointerModel=e;this._api=r;if(!i&&this._lastValue===a&&this._lastStatus===n){return}this._lastValue=a;this._lastStatus=n;var o=this._group;var s=this._handle;if(!n||n==="hide"){o&&o.hide();s&&s.hide();return}o&&o.show();s&&s.show();var l={};this.makeElOption(l,a,t,e,r);var u=l.graphicKey;if(u!==this._lastGraphicKey){this.clear(r)}this._lastGraphicKey=u;var h=this._moveAnimation=this.determineAnimation(t,e);if(!o){o=this._group=new fr;this.createPointerEl(o,l,t,e);this.createLabelEl(o,l,t,e);r.getZr().add(o)}else{var f=R(jA,e,h);this.updatePointerEl(o,l,f,e);this.updateLabelEl(o,l,f,e)}$A(o,e,true);this._renderHandle(a)},remove:function(t){this.clear(t)},dispose:function(t){this.clear(t)},determineAnimation:function(t,e){var r=e.get("animation");var i=t.axis;var a=i.type==="category";var n=e.get("snap");if(!n&&!a){return false}if(r==="auto"||r==null){var o=this.animationThreshold;if(a&&i.getBandWidth()>o){return true}if(n){var s=Py(t).seriesDataCount;var l=i.getExtent();return Math.abs(l[0]-l[1])/s>o}return false}return r===true},makeElOption:function(t,e,r,i,a){},createPointerEl:function(t,e,r,i){var a=e.pointer;if(a){var n=HA(t).pointerEl=new Ml[a.type](ZA(e.pointer));t.add(n)}},createLabelEl:function(t,e,r,i){if(e.label){var a=HA(t).labelEl=new xs(ZA(e.label));t.add(a);qA(a,i)}},updatePointerEl:function(t,e,r){var i=HA(t).pointerEl;if(i){i.setStyle(e.pointer.style);r(i,{shape:e.pointer.shape})}},updateLabelEl:function(t,e,r,i){var a=HA(t).labelEl;if(a){a.setStyle(e.label.style);r(a,{shape:e.label.shape,position:e.label.position});qA(a,i)}},_renderHandle:function(t){if(this._dragging||!this.updateHandleTransform){return}var e=this._axisPointerModel;var r=this._api.getZr();var i=this._handle;var a=e.getModel("handle");var n=e.get("status");if(!a.get("show")||!n||n==="hide"){i&&r.remove(i);this._handle=null;return}var o;if(!this._handle){o=true;i=this._handle=Sl(a.get("icon"),{cursor:"move",draggable:true,onmousemove:function(t){na(t.event)},onmousedown:UA(this._onHandleDragMove,this,0,0),drift:UA(this._onHandleDragMove,this),ondragend:UA(this._onHandleDragEnd,this)});r.add(i)}$A(i,e,false);var s=["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];i.setStyle(a.getItemStyle(null,s));var l=a.get("size");if(!z(l)){l=[l,l]}i.attr("scale",[l[0]/2,l[1]/2]);ec(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate");this._moveHandleToValue(t,o)},_moveHandleToValue:function(t,e){jA(this._axisPointerModel,!e&&this._moveAnimation,this._handle,KA(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(t,e){var r=this._handle;if(!r){return}this._dragging=true;var i=this.updateHandleTransform(KA(r),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i;r.stopAnimation();r.attr(KA(i));HA(r).lastProp=null;this._doDispatchAxisPointer()},_doDispatchAxisPointer:function(){var t=this._handle;if(!t){return}var e=this._payloadInfo;var r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})},_onHandleDragEnd:function(t){this._dragging=false;var e=this._handle;if(!e){return}var r=this._axisPointerModel.get("value");this._moveHandleToValue(r);this._api.dispatchAction({type:"hideTip"})},getHandleTransform:null,updateHandleTransform:null,clear:function(t){this._lastValue=null;this._lastStatus=null;var e=t.getZr();var r=this._group;var i=this._handle;if(e&&r){this._lastGraphicKey=null;r&&e.remove(r);i&&e.remove(i);this._group=null;this._handle=null;this._payloadInfo=null}},doClear:function(){},buildLabel:function(t,e,r){r=r||0;return{x:t[r],y:t[1-r],width:e[r],height:e[1-r]}}};XA.prototype.constructor=XA;function jA(t,e,r,i){if(!YA(HA(r).lastProp,i)){HA(r).lastProp=i;e?pl(r,i,t):(r.stopAnimation(),r.attr(i))}}function YA(t,e){if(G(t)&&G(e)){var r=true;L(e,function(e,i){r=r&&YA(t[i],e)});return!!r}else{return t===e}}function qA(t,e){t[e.get("label.show")?"show":"hide"]()}function KA(t){return{position:t.position.slice(),rotation:t.rotation||0}}function $A(t,e,r){var i=e.get("z");var a=e.get("zlevel");t&&t.traverse(function(t){if(t.type!=="group"){i!=null&&(t.z=i);a!=null&&(t.zlevel=a);t.silent=r}})}ln(XA);function JA(t){var e=t.get("type");var r=t.getModel(e+"Style");var i;if(e==="line"){i=r.getLineStyle();i.fill=null}else if(e==="shadow"){i=r.getAreaStyle();i.stroke=null}return i}function QA(t,e,r,i,a){var n=r.get("value");var o=eC(n,e.axis,e.ecModel,r.get("seriesDataIndices"),{precision:r.get("label.precision"),formatter:r.get("label.formatter")});var s=r.getModel("label");var l=su(s.get("padding")||0);var u=s.getFont();var h=$r(o,u);var f=a.position;var c=h.width+l[1]+l[3];var v=h.height+l[0]+l[2];var d=a.align;d==="right"&&(f[0]-=c);d==="center"&&(f[0]-=c/2);var p=a.verticalAlign;p==="bottom"&&(f[1]-=v);p==="middle"&&(f[1]-=v/2);tC(f,c,v,i);var g=s.get("backgroundColor");if(!g||g==="auto"){g=e.get("axisLine.lineStyle.color")}t.label={shape:{x:0,y:0,width:c,height:v,r:s.get("borderRadius")},position:f.slice(),style:{text:o,textFont:u,textFill:s.getTextColor(),textPosition:"inside",fill:g,stroke:s.get("borderColor")||"transparent",lineWidth:s.get("borderWidth")||0,shadowBlur:s.get("shadowBlur"),shadowColor:s.get("shadowColor"),shadowOffsetX:s.get("shadowOffsetX"),shadowOffsetY:s.get("shadowOffsetY")},z2:10}}function tC(t,e,r,i){var a=i.getWidth();var n=i.getHeight();t[0]=Math.min(t[0]+e,a)-e;t[1]=Math.min(t[1]+r,n)-r;t[0]=Math.max(t[0],0);t[1]=Math.max(t[1],0)}function eC(t,e,r,i,a){t=e.scale.parse(t);var n=e.scale.getLabel(t,{precision:a.precision});var o=a.formatter;if(o){var s={value:tg(e,t),seriesData:[]};L(i,function(t){var e=r.getSeriesByIndex(t.seriesIndex);var i=t.dataIndexInside;var a=e&&e.getDataParams(i);a&&s.seriesData.push(a)});if(V(o)){n=o.replace("{value}",n)}else if(B(o)){n=o(s)}}return n}function rC(t,e,r){var i=Zt();qt(i,i,r.rotation);Yt(i,i,r.position);return yl([t.dataToCoord(e),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],i)}function iC(t,e,r,i,a,n){var o=cy.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=a.get("label.margin");QA(e,i,a,n,{position:rC(i.axis,t,r),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function aC(t,e,r){r=r||0;return{x1:t[r],y1:t[1-r],x2:e[r],y2:e[1-r]}}function nC(t,e,r){r=r||0;return{x:t[r],y:t[1-r],width:e[r],height:e[1-r]}}function oC(t,e,r,i,a,n){return{cx:t,cy:e,r0:r,r:i,startAngle:a,endAngle:n,clockwise:true}}var sC=XA.extend({makeElOption:function(t,e,r,i,a){var n=r.axis;var o=n.grid;var s=i.get("type");var l=lC(o,n).getOtherAxis(n).getGlobalExtent();var u=n.toGlobalCoord(n.dataToCoord(e,true));if(s&&s!=="none"){var h=JA(i);var f=uC[s](n,u,l,h);f.style=h;t.graphicKey=f.type;t.pointer=f}var c=Gy(o.model,r);iC(e,t,c,r,i,a)},getHandleTransform:function(t,e,r){var i=Gy(e.axis.grid.model,e,{labelInside:false});i.labelMargin=r.get("handle.margin");return{position:rC(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,r,i){var a=r.axis;var n=a.grid;var o=a.getGlobalExtent(true);var s=lC(n,a).getOtherAxis(a).getGlobalExtent();var l=a.dim==="x"?0:1;var u=t.position;u[l]+=e[l];u[l]=Math.min(o[1],u[l]);u[l]=Math.max(o[0],u[l]);var h=(s[1]+s[0])/2;var f=[h,h];f[l]=u[l];var c=[{verticalAlign:"middle"},{align:"center"}];return{position:u,rotation:t.rotation,cursorPoint:f,tooltipOption:c[l]}}});function lC(t,e){var r={};r[e.dim+"AxisIndex"]=e.index;return t.getCartesian(r)}var uC={line:function(t,e,r,i){var a=aC([e,r[0]],[e,r[1]],hC(t));Fs({shape:a,style:i});return{type:"Line",shape:a}},shadow:function(t,e,r,i){var a=Math.max(1,t.getBandWidth());var n=r[1]-r[0];return{type:"Rect",shape:nC([e-a/2,r[0]],[a,n],hC(t))}}};function hC(t){return t.dim==="x"?0:1}Ry.registerAxisPointerClass("CartesianAxisPointer",sC);jv(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var e=t.axisPointer.link;if(e&&!z(e)){t.axisPointer.link=[e]}}});Yv(Kc.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=Iy(t,e)});Kv({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},wA);var fC=["x","y"];var cC=["width","height"];var vC=XA.extend({makeElOption:function(t,e,r,i,a){var n=r.axis;var o=n.coordinateSystem;var s=gC(o,1-pC(n));var l=o.dataToPoint(e)[0];var u=i.get("type");if(u&&u!=="none"){var h=JA(i);var f=dC[u](n,l,s,h);f.style=h;t.graphicKey=f.type;t.pointer=f}var c=hA(r);iC(e,t,c,r,i,a)},getHandleTransform:function(t,e,r){var i=hA(e,{labelInside:false});i.labelMargin=r.get("handle.margin");return{position:rC(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,r,i){var a=r.axis;var n=a.coordinateSystem;var o=pC(a);var s=gC(n,o);var l=t.position;l[o]+=e[o];l[o]=Math.min(s[1],l[o]);l[o]=Math.max(s[0],l[o]);var u=gC(n,1-o);var h=(u[1]+u[0])/2;var f=[h,h];f[o]=l[o];return{position:l,rotation:t.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}}});var dC={line:function(t,e,r,i){var a=aC([e,r[0]],[e,r[1]],pC(t));Fs({shape:a,style:i});return{type:"Line",shape:a}},shadow:function(t,e,r,i){var a=t.getBandWidth();var n=r[1]-r[0];return{type:"Rect",shape:nC([e-a/2,r[0]],[a,n],pC(t))}}};function pC(t){return t.isHorizontal()?0:1}function gC(t,e){var r=t.getRect();return[r[fC[e]],r[fC[e]]+r[cC[e]]]}Ry.registerAxisPointerClass("SingleAxisPointer",vC);ad({type:"single"});var mC=2;var yC=Lf.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(t){yC.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()}},fixData:function(t){var e=t.length;var r=JI().key(function(t){return t[2]}).entries(t);var i=k(r,function(t){return{name:t.key,dataList:t.values}});var a=i.length;var n=-1;var o=-1;for(var s=0;s<a;++s){var l=i[s].dataList.length;if(l>n){n=l;o=s}}for(var u=0;u<a;++u){if(u===o){continue}var h=i[u].name;for(var f=0;f<n;++f){var c=i[o].dataList[f][0];var v=i[u].dataList.length;var d=-1;for(var p=0;p<v;++p){var g=i[u].dataList[p][0];if(g===c){d=p;break}}if(d===-1){t[e]=[];t[e][0]=c;t[e][1]=0;t[e][2]=h;e++}}}return t},getInitialData:function(t,e){var r=e.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0];var i=r.get("type");var a=N(t.data,function(t){return t[2]!==undefined});var n=this.fixData(a||[]);var o=[];var s=this.nameMap=rt();var l=0;for(var u=0;u<n.length;++u){o.push(n[u][mC]);if(!s.get(n[u][mC])){s.set(n[u][mC],l);l++}}var h=Ud(n,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:gd(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}});var f=new Cd(h,this);f.initData(n);return f},getLayerSeries:function(){var t=this.getData();var e=t.count();var r=[];for(var i=0;i<e;++i){r[i]=i}var a=JI().key(function(e){return t.get("name",e)}).entries(r);var n=k(a,function(t){return{name:t.key,indices:t.values}});var o=t.mapDimension("single");for(var s=0;s<n.length;++s){n[s].indices.sort(l)}function l(e,r){return t.get(o,e)-t.get(o,r)}return n},getAxisTooltipData:function(t,e,r){if(!z(t)){t=t?[t]:[]}var i=this.getData();var a=this.getLayerSeries();var n=[];var o=a.length;var s;for(var l=0;l<o;++l){
var u=Number.MAX_VALUE;var h=-1;var f=a[l].indices.length;for(var c=0;c<f;++c){var v=i.get(t[0],a[l].indices[c]);var d=Math.abs(v-e);if(d<=u){s=v;u=d;h=a[l].indices[c]}}n.push(h)}return{dataIndices:n,nestestValue:s}},formatTooltip:function(t){var e=this.getData();var r=e.getName(t);var i=e.get(e.mapDimension("value"),t);if(isNaN(i)||i==null){i="-"}return hu(r+" : "+i)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:true,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:true}}}});od({type:"themeRiver",init:function(){this._layers=[]},render:function(t,e,r){var i=t.getData();var a=this.group;var n=t.getLayerSeries();var o=i.getLayout("layoutInfo");var s=o.rect;var l=o.boundaryGap;a.attr("position",[0,s.y+l[0]]);function u(t){return t.name}var h=new cd(this._layersSeries||[],n,u,u);var f={};h.add(E(c,this,"add")).update(E(c,this,"update")).remove(E(c,this,"remove")).execute();function c(e,r,o){var s=this._layers;if(e==="remove"){a.remove(s[r]);return}var l=[];var u=[];var h;var c=n[r].indices;for(var v=0;v<c.length;v++){var d=i.getItemLayout(c[v]);var p=d.x;var g=d.y0;var m=d.y;l.push([p,g]);u.push([p,g+m]);h=i.getItemVisual(c[v],"color")}var y;var x;var _=i.getItemLayout(c[0]);var b=i.getItemModel(c[v-1]);var S=b.getModel("label");var M=S.get("margin");if(e==="add"){var I=f[r]=new fr;y=new Dm({shape:{points:l,stackedOnPoints:u,smooth:.4,stackedOnSmooth:.4,smoothConstraint:false},z2:0});x=new ss({style:{x:_.x-M,y:_.y0+_.y/2}});I.add(y);I.add(x);a.add(I);y.setClipPath(xC(y.getBoundingRect(),t,function(){y.removeClipPath()}))}else{var I=s[o];y=I.childAt(0);x=I.childAt(1);a.add(I);f[r]=I;pl(y,{shape:{points:l,stackedOnPoints:u}},t);pl(x,{style:{x:_.x-M,y:_.y0+_.y/2}},t)}var T=b.getModel("emphasis.itemStyle");var D=b.getModel("itemStyle");nl(x.style,S,{text:S.get("show")?t.getFormattedLabel(c[v-1],"normal")||i.getName(c[v-1]):null,textVerticalAlign:"middle"});y.setStyle(w({fill:h},D.getItemStyle(["color"])));il(y,T.getItemStyle())}this._layersSeries=n;this._layers=f},dispose:function(){}});function xC(t,e,r){var i=new xs({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});gl(i,{shape:{width:t.width+20,height:t.height+20}},e,r);return i}var _C=function(t,e){t.eachSeriesByType("themeRiver",function(t){var e=t.getData();var r=t.coordinateSystem;var i={};var a=r.getRect();i.rect=a;var n=t.get("boundaryGap");var o=r.getAxis();i.boundaryGap=n;if(o.orient==="horizontal"){n[0]=Wl(n[0],a.height);n[1]=Wl(n[1],a.height);var s=a.height-n[0]-n[1];wC(e,t,s)}else{n[0]=Wl(n[0],a.width);n[1]=Wl(n[1],a.width);var l=a.width-n[0]-n[1];wC(e,t,l)}e.setLayout("layoutInfo",i)})};function wC(t,e,r){if(!t.count()){return}var i=e.coordinateSystem;var a=e.getLayerSeries();var n=t.mapDimension("single");var o=t.mapDimension("value");var s=k(a,function(e){return k(e.indices,function(e){var r=i.dataToPoint(t.get(n,e));r[1]=t.get(o,e);return r})});var l=bC(s);var u=l.y0;var h=r/l.max;var f=a.length;var c=a[0].indices.length;var v;for(var d=0;d<c;++d){v=u[d]*h;t.setItemLayout(a[0].indices[d],{layerIndex:0,x:s[0][d][0],y0:v,y:s[0][d][1]*h});for(var p=1;p<f;++p){v+=s[p-1][d][1]*h;t.setItemLayout(a[p].indices[d],{layerIndex:p,x:s[p][d][0],y0:v,y:s[p][d][1]*h})}}}function bC(t){var e=t.length;var r=t[0].length;var i=[];var a=[];var n=0;var o;var s={};for(var l=0;l<r;++l){for(var u=0,o=0;u<e;++u){o+=t[u][l][1]}if(o>n){n=o}i.push(o)}for(var h=0;h<r;++h){a[h]=(n-i[h])/2}n=0;for(var f=0;f<r;++f){var c=i[f]+a[f];if(c>n){n=c}}s.y0=a;s.max=n;return s}var SC=function(t){t.eachSeriesByType("themeRiver",function(t){var e=t.getData();var r=t.getRawData();var i=t.get("color");var a=rt();e.each(function(t){a.set(e.getRawIndex(t),t)});r.each(function(n){var o=r.getName(n);var s=i[(t.nameMap.get(o)-1)%i.length];r.setItemVisual(n,"color",s);var l=a.get(n);if(l!=null){e.setItemVisual(l,"color",s)}})})};Qv(_C);td(SC);Yv(bx("themeRiver"));Lf.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(t,e){var r={name:t.name,children:t.data};MC(r);var i=t.levels||[];var a={};a.levels=i;return U_.createTree(r,this,a).data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(t){var e=Lf.prototype.getDataParams.apply(this,arguments);var r=this.getData().tree.getNodeByDataIndex(t);e.treePathInfo=yw(r,this);return e},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:true,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:true,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:false,label:{rotate:"radial",show:true,opacity:1,align:"center",position:"inside",distance:5,silent:true,emphasis:{}},itemStyle:{borderWidth:1,borderColor:"white",opacity:1,emphasis:{},highlight:{opacity:1},downplay:{opacity:.9}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;if(!t||t!==e&&!e.contains(t)){this._viewRoot=e}}});function MC(t){var e=0;L(t.children,function(t){MC(t);var r=t.value;z(r)&&(r=r[0]);e+=r});var r=t.value;if(z(r)){r=r[0]}if(r==null||isNaN(r)){r=e}if(r<0){r=0}z(t.value)?t.value[0]=r:t.value=r}var IC={NONE:"none",DESCENDANT:"descendant",ANCESTOR:"ancestor",SELF:"self"};var TC=2;var DC=4;function AC(t,e,r){fr.call(this);var i=new fs({z2:TC});i.seriesIndex=e.seriesIndex;var a=new ss({z2:DC,silent:t.getModel("label").get("silent")});this.add(i);this.add(a);this.updateData(true,t,"normal",e,r);function n(){a.ignore=a.hoverIgnore}function o(){a.ignore=a.normalIgnore}this.on("emphasis",n).on("normal",o).on("mouseover",n).on("mouseout",o)}var CC=AC.prototype;CC.updateData=function(t,e,r,i,a){this.node=e;e.piece=this;i=i||this._seriesModel;a=a||this._ecModel;var n=this.childAt(0);n.dataIndex=e.dataIndex;var o=e.getModel();var s=e.getLayout();if(!s){console.log(e.getLayout())}var l=w({},s);l.label=null;var u=LC(e,i,a);var h=o.getModel("itemStyle").getItemStyle();var f;if(r==="normal"){f=h}else{var c=o.getModel(r+".itemStyle").getItemStyle();f=x(c,h)}f=b({lineJoin:"bevel",fill:f.fill||u},f);if(t){n.setShape(l);n.shape.r=s.r0;pl(n,{shape:{r:s.r}},i,e.dataIndex);n.useStyle(f)}else if(typeof f.fill==="object"&&f.fill.type||typeof n.style.fill==="object"&&n.style.fill.type){pl(n,{shape:l},i);n.useStyle(f)}else{pl(n,{shape:l,style:f},i)}this._updateLabel(i,u,r);var v=o.getShallow("cursor");v&&n.attr("cursor",v);if(t){var d=i.getShallow("highlightPolicy");this._initEvents(n,e,i,d)}this._seriesModel=i||this._seriesModel;this._ecModel=a||this._ecModel};CC.onEmphasis=function(t){var e=this;this.node.hostTree.root.eachNode(function(r){if(r.piece){if(e.node===r){r.piece.updateData(false,r,"emphasis")}else if(PC(r,e.node,t)){r.piece.childAt(0).trigger("highlight")}else if(t!==IC.NONE){r.piece.childAt(0).trigger("downplay")}}})};CC.onNormal=function(){this.node.hostTree.root.eachNode(function(t){if(t.piece){t.piece.updateData(false,t,"normal")}})};CC.onHighlight=function(){this.updateData(false,this.node,"highlight")};CC.onDownplay=function(){this.updateData(false,this.node,"downplay")};CC._updateLabel=function(t,e,r){var i=this.node.getModel();var a=i.getModel("label");var n=r==="normal"||r==="emphasis"?a:i.getModel(r+".label");var o=i.getModel("emphasis.label");var s=U(t.getFormattedLabel(this.node.dataIndex,"normal",null,null,"label"),this.node.name);if(S("show")===false){s=""}var l=this.node.getLayout();var u=n.get("minAngle");if(u==null){u=a.get("minAngle")}u=u/180*Math.PI;var h=l.endAngle-l.startAngle;if(u!=null&&Math.abs(h)<u){s=""}var f=this.childAt(1);al(f.style,f.hoverStyle||{},a,o,{defaultText:n.getShallow("show")?s:null,autoColor:e,useInsideStyle:true});var c=(l.startAngle+l.endAngle)/2;var v=Math.cos(c);var d=Math.sin(c);var p;var g=S("position");var m=S("distance")||0;var y=S("align");if(g==="outside"){p=l.r+m;y=c>Math.PI/2?"right":"left"}else{if(!y||y==="center"){p=(l.r+l.r0)/2;y="center"}else if(y==="left"){p=l.r0+m;if(c>Math.PI/2){y="right"}}else if(y==="right"){p=l.r-m;if(c>Math.PI/2){y="left"}}}f.attr("style",{text:s,textAlign:y,textVerticalAlign:S("verticalAlign")||"middle",opacity:S("opacity")});var x=p*v+l.cx;var _=p*d+l.cy;f.attr("position",[x,_]);var w=S("rotate");var b=0;if(w==="radial"){b=-c;if(b<-Math.PI/2){b+=Math.PI}}else if(w==="tangential"){b=Math.PI/2-c;if(b>Math.PI/2){b-=Math.PI}else if(b<-Math.PI/2){b+=Math.PI}}else if(typeof w==="number"){b=w*Math.PI/180}f.attr("rotation",b);function S(t){var e=n.get(t);if(e==null){return a.get(t)}else{return e}}};CC._initEvents=function(t,e,r,i){t.off("mouseover").off("mouseout").off("emphasis").off("normal");var a=this;var n=function(){a.onEmphasis(i)};var o=function(){a.onNormal()};var s=function(){a.onDownplay()};var l=function(){a.onHighlight()};if(r.isAnimationEnabled()){t.on("mouseover",n).on("mouseout",o).on("emphasis",n).on("normal",o).on("downplay",s).on("highlight",l)}};D(AC,fr);function LC(t,e,r){var i=t.getVisual("color");var a=t.getVisual("visualMeta");if(!a||a.length===0){i=null}var n=t.getModel("itemStyle").get("color");if(n){return n}else if(i){return i}else if(t.depth===0){return r.option.color[0]}else{var o=r.option.color.length;n=r.option.color[kC(t)%o]}return n}function kC(t){var e=t;while(e.depth>1){e=e.parentNode}var r=t.getAncestors()[0];return T(r.children,e)}function PC(t,e,r){if(r===IC.NONE){return false}else if(r===IC.SELF){return t===e}else if(r===IC.ANCESTOR){return t===e||t.isAncestorOf(e)}else{return t===e||t.isDescendantOf(e)}}var NC="sunburstRootToNode";var OC=Zf.extend({type:"sunburst",init:function(){},render:function(t,e,r,i){var a=this;this.seriesModel=t;this.api=r;this.ecModel=e;var n=t.getData();var o=n.tree.root;var s=t.getViewRoot();var l=this.group;var u=t.get("renderLabelForZeroData");var h=[];s.eachNode(function(t){h.push(t)});var f=this._oldChildren||[];d(h,f);m(o,s);if(i&&i.highlight&&i.highlight.piece){var c=t.getShallow("highlightPolicy");i.highlight.piece.onEmphasis(c)}else if(i&&i.unhighlight){var v=this.virtualPiece;if(!v&&o.children.length){v=o.children[0].piece}if(v){v.onNormal()}}this._initEvents();this._oldChildren=h;function d(t,e){if(t.length===0&&e.length===0){return}new cd(e,t,r,r).add(i).update(i).remove(R(i,null)).execute();function r(t){return t.getId()}function i(r,i){var a=r==null?null:t[r];var n=i==null?null:e[i];p(a,n)}}function p(r,i){if(!u&&r&&!r.getValue()){r=null}if(r!==o&&i!==o){if(i&&i.piece){if(r){i.piece.updateData(false,r,"normal",t,e);n.setItemGraphicEl(r.dataIndex,i.piece)}else{g(i)}}else if(r){var a=new AC(r,t,e);l.add(a);n.setItemGraphicEl(r.dataIndex,a)}}}function g(t){if(!t){return}if(t.piece){l.remove(t.piece);t.piece=null}}function m(r,i){if(i.depth>0){if(a.virtualPiece){a.virtualPiece.updateData(false,r,"normal",t,e)}else{a.virtualPiece=new AC(r,t,e);l.add(a.virtualPiece)}if(i.piece._onclickEvent){i.piece.off("click",i.piece._onclickEvent)}var n=function(t){a._rootToNode(i.parentNode)};i.piece._onclickEvent=n;a.virtualPiece.on("click",n)}else if(a.virtualPiece){l.remove(a.virtualPiece);a.virtualPiece=null}}},dispose:function(){},_initEvents:function(){var t=this;var e=function(e){var r=false;var i=t.seriesModel.getViewRoot();i.eachNode(function(i){if(!r&&i.piece&&i.piece.childAt(0)===e.target){var a=i.getModel().get("nodeClick");if(a==="rootToNode"){t._rootToNode(i)}else if(a==="link"){var n=i.getModel();var o=n.get("link");if(o){var s=n.get("target",true)||"_blank";window.open(o,s)}}r=true}})};if(this.group._onclickEvent){this.group.off("click",this.group._onclickEvent)}this.group.on("click",e);this.group._onclickEvent=e},_rootToNode:function(t){if(t!==this.seriesModel.getViewRoot()){this.api.dispatchAction({type:NC,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})}},containPoint:function(t,e){var r=e.getData();var i=r.getItemLayout(0);if(i){var a=t[0]-i.cx;var n=t[1]-i.cy;var o=Math.sqrt(a*a+n*n);return o<=i.r&&o>=i.r0}}});var EC="sunburstRootToNode";Kv({type:EC,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},r);function r(e,r){var i=pw(t,[EC],e);if(i){var a=e.getViewRoot();if(a){t.direction=mw(a,i.node)?"rollUp":"drillDown"}e.resetViewRoot(i.node)}}});var RC="sunburstHighlight";Kv({type:RC,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},r);function r(e,r){var i=pw(t,[RC],e);if(i){t.highlight=i.node}}});var zC="sunburstUnhighlight";Kv({type:zC,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},r);function r(e,r){t.unhighlight=true}});var BC=Math.PI/180;var VC=function(t,e,r,i){e.eachSeriesByType(t,function(t){var e=t.get("center");var i=t.get("radius");if(!z(i)){i=[0,i]}if(!z(e)){e=[e,e]}var a=r.getWidth();var n=r.getHeight();var o=Math.min(a,n);var s=Wl(e[0],a);var l=Wl(e[1],n);var u=Wl(i[0],o/2);var h=Wl(i[1],o/2);var f=-t.get("startAngle")*BC;var c=t.get("minAngle")*BC;var v=t.getData().tree.root;var d=t.getViewRoot();var p=d.depth;var g=t.get("sort");if(g!=null){GC(d,g)}var m=0;L(d.children,function(t){!isNaN(t.getValue())&&m++});var y=d.getValue();var x=Math.PI/(y||m)*2;var _=d.depth>0;var w=d.height-(_?-1:1);var b=(h-u)/(w||1);var S=t.get("clockwise");var M=t.get("stillShowZeroSum");var I=S?1:-1;var T=function(t,e){if(!t){return}var r=e;if(t!==v){var i=t.getValue();var a=y===0&&M?x:i*x;if(a<c){a=c}else{}r=e+I*a;var n=t.depth-p-(_?-1:1);var h=u+b*n;var f=u+b*(n+1);var d=t.getModel();if(d.get("r0")!=null){h=Wl(d.get("r0"),o/2)}if(d.get("r")!=null){f=Wl(d.get("r"),o/2)}t.setLayout({angle:a,startAngle:e,endAngle:r,clockwise:S,cx:s,cy:l,r0:h,r:f})}if(t.children&&t.children.length){var g=0;L(t.children,function(t){g+=T(t,e+g)})}return r-e};if(_){var D=u;var A=u+b;var C=Math.PI*2;v.setLayout({angle:C,startAngle:f,endAngle:f+C,clockwise:S,cx:s,cy:l,r0:D,r:A})}T(d,f)})};function GC(t,e){var r=t.children||[];t.children=WC(r,e);if(r.length){L(t.children,function(t){GC(t,e)})}}function WC(t,e){if(typeof e==="function"){return t.sort(e)}else{var r=e==="asc";return t.sort(function(t,e){var i=(t.getValue()-e.getValue())*(r?1:-1);return i===0?(t.dataIndex-e.dataIndex)*(r?-1:1):i})}}td(R(dx,"sunburst"));Qv(R(VC,"sunburst"));Yv(R(bx,"sunburst"));function FC(t,e){e=e||[0,0];return k(["x","y"],function(r,i){var a=this.getAxis(r);var n=e[i];var o=t[i]/2;return a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(n-o)-a.dataToCoord(n+o))},this)}var HC=function(t){var e=t.grid.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:E(FC,t)}}};function ZC(t,e){e=e||[0,0];return k([0,1],function(r){var i=e[r];var a=t[r]/2;var n=[];var o=[];n[r]=i-a;o[r]=i+a;n[1-r]=o[1-r]=e[1-r];return Math.abs(this.dataToPoint(n)[r]-this.dataToPoint(o)[r])},this)}var UC=function(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:E(ZC,t)}}};function XC(t,e){var r=this.getAxis();var i=e instanceof Array?e[0]:e;var a=(t instanceof Array?t[0]:t)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(i-a)-r.dataToCoord(i+a))}var jC=function(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:E(XC,t)}}};function YC(t,e){return k(["Radius","Angle"],function(r,i){var a=this["get"+r+"Axis"]();var n=e[i];var o=t[i]/2;var s="dataTo"+r;var l=a.type==="category"?a.getBandWidth():Math.abs(a[s](n-o)-a[s](n+o));if(r==="Angle"){l=l*Math.PI/180}return l},this)}var qC=function(t){var e=t.getRadiusAxis();var r=t.getAngleAxis();var i=e.getExtent();i[0]>i[1]&&i.reverse();return{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:i[1],r0:i[0]},api:{coord:E(function(i){var a=e.dataToRadius(i[0]);var n=r.dataToAngle(i[1]);var o=t.coordToPoint([a,n]);o.push(a,n*Math.PI/180);return o}),size:E(YC,t)}}};var KC=function(t){var e=t.getRect();var r=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(e,r){return t.dataToPoint(e,r)}}}};var $C=["itemStyle"];var JC=["emphasis","itemStyle"];var QC=["label"];var tL=["emphasis","label"];var eL="e\0\0";var rL={cartesian2d:HC,geo:UC,singleAxis:jC,polar:qC,calendar:KC};nd({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:true},getInitialData:function(t,e){return qd(this.getSource(),this)}});od({type:"custom",_data:null,render:function(t,e,r){var i=this._data;var a=t.getData();var n=this.group;var o=oL(t,a,e,r);this.group.removeAll();a.diff(i).add(function(e){lL(null,e,o(e),t,n,a)}).update(function(e,r){var s=i.getItemGraphicEl(r);lL(s,e,o(e),t,n,a)}).remove(function(t){var e=i.getItemGraphicEl(t);e&&n.remove(e)}).execute();this._data=a},incrementalPrepareRender:function(t,e,r){this.group.removeAll();this._data=null},incrementalRender:function(t,e,r,i){var a=e.getData();var n=oL(e,a,r,i);function o(t){if(!t.isGroup){t.incremental=true;t.useHoverLayer=true}}for(var s=t.start;s<t.end;s++){var l=lL(null,s,n(s),e,this.group,a);l.traverse(o)}},dispose:at});function iL(t){var r=t.type;var i;if(r==="path"){var a=t.shape;i=zs(a.pathData,null,{x:a.x||0,y:a.y||0,width:a.width||0,height:a.height||0},"center");i.__customPathData=t.pathData}else if(r==="image"){i=new zi({});i.__customImagePath=t.style.image}else if(r==="text"){i=new ss({});i.__customText=t.style.text}else{var n=Ml[r.charAt(0).toUpperCase()+r.slice(1)];if(e){K(n,'graphic type "'+r+'" can not be found.')}i=new n}i.__customGraphicType=r;i.name=t.name;return i}function aL(t,e,r,i,a,n){var o={};var s=r.style||{};r.shape&&(o.shape=y(r.shape));r.position&&(o.position=r.position.slice());r.scale&&(o.scale=r.scale.slice());r.origin&&(o.origin=r.origin.slice());r.rotation&&(o.rotation=r.rotation);if(t.type==="image"&&r.style){var l=o.style={};L(["x","y","width","height"],function(e){nL(e,l,s,t.style,n)})}if(t.type==="text"&&r.style){var l=o.style={};L(["x","y"],function(e){nL(e,l,s,t.style,n)});!s.hasOwnProperty("textFill")&&s.fill&&(s.textFill=s.fill);!s.hasOwnProperty("textStroke")&&s.stroke&&(s.textStroke=s.stroke)}if(t.type!=="group"){t.useStyle(s);if(n){t.style.opacity=0;var u=s.opacity;u==null&&(u=1);gl(t,{style:{opacity:u}},i,e)}}if(n){t.attr(o)}else{pl(t,o,i,e)}t.attr({z2:r.z2||0,silent:r.silent});r.styleEmphasis!==false&&il(t,r.styleEmphasis)}function nL(t,e,r,i,a){if(r[t]!=null&&!a){e[t]=r[t];r[t]=i[t]}}function oL(t,r,i,a){var n=t.get("renderItem");var o=t.coordinateSystem;var s={};if(o){if(e){K(n,"series.render is required.");K(o.prepareCustoms||rL[o.type],"This coordSys does not support custom series.")}s=o.prepareCustoms?o.prepareCustoms():rL[o.type](o)}var l=b({getWidth:a.getWidth,getHeight:a.getHeight,getZr:a.getZr,getDevicePixelRatio:a.getDevicePixelRatio,value:m,style:y,styleEmphasis:x,visual:_,barLayout:S,currentSeriesIndices:M,font:I},s.api||{});var u={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:s.coordSys,dataInsideLength:r.count(),encode:sL(t.getData())};var h;var f=true;var c;var v;var d;var p;return function(t){h=t;f=true;return n&&n(b({dataIndexInside:t,dataIndex:r.getRawIndex(t)},u),l)||{}};function g(t){t==null&&(t=h);if(f){c=r.getItemModel(t);v=c.getModel(QC);d=c.getModel(tL);p=r.getItemVisual(t,"color");f=false}}function m(t,e){e==null&&(e=h);return r.get(r.getDimension(t||0),e)}function y(e,i){i==null&&(i=h);g(i);var a=c.getModel($C).getItemStyle();p!=null&&(a.fill=p);var n=r.getItemVisual(i,"opacity");n!=null&&(a.opacity=n);nl(a,v,null,{autoColor:p,isRectText:true});a.text=v.getShallow("show")?X(t.getFormattedLabel(i,"normal"),Yg(r,i)):null;e&&w(a,e);return a}function x(e,i){i==null&&(i=h);g(i);var a=c.getModel(JC).getItemStyle();nl(a,d,null,{isRectText:true},true);a.text=d.getShallow("show")?j(t.getFormattedLabel(i,"emphasis"),t.getFormattedLabel(i,"normal"),Yg(r,i)):null;e&&w(a,e);return a}function _(t,e){e==null&&(e=h);return r.getItemVisual(e,t)}function S(t){if(o.getBaseAxis){var e=o.getBaseAxis();return yp(b({axis:e},t),a)}}function M(){return i.getCurrentSeriesIndices()}function I(t){return vl(t,i)}}function sL(t){var e={};L(t.dimensions,function(r,i){var a=t.getDimensionInfo(r);if(!a.isExtraCoord){var n=a.coordDim;var o=e[n]=e[n]||[];o[a.coordDimIndex]=i}});return e}function lL(t,e,r,i,a,n){t=uL(t,e,r,i,a,n);t&&n.setItemGraphicEl(e,t);return t}function uL(t,e,r,i,a,n){var o=r.type;if(t&&o!==t.__customGraphicType&&(o!=="path"||r.pathData!==t.__customPathData)&&(o!=="image"||r.style.image!==t.__customImagePath)&&(o!=="text"||r.style.text!==t.__customText)){a.remove(t);t=null}if(o==null){return}var s=!t;!t&&(t=iL(r));aL(t,e,r,i,n,s);if(o==="group"){var l=t.children()||[];var u=r.children||[];if(r.diffChildrenByName){hL({oldChildren:l,newChildren:u,dataIndex:e,animatableModel:i,group:t,data:n})}else{var h=0;for(;h<u.length;h++){uL(t.childAt(h),e,u[h],i,t,n)}for(;h<l.length;h++){l[h]&&t.remove(l[h])}}}a.add(t);return t}function hL(t){new cd(t.oldChildren,t.newChildren,fL,fL,t).add(cL).update(cL).remove(vL).execute()}function fL(t,e){var r=t&&t.name;return r!=null?r:eL+e}function cL(t,e){var r=this.context;var i=t!=null?r.newChildren[t]:null;var a=e!=null?r.oldChildren[e]:null;uL(a,r.dataIndex,i,r.animatableModel,r.group,r.data)}function vL(t){var e=this.context;var r=e.oldChildren[t];r&&e.group.remove(r)}jv(function(t){var e=t.graphic;if(z(e)){if(!e[0]||!e[0].elements){t.graphic=[{elements:e}]}else{t.graphic=[t.graphic[0]]}}else if(e&&!e.elements){t.graphic=[{elements:[e]}]}});var dL=id({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(t){var e=this.option.elements;this.option.elements=null;dL.superApply(this,"mergeOption",arguments);this.option.elements=e},optionUpdated:function(t,r){var i=this.option;var a=(r?i:t).elements;var n=i.elements=r?[]:i.elements;var o=[];this._flatten(a,o);var s=Ua(n,o);Xa(s);var l=this._elOptionsToUpdate=[];L(s,function(t,r){var i=t.option;if(e){K(G(i)||t.exist,"Empty graphic option definition")}if(!i){return}l.push(i);xL(t,i);_L(n,r,i);wL(n[r],i)},this);for(var u=n.length-1;u>=0;u--){if(n[u]==null){n.splice(u,1)}else{delete n[u].$action}}},_flatten:function(t,e,r){L(t,function(t){if(!t){return}if(r){t.parentOption=r}e.push(t);var i=t.children;if(t.type==="group"&&i){this._flatten(i,e,t)}delete t.children},this)},useElOptionsToUpdate:function(){var t=this._elOptionsToUpdate;this._elOptionsToUpdate=null;return t}});ad({type:"graphic",init:function(t,e){this._elMap=rt();this._lastGraphicModel},render:function(t,e,r){if(t!==this._lastGraphicModel){this._clear()}this._lastGraphicModel=t;this._updateElements(t,r);this._relocate(t,r)},_updateElements:function(t,r){var i=t.useElOptionsToUpdate();if(!i){return}var a=this._elMap;var n=this.group;L(i,function(t){var r=t.$action;var i=t.id;var o=a.get(i);var s=t.parentId;var l=s!=null?a.get(s):n;if(t.type==="text"){var u=t.style;if(t.hv&&t.hv[1]){u.textVerticalAlign=u.textBaseline=null}!u.hasOwnProperty("textFill")&&u.fill&&(u.textFill=u.fill);!u.hasOwnProperty("textStroke")&&u.stroke&&(u.textStroke=u.stroke)}var h=mL(t);if(e){o&&K(l===o.parent,"Changing parent is not supported.")}if(!r||r==="merge"){o?o.attr(h):pL(i,l,h,a)}else if(r==="replace"){gL(o,a);pL(i,l,h,a)}else if(r==="remove"){gL(o,a)}var f=a.get(i);if(f){f.__ecGraphicWidth=t.width;f.__ecGraphicHeight=t.height}})},_relocate:function(t,e){var r=t.option.elements;var i=this.group;var a=this._elMap;for(var n=r.length-1;n>=0;n--){var o=r[n];var s=a.get(o.id);if(!s){continue}var l=s.parent;var u=l===i?{width:e.getWidth(),height:e.getHeight()}:{width:l.__ecGraphicWidth||0,height:l.__ecGraphicHeight||0};ku(s,o,u,null,{hv:o.hv,boundingMode:o.bounding})}},_clear:function(){var t=this._elMap;t.each(function(e){gL(e,t)});this._elMap=rt()},dispose:function(){this._clear()}});function pL(t,r,i,a){var n=i.type;if(e){K(n,"graphic type MUST be set")}var o=Ml[n.charAt(0).toUpperCase()+n.slice(1)];if(e){K(o,"graphic type can not be found")}var s=new o(i);r.add(s);a.set(t,s);s.__ecGraphicId=t}function gL(t,e){var r=t&&t.parent;if(r){t.type==="group"&&t.traverse(function(t){gL(t,e)});e.removeKey(t.__ecGraphicId);r.remove(t)}}function mL(t){t=w({},t);L(["id","parentId","$action","hv","bounding"].concat(Su),function(e){delete t[e]});return t}function yL(t,e){var r;L(e,function(e){t[e]!=null&&t[e]!=="auto"&&(r=true)});return r}function xL(t,e){var r=t.exist;e.id=t.keyInfo.id;!e.type&&r&&(e.type=r.type);if(e.parentId==null){var i=e.parentOption;if(i){e.parentId=i.id}else if(r){e.parentId=r.parentId}}e.parentOption=null}function _L(t,r,i){var a=w({},i);var n=t[r];var o=i.$action||"merge";if(o==="merge"){if(n){if(e){var s=i.type;K(!s||n.type===s,'Please set $action: "replace" to change `type`')}x(n,a,true);Nu(n,a,{ignoreSize:true});Eu(i,n)}else{t[r]=a}}else if(o==="replace"){t[r]=a}else if(o==="remove"){n&&(t[r]=null)}}function wL(t,e){if(!t){return}t.hv=e.hv=[yL(e,["left","right"]),yL(e,["top","bottom"])];if(t.type==="group"){t.width==null&&(t.width=e.width=0);t.height==null&&(t.height=e.height=0)}}var bL=id({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:true},init:function(t,e,r){this.mergeDefaultAndTheme(t,r);t.selected=t.selected||{}},mergeOption:function(t){bL.superCall(this,"mergeOption",t)},optionUpdated:function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){var e=false;for(var r=0;r<t.length;r++){var i=t[r].get("name");if(this.isSelected(i)){this.select(i);e=true;break}}!e&&this.select(t[0].get("name"))}},_updateData:function(t){var e=[];var r=[];t.eachRawSeries(function(i){var a=i.name;r.push(a);var n;if(i.legendDataProvider){var o=i.legendDataProvider();var s=o.mapArray(o.getName);if(!t.isSeriesFiltered(i)){r=r.concat(s)}if(s.length){e=e.concat(s)}else{n=true}}else{n=true}if(n&&ja(i)){e.push(i.name)}});this._availableNames=r;var i=this.get("data")||e;var a=k(i,function(t){if(typeof t==="string"||typeof t==="number"){t={name:t}}return new kl(t,this,this.ecModel)},this);this._data=a},getData:function(){return this._data},select:function(t){var e=this.option.selected;var r=this.get("selectedMode");if(r==="single"){var i=this._data;L(i,function(t){e[t.get("name")]=false})}e[t]=true},unSelect:function(t){if(this.get("selectedMode")!=="single"){this.option.selected[t]=false}},toggleSelected:function(t){var e=this.option.selected;if(!e.hasOwnProperty(t)){e[t]=true}this[e[t]?"unSelect":"select"](t)},isSelected:function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&T(this._availableNames,t)>=0},defaultOption:{zlevel:0,z:4,show:true,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:true,tooltip:{show:false}}});function SL(t,e,r){var i={};var a=t==="toggleSelected";var n;r.eachComponent("legend",function(r){if(a&&n!=null){r[n?"select":"unSelect"](e.name)}else{r[t](e.name);n=r.isSelected(e.name)}var o=r.getData();L(o,function(t){var e=t.get("name");if(e==="\n"||e===""){return}var a=r.isSelected(e);if(i.hasOwnProperty(e)){i[e]=i[e]&&a}else{i[e]=a}})});return{name:e.name,selected:i}}Kv("legendToggleSelect","legendselectchanged",R(SL,"toggleSelected"));Kv("legendSelect","legendselected",R(SL,"select"));Kv("legendUnSelect","legendunselected",R(SL,"unSelect"));function ML(t,e,r){var i=e.getBoxLayoutParams();var a=e.get("padding");var n={width:r.getWidth(),height:r.getHeight()};var o=Lu(i,n,a);Tu(e.get("orient"),t,e.get("itemGap"),o.width,o.height);ku(t,i,n,a)}function IL(t,e){var r=su(e.get("padding"));var i=e.getItemStyle(["color","opacity"]);i.fill=e.get("backgroundColor");var t=new xs({shape:{x:t.x-r[3],y:t.y-r[0],width:t.width+r[1]+r[3],height:t.height+r[0]+r[2],r:e.get("borderRadius")},style:i,silent:true,z2:-1});return t}var TL=R;var DL=L;var AL=fr;var CL=ad({type:"legend.plain",newlineDisabled:false,init:function(){this.group.add(this._contentGroup=new AL);this._backgroundEl},getContentGroup:function(){return this._contentGroup},render:function(t,e,r){this.resetInner();if(!t.get("show",true)){return}var i=t.get("align");if(!i||i==="auto"){i=t.get("left")==="right"&&t.get("orient")==="vertical"?"right":"left"}this.renderInner(i,t,e,r);var a=t.getBoxLayoutParams();var n={width:r.getWidth(),height:r.getHeight()};var o=t.get("padding");var s=Lu(a,n,o);var l=this.layoutInner(t,i,s);var u=Lu(b({width:l.width,height:l.height},a),n,o);this.group.attr("position",[u.x-l.x,u.y-l.y]);this.group.add(this._backgroundEl=IL(l,t))},resetInner:function(){this.getContentGroup().removeAll();this._backgroundEl&&this.group.remove(this._backgroundEl)},renderInner:function(t,r,i,a){var n=this.getContentGroup();var o=rt();var s=r.get("selectedMode");var l=[];i.eachRawSeries(function(t){!t.get("legendHoverLink")&&l.push(t.id)});DL(r.getData(),function(u,h){var f=u.get("name");if(!this.newlineDisabled&&(f===""||f==="\n")){n.add(new AL({newline:true}));return}var c=i.getSeriesByName(f)[0];if(o.get(f)){return}if(c){var v=c.getData();var d=v.getVisual("color");if(typeof d==="function"){d=d(c.getDataParams(0))}var p=v.getVisual("legendSymbol")||"roundRect";var g=v.getVisual("symbol");var m=this._createItem(f,h,u,r,p,g,t,d,s);m.on("click",TL(LL,f,a)).on("mouseover",TL(kL,c,null,a,l)).on("mouseout",TL(PL,c,null,a,l));o.set(f,true)}else{i.eachRawSeries(function(e){if(o.get(f)){return}if(e.legendDataProvider){var i=e.legendDataProvider();var n=i.indexOfName(f);if(n<0){return}var c=i.getItemVisual(n,"color");var v="roundRect";var d=this._createItem(f,h,u,r,v,null,t,c,s);d.on("click",TL(LL,f,a)).on("mouseover",TL(kL,e,f,a,l)).on("mouseout",TL(PL,e,f,a,l));o.set(f,true)}},this)}if(e){if(!o.get(f)){console.warn(f+" series not exists. Legend data should be same with series name or data name.")}}},this)},_createItem:function(t,e,r,i,a,n,o,s,l){var u=i.get("itemWidth");var h=i.get("itemHeight");var f=i.get("inactiveColor");var c=i.get("symbolKeepAspect");var v=i.isSelected(t);var d=new AL;var p=r.getModel("textStyle");var g=r.get("icon");var m=r.getModel("tooltip");var y=m.parentModel;a=g||a;d.add(vg(a,0,0,u,h,v?s:f,c==null?true:c));if(!g&&n&&(n!==a||n=="none")){var x=h*.8;if(n==="none"){n="circle"}d.add(vg(n,(u-x)/2,(h-x)/2,x,x,v?s:f,c==null?true:c))}var _=o==="left"?u+5:-5;var b=o;var S=i.get("formatter");var M=t;if(typeof S==="string"&&S){M=S.replace("{name}",t!=null?t:"")}else if(typeof S==="function"){M=S(t)}d.add(new ss({style:nl({},p,{text:M,x:_,y:h/2,textFill:v?p.getTextColor():f,textAlign:b,textVerticalAlign:"middle"})}));var I=new xs({shape:d.getBoundingRect(),invisible:true,tooltip:m.get("show")?w({content:t,formatter:y.get("formatter",true)||function(){return t},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:t,$vars:["name"]}},m.option):null});d.add(I);d.eachChild(function(t){t.silent=true});I.silent=!l;this.getContentGroup().add(d);il(d);d.__legendDataIndex=e;return d},layoutInner:function(t,e,r){var i=this.getContentGroup();Tu(t.get("orient"),i,t.get("itemGap"),r.width,r.height);var a=i.getBoundingRect();i.attr("position",[-a.x,-a.y]);return this.group.getBoundingRect()}});function LL(t,e){e.dispatchAction({type:"legendToggleSelect",name:t})}function kL(t,e,r,i){var a=r.getZr().storage.getDisplayList()[0];if(!(a&&a.useHoverLayer)){r.dispatchAction({type:"highlight",seriesName:t.name,name:e,excludeSeriesId:i})}}function PL(t,e,r,i){var a=r.getZr().storage.getDisplayList()[0];if(!(a&&a.useHoverLayer)){r.dispatchAction({type:"downplay",seriesName:t.name,
name:e,excludeSeriesId:i})}}var NL=function(t){var e=t.findComponents({mainType:"legend"});if(e&&e.length){t.filterSeries(function(t){for(var r=0;r<e.length;r++){if(!e[r].isSelected(t.name)){return false}}return true})}};Yv(NL);Bu.registerSubTypeDefaulter("legend",function(){return"plain"});var OL=bL.extend({type:"legend.scroll",setScrollDataIndex:function(t){this.option.scrollDataIndex=t},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(t,e,r,i){var a=Ou(t);OL.superCall(this,"init",t,e,r,i);EL(this,t,a)},mergeOption:function(t,e){OL.superCall(this,"mergeOption",t,e);EL(this,this.option,t)},getOrient:function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}}});function EL(t,e,r){var i=t.getOrient();var a=[1,1];a[i.index]=0;Nu(e,r,{type:"box",ignoreSize:a})}var RL=fr;var zL=["width","height"];var BL=["x","y"];var VL=CL.extend({type:"legend.scroll",newlineDisabled:true,init:function(){VL.superCall(this,"init");this._currentIndex=0;this.group.add(this._containerGroup=new RL);this._containerGroup.add(this.getContentGroup());this.group.add(this._controllerGroup=new RL);this._showController},resetInner:function(){VL.superCall(this,"resetInner");this._controllerGroup.removeAll();this._containerGroup.removeClipPath();this._containerGroup.__rectSize=null},renderInner:function(t,e,r,i){var a=this;VL.superCall(this,"renderInner",t,e,r,i);var n=this._controllerGroup;var o=e.get("pageIconSize",true);if(!z(o)){o=[o,o]}l("pagePrev",0);var s=e.getModel("pageTextStyle");n.add(new ss({name:"pageText",style:{textFill:s.getTextColor(),font:s.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:true}));l("pageNext",1);function l(t,r){var s=t+"DataIndex";var l=Sl(e.get("pageIcons",true)[e.getOrient().name][r],{onclick:E(a._pageGo,a,s,e,i)},{x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]});l.name=t;n.add(l)}},layoutInner:function(t,e,r){var i=this.getContentGroup();var a=this._containerGroup;var n=this._controllerGroup;var o=t.getOrient().index;var s=zL[o];var l=zL[1-o];var u=BL[1-o];Tu(t.get("orient"),i,t.get("itemGap"),!o?null:r.width,o?null:r.height);Tu("horizontal",n,t.get("pageButtonItemGap",true));var h=i.getBoundingRect();var f=n.getBoundingRect();var c=this._showController=h[s]>r[s];var v=[-h.x,-h.y];v[o]=i.position[o];var d=[0,0];var p=[-f.x,-f.y];var g=X(t.get("pageButtonGap",true),t.get("itemGap",true));if(c){var m=t.get("pageButtonPosition",true);if(m==="end"){p[o]+=r[s]-f[s]}else{d[o]+=f[s]+g}}p[1-o]+=h[l]/2-f[l]/2;i.attr("position",v);a.attr("position",d);n.attr("position",p);var y=this.group.getBoundingRect();var y={x:0,y:0};y[s]=c?r[s]:h[s];y[l]=Math.max(h[l],f[l]);y[u]=Math.min(0,f[u]+p[1-o]);a.__rectSize=r[s];if(c){var x={x:0,y:0};x[s]=Math.max(r[s]-f[s]-g,0);x[l]=y[l];a.setClipPath(new xs({shape:x}));a.__rectSize=x[s]}else{n.eachChild(function(t){t.attr({invisible:true,silent:true})})}var _=this._getPageInfo(t);_.pageIndex!=null&&pl(i,{position:_.contentPosition},c?t:false);this._updatePageInfoView(t,_);return y},_pageGo:function(t,e,r){var i=this._getPageInfo(e)[t];i!=null&&r.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},_updatePageInfoView:function(t,e){var r=this._controllerGroup;L(["pagePrev","pageNext"],function(i){var a=e[i+"DataIndex"]!=null;var n=r.childOfName(i);if(n){n.setStyle("fill",a?t.get("pageIconColor",true):t.get("pageIconInactiveColor",true));n.cursor=a?"pointer":"default"}});var i=r.childOfName("pageText");var a=t.get("pageFormatter");var n=e.pageIndex;var o=n!=null?n+1:0;var s=e.pageCount;i&&a&&i.setStyle("text",V(a)?a.replace("{current}",o).replace("{total}",s):a({current:o,total:s}))},_getPageInfo:function(t){var e=t.get("scrollDataIndex",true);var r=this.getContentGroup();var i=r.getBoundingRect();var a=this._containerGroup.__rectSize;var n=t.getOrient().index;var o=zL[n];var s=zL[1-n];var l=BL[n];var u=r.position.slice();var h;var f;var c;var v;if(this._showController){r.eachChild(function(t){if(t.__legendDataIndex===e){v=t}})}else{v=r.childAt(0)}var d=a?Math.ceil(i[o]/a):0;if(v){var p=v.getBoundingRect();var g=v.position[n]+p[l];u[n]=-g-i[l];h=Math.floor(d*(g+p[l]+a/2)/i[o]);h=i[o]&&d?Math.max(0,Math.min(d-1,h)):-1;var m={x:0,y:0};m[o]=a;m[s]=i[s];m[l]=-u[n]-i[l];var y;var x=r.children();r.eachChild(function(t,e){var r=b(t);if(r.intersect(m)){y==null&&(y=e);c=t.__legendDataIndex}if(e===x.length-1&&r[l]+r[o]<=m[l]+m[o]){c=null}});if(y!=null){var _=x[y];var w=b(_);m[l]=w[l]+w[o]-m[o];if(y<=0&&w[l]>=m[l]){f=null}else{while(y>0&&b(x[y-1]).intersect(m)){y--}f=x[y].__legendDataIndex}}}return{contentPosition:u,pageIndex:h,pageCount:d,pagePrevDataIndex:f,pageNextDataIndex:c};function b(t){var e=t.getBoundingRect().clone();e[l]+=t.position[n];return e}}});Kv("legendScroll","legendscroll",function(t,e){var r=t.scrollDataIndex;r!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(r)})});id({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:8,show:true,showContent:true,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:false,displayMode:"single",confine:false,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:false,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var GL=L;var WL=ou;var FL=["","-webkit-","-moz-","-o-"];var HL="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";function ZL(t){var e="cubic-bezier(0.23, 1, 0.32, 1)";var r="left "+t+"s "+e+","+"top "+t+"s "+e;return k(FL,function(t){return t+"transition:"+r}).join(";")}function UL(t){var e=[];var r=t.get("fontSize");var i=t.getTextColor();i&&e.push("color:"+i);e.push("font:"+t.getFont());r&&e.push("line-height:"+Math.round(r*3/2)+"px");GL(["decoration","align"],function(r){var i=t.get(r);i&&e.push("text-"+r+":"+i)});return e.join(";")}function XL(t){var e=[];var r=t.get("transitionDuration");var i=t.get("backgroundColor");var a=t.getModel("textStyle");var o=t.get("padding");r&&e.push(ZL(r));if(i){if(n.canvasSupported){e.push("background-Color:"+i)}else{e.push("background-Color:#"+Le(i));e.push("filter:alpha(opacity=70)")}}GL(["width","color","radius"],function(r){var i="border-"+r;var a=WL(i);var n=t.get(a);n!=null&&e.push(i+":"+n+(r==="color"?"":"px"))});e.push(UL(a));if(o!=null){e.push("padding:"+su(o).join("px ")+"px")}return e.join(";")+";"}function jL(t,e){if(n.wxa){return null}var r=document.createElement("div");var i=this._zr=e.getZr();this.el=r;this._x=e.getWidth()/2;this._y=e.getHeight()/2;t.appendChild(r);this._container=t;this._show=false;this._hideTimeout;var a=this;r.onmouseenter=function(){if(a._enterable){clearTimeout(a._hideTimeout);a._show=true}a._inContent=true};r.onmousemove=function(e){e=e||window.event;if(!a._enterable){var r=i.handler;ra(t,e,true);r.dispatch("mousemove",e)}};r.onmouseleave=function(){if(a._enterable){if(a._show){a.hideLater(a._hideDelay)}}a._inContent=false}}jL.prototype={constructor:jL,_enterable:true,update:function(){var t=this._container;var e=t.currentStyle||document.defaultView.getComputedStyle(t);var r=t.style;if(r.position!=="absolute"&&e.position!=="absolute"){r.position="relative"}},show:function(t){clearTimeout(this._hideTimeout);var e=this.el;e.style.cssText=HL+XL(t)+";left:"+this._x+"px;top:"+this._y+"px;"+(t.get("extraCssText")||"");e.style.display=e.innerHTML?"block":"none";this._show=true},setContent:function(t){this.el.innerHTML=t==null?"":t},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTo:function(t,e){var r=this._zr;var i;if(r&&r.painter&&(i=r.painter.getViewportRootOffset())){t+=i.offsetLeft;e+=i.offsetTop}var a=this.el.style;a.left=t+"px";a.top=e+"px";this._x=t;this._y=e},hide:function(){this.el.style.display="none";this._show=false},hideLater:function(t){if(this._show&&!(this._inContent&&this._enterable)){if(t){this._hideDelay=t;this._show=false;this._hideTimeout=setTimeout(E(this.hide,this),t)}else{this.hide()}}},isShow:function(){return this._show}};var YL=E;var qL=L;var KL=Wl;var $L=new xs({shape:{x:-1,y:-1,width:2,height:2}});ad({type:"tooltip",init:function(t,e){if(n.node){return}var r=new jL(e.getDom(),e);this._tooltipContent=r},render:function(t,e,r){if(n.node||n.wxa){return}this.group.removeAll();this._tooltipModel=t;this._ecModel=e;this._api=r;this._lastDataByCoordSys=null;this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update();i.setEnterable(t.get("enterable"));this._initGlobalListener();this._keepShow()},_initGlobalListener:function(){var t=this._tooltipModel;var e=t.get("triggerOn");EA("itemTooltip",this._api,YL(function(t,r,i){if(e!=="none"){if(e.indexOf(t)>=0){this._tryShow(r,i)}else if(t==="leave"){this._hide(i)}}},this))},_keepShow:function(){var t=this._tooltipModel;var e=this._ecModel;var r=this._api;if(this._lastX!=null&&this._lastY!=null&&t.get("triggerOn")!=="none"){var i=this;clearTimeout(this._refreshUpdateTimeout);this._refreshUpdateTimeout=setTimeout(function(){i.manuallyShowTip(t,e,r,{x:i._lastX,y:i._lastY})})}},manuallyShowTip:function(t,e,r,i){if(i.from===this.uid||n.node){return}var a=QL(i,r);this._ticket="";var o=i.dataByCoordSys;if(i.tooltip&&i.x!=null&&i.y!=null){var s=$L;s.position=[i.x,i.y];s.update();s.tooltip=i.tooltip;this._tryShow({offsetX:i.x,offsetY:i.y,target:s},a)}else if(o){this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,event:{},dataByCoordSys:i.dataByCoordSys,tooltipOption:i.tooltipOption},a)}else if(i.seriesIndex!=null){if(this._manuallyAxisShowTip(t,e,r,i)){return}var l=mA(i,e);var u=l.point[0];var h=l.point[1];if(u!=null&&h!=null){this._tryShow({offsetX:u,offsetY:h,position:i.position,target:l.el,event:{}},a)}}else if(i.x!=null&&i.y!=null){r.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y});this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:r.getZr().findHover(i.x,i.y).target,event:{}},a)}},manuallyHideTip:function(t,e,r,i){var a=this._tooltipContent;if(!this._alwaysShowContent&&this._tooltipModel){a.hideLater(this._tooltipModel.get("hideDelay"))}this._lastX=this._lastY=null;if(i.from!==this.uid){this._hide(QL(i,r))}},_manuallyAxisShowTip:function(t,e,r,i){var a=i.seriesIndex;var n=i.dataIndex;var o=e.getComponent("axisPointer").coordSysAxesInfo;if(a==null||n==null||o==null){return}var s=e.getSeriesByIndex(a);if(!s){return}var l=s.getData();var t=JL([l.getItemModel(n),s,(s.coordinateSystem||{}).model,t]);if(t.get("trigger")!=="axis"){return}r.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:n,position:i.position});return true},_tryShow:function(t,e){var r=t.target;var i=this._tooltipModel;if(!i){return}this._lastX=t.offsetX;this._lastY=t.offsetY;var a=t.dataByCoordSys;if(a&&a.length){this._showAxisTooltip(a,t)}else if(r&&r.dataIndex!=null){this._lastDataByCoordSys=null;this._showSeriesItemTooltip(t,r,e)}else if(r&&r.tooltip){this._lastDataByCoordSys=null;this._showComponentItemTooltip(t,r,e)}else{this._lastDataByCoordSys=null;this._hide(e)}},_showOrMove:function(t,e){var r=t.get("showDelay");e=E(e,this);clearTimeout(this._showTimout);r>0?this._showTimout=setTimeout(e,r):e()},_showAxisTooltip:function(t,e){var r=this._ecModel;var i=this._tooltipModel;var a=[e.offsetX,e.offsetY];var n=[];var o=[];var s=JL([e.tooltipOption,i]);qL(t,function(t){qL(t.dataByAxis,function(t){var e=r.getComponent(t.axisDim+"Axis",t.axisIndex);var i=t.value;var a=[];if(!e||i==null){return}var s=eC(i,e.axis,r,t.seriesDataIndices,t.valueLabelOpt);L(t.seriesDataIndices,function(n){var l=r.getSeriesByIndex(n.seriesIndex);var u=n.dataIndexInside;var h=l&&l.getDataParams(u);h.axisDim=t.axisDim;h.axisIndex=t.axisIndex;h.axisType=t.axisType;h.axisId=t.axisId;h.axisValue=tg(e.axis,i);h.axisValueLabel=s;if(h){o.push(h);a.push(l.formatTooltip(u,true))}});var l=s;n.push((l?hu(l)+"<br />":"")+a.join("<br />"))})},this);n.reverse();n=n.join("<br /><br />");var l=e.position;this._showOrMove(s,function(){if(this._updateContentNotChangedOnAxis(t)){this._updatePosition(s,l,a[0],a[1],this._tooltipContent,o)}else{this._showTooltipContent(s,n,o,Math.random(),a[0],a[1],l)}})},_showSeriesItemTooltip:function(t,e,r){var i=this._ecModel;var a=e.seriesIndex;var n=i.getSeriesByIndex(a);var o=e.dataModel||n;var s=e.dataIndex;var l=e.dataType;var u=o.getData();var h=JL([u.getItemModel(s),o,n&&(n.coordinateSystem||{}).model,this._tooltipModel]);var f=h.get("trigger");if(f!=null&&f!=="item"){return}var c=o.getDataParams(s,l);var v=o.formatTooltip(s,false,l);var d="item_"+o.name+"_"+s;this._showOrMove(h,function(){this._showTooltipContent(h,v,c,d,t.offsetX,t.offsetY,t.position,t.target)});r({type:"showTip",dataIndexInside:s,dataIndex:u.getRawIndex(s),seriesIndex:a,from:this.uid})},_showComponentItemTooltip:function(t,e,r){var i=e.tooltip;if(typeof i==="string"){var a=i;i={content:a,formatter:a}}var n=new kl(i,this._tooltipModel,this._ecModel);var o=n.get("content");var s=Math.random();this._showOrMove(n,function(){this._showTooltipContent(n,o,n.get("formatterParams")||{},s,t.offsetX,t.offsetY,t.position,e)});r({type:"showTip",from:this.uid})},_showTooltipContent:function(t,e,r,i,a,n,o,s){this._ticket="";if(!t.get("showContent")||!t.get("show")){return}var l=this._tooltipContent;var u=t.get("formatter");o=o||t.get("position");var h=e;if(u&&typeof u==="string"){h=vu(u,r,true)}else if(typeof u==="function"){var f=YL(function(e,i){if(e===this._ticket){l.setContent(i);this._updatePosition(t,o,a,n,l,r,s)}},this);this._ticket=i;h=u(r,i,f)}l.setContent(h);l.show(t);this._updatePosition(t,o,a,n,l,r,s)},_updatePosition:function(t,e,r,i,a,n,o){var s=this._api.getWidth();var l=this._api.getHeight();e=e||t.get("position");var u=a.getSize();var h=t.get("align");var f=t.get("verticalAlign");var c=o&&o.getBoundingRect().clone();o&&c.applyTransform(o.transform);if(typeof e==="function"){e=e([r,i],n,a.el,c,{viewSize:[s,l],contentSize:u.slice()})}if(z(e)){r=KL(e[0],s);i=KL(e[1],l)}else if(G(e)){e.width=u[0];e.height=u[1];var v=Lu(e,{width:s,height:l});r=v.x;i=v.y;h=null;f=null}else if(typeof e==="string"&&o){var d=ik(e,c,u);r=d[0];i=d[1]}else{var d=tk(r,i,a.el,s,l,h?null:20,f?null:20);r=d[0];i=d[1]}h&&(r-=ak(h)?u[0]/2:h==="right"?u[0]:0);f&&(i-=ak(f)?u[1]/2:f==="bottom"?u[1]:0);if(t.get("confine")){var d=ek(r,i,a.el,s,l);r=d[0];i=d[1]}a.moveTo(r,i)},_updateContentNotChangedOnAxis:function(t){var e=this._lastDataByCoordSys;var r=!!e&&e.length===t.length;r&&qL(e,function(e,i){var a=e.dataByAxis||{};var n=t[i]||{};var o=n.dataByAxis||[];r&=a.length===o.length;r&&qL(a,function(t,e){var i=o[e]||{};var a=t.seriesDataIndices||[];var n=i.seriesDataIndices||[];r&=t.value===i.value&&t.axisType===i.axisType&&t.axisId===i.axisId&&a.length===n.length;r&&qL(a,function(t,e){var i=n[e];r&=t.seriesIndex===i.seriesIndex&&t.dataIndex===i.dataIndex})})});this._lastDataByCoordSys=t;return!!r},_hide:function(t){this._lastDataByCoordSys=null;t({type:"hideTip",from:this.uid})},dispose:function(t,e){if(n.node||n.wxa){return}this._tooltipContent.hide();WA("itemTooltip",e)}});function JL(t){var e=t.pop();while(t.length){var r=t.pop();if(r){if(kl.isInstance(r)){r=r.get("tooltip",true)}if(typeof r==="string"){r={formatter:r}}e=new kl(r,e,e.ecModel)}}return e}function QL(t,e){return t.dispatchAction||E(e.dispatchAction,e)}function tk(t,e,r,i,a,n,o){var s=rk(r);var l=s.width;var u=s.height;if(n!=null){if(t+l+n>i){t-=l+n}else{t+=n}}if(o!=null){if(e+u+o>a){e-=u+o}else{e+=o}}return[t,e]}function ek(t,e,r,i,a){var n=rk(r);var o=n.width;var s=n.height;t=Math.min(t+o,i)-o;e=Math.min(e+s,a)-s;t=Math.max(t,0);e=Math.max(e,0);return[t,e]}function rk(t){var e=t.clientWidth;var r=t.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var i=document.defaultView.getComputedStyle(t);if(i){e+=parseInt(i.paddingLeft,10)+parseInt(i.paddingRight,10)+parseInt(i.borderLeftWidth,10)+parseInt(i.borderRightWidth,10);r+=parseInt(i.paddingTop,10)+parseInt(i.paddingBottom,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)}}return{width:e,height:r}}function ik(t,e,r){var i=r[0];var a=r[1];var n=5;var o=0;var s=0;var l=e.width;var u=e.height;switch(t){case"inside":o=e.x+l/2-i/2;s=e.y+u/2-a/2;break;case"top":o=e.x+l/2-i/2;s=e.y-a-n;break;case"bottom":o=e.x+l/2-i/2;s=e.y+u+n;break;case"left":o=e.x-i-n;s=e.y+u/2-a/2;break;case"right":o=e.x+l+n;s=e.y+u/2-a/2}return[o,s]}function ak(t){return t==="center"||t==="middle"}Kv({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){});Kv({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});function nk(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function ok(t){return t.dim}function sk(t,e,r){var i=r.getWidth();var a=r.getHeight();var n={};var o=lk(N(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&t.coordinateSystem.type==="polar"}));e.eachSeriesByType(t,function(t){if(t.coordinateSystem.type!=="polar"){return}var e=t.getData();var r=t.coordinateSystem;var s=r.getBaseAxis();var l=nk(t);var u=o[ok(s)][l];var h=u.offset;var f=u.width;var c=r.getOtherAxis(s);var v=t.get("center")||["50%","50%"];var d=Wl(v[0],i);var p=Wl(v[1],a);var g=t.get("barMinHeight")||0;var m=t.get("barMinAngle")||0;n[l]=n[l]||[];var y=e.mapDimension(c.dim);var x=e.mapDimension(s.dim);var _=jd(e,y);var w=c.getExtent()[0];for(var b=0,S=e.count();b<S;b++){var M=e.get(y,b);var I=e.get(x,b);if(isNaN(M)){continue}var T=M>=0?"p":"n";var D=w;if(_){if(!n[l][I]){n[l][I]={p:w,n:w}}D=n[l][I][T]}var A;var C;var L;var k;if(c.dim==="radius"){var P=c.dataToRadius(M)-w;var N=s.dataToAngle(I);if(Math.abs(P)<g){P=(P<0?-1:1)*g}A=D;C=D+P;L=N-h;k=L-f;_&&(n[l][I][T]=C)}else{var O=c.dataToAngle(M,true)-w;var E=s.dataToRadius(I);if(Math.abs(O)<m){O=(O<0?-1:1)*m}A=E+h;C=A+f;L=D;k=D+O;_&&(n[l][I][T]=k)}e.setItemLayout(b,{cx:d,cy:p,r0:A,r:C,startAngle:-L*Math.PI/180,endAngle:-k*Math.PI/180})}},this)}function lk(t,e){var r={};L(t,function(t,e){var i=t.getData();var a=t.coordinateSystem;var n=a.getBaseAxis();var o=n.getExtent();var s=n.type==="category"?n.getBandWidth():Math.abs(o[1]-o[0])/i.count();var l=r[ok(n)]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}};var u=l.stacks;r[ok(n)]=l;var h=nk(t);if(!u[h]){l.autoWidthCount++}u[h]=u[h]||{width:0,maxWidth:0};var f=Wl(t.get("barWidth"),s);var c=Wl(t.get("barMaxWidth"),s);var v=t.get("barGap");var d=t.get("barCategoryGap");if(f&&!u[h].width){f=Math.min(l.remainedWidth,f);u[h].width=f;l.remainedWidth-=f}c&&(u[h].maxWidth=c);v!=null&&(l.gap=v);d!=null&&(l.categoryGap=d)});var i={};L(r,function(t,e){i[e]={};var r=t.stacks;var a=t.bandWidth;var n=Wl(t.categoryGap,a);var o=Wl(t.gap,1);var s=t.remainedWidth;var l=t.autoWidthCount;var u=(s-n)/(l+(l-1)*o);u=Math.max(u,0);L(r,function(t,e){var r=t.maxWidth;if(r&&r<u){r=Math.min(r,s);if(t.width){r=Math.min(r,t.width)}s-=r;t.width=r;l--}});u=(s-n)/(l+(l-1)*o);u=Math.max(u,0);var h=0;var f;L(r,function(t,e){if(!t.width){t.width=u}f=t;h+=t.width*(1+o)});if(f){h-=f.width*o}var c=-h/2;L(r,function(t,r){i[e][r]=i[e][r]||{offset:c,width:t.width};c+=t.width*(1+o)})});return i}function uk(t,e){Hg.call(this,"radius",t,e);this.type="category"}uk.prototype={constructor:uk,pointToData:function(t,e){return this.polar.pointToData(t,e)[this.dim==="radius"?0:1]},dataToRadius:Hg.prototype.dataToCoord,radiusToData:Hg.prototype.coordToData};D(uk,Hg);function hk(t,e){e=e||[0,360];Hg.call(this,"angle",t,e);this.type="category"}hk.prototype={constructor:hk,pointToData:function(t,e){return this.polar.pointToData(t,e)[this.dim==="radius"?0:1]},dataToAngle:Hg.prototype.dataToCoord,angleToData:Hg.prototype.coordToData};D(hk,Hg);var fk=function(t){this.name=t||"";this.cx=0;this.cy=0;this._radiusAxis=new uk;this._angleAxis=new hk;this._radiusAxis.polar=this._angleAxis.polar=this};fk.prototype={type:"polar",axisPointerEnabled:true,constructor:fk,dimensions:["radius","angle"],model:null,containPoint:function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},containData:function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},getAxis:function(t){return this["_"+t+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(t){var e=[];var r=this._angleAxis;var i=this._radiusAxis;r.scale.type===t&&e.push(r);i.scale.type===t&&e.push(i);return e},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(t){var e=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},dataToPoint:function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},pointToData:function(t,e){var r=this.pointToCoord(t);return[this._radiusAxis.radiusToData(r[0],e),this._angleAxis.angleToData(r[1],e)]},pointToCoord:function(t){var e=t[0]-this.cx;var r=t[1]-this.cy;var i=this.getAngleAxis();var a=i.getExtent();var n=Math.min(a[0],a[1]);var o=Math.max(a[0],a[1]);i.inverse?n=o-360:o=n+360;var s=Math.sqrt(e*e+r*r);e/=s;r/=s;var l=Math.atan2(-r,e)/Math.PI*180;var u=l<n?1:-1;while(l<n||l>o){l+=u*360}return[s,l]},coordToPoint:function(t){var e=t[0];var r=t[1]/180*Math.PI;var i=Math.cos(r)*e+this.cx;var a=-Math.sin(r)*e+this.cy;return[i,a]}};var ck=Bu.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});x(ck.prototype,ig);var vk={angle:{startAngle:90,clockwise:true,splitNumber:12,axisLabel:{rotate:false}},radius:{splitNumber:5}};function dk(t,e){return e.type||(e.data?"category":"value")}$m("angle",ck,dk,vk.angle);$m("radius",ck,dk,vk.radius);id({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(t){var e;var r=this.ecModel;r.eachComponent(t,function(t){if(t.getCoordSysModel()===this){e=t}},this);return e},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}});function pk(t,e,r){var i=e.get("center");var a=r.getWidth();var n=r.getHeight();t.cx=Wl(i[0],a);t.cy=Wl(i[1],n);var o=t.getRadiusAxis();var s=Math.min(a,n)/2;var l=Wl(e.get("radius"),s);o.inverse?o.setExtent(l,0):o.setExtent(0,l)}function gk(t,e){var r=this;var i=r.getAngleAxis();var a=r.getRadiusAxis();i.scale.setExtent(Infinity,-Infinity);a.scale.setExtent(Infinity,-Infinity);t.eachSeries(function(t){if(t.coordinateSystem===r){var e=t.getData();L(e.mapDimension("radius",true),function(t){a.scale.unionExtentFromData(e,Yd(e,t))});L(e.mapDimension("angle",true),function(t){i.scale.unionExtentFromData(e,Yd(e,t))})}});Kp(i.scale,i.model);Kp(a.scale,a.model);if(i.type==="category"&&!i.onBand){var n=i.getExtent();var o=360/i.scale.count();i.inverse?n[1]+=o:n[1]-=o;i.setExtent(n[0],n[1])}}function mk(t,e){t.type=e.get("type");t.scale=$p(e);t.onBand=e.get("boundaryGap")&&t.type==="category";t.inverse=e.get("inverse");if(e.mainType==="angleAxis"){t.inverse^=e.get("clockwise");var r=e.get("startAngle");t.setExtent(r,r+(t.inverse?-360:360))}e.axis=t;t.model=e}var yk={dimensions:fk.prototype.dimensions,create:function(t,r){var i=[];t.eachComponent("polar",function(t,e){var a=new fk(e);a.update=gk;var n=a.getRadiusAxis();var o=a.getAngleAxis();var s=t.findAxisModel("radiusAxis");var l=t.findAxisModel("angleAxis");mk(n,s);mk(o,l);pk(a,t,r);i.push(a);t.coordinateSystem=a;a.model=t});t.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var i=t.queryComponents({mainType:"polar",index:r.get("polarIndex"),id:r.get("polarId")})[0];if(e){if(!i){throw new Error('Polar "'+U(r.get("polarIndex"),r.get("polarId"),0)+'" not found')}}r.coordinateSystem=i.coordinateSystem}});return i}};Ch.register("polar",yk);var xk=["axisLine","axisLabel","axisTick","splitLine","splitArea"];function _k(t,e,r){e[1]>e[0]&&(e=e.slice().reverse());var i=t.coordToPoint([e[0],r]);var a=t.coordToPoint([e[1],r]);return{x1:i[0],y1:i[1],x2:a[0],y2:a[1]}}function wk(t){var e=t.getRadiusAxis();return e.inverse?0:1}function bk(t){var e=t[0];var r=t[t.length-1];if(e&&r&&Math.abs(Math.abs(e.coord-r.coord)-360)<1e-4){t.pop()}}Ry.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){this.group.removeAll();if(!t.get("show")){return}var r=t.axis;var i=r.polar;var a=i.getRadiusAxis().getExtent();var n=r.getTicksCoords();var o=k(r.getViewLabels(),function(t){var t=y(t);t.coord=r.dataToCoord(t.tickValue);return t});bk(o);bk(n);L(xk,function(e){if(t.get(e+".show")&&(!r.scale.isBlank()||e==="axisLine")){this["_"+e](t,i,n,a,o)}},this)},_axisLine:function(t,e,r,i){var a=t.getModel("axisLine.lineStyle");var n=new ls({shape:{cx:e.cx,cy:e.cy,r:i[wk(e)]},style:a.getLineStyle(),z2:1,silent:true});n.style.fill=null;this.group.add(n)},_axisTick:function(t,e,r,i){var a=t.getModel("axisTick");var n=(a.get("inside")?-1:1)*a.get("length");var o=i[wk(e)];var s=k(r,function(t){return new _s({shape:_k(e,[o,o+n],t.coord)})});this.group.add(Gs(s,{style:b(a.getModel("lineStyle").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})}))},_axisLabel:function(t,e,r,i,a){var n=t.getCategories(true);var o=t.getModel("axisLabel");var s=o.get("margin");L(a,function(r,a){var l=o;var u=r.tickValue;var h=i[wk(e)];var f=e.coordToPoint([h+s,r.coord]);var c=e.cx;var v=e.cy;var d=Math.abs(f[0]-c)/h<.3?"center":f[0]>c?"left":"right";var p=Math.abs(f[1]-v)/h<.3?"middle":f[1]>v?"top":"bottom";if(n&&n[u]&&n[u].textStyle){l=new kl(n[u].textStyle,o,o.ecModel)}var g=new ss({silent:true});this.group.add(g);nl(g.style,l,{x:f[0],y:f[1],textFill:l.getTextColor()||t.get("axisLine.lineStyle.color"),text:r.formattedLabel,textAlign:d,textVerticalAlign:p})},this)},_splitLine:function(t,e,r,i){var a=t.getModel("splitLine");var n=a.getModel("lineStyle");var o=n.get("color");var s=0;o=o instanceof Array?o:[o];var l=[];for(var u=0;u<r.length;u++){var h=s++%o.length;l[h]=l[h]||[];l[h].push(new _s({shape:_k(e,i,r[u].coord)}))}for(var u=0;u<l.length;u++){this.group.add(Gs(l[u],{style:b({stroke:o[u%o.length]},n.getLineStyle()),silent:true,z:t.get("z")}))}},_splitArea:function(t,e,r,i){if(!r.length){return}var a=t.getModel("splitArea");var n=a.getModel("areaStyle");var o=n.get("color");var s=0;o=o instanceof Array?o:[o];var l=[];var u=Math.PI/180;var h=-r[0].coord*u;var f=Math.min(i[0],i[1]);var c=Math.max(i[0],i[1]);var v=t.get("clockwise");for(var d=1;d<r.length;d++){var p=s++%o.length;l[p]=l[p]||[];l[p].push(new fs({shape:{cx:e.cx,cy:e.cy,r0:f,r:c,startAngle:h,endAngle:-r[d].coord*u,clockwise:v},silent:true}));h=-r[d].coord*u}for(var d=0;d<l.length;d++){this.group.add(Gs(l[d],{style:b({fill:o[d%o.length]},n.getAreaStyle()),silent:true}))}}});var Sk=["axisLine","axisTickLabel","axisName"];var Mk=["splitLine","splitArea"];Ry.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){this.group.removeAll();if(!t.get("show")){return}var r=t.axis;var i=r.polar;var a=i.getAngleAxis();var n=r.getTicksCoords();var o=a.getExtent()[0];var s=r.getExtent();var l=Ik(i,t,o);var u=new cy(t,l);L(Sk,u.add,u);this.group.add(u.getGroup());L(Mk,function(e){if(t.get(e+".show")&&!r.scale.isBlank()){this["_"+e](t,i,o,s,n)}},this)},_splitLine:function(t,e,r,i,a){var n=t.getModel("splitLine");var o=n.getModel("lineStyle");var s=o.get("color");var l=0;s=s instanceof Array?s:[s];var u=[];for(var h=0;h<a.length;h++){var f=l++%s.length;u[f]=u[f]||[];u[f].push(new ls({shape:{cx:e.cx,cy:e.cy,r:a[h].coord},silent:true}))}for(var h=0;h<u.length;h++){this.group.add(Gs(u[h],{style:b({stroke:s[h%s.length],fill:null},o.getLineStyle()),silent:true}))}},_splitArea:function(t,e,r,i,a){if(!a.length){return}var n=t.getModel("splitArea");var o=n.getModel("areaStyle");var s=o.get("color");var l=0;s=s instanceof Array?s:[s];var u=[];var h=a[0].coord;for(var f=1;f<a.length;f++){var c=l++%s.length;u[c]=u[c]||[];u[c].push(new fs({shape:{cx:e.cx,cy:e.cy,r0:h,r:a[f].coord,startAngle:0,endAngle:Math.PI*2},silent:true}));h=a[f].coord}for(var f=0;f<u.length;f++){this.group.add(Gs(u[f],{style:b({fill:s[f%s.length]},o.getAreaStyle()),silent:true}))}}});function Ik(t,e,r){return{position:[t.cx,t.cy],rotation:r/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}var Tk=XA.extend({makeElOption:function(t,e,r,i,a){var n=r.axis;if(n.dim==="angle"){this.animationThreshold=Math.PI/18}var o=n.polar;var s=o.getOtherAxis(n);var l=s.getExtent();var u;u=n["dataTo"+yu(n.dim)](e);var h=i.get("type");if(h&&h!=="none"){var f=JA(i);var c=Ak[h](n,o,u,l,f);c.style=f;t.graphicKey=c.type;t.pointer=c}var v=i.get("label.margin");var d=Dk(e,r,i,o,v);QA(t,r,i,a,d)}});function Dk(t,e,r,i,a){var n=e.axis;var o=n.dataToCoord(t);var s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=i.getRadiusAxis().getExtent();var u;var h;var f;if(n.dim==="radius"){var c=Zt();qt(c,c,s);Yt(c,c,[i.cx,i.cy]);u=yl([o,-a],c);var v=e.getModel("axisLabel").get("rotate")||0;var d=cy.innerTextLayout(s,v*Math.PI/180,-1);h=d.textAlign;f=d.textVerticalAlign}else{var p=l[1];u=i.coordToPoint([p+a,o]);var g=i.cx;var m=i.cy;h=Math.abs(u[0]-g)/p<.3?"center":u[0]>g?"left":"right";f=Math.abs(u[1]-m)/p<.3?"middle":u[1]>m?"top":"bottom"}return{position:u,align:h,verticalAlign:f}}var Ak={line:function(t,e,r,i,a){return t.dim==="angle"?{type:"Line",shape:aC(e.coordToPoint([i[0],r]),e.coordToPoint([i[1],r]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:r}}},shadow:function(t,e,r,i,a){var n=Math.max(1,t.getBandWidth());var o=Math.PI/180;return t.dim==="angle"?{type:"Sector",shape:oC(e.cx,e.cy,i[0],i[1],(-r-n/2)*o,(-r+n/2)*o)}:{type:"Sector",shape:oC(e.cx,e.cy,r-n/2,r+n/2,0,Math.PI*2)}}};Ry.registerAxisPointerClass("PolarAxisPointer",Tk);Qv(R(sk,"bar"));ad({type:"polar"});var Ck=Bu.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(t){Bu.prototype.init.apply(this,arguments);Wa(t,"label",["show"])},optionUpdated:function(){var t=this.option;var e=this;t.regions=a_.getFilledRegions(t.regions,t.map,t.nameMap);this._optionModelMap=P(t.regions||[],function(t,r){if(r.name){t.set(r.name,new kl(r,e))}return t},rt());this.updateSelectedMap(t.regions)},defaultOption:{zlevel:0,z:0,show:true,left:"center",top:"center",aspectScale:.75,silent:false,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:false,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:true,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(t){return this._optionModelMap.get(t)||new kl(null,this,this.ecModel)},getFormattedLabel:function(t,e){var r=this.getRegionModel(t);var i=r.get("label."+e+".formatter");var a={name:t};if(typeof i==="function"){a.status=e;return i(a)}else if(typeof i==="string"){return i.replace("{a}",t!=null?t:"")}},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t}});A(Ck,ox);ad({type:"geo",init:function(t,e){var r=new T_(e,true);this._mapDraw=r;this.group.add(r.group)},render:function(t,e,r,i){if(i&&i.type==="geoToggleSelect"&&i.from===this.uid){return}var a=this._mapDraw;if(t.get("show")){a.draw(t,e,r,this,i)}else{this._mapDraw.group.removeAll()}this.group.silent=t.get("silent");
},dispose:function(){this._mapDraw&&this._mapDraw.remove()}});function Lk(t,e){e.update="updateView";Kv(e,function(e,r){var i={};r.eachComponent({mainType:"geo",query:e},function(r){r[t](e.name);var a=r.coordinateSystem;L(a.regions,function(t){i[t.name]=r.isSelected(t.name)||false})});return{selected:i,name:e.name}})}Lk("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"});Lk("select",{type:"geoSelect",event:"geoselected"});Lk("unSelect",{type:"geoUnSelect",event:"geounselected"});var kk=["rect","polygon","keep","clear"];var Pk=function(t,e){var r=t&&t.brush;if(!z(r)){r=r?[r]:[]}if(!r.length){return}var i=[];L(r,function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];if(e instanceof Array){i=i.concat(e)}});var a=t&&t.toolbox;if(z(a)){a=a[0]}if(!a){a={feature:{}};t.toolbox=[a]}var n=a.feature||(a.feature={});var o=n.brush||(n.brush={});var s=o.type||(o.type=[]);s.push.apply(s,i);Nk(s);if(e&&!s.length){s.push.apply(s,kk)}};function Nk(t){var e={};L(t,function(t){e[t]=1});t.length=0;L(e,function(e,r){t.push(r)})}var Ok=L;function Ek(t){if(t){for(var e in t){if(t.hasOwnProperty(e)){return true}}}}function Rk(t,e,r){var i={};Ok(e,function(e){var n=i[e]=a();Ok(t[e],function(t,i){if(!$w.isValidType(i)){return}var a={type:i,visual:t};r&&r(a,e);n[i]=new $w(a);if(i==="opacity"){a=y(a);a.type="colorAlpha";n.__hidden.__alphaForOpacity=new $w(a)}})});return i;function a(){var t=function(){};t.prototype.__hidden=t.prototype;var e=new t;return e}}function zk(t,e,r){var i;L(r,function(t){if(e.hasOwnProperty(t)&&Ek(e[t])){i=true}});i&&L(r,function(r){if(e.hasOwnProperty(r)&&Ek(e[r])){t[r]=y(e[r])}else{delete t[r]}})}function Bk(t,e,r,i,a,n){var o={};L(t,function(t){var r=$w.prepareVisualTypes(e[t]);o[t]=r});var s;function l(t){return r.getItemVisual(s,t)}function u(t,e){r.setItemVisual(s,t,e)}if(n==null){r.each(h)}else{r.each([n],h)}function h(t,h){s=n==null?t:h;var f=r.getRawDataItem(s);if(f&&f.visualMap===false){return}var c=i.call(a,t);var v=e[c];var d=o[c];for(var p=0,g=d.length;p<g;p++){var m=d[p];v[m]&&v[m].applyVisual(t,l,u)}}}function Vk(t,e,r,i){var a={};L(t,function(t){var r=$w.prepareVisualTypes(e[t]);a[t]=r});function n(t,n){if(i!=null){i=n.getDimension(i)}function o(t){return n.getItemVisual(l,t)}function s(t,e){n.setItemVisual(l,t,e)}var l;while((l=t.next())!=null){var u=n.getRawDataItem(l);if(u&&u.visualMap===false){return}var h=i!=null?n.get(i,l,true):l;var f=r(h);var c=e[f];var v=a[f];for(var d=0,p=v.length;d<p;d++){var g=v[d];c[g]&&c[g].applyVisual(h,o,s)}}}return{progress:n}}var Gk={lineX:Wk(0),lineY:Wk(1),rect:{point:function(t,e,r){return t&&r.boundingRect.contain(t[0],t[1])},rect:function(t,e,r){return t&&r.boundingRect.intersect(t)}},polygon:{point:function(t,e,r){return t&&r.boundingRect.contain(t[0],t[1])&&wg(r.range,t[0],t[1])},rect:function(t,e,r){var i=r.range;if(!t||i.length<=1){return false}var a=t.x;var n=t.y;var o=t.width;var s=t.height;var l=i[0];if(wg(i,a,n)||wg(i,a+o,n)||wg(i,a,n+s)||wg(i,a+o,n+s)||hr.create(t).contain(l[0],l[1])||Hk(a,n,a+o,n,i)||Hk(a,n,a,n+s,i)||Hk(a+o,n,a+o,n+s,i)||Hk(a,n+s,a+o,n+s,i)){return true}}}};function Wk(t){var e=["x","y"];var r=["width","height"];return{point:function(e,r,i){if(e){var a=i.range;var n=e[t];return Fk(n,a)}},rect:function(i,a,n){if(i){var o=n.range;var s=[i[e[t]],i[e[t]]+i[r[t]]];s[1]<s[0]&&s.reverse();return Fk(s[0],o)||Fk(s[1],o)||Fk(o[0],s)||Fk(o[1],s)}}}}function Fk(t,e){return e[0]<=t&&t<=e[1]}function Hk(t,e,r,i,a){for(var n=0,o=a[a.length-1];n<a.length;n++){var s=a[n];if(Zk(t,e,r,i,s[0],s[1],o[0],o[1])){return true}o=s}}function Zk(t,e,r,i,a,n,o,s){var l=Xk(r-t,a-o,i-e,n-s);if(Uk(l)){return false}var u=Xk(a-t,a-o,n-e,n-s)/l;if(u<0||u>1){return false}var h=Xk(r-t,a-t,i-e,n-e)/l;if(h<0||h>1){return false}return true}function Uk(t){return t<=1e-6&&t>=-1e-6}function Xk(t,e,r,i){return t*i-e*r}var jk=L;var Yk=T;var qk=R;var Kk=["dataToPoint","pointToData"];var $k=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function Jk(t,e,r){var i=this._targetInfoList=[];var a={};var n=eP(e,t);jk(rP,function(t,e){if(!r||!r.include||Yk(r.include,e)>=0){t(n,i,a)}})}var Qk=Jk.prototype;Qk.setOutputRanges=function(t,e){this.matchOutputRanges(t,e,function(t,e,r){(t.coordRanges||(t.coordRanges=[])).push(e);if(!t.coordRange){t.coordRange=e;var i=nP[t.brushType](0,r,e);t.__rangeOffset={offset:sP[t.brushType](i.values,t.range,[1,1]),xyMinMax:i.xyMinMax}}})};Qk.matchOutputRanges=function(t,e,r){jk(t,function(t){var i=this.findTargetInfo(t,e);if(i&&i!==true){L(i.coordSyses,function(i){var a=nP[t.brushType](1,i,t.range);r(t,a.values,i,e)})}},this)};Qk.setInputRanges=function(t,r){jk(t,function(t){var i=this.findTargetInfo(t,r);if(e){K(!i||i===true||t.coordRange,"coordRange must be specified when coord index specified.");K(!i||i!==true||t.range,"range must be specified in global brush.")}t.range=t.range||[];if(i&&i!==true){t.panelId=i.panelId;var a=nP[t.brushType](0,i.coordSys,t.coordRange);var n=t.__rangeOffset;t.range=n?sP[t.brushType](a.values,n.offset,uP(a.xyMinMax,n.xyMinMax)):a.values}},this)};Qk.makePanelOpts=function(t,e){return k(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:e&&e(r),clipPath:II(i),isTargetByCursor:DI(i,t,r.coordSysModel),getLinearBrushOtherExtent:TI(i)}})};Qk.controlSeries=function(t,e,r){var i=this.findTargetInfo(t,r);return i===true||i&&Yk(i.coordSyses,e.coordinateSystem)>=0};Qk.findTargetInfo=function(t,e){var r=this._targetInfoList;var i=eP(e,t);for(var a=0;a<r.length;a++){var n=r[a];var o=t.panelId;if(o){if(n.panelId===o){return n}}else{for(var a=0;a<iP.length;a++){if(iP[a](i,n)){return n}}}}return true};function tP(t){t[0]>t[1]&&t.reverse();return t}function eP(t,e){return Qa(t,e,{includeMainTypes:$k})}var rP={grid:function(t,e){var r=t.xAxisModels;var i=t.yAxisModels;var a=t.gridModels;var n=rt();var o={};var s={};if(!r&&!i&&!a){return}jk(r,function(t){var e=t.axis.grid.model;n.set(e.id,e);o[e.id]=true});jk(i,function(t){var e=t.axis.grid.model;n.set(e.id,e);s[e.id]=true});jk(a,function(t){n.set(t.id,t);o[t.id]=true;s[t.id]=true});n.each(function(t){var a=t.coordinateSystem;var n=[];jk(a.getCartesians(),function(t,e){if(Yk(r,t.getAxis("x").model)>=0||Yk(i,t.getAxis("y").model)>=0){n.push(t)}});e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:n[0],coordSyses:n,getPanelRect:aP.grid,xAxisDeclared:o[t.id],yAxisDeclared:s[t.id]})})},geo:function(t,e){jk(t.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:aP.geo})})}};var iP=[function(t,e){var r=t.xAxisModel;var i=t.yAxisModel;var a=t.gridModel;!a&&r&&(a=r.axis.grid.model);!a&&i&&(a=i.axis.grid.model);return a&&a===e.gridModel},function(t,e){var r=t.geoModel;return r&&r===e.geoModel}];var aP={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var t=this.coordSys;var e=t.getBoundingRect().clone();e.applyTransform(ml(t));return e}};var nP={lineX:qk(oP,0),lineY:qk(oP,1),rect:function(t,e,r){var i=e[Kk[t]]([r[0][0],r[1][0]]);var a=e[Kk[t]]([r[0][1],r[1][1]]);var n=[tP([i[0],a[0]]),tP([i[1],a[1]])];return{values:n,xyMinMax:n}},polygon:function(t,e,r){var i=[[Infinity,-Infinity],[Infinity,-Infinity]];var a=k(r,function(r){var a=e[Kk[t]](r);i[0][0]=Math.min(i[0][0],a[0]);i[1][0]=Math.min(i[1][0],a[1]);i[0][1]=Math.max(i[0][1],a[0]);i[1][1]=Math.max(i[1][1],a[1]);return a});return{values:a,xyMinMax:i}}};function oP(t,r,i,a){if(e){K(i.type==="cartesian2d","lineX/lineY brush is available only in cartesian2d.")}var n=i.getAxis(["x","y"][t]);var o=tP(k([0,1],function(t){return r?n.coordToData(n.toLocalCoord(a[t])):n.toGlobalCoord(n.dataToCoord(a[t]))}));var s=[];s[t]=o;s[1-t]=[NaN,NaN];return{values:o,xyMinMax:s}}var sP={lineX:qk(lP,0),lineY:qk(lP,1),rect:function(t,e,r){return[[t[0][0]-r[0]*e[0][0],t[0][1]-r[0]*e[0][1]],[t[1][0]-r[1]*e[1][0],t[1][1]-r[1]*e[1][1]]]},polygon:function(t,e,r){return k(t,function(t,i){return[t[0]-r[0]*e[i][0],t[1]-r[1]*e[i][1]]})}};function lP(t,e,r,i){return[e[0]-i[t]*r[0],e[1]-i[t]*r[1]]}function uP(t,e){var r=hP(t);var i=hP(e);var a=[r[0]/i[0],r[1]/i[1]];isNaN(a[0])&&(a[0]=1);isNaN(a[1])&&(a[1]=1);return a}function hP(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var fP=["inBrush","outOfBrush"];var cP="__ecBrushSelect";var vP="__ecInBrushSelectEvent";var dP=Kc.VISUAL.BRUSH;Qv(dP,function(t,e,r){t.eachComponent({mainType:"brush"},function(e){r&&r.type==="takeGlobalCursor"&&e.setBrushOption(r.key==="brush"?r.brushOption:{brushType:false});var i=e.brushTargetManager=new Jk(e.option,t);i.setInputRanges(e.areas,t)})});td(dP,function(t,e,r){var i=[];var a;var n;t.eachComponent({mainType:"brush"},function(e,r){var o={brushId:e.id,brushIndex:r,brushName:e.name,areas:y(e.areas),selected:[]};i.push(o);var s=e.option;var l=s.brushLink;var u=[];var h=[];var f=[];var c=0;if(!r){a=s.throttleType;n=s.throttleDelay}var v=k(e.areas,function(t){return _P(b({boundingRect:wP[t.brushType](t)},t))});var d=Rk(e.option,fP,function(t){t.mappingMethod="fixed"});z(l)&&L(l,function(t){u[t]=1});function p(t){return l==="all"||u[t]}function g(t){return!!t.length}t.eachSeries(function(t,e){var r=f[e]=[];t.subType==="parallel"?m(t,e,r):x(t,e,r)});function m(t,e){var r=t.coordinateSystem;c|=r.hasAxisBrushed();p(e)&&r.eachActiveState(t.getData(),function(t,e){t==="active"&&(h[e]=1)})}function x(r,i,a){var n=yP(r);if(!n||xP(e,i)){return}L(v,function(i){n[i.brushType]&&e.brushTargetManager.controlSeries(i,r,t)&&a.push(i);c|=g(a)});if(p(i)&&g(a)){var o=r.getData();o.each(function(t){if(mP(n,a,o,t)){h[t]=1}})}}t.eachSeries(function(t,e){var r={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};o.selected.push(r);var i=yP(t);var a=f[e];var n=t.getData();var s=p(e)?function(t){return h[t]?(r.dataIndex.push(n.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(t){return mP(i,a,n,t)?(r.dataIndex.push(n.getRawIndex(t)),"inBrush"):"outOfBrush"};(p(e)?c:g(a))&&Bk(fP,d,n,s)})});pP(e,a,n,i,r)});function pP(t,e,r,i,a){if(!a){return}var n=t.getZr();if(n[vP]){return}if(!n[cP]){n[cP]=gP}var o=ec(n,cP,r,e);o(t,i)}function gP(t,e){if(!t.isDisposed()){var r=t.getZr();r[vP]=true;t.dispatchAction({type:"brushSelect",batch:e});r[vP]=false}}function mP(t,e,r,i){for(var a=0,n=e.length;a<n;a++){var o=e[a];if(t[o.brushType](i,r,o.selectors,o)){return true}}}function yP(t){var e=t.brushSelector;if(V(e)){var r=[];L(Gk,function(t,i){r[i]=function(r,i,a,n){var o=i.getItemLayout(r);return t[e](o,a,n)}});return r}else if(B(e)){var i={};L(Gk,function(t,r){i[r]=e});return i}return e}function xP(t,e){var r=t.option.seriesIndex;return r!=null&&r!=="all"&&(z(r)?T(r,e)<0:e!==r)}function _P(t){var e=t.selectors={};L(Gk[t.brushType],function(r,i){e[i]=function(i){return r(i,e,t)}});return t}var wP={lineX:at,lineY:at,rect:function(t){return bP(t.range)},polygon:function(t){var e;var r=t.range;for(var i=0,a=r.length;i<a;i++){e=e||[[Infinity,-Infinity],[Infinity,-Infinity]];var n=r[i];n[0]<e[0][0]&&(e[0][0]=n[0]);n[0]>e[0][1]&&(e[0][1]=n[0]);n[1]<e[1][0]&&(e[1][0]=n[1]);n[1]>e[1][1]&&(e[1][1]=n[1])}return e&&bP(e)}};function bP(t){return new hr(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var SP=["#ddd"];var MP=id({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:true,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:true,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(t,e){var r=this.option;!e&&zk(r,t,["inBrush","outOfBrush"]);var i=r.inBrush=r.inBrush||{};r.outOfBrush=r.outOfBrush||{color:SP};if(!i.hasOwnProperty("liftZ")){i.liftZ=5}},setAreas:function(t){if(e){K(z(t));L(t,function(t){K(t.brushType,"Illegal areas")})}if(!t){return}this.areas=k(t,function(t){return IP(this.option,t)},this)},setBrushOption:function(t){this.brushOption=IP(this.option,t);this.brushType=this.brushOption.brushType}});function IP(t,e){return x({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new kl(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,true)}ad({type:"brush",init:function(t,e){this.ecModel=t;this.api=e;this.model;(this._brushController=new FM(e.getZr())).on("brush",E(this._onBrush,this)).mount()},render:function(t){this.model=t;return TP.apply(this,arguments)},updateTransform:TP,updateView:TP,dispose:function(){this._brushController.dispose()},_onBrush:function(t,e){var r=this.model.id;this.model.brushTargetManager.setOutputRanges(t,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:y(t),$from:r})}});function TP(t,e,r,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(r)).enableBrush(t.brushOption).updateCovers(t.areas.slice())}Kv({type:"brush",event:"brush"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(e){e.setAreas(t.areas)})});Kv({type:"brushSelect",event:"brushSelected",update:"none"},function(){});var DP={};function AP(t,e){DP[t]=e}function CP(t){return DP[t]}var LP=ac.toolbox.brush;function kP(t,e,r){this.model=t;this.ecModel=e;this.api=r;this._brushType;this._brushMode}kP.defaultOption={show:true,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:y(LP.title)};var PP=kP.prototype;PP.render=PP.updateView=function(t,e,r){var i;var a;var n;e.eachComponent({mainType:"brush"},function(t){i=t.brushType;a=t.brushOption.brushMode||"single";n|=t.areas.length});this._brushType=i;this._brushMode=a;L(t.get("type",true),function(e){t.setIconStatus(e,(e==="keep"?a==="multiple":e==="clear"?n:e===i)?"emphasis":"normal")})};PP.getIcons=function(){var t=this.model;var e=t.get("icon",true);var r={};L(t.get("type",true),function(t){if(e[t]){r[t]=e[t]}});return r};PP.onclick=function(t,e,r){var i=this._brushType;var a=this._brushMode;if(r==="clear"){e.dispatchAction({type:"axisAreaSelect",intervals:[]});e.dispatchAction({type:"brush",command:"clear",areas:[]})}else{e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:r==="keep"?i:i===r?false:r,brushMode:r==="keep"?a==="multiple"?"single":"multiple":a}})}};AP("brush",kP);jv(Pk);var NP=864e5;function OP(t,e,r){this._model=t}OP.prototype={constructor:OP,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(t){t=Jl(t);var e=t.getFullYear();var r=t.getMonth()+1;r=r<10?"0"+r:r;var i=t.getDate();i=i<10?"0"+i:i;var a=t.getDay();a=Math.abs((a+7-this.getFirstDayOfWeek())%7);return{y:e,m:r,d:i,day:a,time:t.getTime(),formatedDate:e+"-"+r+"-"+i,date:t}},getNextNDay:function(t,e){e=e||0;if(e===0){return this.getDateInfo(t)}t=new Date(this.getDateInfo(t).time);t.setDate(t.getDate()+e);return this.getDateInfo(t)},update:function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay");this._orient=this._model.get("orient");this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0;this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1;var i=["width","height"];var a=this._model.get("cellSize").slice();var n=this._model.getBoxLayoutParams();var o=this._orient==="horizontal"?[r,7]:[7,r];L([0,1],function(t){if(u(a,t)){n[i[t]]=a[t]*o[t]}});var s={width:e.getWidth(),height:e.getHeight()};var l=this._rect=Lu(n,s);L([0,1],function(t){if(!u(a,t)){a[t]=l[i[t]]/o[t]}});function u(t,e){return t[e]!=null&&t[e]!=="auto"}this._sw=a[0];this._sh=a[1]},dataToPoint:function(t,e){z(t)&&(t=t[0]);e==null&&(e=true);var r=this.getDateInfo(t);var i=this._rangeInfo;var a=r.formatedDate;if(e&&!(r.time>=i.start.time&&r.time<i.end.time+NP)){return[NaN,NaN]}var n=r.day;var o=this._getRangeInfo([i.start.time,a]).nthWeek;if(this._orient==="vertical"){return[this._rect.x+n*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]}return[this._rect.x+o*this._sw+this._sw/2,this._rect.y+n*this._sh+this._sh/2]},pointToData:function(t){var e=this.pointToDate(t);return e&&e.time},dataToRect:function(t,e){var r=this.dataToPoint(t,e);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},pointToDate:function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1;var r=Math.floor((t[1]-this._rect.y)/this._sh)+1;var i=this._rangeInfo.range;if(this._orient==="vertical"){return this._getDateByWeeksAndDay(r,e-1,i)}return this._getDateByWeeksAndDay(e,r-1,i)},convertToPixel:R(EP,"dataToPoint"),convertFromPixel:R(EP,"pointToData"),_initRangeOption:function(){var t=this._model.get("range");var e=t;if(z(e)&&e.length===1){e=e[0]}if(/^\d{4}$/.test(e)){t=[e+"-01-01",e+"-12-31"]}if(/^\d{4}[\/|-]\d{1,2}$/.test(e)){var r=this.getDateInfo(e);var i=r.date;i.setMonth(i.getMonth()+1);var a=this.getNextNDay(i,-1);t=[r.formatedDate,a.formatedDate]}if(/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(e)){t=[e,e]}var n=this._getRangeInfo(t);if(n.start.time>n.end.time){t.reverse()}return t},_getRangeInfo:function(t){t=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];var e;if(t[0].time>t[1].time){e=true;t.reverse()}var r=Math.floor(t[1].time/NP)-Math.floor(t[0].time/NP)+1;var i=new Date(t[0].time);var a=i.getDate();var n=t[1].date.getDate();i.setDate(a+r-1);if(i.getDate()!==n){var o=i.getTime()-t[1].time>0?1:-1;while(i.getDate()!==n&&(i.getTime()-t[1].time)*o>0){r-=o;i.setDate(a+r-1)}}var s=Math.floor((r+t[0].day+6)/7);var l=e?-s+1:s-1;e&&t.reverse();return{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:r,weeks:s,nthWeek:l,fweek:t[0].day,lweek:t[1].day}},_getDateByWeeksAndDay:function(t,e,r){var i=this._getRangeInfo(r);if(t>i.weeks||t===0&&e<i.fweek||t===i.weeks&&e>i.lweek){return false}var a=(t-1)*7-i.fweek+e;var n=new Date(i.start.time);n.setDate(i.start.d+a);return this.getDateInfo(n)}};OP.dimensions=OP.prototype.dimensions;OP.getDimensionsInfo=OP.prototype.getDimensionsInfo;OP.create=function(t,e){var r=[];t.eachComponent("calendar",function(i){var a=new OP(i,t,e);r.push(a);i.coordinateSystem=a});t.eachSeries(function(t){if(t.get("coordinateSystem")==="calendar"){t.coordinateSystem=r[t.get("calendarIndex")||0]}});return r};function EP(t,e,r,i){var a=r.calendarModel;var n=r.seriesModel;var o=a?a.coordinateSystem:n?n.coordinateSystem:null;return o===this?o[t](i):null}Ch.register("calendar",OP);var RP=Bu.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:true,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:true,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:true,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:true,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(t,e,r,i){var a=Ou(t);RP.superApply(this,"init",arguments);zP(t,a)},mergeOption:function(t,e){RP.superApply(this,"mergeOption",arguments);zP(this.option,t)}});function zP(t,e){var r=t.cellSize;if(!z(r)){r=t.cellSize=[r,r]}else if(r.length===1){r[1]=r[0]}var i=k([0,1],function(t){if(Pu(e,t)){r[t]="auto"}return r[t]!=null&&r[t]!=="auto"});Nu(t,e,{type:"box",ignoreSize:i})}var BP={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["","","","","","","","","","","",""]};var VP={EN:["S","M","T","W","T","F","S"],CN:["","","","","","",""]};ad({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(t,e,r){var i=this.group;i.removeAll();var a=t.coordinateSystem;var n=a.getRangeInfo();var o=a.getOrient();this._renderDayRect(t,n,i);this._renderLines(t,n,o,i);this._renderYearText(t,n,o,i);this._renderMonthText(t,o,i);this._renderWeekText(t,n,o,i)},_renderDayRect:function(t,e,r){var i=t.coordinateSystem;var a=t.getModel("itemStyle").getItemStyle();var n=i.getCellWidth();var o=i.getCellHeight();for(var s=e.start.time;s<=e.end.time;s=i.getNextNDay(s,1).time){var l=i.dataToRect([s],false).tl;var u=new xs({shape:{x:l[0],y:l[1],width:n,height:o},cursor:"default",style:a});r.add(u)}},_renderLines:function(t,e,r,i){var a=this;var n=t.coordinateSystem;var o=t.getModel("splitLine.lineStyle").getLineStyle();var s=t.get("splitLine.show");var l=o.lineWidth;this._tlpoints=[];this._blpoints=[];this._firstDayOfMonth=[];this._firstDayPoints=[];var u=e.start;for(var h=0;u.time<=e.end.time;h++){c(u.formatedDate);if(h===0){u=n.getDateInfo(e.start.y+"-"+e.start.m)}var f=u.date;f.setMonth(f.getMonth()+1);u=n.getDateInfo(f)}c(n.getNextNDay(e.end.time,1).formatedDate);function c(e){a._firstDayOfMonth.push(n.getDateInfo(e));a._firstDayPoints.push(n.dataToRect([e],false).tl);var l=a._getLinePointsOfOneWeek(t,e,r);a._tlpoints.push(l[0]);a._blpoints.push(l[l.length-1]);s&&a._drawSplitline(l,o,i)}s&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,l,r),o,i);s&&this._drawSplitline(a._getEdgesPoints(a._blpoints,l,r),o,i)},_getEdgesPoints:function(t,e,r){var i=[t[0].slice(),t[t.length-1].slice()];var a=r==="horizontal"?0:1;i[0][a]=i[0][a]-e/2;i[1][a]=i[1][a]+e/2;return i},_drawSplitline:function(t,e,r){var i=new ys({z2:20,shape:{points:t},style:e});r.add(i)},_getLinePointsOfOneWeek:function(t,e,r){var i=t.coordinateSystem;e=i.getDateInfo(e);var a=[];for(var n=0;n<7;n++){var o=i.getNextNDay(e.time,n);var s=i.dataToRect([o.time],false);a[2*o.day]=s.tl;a[2*o.day+1]=s[r==="horizontal"?"bl":"tr"]}return a},_formatterLabel:function(t,e){if(typeof t==="string"&&t){return du(t,e)}if(typeof t==="function"){return t(e)}return e.nameMap},_yearTextPositionControl:function(t,e,r,i,a){e=e.slice();var n=["center","bottom"];if(i==="bottom"){e[1]+=a;n=["center","top"]}else if(i==="left"){e[0]-=a}else if(i==="right"){e[0]+=a;n=["center","top"]}else{e[1]-=a}var o=0;if(i==="left"||i==="right"){o=Math.PI/2}return{rotation:o,position:e,style:{textAlign:n[0],textVerticalAlign:n[1]}}},_renderYearText:function(t,e,r,i){var a=t.getModel("yearLabel");if(!a.get("show")){return}var n=a.get("margin");var o=a.get("position");if(!o){o=r!=="horizontal"?"top":"left"}var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]];var l=(s[0][0]+s[1][0])/2;var u=(s[0][1]+s[1][1])/2;var h=r==="horizontal"?0:1;var f={top:[l,s[h][1]],bottom:[l,s[1-h][1]],left:[s[1-h][0],u],right:[s[h][0],u]};var c=e.start.y;if(+e.end.y>+e.start.y){c=c+"-"+e.end.y}var v=a.get("formatter");var d={start:e.start.y,end:e.end.y,nameMap:c};var p=this._formatterLabel(v,d);var g=new ss({z2:30});nl(g.style,a,{text:p}),g.attr(this._yearTextPositionControl(g,f[o],r,o,n));i.add(g)},_monthTextPositionControl:function(t,e,r,i,a){var n="left";var o="top";var s=t[0];var l=t[1];if(r==="horizontal"){l=l+a;if(e){n="center"}if(i==="start"){o="bottom"}}else{s=s+a;if(e){o="middle"}if(i==="start"){n="right"}}return{x:s,y:l,textAlign:n,textVerticalAlign:o}},_renderMonthText:function(t,e,r){var i=t.getModel("monthLabel");if(!i.get("show")){return}var a=i.get("nameMap");var n=i.get("margin");var o=i.get("position");var s=i.get("align");var l=[this._tlpoints,this._blpoints];if(V(a)){a=BP[a.toUpperCase()]||[]}var u=o==="start"?0:1;var h=e==="horizontal"?0:1;n=o==="start"?-n:n;var f=s==="center";for(var c=0;c<l[u].length-1;c++){var v=l[u][c].slice();var d=this._firstDayOfMonth[c];if(f){var p=this._firstDayPoints[c];v[h]=(p[h]+l[0][c+1][h])/2}var g=i.get("formatter");var m=a[+d.m-1];var y={yyyy:d.y,yy:(d.y+"").slice(2),MM:d.m,M:+d.m,nameMap:m};var x=this._formatterLabel(g,y);var _=new ss({z2:30});w(nl(_.style,i,{text:x}),this._monthTextPositionControl(v,f,e,o,n));r.add(_)}},_weekTextPositionControl:function(t,e,r,i,a){var n="center";var o="middle";var s=t[0];var l=t[1];var u=r==="start";if(e==="horizontal"){s=s+i+(u?1:-1)*a[0]/2;n=u?"right":"left"}else{l=l+i+(u?1:-1)*a[1]/2;o=u?"bottom":"top"}return{x:s,y:l,textAlign:n,textVerticalAlign:o}},_renderWeekText:function(t,e,r,i){var a=t.getModel("dayLabel");if(!a.get("show")){return}var n=t.coordinateSystem;var o=a.get("position");var s=a.get("nameMap");var l=a.get("margin");var u=n.getFirstDayOfWeek();if(V(s)){s=VP[s.toUpperCase()]||[]}var h=n.getNextNDay(e.end.time,7-e.lweek).time;var f=[n.getCellWidth(),n.getCellHeight()];l=Wl(l,f[r==="horizontal"?0:1]);if(o==="start"){h=n.getNextNDay(e.start.time,-(7+e.fweek)).time;l=-l}for(var c=0;c<7;c++){var v=n.getNextNDay(h,c);var d=n.dataToRect([v.time],false).center;var p=c;p=Math.abs((c+u)%7);var g=new ss({z2:30});w(nl(g.style,a,{text:s[p]}),this._weekTextPositionControl(d,r,o,l,f));i.add(g)}}});id({type:"title",layoutMode:{type:"box",ignoreSize:true},defaultOption:{zlevel:0,z:6,show:true,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}});ad({type:"title",render:function(t,e,r){this.group.removeAll();if(!t.get("show")){return}var i=this.group;var a=t.getModel("textStyle");var n=t.getModel("subtextStyle");var o=t.get("textAlign");var s=t.get("textBaseline");var l=new ss({style:nl({},a,{text:t.get("text"),textFill:a.getTextColor()},{disableBox:true}),z2:10});var u=l.getBoundingRect();var h=t.get("subtext");var f=new ss({style:nl({},n,{text:h,textFill:n.getTextColor(),y:u.height+t.get("itemGap"),textVerticalAlign:"top"},{disableBox:true}),z2:10});var c=t.get("link");var v=t.get("sublink");l.silent=!c;f.silent=!v;if(c){l.on("click",function(){window.open(c,"_"+t.get("target"))})}if(v){f.on("click",function(){window.open(v,"_"+t.get("subtarget"))})}i.add(l);h&&i.add(f);var d=i.getBoundingRect();var p=t.getBoxLayoutParams();p.width=d.width;p.height=d.height;var g=Lu(p,{width:r.getWidth(),height:r.getHeight()},t.get("padding"));if(!o){o=t.get("left")||t.get("right");if(o==="middle"){o="center"}if(o==="right"){g.x+=g.width}else if(o==="center"){g.x+=g.width/2}}if(!s){s=t.get("top")||t.get("bottom");if(s==="center"){s="middle"}if(s==="bottom"){g.y+=g.height}else if(s==="middle"){g.y+=g.height/2}s=s||"top"}i.attr("position",[g.x,g.y]);var m={textAlign:o,textVerticalAlign:s};l.setStyle(m);f.setStyle(m);d=i.getBoundingRect();var y=g.margin;var x=t.getItemStyle(["color","opacity"]);x.fill=t.get("backgroundColor");var _=new xs({shape:{x:d.x-y[3],y:d.y-y[0],width:d.width+y[1]+y[3],height:d.height+y[0]+y[2],r:t.get("borderRadius")},style:x,silent:true});Hs(_);i.add(_)}});Bu.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var GP=["x","y","z","radius","angle","single"];var WP=["cartesian2d","polar","singleAxis"];function FP(t){return T(WP,t)>=0}function HP(t,e){t=t.slice();var r=k(t,yu);e=(e||[]).slice();var i=k(e,yu);return function(a,n){L(t,function(t,o){var s={name:t,capital:r[o]};for(var l=0;l<e.length;l++){s[e[l]]=t+i[l]}a.call(n,s)})}}var ZP=HP(GP,["axisIndex","axis","index","id"]);function UP(t,e,r){return function(r){var o={nodes:[],records:{}};e(function(t){o.records[t.name]={}});if(!r){return o}n(r,o);var s;do{s=false;t(l)}while(s);function l(t){if(!i(t,o)&&a(t,o)){n(t,o);s=true}}return o};function i(t,e){return T(e.nodes,t)>=0}function a(t,i){var a=false;e(function(e){L(r(t,e)||[],function(t){i.records[e.name][t]&&(a=true)})});return a}function n(t,i){i.nodes.push(t);e(function(e){L(r(t,e)||[],function(t){i.records[e.name][t]=true})})}}var XP=L;var jP=Hl;var YP=function(t,e,r,i){this._dimName=t;this._axisIndex=e;this._valueWindow;this._percentWindow;this._dataExtent;this._minMaxSpan;this.ecModel=i;this._dataZoomModel=r};YP.prototype={constructor:YP,hostedBy:function(t){return this._dataZoomModel===t},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var t=[];var e=this.ecModel;e.eachSeries(function(r){if(FP(r.get("coordinateSystem"))){var i=this._dimName;var a=e.queryComponents({mainType:i+"Axis",index:r.get(i+"AxisIndex"),id:r.get(i+"AxisId")})[0];if(this._axisIndex===(a&&a.componentIndex)){t.push(r)}}},this);return t},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var t=this._dimName;var e=this.ecModel;var r=this.getAxisModel();var i=t==="x"||t==="y";var a;var n;if(i){n="gridIndex";a=t==="x"?"y":"x"}else{n="polarIndex";a=t==="angle"?"radius":"angle"}var o;e.eachComponent(a+"Axis",function(t){if((t.get(n)||0)===(r.get(n)||0)){o=t}});return o},getMinMaxSpan:function(){return y(this._minMaxSpan)},calculateDataWindow:function(t){var e=this._dataExtent;var r=this.getAxisModel();var i=r.axis.scale;var a=this._dataZoomModel.getRangePropMode();var n=[0,100];var o=[t.start,t.end];var s=[];XP(["startValue","endValue"],function(e){s.push(t[e]!=null?i.parse(t[e]):null)});XP([0,1],function(t){var r=s[t];var l=o[t];if(a[t]==="percent"){if(l==null){l=n[t]}r=i.parse(Gl(l,n,e,true))}else{l=Gl(r,e,n,true)}s[t]=r;o[t]=l});return{valueWindow:jP(s),percentWindow:jP(o)}},reset:function(t){if(t!==this._dataZoomModel){return}var e=this.getTargetSeriesModels();this._dataExtent=qP(this,this._dimName,e);var r=this.calculateDataWindow(t.option);this._valueWindow=r.valueWindow;this._percentWindow=r.percentWindow;JP(this);$P(this)},restore:function(t){if(t!==this._dataZoomModel){return}this._valueWindow=this._percentWindow=null;$P(this,true)},filterData:function(t,e){if(t!==this._dataZoomModel){return}var r=this._dimName;var i=this.getTargetSeriesModels();var a=t.get("filterMode");var n=this._valueWindow;if(a==="none"){return}XP(i,function(t){var e=t.getData();var i=e.mapDimension(r,true);if(a==="weakFilter"){e.filterSelf(function(t){var r;var a;var o;for(var s=0;s<i.length;s++){var l=e.get(i[s],t);var u=!isNaN(l);
var h=l<n[0];var f=l>n[1];if(u&&!h&&!f){return true}u&&(o=true);h&&(r=true);f&&(a=true)}return o&&r&&a})}else{XP(i,function(r){if(a==="empty"){t.setData(e.map(r,function(t){return!o(t)?NaN:t}))}else{var i={};i[r]=n;e.selectRange(i)}})}XP(i,function(t){e.setApproximateExtent(n,t)})});function o(t){return t>=n[0]&&t<=n[1]}}};function qP(t,e,r){var i=[Infinity,-Infinity];XP(r,function(t){var r=t.getData();if(r){XP(r.mapDimension(e,true),function(t){var e=r.getApproximateExtent(t);e[0]<i[0]&&(i[0]=e[0]);e[1]>i[1]&&(i[1]=e[1])})}});if(i[1]<i[0]){i=[NaN,NaN]}KP(t,i);return i}function KP(t,e){var r=t.getAxisModel();var i=r.getMin(true);var a=r.get("type")==="category";var n=a&&r.getCategories().length;if(i!=null&&i!=="dataMin"&&typeof i!=="function"){e[0]=i}else if(a){e[0]=n>0?0:NaN}var o=r.getMax(true);if(o!=null&&o!=="dataMax"&&typeof o!=="function"){e[1]=o}else if(a){e[1]=n>0?n-1:NaN}if(!r.get("scale",true)){e[0]>0&&(e[0]=0);e[1]<0&&(e[1]=0)}return e}function $P(t,e){var r=t.getAxisModel();var i=t._percentWindow;var a=t._valueWindow;if(!i){return}var n=Xl(a,[0,500]);n=Math.min(n,20);var o=e||i[0]===0&&i[1]===100;r.setRange(o?null:+a[0].toFixed(n),o?null:+a[1].toFixed(n))}function JP(t){var e=t._minMaxSpan={};var r=t._dataZoomModel;XP(["min","max"],function(i){e[i+"Span"]=r.get(i+"Span");var a=r.get(i+"ValueSpan");if(a!=null){e[i+"ValueSpan"]=a;a=t.getAxisModel().axis.scale.parse(a);if(a!=null){var n=t._dataExtent;e[i+"Span"]=Gl(n[0]+a,n,[0,100],true)}}})}var QP=L;var tN=ZP;var eN=id({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(t,e,r){this._dataIntervalByAxis={};this._dataInfo={};this._axisProxies={};this.textStyleModel;this._autoThrottle=true;this._rangePropMode=["percent","percent"];var i=rN(t);this.mergeDefaultAndTheme(t,r);this.doInit(i)},mergeOption:function(t){var e=rN(t);x(this.option,t,true);this.doInit(e)},doInit:function(t){var e=this.option;if(!n.canvasSupported){e.realtime=false}this._setDefaultThrottle(t);iN(this,t);QP([["start","startValue"],["end","endValue"]],function(t,r){if(this._rangePropMode[r]==="value"){e[t[0]]=null}},this);this.textStyleModel=this.getModel("textStyle");this._resetTarget();this._giveAxisProxies()},_giveAxisProxies:function(){var t=this._axisProxies;this.eachTargetAxis(function(e,r,i,a){var n=this.dependentModels[e.axis][r];var o=n.__dzAxisProxy||(n.__dzAxisProxy=new YP(e.name,r,this,a));t[e.name+"_"+r]=o},this)},_resetTarget:function(){var t=this.option;var e=this._judgeAutoMode();tN(function(e){var r=e.axisIndex;t[r]=Ga(t[r])},this);if(e==="axisIndex"){this._autoSetAxisIndex()}else if(e==="orient"){this._autoSetOrient()}},_judgeAutoMode:function(){var t=this.option;var e=false;tN(function(r){if(t[r.axisIndex]!=null){e=true}},this);var r=t.orient;if(r==null&&e){return"orient"}else if(!e){if(r==null){t.orient="horizontal"}return"axisIndex"}},_autoSetAxisIndex:function(){var t=true;var r=this.get("orient",true);var i=this.option;var a=this.dependentModels;if(t){var n=r==="vertical"?"y":"x";if(a[n+"Axis"].length){i[n+"AxisIndex"]=[0];t=false}else{QP(a.singleAxis,function(e){if(t&&e.get("orient",true)===r){i.singleAxisIndex=[e.componentIndex];t=false}})}}if(t){tN(function(e){if(!t){return}var r=[];var a=this.dependentModels[e.axis];if(a.length&&!r.length){for(var n=0,o=a.length;n<o;n++){if(a[n].get("type")==="category"){r.push(n)}}}i[e.axisIndex]=r;if(r.length){t=false}},this)}if(t){this.ecModel.eachSeries(function(t){if(this._isSeriesHasAllAxesTypeOf(t,"value")){tN(function(r){var a=i[r.axisIndex];var n=t.get(r.axisIndex);var o=t.get(r.axisId);var s=t.ecModel.queryComponents({mainType:r.axis,index:n,id:o})[0];if(e){if(!s){throw new Error(r.axis+' "'+U(n,o,0)+'" not found')}}n=s.componentIndex;if(T(a,n)<0){a.push(n)}})}},this)}},_autoSetOrient:function(){var t;this.eachTargetAxis(function(e){!t&&(t=e.name)},this);this.option.orient=t==="y"?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(t,e){var r=true;tN(function(i){var a=t.get(i.axisIndex);var n=this.dependentModels[i.axis][a];if(!n||n.get("type")!==e){r=false}},this);return r},_setDefaultThrottle:function(t){if(t.hasOwnProperty("throttle")){this._autoThrottle=false}if(this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var t;tN(function(e){if(t==null){var r=this.get(e.axisIndex);if(r.length){t=this.dependentModels[e.axis][r[0]]}}},this);return t},eachTargetAxis:function(t,e){var r=this.ecModel;tN(function(i){QP(this.get(i.axisIndex),function(a){t.call(e,i,a,this,r)},this)},this)},getAxisProxy:function(t,e){return this._axisProxies[t+"_"+e]},getAxisModel:function(t,e){var r=this.getAxisProxy(t,e);return r&&r.getAxisModel()},setRawRange:function(t,e){var r=this.option;QP([["start","startValue"],["end","endValue"]],function(e){if(t[e[0]]!=null||t[e[1]]!=null){r[e[0]]=t[e[0]];r[e[1]]=t[e[1]]}},this);!e&&iN(this,t)},getPercentRange:function(){var t=this.findRepresentativeAxisProxy();if(t){return t.getDataPercentWindow()}},getValueRange:function(t,e){if(t==null&&e==null){var r=this.findRepresentativeAxisProxy();if(r){return r.getDataValueWindow()}}else{return this.getAxisProxy(t,e).getDataValueWindow()}},findRepresentativeAxisProxy:function(t){if(t){return t.__dzAxisProxy}var e=this._axisProxies;for(var r in e){if(e.hasOwnProperty(r)&&e[r].hostedBy(this)){return e[r]}}for(var r in e){if(e.hasOwnProperty(r)&&!e[r].hostedBy(this)){return e[r]}}},getRangePropMode:function(){return this._rangePropMode.slice()}});function rN(t){var e={};QP(["start","end","startValue","endValue","throttle"],function(r){t.hasOwnProperty(r)&&(e[r]=t[r])});return e}function iN(t,e){var r=t._rangePropMode;var i=t.get("rangeMode");QP([["start","startValue"],["end","endValue"]],function(t,a){var n=e[t[0]]!=null;var o=e[t[1]]!=null;if(n&&!o){r[a]="percent"}else if(!n&&o){r[a]="value"}else if(i){r[a]=i[a]}else if(n){r[a]="percent"}})}var aN=Vf.extend({type:"dataZoom",render:function(t,e,r,i){this.dataZoomModel=t;this.ecModel=e;this.api=r},getTargetCoordInfo:function(){var t=this.dataZoomModel;var e=this.ecModel;var r={};t.eachTargetAxis(function(t,a){var n=e.getComponent(t.axis,a);if(n){var o=n.getCoordSysModel();o&&i(o,n,r[o.mainType]||(r[o.mainType]=[]),o.componentIndex)}},this);function i(t,e,r,i){var a;for(var n=0;n<r.length;n++){if(r[n].model===t){a=r[n];break}}if(!a){r.push(a={model:t,axisModels:[],coordIndex:i})}a.axisModels.push(e)}return r}});var nN=eN.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:true,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:true,showDataShadow:"auto",realtime:true,zoomLock:false,textStyle:{color:"#333"}}});var oN=xs;var sN=Gl;var lN=Hl;var uN=E;var hN=L;var fN=7;var cN=1;var vN=30;var dN="horizontal";var pN="vertical";var gN=5;var mN=["line","bar","candlestick","scatter"];var yN=aN.extend({type:"dataZoom.slider",init:function(t,e){this._displayables={};this._orient;this._range;this._handleEnds;this._size;this._handleWidth;this._handleHeight;this._location;this._dragging;this._dataShadowInfo;this.api=e},render:function(t,e,r,i){yN.superApply(this,"render",arguments);ec(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate");this._orient=t.get("orient");if(this.dataZoomModel.get("show")===false){this.group.removeAll();return}if(!i||i.type!=="dataZoom"||i.from!==this.uid){this._buildView()}this._updateView()},remove:function(){yN.superApply(this,"remove",arguments);rc(this,"_dispatchZoomAction")},dispose:function(){yN.superApply(this,"dispose",arguments);rc(this,"_dispatchZoomAction")},_buildView:function(){var t=this.group;t.removeAll();this._resetLocation();this._resetInterval();var e=this._displayables.barGroup=new fr;this._renderBackground();this._renderHandle();this._renderDataShadow();t.add(e);this._positionGroup()},_resetLocation:function(){var t=this.dataZoomModel;var e=this.api;var r=this._findCoordRect();var i={width:e.getWidth(),height:e.getHeight()};var a=this._orient===dN?{right:i.width-r.x-r.width,top:i.height-vN-fN,width:r.width,height:vN}:{right:fN,top:r.y,width:vN,height:r.height};var n=Ou(t.option);L(["right","top","width","height"],function(t){if(n[t]==="ph"){n[t]=a[t]}});var o=Lu(n,i,t.padding);this._location={x:o.x,y:o.y};this._size=[o.width,o.height];this._orient===pN&&this._size.reverse()},_positionGroup:function(){var t=this.group;var e=this._location;var r=this._orient;var i=this.dataZoomModel.getFirstTargetAxisModel();var a=i&&i.get("inverse");var n=this._displayables.barGroup;var o=(this._dataShadowInfo||{}).otherAxisInverse;n.attr(r===dN&&!a?{scale:o?[1,1]:[1,-1]}:r===dN&&a?{scale:o?[-1,1]:[-1,-1]}:r===pN&&!a?{scale:o?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:o?[-1,-1]:[-1,1],rotation:Math.PI/2});var s=t.getBoundingRect([n]);t.attr("position",[e.x-s.x,e.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this.dataZoomModel;var e=this._size;var r=this._displayables.barGroup;r.add(new oN({silent:true,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));r.add(new oN({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:E(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(!t){return}var e=this._size;var r=t.series;var i=r.getRawData();var a=r.getShadowDim?r.getShadowDim():t.otherDim;if(a==null){return}var n=i.getDataExtent(a);var o=(n[1]-n[0])*.3;n=[n[0]-o,n[1]+o];var s=[0,e[1]];var l=[0,e[0]];var u=[[e[0],0],[0,0]];var h=[];var f=l[1]/(i.count()-1);var c=0;var v=Math.round(i.count()/e[0]);var d;i.each([a],function(t,e){if(v>0&&e%v){c+=f;return}var r=t==null||isNaN(t)||t==="";var i=r?0:sN(t,n,s,true);if(r&&!d&&e){u.push([u[u.length-1][0],0]);h.push([h[h.length-1][0],0])}else if(!r&&d){u.push([c,0]);h.push([c,0])}u.push([c,i]);h.push([c,i]);c+=f;d=r});var p=this.dataZoomModel;this._displayables.barGroup.add(new ms({shape:{points:u},style:b({fill:p.get("dataBackgroundColor")},p.getModel("dataBackground.areaStyle").getAreaStyle()),silent:true,z2:-20}));this._displayables.barGroup.add(new ys({shape:{points:h},style:p.getModel("dataBackground.lineStyle").getLineStyle(),silent:true,z2:-19}))},_prepareDataShadowInfo:function(){var t=this.dataZoomModel;var e=t.get("showDataShadow");if(e===false){return}var r;var i=this.ecModel;t.eachTargetAxis(function(a,n){var o=t.getAxisProxy(a.name,n).getTargetSeriesModels();L(o,function(t){if(r){return}if(e!==true&&T(mN,t.get("type"))<0){return}var o=i.getComponent(a.axis,n).axis;var s=xN(a.name);var l;var u=t.coordinateSystem;if(s!=null&&u.getOtherAxis){l=u.getOtherAxis(o).inverse}s=t.getData().mapDimension(s);r={thisAxis:o,series:t,thisDim:a.name,otherDim:s,otherAxisInverse:l}},this)},this);return r},_renderHandle:function(){var t=this._displayables;var e=t.handles=[];var r=t.handleLabels=[];var i=this._displayables.barGroup;var a=this._size;var n=this.dataZoomModel;i.add(t.filler=new oN({draggable:true,cursor:_N(this._orient),drift:uN(this._onDragMove,this,"all"),onmousemove:function(t){na(t.event)},ondragstart:uN(this._showDataInfo,this,true),ondragend:uN(this._onDragEnd,this),onmouseover:uN(this._showDataInfo,this,true),onmouseout:uN(this._showDataInfo,this,false),style:{fill:n.get("fillerColor"),textPosition:"inside"}}));i.add(new oN(Hs({silent:true,shape:{x:0,y:0,width:a[0],height:a[1]},style:{stroke:n.get("dataBackgroundColor")||n.get("borderColor"),lineWidth:cN,fill:"rgba(0,0,0,0)"}})));hN([0,1],function(t){var a=Sl(n.get("handleIcon"),{cursor:_N(this._orient),draggable:true,drift:uN(this._onDragMove,this,t),onmousemove:function(t){na(t.event)},ondragend:uN(this._onDragEnd,this),onmouseover:uN(this._showDataInfo,this,true),onmouseout:uN(this._showDataInfo,this,false)},{x:-1,y:0,width:2,height:2});var o=a.getBoundingRect();this._handleHeight=Wl(n.get("handleSize"),this._size[1]);this._handleWidth=o.width/o.height*this._handleHeight;a.setStyle(n.getModel("handleStyle").getItemStyle());var s=n.get("handleColor");if(s!=null){a.style.fill=s}i.add(e[t]=a);var l=n.textStyleModel;this.group.add(r[t]=new ss({silent:true,invisible:true,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:l.getTextColor(),textFont:l.getFont()},z2:10}))},this)},_resetInterval:function(){var t=this._range=this.dataZoomModel.getPercentRange();var e=this._getViewExtent();this._handleEnds=[sN(t[0],[0,100],e,true),sN(t[1],[0,100],e,true)]},_updateInterval:function(t,e){var r=this.dataZoomModel;var i=this._handleEnds;var a=this._getViewExtent();var n=r.findRepresentativeAxisProxy().getMinMaxSpan();var o=[0,100];uM(e,i,a,r.get("zoomLock")?"all":t,n.minSpan!=null?sN(n.minSpan,o,a,true):null,n.maxSpan!=null?sN(n.maxSpan,o,a,true):null);var s=this._range;var l=this._range=lN([sN(i[0],a,o,true),sN(i[1],a,o,true)]);return!s||s[0]!==l[0]||s[1]!==l[1]},_updateView:function(t){var e=this._displayables;var r=this._handleEnds;var i=lN(r.slice());var a=this._size;hN([0,1],function(t){var i=e.handles[t];var n=this._handleHeight;i.attr({scale:[n/2,n/2],position:[r[t],a[1]/2-n/2]})},this);e.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:a[1]});this._updateDataInfo(t)},_updateDataInfo:function(t){var e=this.dataZoomModel;var r=this._displayables;var i=r.handleLabels;var a=this._orient;var n=["",""];if(e.get("showDetail")){var o=e.findRepresentativeAxisProxy();if(o){var s=o.getAxisModel().axis;var l=this._range;var u=t?o.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:o.getDataValueWindow();n=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var h=lN(this._handleEnds.slice());f.call(this,0);f.call(this,1);function f(t){var e=ml(r.handles[t].parent,this.group);var o=xl(t===0?"right":"left",e);var s=this._handleWidth/2+gN;var l=yl([h[t]+(t===0?-s:s),this._size[1]/2],e);i[t].setStyle({x:l[0],y:l[1],textVerticalAlign:a===dN?"middle":o,textAlign:a===dN?o:"center",text:n[t]})}},_formatLabel:function(t,e){var r=this.dataZoomModel;var i=r.get("labelFormatter");var a=r.get("labelPrecision");if(a==null||a==="auto"){a=e.getPixelPrecision()}var n=t==null||isNaN(t)?"":e.type==="category"||e.type==="time"?e.scale.getLabel(Math.round(t)):t.toFixed(Math.min(a,20));return B(i)?i(t,n):V(i)?i.replace("{value}",n):n},_showDataInfo:function(t){t=this._dragging||t;var e=this._displayables.handleLabels;e[0].attr("invisible",!t);e[1].attr("invisible",!t)},_onDragMove:function(t,e,r){this._dragging=true;var i=this._displayables.barGroup.getLocalTransform();var a=yl([e,r],i,true);var n=this._updateInterval(t,a[0]);var o=this.dataZoomModel.get("realtime");this._updateView(!o);n&&o&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=false;this._showDataInfo(false);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction()},_onClickPanelClick:function(t){var e=this._size;var r=this._displayables.barGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(r[0]<0||r[0]>e[0]||r[1]<0||r[1]>e[1]){return}var i=this._handleEnds;var a=(i[0]+i[1])/2;var n=this._updateInterval("all",r[0]-a);this._updateView();n&&this._dispatchZoomAction()},_dispatchZoomAction:function(){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:t[0],end:t[1]})},_findCoordRect:function(){var t;hN(this.getTargetCoordInfo(),function(e){if(!t&&e.length){var r=e[0].model.coordinateSystem;t=r.getRect&&r.getRect()}});if(!t){var e=this.api.getWidth();var r=this.api.getHeight();t={x:e*.2,y:r*.2,width:e*.6,height:r*.6}}return t}});function xN(t){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[t]}function _N(t){return t==="vertical"?"ns-resize":"ew-resize"}eN.extend({type:"dataZoom.inside",defaultOption:{disabled:false,zoomLock:false,zoomOnMouseWheel:true,moveOnMouseMove:true,preventDefaultMouseMove:true}});var wN=R;var bN="\0_ec_dataZoom_roams";function SN(t,e){var r=TN(t);var i=e.dataZoomId;var a=e.coordId;L(r,function(t,r){var n=t.dataZoomInfos;if(n[i]&&T(e.allCoordIds,a)<0){delete n[i];t.count--}});AN(r);var n=r[a];if(!n){n=r[a]={coordId:a,dataZoomInfos:{},count:0};n.controller=DN(t,n);n.dispatchAction=R(PN,t)}!n.dataZoomInfos[i]&&n.count++;n.dataZoomInfos[i]=e;var o=NN(n.dataZoomInfos);n.controller.enable(o.controlType,o.opt);n.controller.setPointerChecker(e.containsPoint);ec(n,"dispatchAction",e.throttleRate,"fixRate")}function MN(t,e){var r=TN(t);L(r,function(t){t.controller.dispose();var r=t.dataZoomInfos;if(r[e]){delete r[e];t.count--}});AN(r)}function IN(t){return t.type+"\0_"+t.id}function TN(t){var e=t.getZr();return e[bN]||(e[bN]={})}function DN(t,e){var r=new f_(t.getZr());r.on("pan",wN(CN,e));r.on("zoom",wN(LN,e));return r}function AN(t){L(t,function(e,r){if(!e.count){e.controller.dispose();delete t[r]}})}function CN(t,e,r,i,a,n,o){kN(t,function(s){return s.panGetRange(t.controller,e,r,i,a,n,o)})}function LN(t,e,r,i){kN(t,function(a){return a.zoomGetRange(t.controller,e,r,i)})}function kN(t,e){var r=[];L(t.dataZoomInfos,function(t){var i=e(t);!t.disabled&&i&&r.push({dataZoomId:t.dataZoomId,start:i[0],end:i[1]})});r.length&&t.dispatchAction(r)}function PN(t,e){t.dispatchAction({type:"dataZoom",batch:e})}function NN(t){var e;var r={};var i="type_";var a={type_true:2,type_move:1,type_false:0,type_undefined:-1};L(t,function(t){var n=t.disabled?false:t.zoomLock?"move":true;if(a[i+n]>a[i+e]){e=n}w(r,t.roamControllerOpt)});return{controlType:e,opt:r}}var ON=E;var EN=aN.extend({type:"dataZoom.inside",init:function(t,e){this._range},render:function(t,e,r,i){EN.superApply(this,"render",arguments);this._range=t.getPercentRange();L(this.getTargetCoordInfo(),function(e,i){var a=k(e,function(t){return IN(t.model)});L(e,function(e){var n=e.model;var o=t.option;SN(r,{coordId:IN(n),allCoordIds:a,containsPoint:function(t,e,r){return n.coordinateSystem.containPoint([e,r])},dataZoomId:t.id,throttleRate:t.get("throttle",true),panGetRange:ON(this._onPan,this,e,i),zoomGetRange:ON(this._onZoom,this,e,i),zoomLock:o.zoomLock,disabled:o.disabled,roamControllerOpt:{zoomOnMouseWheel:o.zoomOnMouseWheel,moveOnMouseMove:o.moveOnMouseMove,preventDefaultMouseMove:o.preventDefaultMouseMove}})},this)},this)},dispose:function(){MN(this.api,this.dataZoomModel.id);EN.superApply(this,"dispose",arguments);this._range=null},_onPan:function(t,e,r,i,a,n,o,s,l){var u=this._range;var h=u.slice();var f=t.axisModels[0];if(!f){return}var c=RN[e]([n,o],[s,l],f,r,t);var v=c.signal*(h[1]-h[0])*c.pixel/c.pixelLength;uM(v,h,[0,100],"all");this._range=h;if(u[0]!==h[0]||u[1]!==h[1]){return h}},_onZoom:function(t,e,r,i,a,n){var o=this._range;var s=o.slice();var l=t.axisModels[0];if(!l){return}var u=RN[e](null,[a,n],l,r,t);var h=(u.signal>0?u.pixelStart+u.pixelLength-u.pixel:u.pixel-u.pixelStart)/u.pixelLength*(s[1]-s[0])+s[0];i=Math.max(1/i,0);s[0]=(s[0]-h)*i+h;s[1]=(s[1]-h)*i+h;var f=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();uM(0,s,[0,100],0,f.minSpan,f.maxSpan);this._range=s;if(o[0]!==s[0]||o[1]!==s[1]){return s}}});var RN={grid:function(t,e,r,i,a){var n=r.axis;var o={};var s=a.model.coordinateSystem.getRect();t=t||[0,0];if(n.dim==="x"){o.pixel=e[0]-t[0];o.pixelLength=s.width;o.pixelStart=s.x;o.signal=n.inverse?1:-1}else{o.pixel=e[1]-t[1];o.pixelLength=s.height;o.pixelStart=s.y;o.signal=n.inverse?-1:1}return o},polar:function(t,e,r,i,a){var n=r.axis;var o={};var s=a.model.coordinateSystem;var l=s.getRadiusAxis().getExtent();var u=s.getAngleAxis().getExtent();t=t?s.pointToCoord(t):[0,0];e=s.pointToCoord(e);if(r.mainType==="radiusAxis"){o.pixel=e[0]-t[0];o.pixelLength=l[1]-l[0];o.pixelStart=l[0];o.signal=n.inverse?1:-1}else{o.pixel=e[1]-t[1];o.pixelLength=u[1]-u[0];o.pixelStart=u[0];o.signal=n.inverse?-1:1}return o},singleAxis:function(t,e,r,i,a){var n=r.axis;var o=a.model.coordinateSystem.getRect();var s={};t=t||[0,0];if(n.orient==="horizontal"){s.pixel=e[0]-t[0];s.pixelLength=o.width;s.pixelStart=o.x;s.signal=n.inverse?1:-1}else{s.pixel=e[1]-t[1];s.pixelLength=o.height;s.pixelStart=o.y;s.signal=n.inverse?-1:1}return s}};Yv({getTargetSeries:function(t){var e=rt();t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,r,i){var a=i.getAxisProxy(t.name,r);L(a.getTargetSeriesModels(),function(t){e.set(t.uid,t)})})});return e},modifyOutputEnd:true,overallReset:function(t,e){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,r,i){i.getAxisProxy(t.name,r).reset(i,e)});t.eachTargetAxis(function(t,r,i){i.getAxisProxy(t.name,r).filterData(i,e)})});t.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy();var r=e.getDataPercentWindow();var i=e.getDataValueWindow();t.setRawRange({start:r[0],end:r[1],startValue:i[0],endValue:i[1]},true)})}});Kv("dataZoom",function(t,e){var r=UP(E(e.eachComponent,e,"dataZoom"),ZP,function(t,e){return t.get(e.axisIndex)});var i=[];e.eachComponent({mainType:"dataZoom",query:t},function(t,e){i.push.apply(i,r(t).nodes)});L(i,function(e,r){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})});var zN=L;var BN=function(t){var e=t&&t.visualMap;if(!z(e)){e=e?[e]:[]}zN(e,function(t){if(!t){return}if(VN(t,"splitList")&&!VN(t,"pieces")){t.pieces=t.splitList;delete t.splitList}var e=t.pieces;if(e&&z(e)){zN(e,function(t){if(G(t)){if(VN(t,"start")&&!VN(t,"min")){t.min=t.start}if(VN(t,"end")&&!VN(t,"max")){t.max=t.end}}})}})};function VN(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}Bu.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"});var GN=Kc.VISUAL.COMPONENT;td(GN,{createOnAllSeries:true,reset:function(t,e){var r=[];e.eachComponent("visualMap",function(e){var i=t.pipelineContext;if(!e.isTargetSeries(t)||i&&i.large){return}r.push(Vk(e.stateList,e.targetVisuals,E(e.getValueState,e),e.getDataDimension(t.getData())))});return r}});td(GN,{createOnAllSeries:true,reset:function(t,e){var r=t.getData();var i=[];e.eachComponent("visualMap",function(e){if(e.isTargetSeries(t)){var a=e.getVisualMeta(E(WN,null,t,e))||{stops:[],outerColors:[]};var n=e.getDataDimension(r);var o=r.getDimensionInfo(n);if(o!=null){a.dimension=o.index;i.push(a)}}});t.getData().setVisual("visualMeta",i)}});function WN(t,e,r,i){var a=e.targetVisuals[i];var n=$w.prepareVisualTypes(a);var o={color:t.getData().getVisual("color")};for(var s=0,l=n.length;s<l;s++){var u=n[s];var h=a[u==="opacity"?"__alphaForOpacity":u];h&&h.applyVisual(r,f,c)}return o.color;function f(t){return o[t]}function c(t,e){o[t]=e}}var FN={get:function(t,e,r){var i=y((HN[t]||{})[e]);return r?z(i)?i[i.length-1]:i:i}};var HN={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};var ZN=$w.mapVisual;var UN=$w.eachVisual;var XN=z;var jN=L;var YN=Hl;var qN=Gl;var KN=at;var $N=id({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-Infinity,Infinity],layoutMode:{type:"box",ignoreSize:true},defaultOption:{show:true,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:false,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(t,e,r){this._dataExtent;this.targetVisuals={};this.controllerVisuals={};this.textStyleModel;this.itemSize;this.mergeDefaultAndTheme(t,r)},optionUpdated:function(t,e){var r=this.option;if(!n.canvasSupported){r.realtime=false}!e&&zk(r,t,this.replacableOptionKeys);this.textStyleModel=this.getModel("textStyle");this.resetItemSize();this.completeVisualOption()},resetVisual:function(t){var e=this.stateList;t=E(t,this);this.controllerVisuals=Rk(this.option.controller,e,t);this.targetVisuals=Rk(this.option.target,e,t)},getTargetSeriesIndices:function(){var t=this.option.seriesIndex;var e=[];if(t==null||t==="all"){this.ecModel.eachSeries(function(t,r){e.push(r)})}else{e=Ga(t)}return e},eachTargetSeries:function(t,e){L(this.getTargetSeriesIndices(),function(r){t.call(e,this.ecModel.getSeriesByIndex(r))},this)},isTargetSeries:function(t){var e=false;this.eachTargetSeries(function(r){r===t&&(e=true)});return e},formatValueText:function(t,e,r){var i=this.option;var a=i.precision;var n=this.dataBound;var o=i.formatter;var s;var l;r=r||["<",">"];if(z(t)){t=t.slice();s=true}l=e?t:s?[u(t[0]),u(t[1])]:u(t);if(V(o)){return o.replace("{value}",s?l[0]:l).replace("{value2}",s?l[1]:l)}else if(B(o)){return s?o(t[0],t[1]):o(t)}if(s){if(t[0]===n[0]){return r[0]+" "+l[1]}else if(t[1]===n[1]){return r[1]+" "+l[0]}else{return l[0]+" - "+l[1]}}else{return l}function u(t){return t===n[0]?"min":t===n[1]?"max":(+t).toFixed(Math.min(a,20))}},resetExtent:function(){var t=this.option;var e=YN([t.min,t.max]);this._dataExtent=e},getDataDimension:function(t){var e=this.option.dimension;var r=t.dimensions;if(e==null&&!r.length){return}if(e!=null){return t.getDimension(e)}var i=t.dimensions;for(var a=i.length-1;a>=0;a--){var n=i[a];var o=t.getDimensionInfo(n);if(!o.isCalculationCoord){return n}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var t=this.ecModel;var e=this.option;var r={inRange:e.inRange,outOfRange:e.outOfRange};var i=e.target||(e.target={});var a=e.controller||(e.controller={});x(i,r);x(a,r);var n=this.isCategory();o.call(this,i);o.call(this,a);s.call(this,i,"inRange","outOfRange");l.call(this,a);function o(r){if(XN(e.color)&&!r.inRange){r.inRange={color:e.color.slice().reverse()}}r.inRange=r.inRange||{color:t.get("gradientColor")};jN(this.stateList,function(t){var e=r[t];if(V(e)){var i=FN.get(e,"active",n);if(i){r[t]={};r[t][e]=i}else{delete r[t]}}},this)}function s(t,e,r){var i=t[e];var a=t[r];if(i&&!a){a=t[r]={};jN(i,function(t,e){if(!$w.isValidType(e)){return}var r=FN.get(e,"inactive",n);if(r!=null){a[e]=r;if(e==="color"&&!a.hasOwnProperty("opacity")&&!a.hasOwnProperty("colorAlpha")){a.opacity=[0,0]}}})}}function l(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol;var r=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize;var i=this.get("inactiveColor");jN(this.stateList,function(a){var o=this.itemSize;var s=t[a];if(!s){s=t[a]={color:n?i:[i]}}if(s.symbol==null){s.symbol=e&&y(e)||(n?"roundRect":["roundRect"])}if(s.symbolSize==null){s.symbolSize=r&&y(r)||(n?o[0]:[o[0],o[0]])}s.symbol=ZN(s.symbol,function(t){return t==="none"||t==="square"?"roundRect":t});var l=s.symbolSize;if(l!=null){var u=-Infinity;UN(l,function(t){t>u&&(u=t)});s.symbolSize=ZN(l,function(t){return qN(t,[0,u],[0,o[0]],true)})}},this)}},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:KN,getValueState:KN,getVisualMeta:KN});var JN=[20,140];var QN=$N.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:false,range:null,realtime:true,itemHeight:null,itemWidth:null,hoverLink:true,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(t,e){QN.superApply(this,"optionUpdated",arguments);this.resetExtent();this.resetVisual(function(t){t.mappingMethod="linear";t.dataExtent=this.getExtent()});this._resetRange()},resetItemSize:function(){QN.superApply(this,"resetItemSize",arguments);var t=this.itemSize;this._orient==="horizontal"&&t.reverse();(t[0]==null||isNaN(t[0]))&&(t[0]=JN[0]);(t[1]==null||isNaN(t[1]))&&(t[1]=JN[1])},_resetRange:function(){var t=this.getExtent();var e=this.option.range;if(!e||e.auto){t.auto=1;this.option.range=t}else if(z(e)){if(e[0]>e[1]){e.reverse()}e[0]=Math.max(e[0],t[0]);e[1]=Math.min(e[1],t[1])}},completeVisualOption:function(){$N.prototype.completeVisualOption.apply(this,arguments);L(this.stateList,function(t){var e=this.option.controller[t].symbolSize;if(e&&e[0]!==e[1]){e[0]=0}},this)},setSelected:function(t){this.option.range=t.slice();this._resetRange()},getSelected:function(){var t=this.getExtent();var e=Hl((this.get("range")||[]).slice());e[0]>t[1]&&(e[0]=t[1]);e[1]>t[1]&&(e[1]=t[1]);e[0]<t[0]&&(e[0]=t[0]);e[1]<t[0]&&(e[1]=t[0]);return e},getValueState:function(t){var e=this.option.range;var r=this.getExtent();return(e[0]<=r[0]||e[0]<=t)&&(e[1]>=r[1]||t<=e[1])?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];this.eachTargetSeries(function(r){var i=[];var a=r.getData();a.each(this.getDataDimension(a),function(e,r){t[0]<=e&&e<=t[1]&&i.push(r)},this);e.push({seriesId:r.id,dataIndex:i})},this);return e},getVisualMeta:function(t){var e=tO(this,"outOfRange",this.getExtent());var r=tO(this,"inRange",this.option.range.slice());var i=[];function a(e,r){i.push({value:e,color:t(e,r)})}var n=0;var o=0;var s=r.length;var l=e.length;for(;o<l&&(!r.length||e[o]<=r[0]);o++){if(e[o]<r[n]){a(e[o],"outOfRange")}}for(var u=1;n<s;n++,u=0){u&&i.length&&a(r[n],"outOfRange");a(r[n],"inRange")}for(var u=1;o<l;o++){if(!r.length||r[r.length-1]<e[o]){if(u){i.length&&a(i[i.length-1].value,"outOfRange");u=0}a(e[o],"outOfRange")}}var h=i.length;return{stops:i,outerColors:[h?i[0].color:"transparent",h?i[h-1].color:"transparent"]}}});function tO(t,e,r){if(r[0]===r[1]){return r.slice()}var i=200;var a=(r[1]-r[0])/i;var n=r[0];var o=[];for(var s=0;s<=i&&n<r[1];s++){o.push(n);n+=a}o.push(r[1]);return o}var eO=ad({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(t,e){this.ecModel=t;this.api=e;this.visualMapModel},render:function(t,e,r,i){this.visualMapModel=t;if(t.get("show")===false){this.group.removeAll();return}this.doRender.apply(this,arguments)},renderBackground:function(t){var e=this.visualMapModel;var r=su(e.get("padding")||0);var i=t.getBoundingRect();t.add(new xs({z2:-1,silent:true,shape:{x:i.x-r[3],y:i.y-r[0],width:i.width+r[3]+r[1],height:i.height+r[0]+r[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},getControllerVisual:function(t,e,r){r=r||{};var i=r.forceState;var a=this.visualMapModel;var n={};if(e==="symbol"){n.symbol=a.get("itemSymbol")}if(e==="color"){var o=a.get("contentColor");n.color=o}function s(t){return n[t]}function l(t,e){n[t]=e}var u=a.controllerVisuals[i||a.getValueState(t)];var h=$w.prepareVisualTypes(u);L(h,function(i){var a=u[i];if(r.convertOpacityToAlpha&&i==="opacity"){i="colorAlpha";a=u.__alphaForOpacity}if($w.dependsOn(i,e)){a&&a.applyVisual(t,s,l)}});return n[e]},positionGroup:function(t){var e=this.visualMapModel;var r=this.api;ku(t,e.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})},doRender:at});function rO(t,e,r){var i=t.option;var a=i.align;if(a!=null&&a!=="auto"){return a}var n={width:e.getWidth(),height:e.getHeight()};var o=i.orient==="horizontal"?1:0;var s=[["left","right","width"],["top","bottom","height"]];var l=s[o];var u=[0,null,10];var h={};for(var f=0;f<3;f++){h[s[1-o][f]]=u[f];h[l[f]]=f===2?r[0]:i[l[f]];
}var c=[["x","width",3],["y","height",0]][o];var v=Lu(h,n,i.padding);return l[(v.margin[c[2]]||0)+v[c[0]]+v[c[1]]*.5<n[c[1]]*.5?0:1]}function iO(t){L(t||[],function(e){if(t.dataIndex!=null){t.dataIndexInside=t.dataIndex;t.dataIndex=null}});return t}var aO=Gl;var nO=L;var oO=Math.min;var sO=Math.max;var lO=12;var uO=6;var hO=eO.extend({type:"visualMap.continuous",init:function(){hO.superApply(this,"init",arguments);this._shapes={};this._dataInterval=[];this._handleEnds=[];this._orient;this._useHandle;this._hoverLinkDataIndices=[];this._dragging;this._hovering},doRender:function(t,e,r,i){if(!i||i.type!=="selectDataRange"||i.from!==this.uid){this._buildView()}},_buildView:function(){this.group.removeAll();var t=this.visualMapModel;var e=this.group;this._orient=t.get("orient");this._useHandle=t.get("calculable");this._resetInterval();this._renderBar(e);var r=t.get("text");this._renderEndsText(e,r,0);this._renderEndsText(e,r,1);this._updateView(true);this.renderBackground(e);this._updateView();this._enableHoverLinkToSeries();this._enableHoverLinkFromSeries();this.positionGroup(e)},_renderEndsText:function(t,e,r){if(!e){return}var i=e[1-r];i=i!=null?i+"":"";var a=this.visualMapModel;var n=a.get("textGap");var o=a.itemSize;var s=this._shapes.barGroup;var l=this._applyTransform([o[0]/2,r===0?-n:o[1]+n],s);var u=this._applyTransform(r===0?"bottom":"top",s);var h=this._orient;var f=this.visualMapModel.textStyleModel;this.group.add(new ss({style:{x:l[0],y:l[1],textVerticalAlign:h==="horizontal"?"middle":u,textAlign:h==="horizontal"?u:"center",text:i,textFont:f.getFont(),textFill:f.getTextColor()}}))},_renderBar:function(t){var e=this.visualMapModel;var r=this._shapes;var i=e.itemSize;var a=this._orient;var n=this._useHandle;var o=rO(e,this.api,i);var s=r.barGroup=this._createBarGroup(o);s.add(r.outOfRange=fO());s.add(r.inRange=fO(null,n?gO(this._orient):null,E(this._dragHandle,this,"all",false),E(this._dragHandle,this,"all",true)));var l=e.textStyleModel.getTextRect("");var u=sO(l.width,l.height);if(n){r.handleThumbs=[];r.handleLabels=[];r.handleLabelPoints=[];this._createHandle(s,0,i,u,a,o);this._createHandle(s,1,i,u,a,o)}this._createIndicator(s,i,u,a);t.add(s)},_createHandle:function(t,e,r,i,a){var n=E(this._dragHandle,this,e,false);var o=E(this._dragHandle,this,e,true);var s=fO(cO(e,i),gO(this._orient),n,o);s.position[0]=r[0];t.add(s);var l=this.visualMapModel.textStyleModel;var u=new ss({draggable:true,drift:n,onmousemove:function(t){na(t.event)},ondragend:o,style:{x:0,y:0,text:"",textFont:l.getFont(),textFill:l.getTextColor()}});this.group.add(u);var h=[a==="horizontal"?i/2:i*1.5,a==="horizontal"?e===0?-(i*1.5):i*1.5:e===0?-i/2:i/2];var f=this._shapes;f.handleThumbs[e]=s;f.handleLabelPoints[e]=h;f.handleLabels[e]=u},_createIndicator:function(t,e,r,i){var a=fO([[0,0]],"move");a.position[0]=e[0];a.attr({invisible:true,silent:true});t.add(a);var n=this.visualMapModel.textStyleModel;var o=new ss({silent:true,invisible:true,style:{x:0,y:0,text:"",textFont:n.getFont(),textFill:n.getTextColor()}});this.group.add(o);var s=[i==="horizontal"?r/2:uO+3,0];var l=this._shapes;l.indicator=a;l.indicatorLabel=o;l.indicatorLabelPoint=s},_dragHandle:function(t,e,r,i){if(!this._useHandle){return}this._dragging=!e;if(!e){var a=this._applyTransform([r,i],this._shapes.barGroup,true);this._updateInterval(t,a[1]);this._updateView()}if(e===!this.visualMapModel.get("realtime")){this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()})}if(e){!this._hovering&&this._clearHoverLinkToSeries()}else if(pO(this.visualMapModel)){this._doHoverLinkToSeries(this._handleEnds[t],false)}},_resetInterval:function(){var t=this.visualMapModel;var e=this._dataInterval=t.getSelected();var r=t.getExtent();var i=[0,t.itemSize[1]];this._handleEnds=[aO(e[0],r,i,true),aO(e[1],r,i,true)]},_updateInterval:function(t,e){e=e||0;var r=this.visualMapModel;var i=this._handleEnds;var a=[0,r.itemSize[1]];uM(e,i,a,t,0);var n=r.getExtent();this._dataInterval=[aO(i[0],a,n,true),aO(i[1],a,n,true)]},_updateView:function(t){var e=this.visualMapModel;var r=e.getExtent();var i=this._shapes;var a=[0,e.itemSize[1]];var n=t?a:this._handleEnds;var o=this._createBarVisual(this._dataInterval,r,n,"inRange");var s=this._createBarVisual(r,r,a,"outOfRange");i.inRange.setStyle({fill:o.barColor,opacity:o.opacity}).setShape("points",o.barPoints);i.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints);this._updateHandle(n,o)},_createBarVisual:function(t,e,r,i){var a={forceState:i,convertOpacityToAlpha:true};var n=this._makeColorGradient(t,a);var o=[this.getControllerVisual(t[0],"symbolSize",a),this.getControllerVisual(t[1],"symbolSize",a)];var s=this._createBarPoints(r,o);return{barColor:new Ds(0,0,0,1,n),barPoints:s,handlesColor:[n[0].color,n[n.length-1].color]}},_makeColorGradient:function(t,e){var r=100;var i=[];var a=(t[1]-t[0])/r;i.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var n=1;n<r;n++){var o=t[0]+a*n;if(o>t[1]){break}i.push({color:this.getControllerVisual(o,"color",e),offset:n/r})}i.push({color:this.getControllerVisual(t[1],"color",e),offset:1});return i},_createBarPoints:function(t,e){var r=this.visualMapModel.itemSize;return[[r[0]-e[0],t[0]],[r[0],t[0]],[r[0],t[1]],[r[0]-e[1],t[1]]]},_createBarGroup:function(t){var e=this._orient;var r=this.visualMapModel.get("inverse");return new fr(e==="horizontal"&&!r?{scale:t==="bottom"?[1,1]:[-1,1],rotation:Math.PI/2}:e==="horizontal"&&r?{scale:t==="bottom"?[-1,1]:[1,1],rotation:-Math.PI/2}:e==="vertical"&&!r?{scale:t==="left"?[1,-1]:[-1,-1]}:{scale:t==="left"?[1,1]:[-1,1]})},_updateHandle:function(t,e){if(!this._useHandle){return}var r=this._shapes;var i=this.visualMapModel;var a=r.handleThumbs;var n=r.handleLabels;nO([0,1],function(o){var s=a[o];s.setStyle("fill",e.handlesColor[o]);s.position[1]=t[o];var l=yl(r.handleLabelPoints[o],ml(s,this.group));n[o].setStyle({x:l[0],y:l[1],text:i.formatValueText(this._dataInterval[o]),textVerticalAlign:"middle",textAlign:this._applyTransform(this._orient==="horizontal"?o===0?"bottom":"top":"left",r.barGroup)})},this)},_showIndicator:function(t,e,r,i){var a=this.visualMapModel;var n=a.getExtent();var o=a.itemSize;var s=[0,o[1]];var l=aO(t,n,s,true);var u=this._shapes;var h=u.indicator;if(!h){return}h.position[1]=l;h.attr("invisible",false);h.setShape("points",vO(!!r,i,l,o[1]));var f={convertOpacityToAlpha:true};var c=this.getControllerVisual(t,"color",f);h.setStyle("fill",c);var v=yl(u.indicatorLabelPoint,ml(h,this.group));var d=u.indicatorLabel;d.attr("invisible",false);var p=this._applyTransform("left",u.barGroup);var g=this._orient;d.setStyle({text:(r?r:"")+a.formatValueText(e),textVerticalAlign:g==="horizontal"?p:"middle",textAlign:g==="horizontal"?"center":p,x:v[0],y:v[1]})},_enableHoverLinkToSeries:function(){var t=this;this._shapes.barGroup.on("mousemove",function(e){t._hovering=true;if(!t._dragging){var r=t.visualMapModel.itemSize;var i=t._applyTransform([e.offsetX,e.offsetY],t._shapes.barGroup,true,true);i[1]=oO(sO(0,i[1]),r[1]);t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=r[0])}}).on("mouseout",function(){t._hovering=false;!t._dragging&&t._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var t=this.api.getZr();if(this.visualMapModel.option.hoverLink){t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this);t.on("mouseout",this._hideIndicator,this)}else{this._clearHoverLinkFromSeries()}},_doHoverLinkToSeries:function(t,e){var r=this.visualMapModel;var i=r.itemSize;if(!r.option.hoverLink){return}var a=[0,i[1]];var n=r.getExtent();t=oO(sO(a[0],t),a[1]);var o=dO(r,n,a);var s=[t-o,t+o];var l=aO(t,a,n,true);var u=[aO(s[0],a,n,true),aO(s[1],a,n,true)];s[0]<a[0]&&(u[0]=-Infinity);s[1]>a[1]&&(u[1]=Infinity);if(e){if(u[0]===-Infinity){this._showIndicator(l,u[1],"< ",o)}else if(u[1]===Infinity){this._showIndicator(l,u[0],"> ",o)}else{this._showIndicator(l,l," ",o)}}var h=this._hoverLinkDataIndices;var f=[];if(e||pO(r)){f=this._hoverLinkDataIndices=r.findTargetDataIndices(u)}var c=qa(h,f);this._dispatchHighDown("downplay",iO(c[0]));this._dispatchHighDown("highlight",iO(c[1]))},_hoverLinkFromSeriesMouseOver:function(t){var e=t.target;var r=this.visualMapModel;if(!e||e.dataIndex==null){return}var i=this.ecModel.getSeriesByIndex(e.seriesIndex);if(!r.isTargetSeries(i)){return}var a=i.getData(e.dataType);var n=a.get(r.getDataDimension(a),e.dataIndex,true);if(!isNaN(n)){this._showIndicator(n,n)}},_hideIndicator:function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",true);t.indicatorLabel&&t.indicatorLabel.attr("invisible",true)},_clearHoverLinkToSeries:function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",iO(t));t.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver);t.off("mouseout",this._hideIndicator)},_applyTransform:function(t,e,r,i){var a=ml(e,i?null:this.group);return Ml[z(t)?"applyTransform":"transformDirection"](t,a,r)},_dispatchHighDown:function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},dispose:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()}});function fO(t,e,r,i){return new ms({shape:{points:t},draggable:!!r,cursor:e,drift:r,onmousemove:function(t){na(t.event)},ondragend:i})}function cO(t,e){return t===0?[[0,0],[e,0],[e,-e]]:[[0,0],[e,0],[e,e]]}function vO(t,e,r,i){return t?[[0,-oO(e,sO(r,0))],[uO,0],[0,oO(e,sO(i-r,0))]]:[[0,0],[5,-5],[5,5]]}function dO(t,e,r){var i=lO/2;var a=t.get("hoverLinkDataSize");if(a){i=aO(a,e,r,true)/2}return i}function pO(t){var e=t.get("hoverLinkOnHandle");return!!(e==null?t.get("realtime"):e)}function gO(t){return t==="vertical"?"ns-resize":"ew-resize"}var mO={type:"selectDataRange",event:"dataRangeSelected",update:"update"};Kv(mO,function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})});jv(BN);var yO=$N.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:false,maxOpen:false,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:true,showLabel:null},optionUpdated:function(t,e){yO.superApply(this,"optionUpdated",arguments);this._pieceList=[];this.resetExtent();var r=this._mode=this._determineMode();xO[this._mode].call(this);this._resetSelected(t,e);var i=this.option.categories;this.resetVisual(function(t,e){if(r==="categories"){t.mappingMethod="category";t.categories=y(i)}else{t.dataExtent=this.getExtent();t.mappingMethod="piecewise";t.pieceList=k(this._pieceList,function(t){var t=y(t);if(e!=="inRange"){t.visual=null}return t})}})},completeVisualOption:function(){var t=this.option;var e={};var r=$w.listVisualTypes();var i=this.isCategory();L(t.pieces,function(t){L(r,function(r){if(t.hasOwnProperty(r)){e[r]=1}})});L(e,function(e,r){var n=0;L(this.stateList,function(e){n|=a(t,e,r)||a(t.target,e,r)},this);!n&&L(this.stateList,function(e){(t[e]||(t[e]={}))[r]=FN.get(r,e==="inRange"?"active":"inactive",i)})},this);function a(t,e,r){return t&&t[e]&&(G(t[e])?t[e].hasOwnProperty(r):t[e]===r)}$N.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(t,e){var r=this.option;var i=this._pieceList;var a=(e?r:t).selected||{};r.selected=a;L(i,function(t,e){var r=this.getSelectedMapKey(t);if(!a.hasOwnProperty(r)){a[r]=true}},this);if(r.selectedMode==="single"){var n=false;L(i,function(t,e){var r=this.getSelectedMapKey(t);if(a[r]){n?a[r]=false:n=true}},this)}},getSelectedMapKey:function(t){return this._mode==="categories"?t.value+"":t.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(t){this.option.selected=y(t)},getValueState:function(t){var e=$w.findPieceIndex(t,this._pieceList);return e!=null?this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];this.eachTargetSeries(function(r){var i=[];var a=r.getData();a.each(this.getDataDimension(a),function(e,r){var a=$w.findPieceIndex(e,this._pieceList);a===t&&i.push(r)},this);e.push({seriesId:r.id,dataIndex:i})},this);return e},getRepresentValue:function(t){var e;if(this.isCategory()){e=t.value}else{if(t.value!=null){e=t.value}else{var r=t.interval||[];e=r[0]===-Infinity&&r[1]===Infinity?0:(r[0]+r[1])/2}}return e},getVisualMeta:function(t){if(this.isCategory()){return}var e=[];var r=[];var i=this;function a(a,n){var o=i.getRepresentValue({interval:a});if(!n){n=i.getValueState(o)}var s=t(o,n);if(a[0]===-Infinity){r[0]=s}else if(a[1]===Infinity){r[1]=s}else{e.push({value:a[0],color:s},{value:a[1],color:s})}}var n=this._pieceList.slice();if(!n.length){n.push({interval:[-Infinity,Infinity]})}else{var o=n[0].interval[0];o!==-Infinity&&n.unshift({interval:[-Infinity,o]});o=n[n.length-1].interval[1];o!==Infinity&&n.push({interval:[o,Infinity]})}var s=-Infinity;L(n,function(t){var e=t.interval;if(e){e[0]>s&&a([s,e[0]],"outOfRange");a(e.slice());s=e[1]}},this);return{stops:e,outerColors:r}}});var xO={splitNumber:function(){var t=this.option;var e=this._pieceList;var r=Math.min(t.precision,20);var i=this.getExtent();var a=t.splitNumber;a=Math.max(parseInt(a,10),1);t.splitNumber=a;var n=(i[1]-i[0])/a;while(+n.toFixed(r)!==n&&r<5){r++}t.precision=r;n=+n.toFixed(r);var o=0;if(t.minOpen){e.push({index:o++,interval:[-Infinity,i[0]],close:[0,0]})}for(var s=i[0],l=o+a;o<l;s+=n){var u=o===a-1?i[1]:s+n;e.push({index:o++,interval:[s,u],close:[1,1]})}if(t.maxOpen){e.push({index:o++,interval:[i[1],Infinity],close:[0,0]})}ru(e);L(e,function(t){t.text=this.formatValueText(t.interval)},this)},categories:function(){var t=this.option;L(t.categories,function(t){this._pieceList.push({text:this.formatValueText(t,true),value:t})},this);_O(t,this._pieceList)},pieces:function(){var t=this.option;var r=this._pieceList;L(t.pieces,function(t,i){if(!G(t)){t={value:t}}var a={text:"",index:i};if(t.label!=null){a.text=t.label}if(t.hasOwnProperty("value")){var n=a.value=t.value;a.interval=[n,n];a.close=[1,1]}else{var o=a.interval=[];var s=a.close=[0,0];var l=[1,0,1];var u=[-Infinity,Infinity];var h=[];for(var f=0;f<2;f++){var c=[["gte","gt","min"],["lte","lt","max"]][f];for(var v=0;v<3&&o[f]==null;v++){o[f]=t[c[v]];s[f]=l[v];h[f]=v===2}o[f]==null&&(o[f]=u[f])}h[0]&&o[1]===Infinity&&(s[0]=0);h[1]&&o[0]===-Infinity&&(s[1]=0);if(e){if(o[0]>o[1]){console.warn("Piece "+i+"is illegal: "+o+" lower bound should not greater then uppper bound.")}}if(o[0]===o[1]&&s[0]&&s[1]){a.value=o[0]}}a.visual=$w.retrieveVisuals(t);r.push(a)},this);_O(t,r);ru(r);L(r,function(t){var e=t.close;var r=[["<",""][e[1]],[">",""][e[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,false,r)},this)}};function _O(t,e){var r=t.inverse;if(t.orient==="vertical"?!r:r){e.reverse()}}var wO=eO.extend({type:"visualMap.piecewise",doRender:function(){var t=this.group;t.removeAll();var e=this.visualMapModel;var r=e.get("textGap");var i=e.textStyleModel;var a=i.getFont();var n=i.getTextColor();var o=this._getItemAlign();var s=e.itemSize;var l=this._getViewData();var u=l.endsText;var h=U(e.get("showLabel",true),!u);u&&this._renderEndsText(t,u[0],s,h,o);L(l.viewPieceList,f,this);u&&this._renderEndsText(t,u[1],s,h,o);Tu(e.get("orient"),t,e.get("itemGap"));this.renderBackground(t);this.positionGroup(t);function f(i){var l=i.piece;var u=new fr;u.onclick=E(this._onItemClick,this,l);this._enableHoverLink(u,i.indexInModelPieceList);var f=e.getRepresentValue(l);this._createItemSymbol(u,f,[0,0,s[0],s[1]]);if(h){var c=this.visualMapModel.getValueState(f);u.add(new ss({style:{x:o==="right"?-r:s[0]+r,y:s[1]/2,text:l.text,textVerticalAlign:"middle",textAlign:o,textFont:a,textFill:n,opacity:c==="outOfRange"?.5:1}}))}t.add(u)}},_enableHoverLink:function(t,e){t.on("mouseover",E(r,this,"highlight")).on("mouseout",E(r,this,"downplay"));function r(t){var r=this.visualMapModel;r.option.hoverLink&&this.api.dispatchAction({type:t,batch:iO(r.findTargetDataIndices(e))})}},_getItemAlign:function(){var t=this.visualMapModel;var e=t.option;if(e.orient==="vertical"){return rO(t,this.api,t.itemSize)}else{var r=e.align;if(!r||r==="auto"){r="left"}return r}},_renderEndsText:function(t,e,r,i,a){if(!e){return}var n=new fr;var o=this.visualMapModel.textStyleModel;n.add(new ss({style:{x:i?a==="right"?r[0]:0:r[0]/2,y:r[1]/2,textVerticalAlign:"middle",textAlign:i?a:"center",text:e,textFont:o.getFont(),textFill:o.getTextColor()}}));t.add(n)},_getViewData:function(){var t=this.visualMapModel;var e=k(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}});var r=t.get("text");var i=t.get("orient");var a=t.get("inverse");if(i==="horizontal"?a:!a){e.reverse()}else if(r){r=r.slice().reverse()}return{viewPieceList:e,endsText:r}},_createItemSymbol:function(t,e,r){t.add(vg(this.getControllerVisual(e,"symbol"),r[0],r[1],r[2],r[3],this.getControllerVisual(e,"color")))},_onItemClick:function(t){var e=this.visualMapModel;var r=e.option;var i=y(r.selected);var a=e.getSelectedMapKey(t);if(r.selectedMode==="single"){i[a]=true;L(i,function(t,e){i[e]=e===a})}else{i[a]=!i[a]}this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}});jv(BN);var bO=nu;var SO=hu;function MO(t){Wa(t,"label",["show"])}var IO=id({type:"marker",dependencies:["series","grid","polar","geo"],init:function(t,r,i,a){if(e){if(this.type==="marker"){throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.")}}this.mergeDefaultAndTheme(t,i);this.mergeOption(t,i,a.createdBySelf,true)},isAnimationEnabled:function(){if(n.node){return false}var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},mergeOption:function(t,e,r,i){var a=this.constructor;var n=this.mainType+"Model";if(!r){e.eachSeries(function(t){var r=t.get(this.mainType,true);var o=t[n];if(!r||!r.data){t[n]=null;return}if(!o){if(i){MO(r)}L(r.data,function(t){if(t instanceof Array){MO(t[0]);MO(t[1])}else{MO(t)}});o=new a(r,this,e);w(o,{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:true});o.__hostSeries=t}else{o.mergeOption(r,e,true)}t[n]=o},this)}},formatTooltip:function(t){var e=this.getData();var r=this.getRawValue(t);var i=z(r)?k(r,bO).join(", "):bO(r);var a=e.getName(t);var n=SO(this.name);if(r!=null||a){n+="<br />"}if(a){n+=SO(a);if(r!=null){n+=" : "}}if(r!=null){n+=SO(i)}return n},getData:function(){return this._data},setData:function(t){this._data=t}});A(IO,bf);IO.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:true,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:true}}}});var TO=T;function DO(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function AO(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function CO(t,e,r,i,a,n){var o=[];var s=jd(e,i);var l=s?e.getCalculationInfo("stackResultDimension"):i;var u=zO(e,l,t);var h=e.indicesOfNearest(l,u)[0];o[a]=e.get(r,h);o[n]=e.get(i,h);var f=Zl(e.get(i,h));f=Math.min(f,20);if(f>=0){o[n]=+o[n].toFixed(f)}return o}var LO=R;var kO={min:LO(CO,"min"),max:LO(CO,"max"),average:LO(CO,"average")};function PO(t,e){var r=t.getData();var i=t.coordinateSystem;if(e&&!AO(e)&&!z(e.coord)&&i){var a=i.dimensions;var n=NO(e,r,i,t);e=y(e);if(e.type&&kO[e.type]&&n.baseAxis&&n.valueAxis){var o=TO(a,n.baseAxis.dim);var s=TO(a,n.valueAxis.dim);e.coord=kO[e.type](r,n.baseDataDim,n.valueDataDim,o,s);e.value=e.coord[s]}else{var l=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis];for(var u=0;u<2;u++){if(kO[l[u]]){l[u]=zO(r,r.mapDimension(a[u]),l[u])}}e.coord=l}}return e}function NO(t,e,r,i){var a={};if(t.valueIndex!=null||t.valueDim!=null){a.valueDataDim=t.valueIndex!=null?e.getDimension(t.valueIndex):t.valueDim;a.valueAxis=r.getAxis(OO(i,a.valueDataDim));a.baseAxis=r.getOtherAxis(a.valueAxis);a.baseDataDim=e.mapDimension(a.baseAxis.dim)}else{a.baseAxis=i.getBaseAxis();a.valueAxis=r.getOtherAxis(a.baseAxis);a.baseDataDim=e.mapDimension(a.baseAxis.dim);a.valueDataDim=e.mapDimension(a.valueAxis.dim)}return a}function OO(t,e){var r=t.getData();var i=r.dimensions;e=r.getDimension(e);for(var a=0;a<i.length;a++){var n=r.getDimensionInfo(i[a]);if(n.name===e){return n.coordDim}}}function EO(t,e){return t&&t.containData&&e.coord&&!DO(e)?t.containData(e.coord):true}function RO(t,e,r,i){if(i<2){return t.coord&&t.coord[i]}return t.value}function zO(t,e,r){if(r==="average"){var i=0;var a=0;t.each(e,function(t,e){if(!isNaN(t)){i+=t;a++}});return i/a}else if(r==="median"){return t.getMedian(e)}else{return t.getDataExtent(e,true)[r==="max"?1:0]}}var BO=ad({type:"marker",init:function(){this.markerGroupMap=rt()},render:function(t,e,r){var i=this.markerGroupMap;i.each(function(t){t.__keep=false});var a=this.type+"Model";e.eachSeries(function(t){var i=t[a];i&&this.renderSeries(t,i,e,r)},this);i.each(function(t){!t.__keep&&this.group.remove(t.group)},this)},renderSeries:function(){}});function VO(t,e,r){var i=e.coordinateSystem;t.each(function(a){var n=t.getItemModel(a);var o;var s=Wl(n.get("x"),r.getWidth());var l=Wl(n.get("y"),r.getHeight());if(!isNaN(s)&&!isNaN(l)){o=[s,l]}else if(e.getMarkerPosition){o=e.getMarkerPosition(t.getValues(t.dimensions,a))}else if(i){var u=t.get(i.dimensions[0],a);var h=t.get(i.dimensions[1],a);o=i.dataToPoint([u,h])}if(!isNaN(s)){o[0]=s}if(!isNaN(l)){o[1]=l}t.setItemLayout(a,o)})}BO.extend({type:"markPoint",updateTransform:function(t,e,r){e.eachSeries(function(t){var e=t.markPointModel;if(e){VO(e.getData(),t,r);this.markerGroupMap.get(t.id).updateLayout(e)}},this)},renderSeries:function(t,e,r,i){var a=t.coordinateSystem;var n=t.id;var o=t.getData();var s=this.markerGroupMap;var l=s.get(n)||s.set(n,new am);var u=GO(a,t,e);e.setData(u);VO(e.getData(),t,i);u.each(function(t){var r=u.getItemModel(t);var i=r.getShallow("symbolSize");if(typeof i==="function"){i=i(e.getRawValue(t),e.getDataParams(t))}u.setItemVisual(t,{symbolSize:i,color:r.get("itemStyle.color")||o.getVisual("color"),symbol:r.getShallow("symbol")})});l.updateData(u);this.group.add(l.group);u.eachItemGraphicEl(function(t){t.traverse(function(t){t.dataModel=e})});l.__keep=true;l.group.silent=e.get("silent")||t.get("silent")}});function GO(t,e,r){var i;if(t){i=k(t&&t.dimensions,function(t){var r=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return b({name:t},r)})}else{i=[{name:"value",type:"float"}]}var a=new Cd(i,r);var n=k(r.get("data"),R(PO,e));if(t){n=N(n,R(EO,t))}a.initData(n,null,t?RO:function(t){return t.value});return a}jv(function(t){t.markPoint=t.markPoint||{}});IO.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:true,position:"end"},lineStyle:{type:"dashed"},emphasis:{label:{show:true},lineStyle:{width:3}},animationEasing:"linear"}});var WO=function(t,e,r,i){var a=t.getData();var n=i.type;if(!z(i)&&(n==="min"||n==="max"||n==="average"||n==="median"||(i.xAxis!=null||i.yAxis!=null))){var o;var s;var l;if(i.yAxis!=null||i.xAxis!=null){s=i.yAxis!=null?"y":"x";o=e.getAxis(s);l=U(i.yAxis,i.xAxis)}else{var u=NO(i,a,e,t);s=u.valueDataDim;o=u.valueAxis;l=zO(a,s,n)}var h=s==="x"?0:1;var f=1-h;var c=y(i);var v={};c.type=null;c.coord=[];v.coord=[];c.coord[f]=-Infinity;v.coord[f]=Infinity;var d=r.get("precision");if(d>=0&&typeof l==="number"){l=+l.toFixed(Math.min(d,20))}c.coord[h]=v.coord[h]=l;i=[c,v,{type:n,valueIndex:i.valueIndex,value:l}]}i=[PO(t,i[0]),PO(t,i[1]),w({},i[2])];i[2].type=i[2].type||"";x(i[2],i[0]);x(i[2],i[1]);return i};function FO(t){return!isNaN(t)&&!isFinite(t)}function HO(t,e,r,i){var a=1-t;var n=i.dimensions[t];return FO(e[a])&&FO(r[a])&&e[t]===r[t]&&i.getAxis(n).containData(e[t])}function ZO(t,e){if(t.type==="cartesian2d"){var r=e[0].coord;var i=e[1].coord;if(r&&i&&(HO(1,r,i,t)||HO(0,r,i,t))){return true}}return EO(t,e[0])&&EO(t,e[1])}function UO(t,e,r,i,a){var n=i.coordinateSystem;var o=t.getItemModel(e);var s;var l=Wl(o.get("x"),a.getWidth());var u=Wl(o.get("y"),a.getHeight());if(!isNaN(l)&&!isNaN(u)){s=[l,u]}else{if(i.getMarkerPosition){s=i.getMarkerPosition(t.getValues(t.dimensions,e))}else{var h=n.dimensions;var f=t.get(h[0],e);var c=t.get(h[1],e);s=n.dataToPoint([f,c])}if(n.type==="cartesian2d"){var v=n.getAxis("x");var d=n.getAxis("y");var h=n.dimensions;if(FO(t.get(h[0],e))){s[0]=v.toGlobalCoord(v.getExtent()[r?0:1])}else if(FO(t.get(h[1],e))){s[1]=d.toGlobalCoord(d.getExtent()[r?0:1])}}if(!isNaN(l)){s[0]=l}if(!isNaN(u)){s[1]=u}}t.setItemLayout(e,s)}BO.extend({type:"markLine",updateTransform:function(t,e,r){e.eachSeries(function(t){var e=t.markLineModel;if(e){var i=e.getData();var a=e.__from;var n=e.__to;a.each(function(e){UO(a,e,true,t,r);UO(n,e,false,t,r)});i.each(function(t){i.setItemLayout(t,[a.getItemLayout(t),n.getItemLayout(t)])});this.markerGroupMap.get(t.id).updateLayout()}},this)},renderSeries:function(t,e,r,i){var a=t.coordinateSystem;var n=t.id;var o=t.getData();var s=this.markerGroupMap;var l=s.get(n)||s.set(n,new uS);this.group.add(l.group);var u=XO(a,t,e);var h=u.from;var f=u.to;var c=u.line;e.__from=h;e.__to=f;e.setData(c);var v=e.get("symbol");var d=e.get("symbolSize");if(!z(v)){v=[v,v]}if(typeof d==="number"){d=[d,d]}u.from.each(function(t){p(h,t,true);p(f,t,false)});c.each(function(t){var e=c.getItemModel(t).get("lineStyle.color");c.setItemVisual(t,{color:e||h.getItemVisual(t,"color")});c.setItemLayout(t,[h.getItemLayout(t),f.getItemLayout(t)]);c.setItemVisual(t,{fromSymbolSize:h.getItemVisual(t,"symbolSize"),fromSymbol:h.getItemVisual(t,"symbol"),toSymbolSize:f.getItemVisual(t,"symbolSize"),toSymbol:f.getItemVisual(t,"symbol")})});l.updateData(c);u.line.eachItemGraphicEl(function(t,r){t.traverse(function(t){t.dataModel=e})});function p(e,r,a){var n=e.getItemModel(r);UO(e,r,a,t,i);e.setItemVisual(r,{symbolSize:n.get("symbolSize")||d[a?0:1],symbol:n.get("symbol",true)||v[a?0:1],color:n.get("itemStyle.color")||o.getVisual("color")})}l.__keep=true;l.group.silent=e.get("silent")||t.get("silent")}});function XO(t,e,r){var i;if(t){i=k(t&&t.dimensions,function(t){var r=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return b({name:t},r)})}else{i=[{name:"value",type:"float"}]}var a=new Cd(i,r);var n=new Cd(i,r);var o=new Cd([],r);var s=k(r.get("data"),R(WO,e,t,r));if(t){s=N(s,R(ZO,t))}var l=t?RO:function(t){return t.value};a.initData(k(s,function(t){return t[0]}),null,l);n.initData(k(s,function(t){return t[1]}),null,l);o.initData(k(s,function(t){return t[2]}));o.hasItemOption=true;return{from:a,to:n,line:o}}jv(function(t){t.markLine=t.markLine||{}});IO.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:false,label:{show:true,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:true,position:"top"}}}});var jO=function(t,e,r,i){var a=PO(t,i[0]);var n=PO(t,i[1]);var o=U;var s=a.coord;var l=n.coord;s[0]=o(s[0],-Infinity);s[1]=o(s[1],-Infinity);l[0]=o(l[0],Infinity);l[1]=o(l[1],Infinity);var u=_([{},a,n]);u.coord=[a.coord,n.coord];u.x0=a.x;u.y0=a.y;u.x1=n.x;u.y1=n.y;return u};function YO(t){return!isNaN(t)&&!isFinite(t)}function qO(t,e,r,i){var a=1-t;return YO(e[a])&&YO(r[a])}function KO(t,e){var r=e.coord[0];var i=e.coord[1];if(t.type==="cartesian2d"){if(r&&i&&(qO(1,r,i,t)||qO(0,r,i,t))){return true}}return EO(t,{coord:r,x:e.x0,y:e.y0})||EO(t,{coord:i,x:e.x1,y:e.y1})}function $O(t,e,r,i,a){var n=i.coordinateSystem;var o=t.getItemModel(e);var s;var l=Wl(o.get(r[0]),a.getWidth());var u=Wl(o.get(r[1]),a.getHeight());if(!isNaN(l)&&!isNaN(u)){s=[l,u]}else{if(i.getMarkerPosition){s=i.getMarkerPosition(t.getValues(r,e))}else{var h=t.get(r[0],e);var f=t.get(r[1],e);var c=[h,f];n.clampData&&n.clampData(c,c);s=n.dataToPoint(c,true)}if(n.type==="cartesian2d"){var v=n.getAxis("x");var d=n.getAxis("y");var h=t.get(r[0],e);var f=t.get(r[1],e);if(YO(h)){s[0]=v.toGlobalCoord(v.getExtent()[r[0]==="x0"?0:1])}else if(YO(f)){s[1]=d.toGlobalCoord(d.getExtent()[r[1]==="y0"?0:1])}}if(!isNaN(l)){s[0]=l}if(!isNaN(u)){s[1]=u}}return s}var JO=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];BO.extend({type:"markArea",updateTransform:function(t,e,r){e.eachSeries(function(t){var e=t.markAreaModel;if(e){var i=e.getData();i.each(function(e){var a=k(JO,function(a){return $O(i,e,a,t,r)});i.setItemLayout(e,a);var n=i.getItemGraphicEl(e);n.setShape("points",a)})}},this)},renderSeries:function(t,e,r,i){var a=t.coordinateSystem;var n=t.id;var o=t.getData();var s=this.markerGroupMap;var l=s.get(n)||s.set(n,{group:new fr});this.group.add(l.group);l.__keep=true;var u=QO(a,t,e);e.setData(u);u.each(function(e){u.setItemLayout(e,k(JO,function(r){return $O(u,e,r,t,i)}));u.setItemVisual(e,{color:o.getVisual("color")})});u.diff(l.__data).add(function(t){var e=new ms({shape:{points:u.getItemLayout(t)}});u.setItemGraphicEl(t,e);l.group.add(e)}).update(function(t,r){var i=l.__data.getItemGraphicEl(r);pl(i,{shape:{points:u.getItemLayout(t)}},e,t);l.group.add(i);u.setItemGraphicEl(t,i)}).remove(function(t){var e=l.__data.getItemGraphicEl(t);l.group.remove(e)}).execute();u.eachItemGraphicEl(function(t,r){var i=u.getItemModel(r);var a=i.getModel("label");var n=i.getModel("emphasis.label");var o=u.getItemVisual(r,"color");t.useStyle(b(i.getModel("itemStyle").getItemStyle(),{fill:Re(o,.4),stroke:o}));t.hoverStyle=i.getModel("emphasis.itemStyle").getItemStyle();al(t.style,t.hoverStyle,a,n,{labelFetcher:e,labelDataIndex:r,defaultText:u.getName(r)||"",isRectText:true,autoColor:o});il(t,{});t.dataModel=e});l.__data=u;l.group.silent=e.get("silent")||t.get("silent")}});function QO(t,e,r){var i;var a;var n=["x0","y0","x1","y1"];if(t){i=k(t&&t.dimensions,function(t){var r=e.getData();var i=r.getDimensionInfo(r.mapDimension(t))||{};return b({name:t},i)});a=new Cd(k(n,function(t,e){return{name:t,type:i[e%2].type}}),r)}else{i=[{name:"value",type:"float"}];a=new Cd(i,r)}var o=k(r.get("data"),R(jO,e,t,r));if(t){o=N(o,R(KO,t))}var s=t?function(t,e,r,i){return t.coord[Math.floor(i/2)][i%2]}:function(t){return t.value};a.initData(o,null,s);a.hasItemOption=true;return a}jv(function(t){t.markArea=t.markArea||{}});var tE=function(t){var e=t&&t.timeline;if(!z(e)){e=e?[e]:[]}L(e,function(t){if(!t){return}eE(t)})};function eE(t){var e=t.type;var r={number:"value",time:"time"};if(r[e]){t.axisType=r[e];delete t.type}rE(t);if(iE(t,"controlPosition")){var i=t.controlStyle||(t.controlStyle={});if(!iE(i,"position")){i.position=t.controlPosition}if(i.position==="none"&&!iE(i,"show")){i.show=false;delete i.position}delete t.controlPosition}L(t.data||[],function(t){if(G(t)&&!z(t)){if(!iE(t,"value")&&iE(t,"name")){t.value=t.name}rE(t)}})}function rE(t){var e=t.itemStyle||(t.itemStyle={});var r=e.emphasis||(e.emphasis={});var i=t.label||(t.label||{});var a=i.normal||(i.normal={});var n={normal:1,emphasis:1};L(i,function(t,e){if(!n[e]&&!iE(a,e)){a[e]=t}});if(r.label&&!iE(i,"emphasis")){i.emphasis=r.label;delete r.label}}function iE(t,e){return t.hasOwnProperty(e)}Bu.registerSubTypeDefaulter("timeline",function(){return"slider"});Kv({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e){var r=e.getComponent("timeline");if(r&&t.currentIndex!=null){r.setCurrentIndex(t.currentIndex);if(!r.get("loop",true)&&r.isIndexMax()){r.setPlayState(false)}}e.resetOption("timeline");return b({currentIndex:r.option.currentIndex},t)});Kv({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var r=e.getComponent("timeline");if(r&&t.playState!=null){r.setPlayState(t.playState)}});var aE=Bu.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:true,axisType:"time",realtime:true,
left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:false,rewind:false,loop:true,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(t,e,r){this._data;this._names;this.mergeDefaultAndTheme(t,r);this._initData()},mergeOption:function(t){aE.superApply(this,"mergeOption",arguments);this._initData()},setCurrentIndex:function(t){if(t==null){t=this.option.currentIndex}var e=this._data.count();if(this.option.loop){t=(t%e+e)%e}else{t>=e&&(t=e-1);t<0&&(t=0)}this.option.currentIndex=t},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(t){this.option.autoPlay=!!t},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var t=this.option;var e=t.data||[];var r=t.axisType;var i=this._names=[];if(r==="category"){var a=[];L(e,function(t,e){var r=Ha(t);var n;if(G(t)){n=y(t);n.value=e}else{n=e}a.push(n);if(!V(r)&&(r==null||isNaN(r))){r=""}i.push(r+"")});e=a}var n={category:"ordinal",time:"time"}[r]||"number";var o=this._data=new Cd([{name:"value",type:n}],this);o.initData(e,i)},getData:function(){return this._data},getCategories:function(){if(this.get("axisType")==="category"){return this._names.slice()}}});var nE=aE.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:false,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:true,width:2,color:"#304654"},label:{position:"auto",show:true,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:true,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:true,showPlayBtn:true,showPrevBtn:true,showNextBtn:true,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:true,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}});A(nE,bf);var oE=Vf.extend({type:"timeline"});var sE=function(t,e,r,i){Hg.call(this,t,e,r);this.type=i||"value";this.model=null};sE.prototype={constructor:sE,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return this.model.get("orient")==="horizontal"}};D(sE,Hg);var lE=E;var uE=L;var hE=Math.PI;oE.extend({type:"timeline.slider",init:function(t,e){this.api=e;this._axis;this._viewRect;this._timer;this._currentPointer;this._mainGroup;this._labelGroup},render:function(t,e,r,i){this.model=t;this.api=r;this.ecModel=e;this.group.removeAll();if(t.get("show",true)){var a=this._layout(t,r);var n=this._createGroup("mainGroup");var o=this._createGroup("labelGroup");var s=this._axis=this._createAxis(a,t);t.formatTooltip=function(t){return hu(s.scale.getLabel(t))};uE(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](a,n,s,t)},this);this._renderAxisLabel(a,o,s,t);this._position(a,t)}this._doPlayStop()},remove:function(){this._clearTimer();this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(t,e){var r=t.get("label.position");var i=t.get("orient");var a=fE(t,e);if(r==null||r==="auto"){r=i==="horizontal"?a.y+a.height/2<e.getHeight()/2?"-":"+":a.x+a.width/2<e.getWidth()/2?"+":"-"}else if(isNaN(r)){r={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][r]}var n={horizontal:"center",vertical:r>=0||r==="+"?"left":"right"};var o={horizontal:r>=0||r==="+"?"top":"bottom",vertical:"middle"};var s={horizontal:0,vertical:hE/2};var l=i==="vertical"?a.height:a.width;var u=t.getModel("controlStyle");var h=u.get("show",true);var f=h?u.get("itemSize"):0;var c=h?u.get("itemGap"):0;var v=f+c;var d=t.get("label.rotate")||0;d=d*hE/180;var p;var g;var m;var y;var x=u.get("position",true);var _=h&&u.get("showPlayBtn",true);var w=h&&u.get("showPrevBtn",true);var b=h&&u.get("showNextBtn",true);var S=0;var M=l;if(x==="left"||x==="bottom"){_&&(p=[0,0],S+=v);w&&(g=[S,0],S+=v);b&&(m=[M-f,0],M-=v)}else{_&&(p=[M-f,0],M-=v);w&&(g=[0,0],S+=v);b&&(m=[M-f,0],M-=v)}y=[S,M];if(t.get("inverse")){y.reverse()}return{viewRect:a,mainLength:l,orient:i,rotation:s[i],labelRotation:d,labelPosOpt:r,labelAlign:t.get("label.align")||n[i],labelBaseline:t.get("label.verticalAlign")||t.get("label.baseline")||o[i],playPosition:p,prevBtnPosition:g,nextBtnPosition:m,axisExtent:y,controlSize:f,controlGap:c}},_position:function(t,e){var r=this._mainGroup;var i=this._labelGroup;var a=t.viewRect;if(t.orient==="vertical"){var n=Zt();var o=a.x;var s=a.y+a.height;Yt(n,n,[-o,-s]);qt(n,n,-hE/2);Yt(n,n,[o,s]);a=a.clone();a.applyTransform(n)}var l=g(a);var u=g(r.getBoundingRect());var h=g(i.getBoundingRect());var f=r.position;var c=i.position;c[0]=f[0]=l[0][0];var v=t.labelPosOpt;if(isNaN(v)){var d=v==="+"?0:1;m(f,u,l,1,d);m(c,h,l,1,1-d)}else{var d=v>=0?0:1;m(f,u,l,1,d);c[1]=f[1]+v}r.attr("position",f);i.attr("position",c);r.rotation=i.rotation=t.rotation;p(r);p(i);function p(t){var e=t.position;t.origin=[l[0][0]-e[0],l[1][0]-e[1]]}function g(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function m(t,e,r,i,a){t[i]+=r[i][a]-e[i][a]}},_createAxis:function(t,e){var r=e.getData();var i=e.get("axisType");var a=$p(e,i);a.getTicks=function(){return r.mapArray(["value"],function(t){return t})};var n=r.getDataExtent("value");a.setExtent(n[0],n[1]);a.niceTicks();var o=new sE("value",a,t.axisExtent,i);o.model=e;return o},_createGroup:function(t){var e=this["_"+t]=new fr;this.group.add(e);return e},_renderAxisLine:function(t,e,r,i){var a=r.getExtent();if(!i.get("lineStyle.show")){return}e.add(new _s({shape:{x1:a[0],y1:0,x2:a[1],y2:0},style:w({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:true,z2:1}))},_renderAxisTick:function(t,e,r,i){var a=i.getData();var n=r.scale.getTicks();uE(n,function(t){var n=r.dataToCoord(t);var o=a.getItemModel(t);var s=o.getModel("itemStyle");var l=o.getModel("emphasis.itemStyle");var u={position:[n,0],onclick:lE(this._changeTimeline,this,t)};var h=vE(o,s,e,u);il(h,l.getItemStyle());if(o.get("tooltip")){h.dataIndex=t;h.dataModel=i}else{h.dataIndex=h.dataModel=null}},this)},_renderAxisLabel:function(t,e,r,i){var a=r.getLabelModel();if(!a.get("show")){return}var n=i.getData();var o=r.getViewLabels();uE(o,function(i){var a=i.tickValue;var o=n.getItemModel(a);var s=o.getModel("label");var l=o.getModel("emphasis.label");var u=r.dataToCoord(i.tickValue);var h=new ss({position:[u,0],rotation:t.labelRotation-t.rotation,onclick:lE(this._changeTimeline,this,a),silent:false});nl(h.style,s,{text:i.formattedLabel,textAlign:t.labelAlign,textVerticalAlign:t.labelBaseline});e.add(h);il(h,nl({},l))},this)},_renderControl:function(t,e,r,i){var a=t.controlSize;var n=t.rotation;var o=i.getModel("controlStyle").getItemStyle();var s=i.getModel("emphasis.controlStyle").getItemStyle();var l=[0,-a/2,a,a];var u=i.getPlayState();var h=i.get("inverse",true);f(t.nextBtnPosition,"controlStyle.nextIcon",lE(this._changeTimeline,this,h?"-":"+"));f(t.prevBtnPosition,"controlStyle.prevIcon",lE(this._changeTimeline,this,h?"+":"-"));f(t.playPosition,"controlStyle."+(u?"stopIcon":"playIcon"),lE(this._handlePlayClick,this,!u),true);function f(t,r,u,h){if(!t){return}var f={position:t,origin:[a/2,0],rotation:h?-n:0,rectHover:true,style:o,onclick:u};var c=cE(i,r,l,f);e.add(c);il(c,s)}},_renderCurrentPointer:function(t,e,r,i){var a=i.getData();var n=i.getCurrentIndex();var o=a.getItemModel(n).getModel("checkpointStyle");var s=this;var l={onCreate:function(t){t.draggable=true;t.drift=lE(s._handlePointerDrag,s);t.ondragend=lE(s._handlePointerDragend,s);dE(t,n,r,i,true)},onUpdate:function(t){dE(t,n,r,i)}};this._currentPointer=vE(o,o,this._mainGroup,{},this._currentPointer,l)},_handlePlayClick:function(t){this._clearTimer();this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},_handlePointerDrag:function(t,e,r){this._clearTimer();this._pointerChangeTimeline([r.offsetX,r.offsetY])},_handlePointerDragend:function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],true)},_pointerChangeTimeline:function(t,e){var r=this._toAxisCoord(t)[0];var i=this._axis;var a=Hl(i.getExtent().slice());r>a[1]&&(r=a[1]);r<a[0]&&(r=a[0]);this._currentPointer.position[0]=r;this._currentPointer.dirty();var n=this._findNearestTick(r);var o=this.model;if(e||n!==o.getCurrentIndex()&&o.get("realtime")){this._changeTimeline(n)}},_doPlayStop:function(){this._clearTimer();if(this.model.getPlayState()){this._timer=setTimeout(lE(t,this),this.model.get("playInterval"))}function t(){var t=this.model;this._changeTimeline(t.getCurrentIndex()+(t.get("rewind",true)?-1:1))}},_toAxisCoord:function(t){var e=this._mainGroup.getLocalTransform();return yl(t,e,true)},_findNearestTick:function(t){var e=this.model.getData();var r=Infinity;var i;var a=this._axis;e.each(["value"],function(e,n){var o=a.dataToCoord(e);var s=Math.abs(o-t);if(s<r){r=s;i=n}});return i},_clearTimer:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}},_changeTimeline:function(t){var e=this.model.getCurrentIndex();if(t==="+"){t=e+1}else if(t==="-"){t=e-1}this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})}});function fE(t,e){return Lu(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function cE(t,e,r,i){var a=zs(t.get(e).replace(/^path:\/\//,""),y(i||{}),new hr(r[0],r[1],r[2],r[3]),"center");return a}function vE(t,e,r,i,a,n){var o=e.get("color");if(!a){var s=t.get("symbol");a=vg(s,-1,-1,2,2,o);a.setStyle("strokeNoScale",true);r.add(a);n&&n.onCreate(a)}else{a.setColor(o);r.add(a);n&&n.onUpdate(a)}var l=e.getItemStyle(["color","symbol","symbolSize"]);a.setStyle(l);i=x({rectHover:true,z2:100},i,true);var u=t.get("symbolSize");u=u instanceof Array?u.slice():[+u,+u];u[0]/=2;u[1]/=2;i.scale=u;var h=t.get("symbolOffset");if(h){var f=i.position=i.position||[0,0];f[0]+=Wl(h[0],u[0]);f[1]+=Wl(h[1],u[1])}var c=t.get("symbolRotate");i.rotation=(c||0)*Math.PI/180||0;a.attr(i);a.updateTransform();return a}function dE(t,e,r,i,a){if(t.dragging){return}var n=i.getModel("checkpointStyle");var o=r.dataToCoord(i.getData().get(["value"],e));if(a||!n.get("animation",true)){t.attr({position:[o,0]})}else{t.stopAnimation(true);t.animateTo({position:[o,0]},n.get("animationDuration",true),n.get("animationEasing",true))}}jv(tE);var pE=id({type:"toolbox",layoutMode:{type:"box",ignoreSize:true},optionUpdated:function(){pE.superApply(this,"optionUpdated",arguments);L(this.option.feature,function(t,e){var r=CP(e);r&&x(t,r.defaultOption)})},defaultOption:{show:true,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:true,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}}}});ad({type:"toolbox",render:function(t,e,r,i){var a=this.group;a.removeAll();if(!t.get("show")){return}var n=+t.get("itemSize");var o=t.get("feature")||{};var s=this._features||(this._features={});var l=[];L(o,function(t,e){l.push(e)});new cd(this._featureNames||[],l).add(u).update(u).remove(R(u,null)).execute();this._featureNames=l;function u(a,n){var u=l[a];var f=l[n];var c=o[u];var v=new kl(c,t,t.ecModel);var d;if(u&&!f){if(gE(u)){d={model:v,onclick:v.option.onclick,featureName:u}}else{var p=CP(u);if(!p){return}d=new p(v,e,r)}s[u]=d}else{d=s[f];if(!d){return}d.model=v;d.ecModel=e;d.api=r}if(!u&&f){d.dispose&&d.dispose(e,r);return}if(!v.get("show")||d.unusable){d.remove&&d.remove(e,r);return}h(v,d,u);v.setIconStatus=function(t,e){var r=this.option;var i=this.iconPaths;r.iconStatus=r.iconStatus||{};r.iconStatus[t]=e;i[t]&&i[t].trigger(e)};if(d.render){d.render(v,e,r,i)}}function h(i,o,s){var l=i.getModel("iconStyle");var u=i.getModel("emphasis.iconStyle");var h=o.getIcons?o.getIcons():i.get("icon");var f=i.get("title")||{};if(typeof h==="string"){var c=h;var v=f;h={};f={};h[s]=c;f[s]=v}var d=i.iconPaths={};L(h,function(s,h){var c=Sl(s,{},{x:-n/2,y:-n/2,width:n,height:n});c.setStyle(l.getItemStyle());c.hoverStyle=u.getItemStyle();il(c);if(t.get("showTitle")){c.__title=f[h];c.on("mouseover",function(){var t=u.getItemStyle();c.setStyle({text:f[h],textPosition:t.textPosition||"bottom",textFill:t.fill||t.stroke||"#000",textAlign:t.textAlign||"center"})}).on("mouseout",function(){c.setStyle({textFill:null})})}c.trigger(i.get("iconStatus."+h)||"normal");a.add(c);c.on("click",E(o.onclick,o,e,r,h));d[h]=c})}ML(a,t,r);a.add(IL(a.getBoundingRect(),t));a.eachChild(function(t){var e=t.__title;var i=t.hoverStyle;if(i&&e){var o=$r(e,ci(i));var s=t.position[0]+a.position[0];var l=t.position[1]+a.position[1]+n;var u=false;if(l+o.height>r.getHeight()){i.textPosition="top";u=true}var h=u?-5-o.height:n+8;if(s+o.width/2>r.getWidth()){i.textPosition=["100%",h];i.textAlign="right"}else if(s-o.width/2<0){i.textPosition=[0,h];i.textAlign="left"}}})},updateView:function(t,e,r,i){L(this._features,function(t){t.updateView&&t.updateView(t.model,e,r,i)})},remove:function(t,e){L(this._features,function(r){r.remove&&r.remove(t,e)});this.group.removeAll()},dispose:function(t,e){L(this._features,function(r){r.dispose&&r.dispose(t,e)})}});function gE(t){return t.indexOf("my")===0}var mE=ac.toolbox.saveAsImage;function yE(t){this.model=t}yE.defaultOption={show:true,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:mE.title,type:"png",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:mE.lang.slice()};yE.prototype.unusable=!n.canvasSupported;var xE=yE.prototype;xE.onclick=function(t,e){var r=this.model;var i=r.get("name")||t.get("title.0.text")||"echarts";var a=document.createElement("a");var o=r.get("type",true)||"png";a.download=i+"."+o;a.target="_blank";var s=e.getConnectedDataURL({type:o,backgroundColor:r.get("backgroundColor",true)||t.get("backgroundColor")||"#fff",excludeComponents:r.get("excludeComponents"),pixelRatio:r.get("pixelRatio")});a.href=s;if(typeof MouseEvent==="function"&&!n.browser.ie&&!n.browser.edge){var l=new MouseEvent("click",{view:window,bubbles:true,cancelable:false});a.dispatchEvent(l)}else{if(window.navigator.msSaveOrOpenBlob){var u=atob(s.split(",")[1]);var h=u.length;var f=new Uint8Array(h);while(h--){f[h]=u.charCodeAt(h)}var c=new Blob([f]);window.navigator.msSaveOrOpenBlob(c,i+"."+o)}else{var v=r.get("lang");var d=""+'<body style="margin:0;">'+'<img src="'+s+'" style="max-width:100%;" title="'+(v&&v[0]||"")+'" />'+"</body>";var p=window.open();p.document.write(d)}}};AP("saveAsImage",yE);var _E=ac.toolbox.magicType;function wE(t){this.model=t}wE.defaultOption={show:true,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:y(_E.title),option:{},seriesIndex:{}};var bE=wE.prototype;bE.getIcons=function(){var t=this.model;var e=t.get("icon");var r={};L(t.get("type"),function(t){if(e[t]){r[t]=e[t]}});return r};var SE={line:function(t,e,r,i){if(t==="bar"){return x({id:e,type:"line",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},i.get("option.line")||{},true)}},bar:function(t,e,r,i){if(t==="line"){return x({id:e,type:"bar",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},i.get("option.bar")||{},true)}},stack:function(t,e,r,i){if(t==="line"||t==="bar"){return x({id:e,stack:"__ec_magicType_stack__"},i.get("option.stack")||{},true)}},tiled:function(t,e,r,i){if(t==="line"||t==="bar"){return x({id:e,stack:""},i.get("option.tiled")||{},true)}}};var ME=[["line","bar"],["stack","tiled"]];bE.onclick=function(t,e,r){var i=this.model;var a=i.get("seriesIndex."+r);if(!SE[r]){return}var n={series:[]};var o=function(e){var a=e.subType;var o=e.id;var s=SE[r](a,o,e,i);if(s){b(s,e.option);n.series.push(s)}var l=e.coordinateSystem;if(l&&l.type==="cartesian2d"&&(r==="line"||r==="bar")){var u=l.getAxesByScale("ordinal")[0];if(u){var h=u.dim;var f=h+"Axis";var c=t.queryComponents({mainType:f,index:e.get(name+"Index"),id:e.get(name+"Id")})[0];var v=c.componentIndex;n[f]=n[f]||[];for(var d=0;d<=v;d++){n[f][v]=n[f][v]||{}}n[f][v].boundaryGap=r==="bar"?true:false}}};L(ME,function(t){if(T(t,r)>=0){L(t,function(t){i.setIconStatus(t,"normal")})}});i.setIconStatus(r,"emphasis");t.eachComponent({mainType:"series",query:a==null?null:{seriesIndex:a}},o);e.dispatchAction({type:"changeMagicType",currentType:r,newOption:n})};Kv({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});AP("magicType",wE);var IE=ac.toolbox.dataView;var TE=new Array(60).join("-");var DE="\t";function AE(t){var e={};var r=[];var i=[];t.eachRawSeries(function(t){var a=t.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var n=a.getBaseAxis();if(n.type==="category"){var o=n.dim+"_"+n.index;if(!e[o]){e[o]={categoryAxis:n,valueAxis:a.getOtherAxis(n),series:[]};i.push({axisDim:n.dim,axisIndex:n.index})}e[o].series.push(t)}else{r.push(t)}}else{r.push(t)}});return{seriesGroupByCategoryAxis:e,other:r,meta:i}}function CE(t){var e=[];L(t,function(t,r){var i=t.categoryAxis;var a=t.valueAxis;var n=a.dim;var o=[" "].concat(k(t.series,function(t){return t.name}));var s=[i.model.getCategories()];L(t.series,function(t){s.push(t.getRawData().mapArray(n,function(t){return t}))});var l=[o.join(DE)];for(var u=0;u<s[0].length;u++){var h=[];for(var f=0;f<s.length;f++){h.push(s[f][u])}l.push(h.join(DE))}e.push(l.join("\n"))});return e.join("\n\n"+TE+"\n\n")}function LE(t){return k(t,function(t){var e=t.getRawData();var r=[t.name];var i=[];e.each(e.dimensions,function(){var t=arguments.length;var a=arguments[t-1];var n=e.getName(a);for(var o=0;o<t-1;o++){i[o]=arguments[o]}r.push((n?n+DE:"")+i.join(DE))});return r.join("\n")}).join("\n\n"+TE+"\n\n")}function kE(t){var e=AE(t);return{value:N([CE(e.seriesGroupByCategoryAxis),LE(e.other)],function(t){return t.replace(/[\n\t\s]/g,"")}).join("\n\n"+TE+"\n\n"),meta:e.meta}}function PE(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function NE(t){var e=t.slice(0,t.indexOf("\n"));if(e.indexOf(DE)>=0){return true}}var OE=new RegExp("["+DE+"]+","g");function EE(t){var e=t.split(/\n+/g);var r=PE(e.shift()).split(OE);var i=[];var a=k(r,function(t){return{name:t,data:[]}});for(var n=0;n<e.length;n++){var o=PE(e[n]).split(OE);i.push(o.shift());for(var s=0;s<o.length;s++){a[s]&&(a[s].data[n]=o[s])}}return{series:a,categories:i}}function RE(t){var e=t.split(/\n+/g);var r=PE(e.shift());var i=[];for(var a=0;a<e.length;a++){var n=PE(e[a]).split(OE);var o="";var s;var l=false;if(isNaN(n[0])){l=true;o=n[0];n=n.slice(1);i[a]={name:o,value:[]};s=i[a].value}else{s=i[a]=[]}for(var u=0;u<n.length;u++){s.push(+n[u])}if(s.length===1){l?i[a].value=s[0]:i[a]=s[0]}}return{name:r,data:i}}function zE(t,e){var r=t.split(new RegExp("\n*"+TE+"\n*","g"));var i={series:[]};L(r,function(t,r){if(NE(t)){var a=EE(t);var n=e[r];var o=n.axisDim+"Axis";if(n){i[o]=i[o]||[];i[o][n.axisIndex]={data:a.categories};i.series=i.series.concat(a.series)}}else{var a=RE(t);i.series.push(a)}});return i}function BE(t){this._dom=null;this.model=t}BE.defaultOption={show:true,readOnly:false,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:y(IE.title),lang:y(IE.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};BE.prototype.onclick=function(t,e){var r=e.getDom();var i=this.model;if(this._dom){r.removeChild(this._dom)}var a=document.createElement("div");a.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;";a.style.backgroundColor=i.get("backgroundColor")||"#fff";var n=document.createElement("h4");var o=i.get("lang")||[];n.innerHTML=o[0]||i.get("title");n.style.cssText="margin: 10px 20px;";n.style.color=i.get("textColor");var s=document.createElement("div");var l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var u=i.get("optionToContent");var h=i.get("contentToOption");var f=kE(t);if(typeof u==="function"){var c=u(e.getOption());if(typeof c==="string"){s.innerHTML=c}else if(H(c)){s.appendChild(c)}}else{s.appendChild(l);l.readOnly=i.get("readOnly");l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;";l.style.color=i.get("textColor");l.style.borderColor=i.get("textareaBorderColor");l.style.backgroundColor=i.get("textareaColor");l.value=f.value}var v=f.meta;var d=document.createElement("div");d.style.cssText="position:absolute;bottom:0;left:0;right:0;";var p="float:right;margin-right:20px;border:none;"+"cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px";var g=document.createElement("div");var m=document.createElement("div");p+=";background-color:"+i.get("buttonColor");p+=";color:"+i.get("buttonTextColor");var y=this;function x(){r.removeChild(a);y._dom=null}ia(g,"click",x);ia(m,"click",function(){var t;try{if(typeof h==="function"){t=h(s,e.getOption())}else{t=zE(l.value,v)}}catch(r){x();throw new Error("Data view format error "+r)}if(t){e.dispatchAction({type:"changeDataView",newOption:t})}x()});g.innerHTML=o[1];m.innerHTML=o[2];m.style.cssText=p;g.style.cssText=p;!i.get("readOnly")&&d.appendChild(m);d.appendChild(g);ia(l,"keydown",function(t){if((t.keyCode||t.which)===9){var e=this.value;var r=this.selectionStart;var i=this.selectionEnd;this.value=e.substring(0,r)+DE+e.substring(i);this.selectionStart=this.selectionEnd=r+1;na(t)}});a.appendChild(n);a.appendChild(s);a.appendChild(d);s.style.height=r.clientHeight-80+"px";r.appendChild(a);this._dom=a};BE.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)};BE.prototype.dispose=function(t,e){this.remove(t,e)};function VE(t,e){return k(t,function(t,r){var i=e&&e[r];if(G(i)&&!z(i)){if(G(t)&&!z(t)){t=t.value}return b({value:t},i)}else{return t}})}AP("dataView",BE);Kv({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var r=[];L(t.newOption.series,function(t){var i=e.getSeriesByName(t.name)[0];if(!i){r.push(w({type:"scatter"},t))}else{var a=i.get("data");r.push({name:t.name,data:VE(t.data,a)})}});e.mergeOption(b({series:r},t.newOption))});var GE=L;var WE="\0_ec_hist_store";function FE(t,e){var r=XE(t);GE(e,function(e,i){var a=r.length-1;for(;a>=0;a--){var n=r[a];if(n[i]){break}}if(a<0){var o=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(o){var s=o.getPercentRange();r[0][i]={dataZoomId:i,start:s[0],end:s[1]}}}});r.push(e)}function HE(t){var e=XE(t);var r=e[e.length-1];e.length>1&&e.pop();var i={};GE(r,function(t,r){for(var a=e.length-1;a>=0;a--){var t=e[a][r];if(t){i[r]=t;break}}});return i}function ZE(t){t[WE]=null}function UE(t){return XE(t).length}function XE(t){var e=t[WE];if(!e){e=t[WE]=[{}]}return e}eN.extend({type:"dataZoom.select"});aN.extend({type:"dataZoom.select"});var jE=ac.toolbox.dataZoom;var YE=L;var qE="\0_ec_\0toolbox-dataZoom_";function KE(t,e,r){(this._brushController=new FM(r.getZr())).on("brush",E(this._onBrush,this)).mount();this._isZoomActive}KE.defaultOption={show:true,icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:y(jE.title)};var $E=KE.prototype;$E.render=function(t,e,r,i){this.model=t;this.ecModel=e;this.api=r;eR(t,e,this,i,r);tR(t,e)};$E.onclick=function(t,e,r){JE[r].call(this)};$E.remove=function(t,e){this._brushController.unmount()};$E.dispose=function(t,e){this._brushController.dispose()};var JE={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(HE(this.ecModel))}};$E._onBrush=function(t,e){if(!e.isEnd||!t.length){return}var r={};var i=this.ecModel;this._brushController.updateCovers([]);var a=new Jk(QE(this.model.option),i,{include:["grid"]});a.matchOutputRanges(t,i,function(t,e,r){if(r.type!=="cartesian2d"){return}var i=t.brushType;if(i==="rect"){n("x",r,e[0]);n("y",r,e[1])}else{n({lineX:"x",lineY:"y"}[i],r,e)}});FE(i,r);this._dispatchZoomAction(r);function n(t,e,a){var n=e.getAxis(t);var s=n.model;var l=o(t,s,i);var u=l.findRepresentativeAxisProxy(s).getMinMaxSpan();if(u.minValueSpan!=null||u.maxValueSpan!=null){a=uM(0,a.slice(),n.scale.getExtent(),0,u.minValueSpan,u.maxValueSpan)}l&&(r[l.id]={dataZoomId:l.id,startValue:a[0],endValue:a[1]})}function o(t,e,r){var i;r.eachComponent({mainType:"dataZoom",subType:"select"},function(r){var a=r.getAxisModel(t,e.componentIndex);a&&(i=r)});return i}};$E._dispatchZoomAction=function(t){var e=[];YE(t,function(t,r){e.push(y(t))});e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})};function QE(t){var e={};L(["xAxisIndex","yAxisIndex"],function(r){e[r]=t[r];e[r]==null&&(e[r]="all");(e[r]===false||e[r]==="none")&&(e[r]=[])});return e}function tR(t,e){t.setIconStatus("back",UE(e)>1?"emphasis":"normal")}function eR(t,e,r,i,a){var n=r._isZoomActive;if(i&&i.type==="takeGlobalCursor"){n=i.key==="dataZoomSelect"?i.dataZoomSelectActive:false}r._isZoomActive=n;t.setIconStatus("zoom",n?"emphasis":"normal");var o=new Jk(QE(t.option),e,{include:["grid"]});r._brushController.setPanels(o.makePanelOpts(a,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"})).enableBrush(n?{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}}:false)}AP("dataZoom",KE);jv(function(t){if(!t){return}var e=t.dataZoom||(t.dataZoom=[]);if(!z(e)){t.dataZoom=e=[e]}var r=t.toolbox;if(r){if(z(r)){r=r[0]}if(r&&r.feature){var i=r.feature.dataZoom;a("xAxis",i);a("yAxis",i)}}function a(t,r){if(!r){return}var i=t+"Index";var a=r[i];if(a!=null&&a!="all"&&!z(a)){a=a===false||a==="none"?[]:[a]}n(t,function(r,n){if(a!=null&&a!="all"&&T(a,n)===-1){return}var o={type:"select",$fromToolbox:true,id:qE+t+n};o[i]=n;e.push(o)})}function n(e,r){var i=t[e];if(!z(i)){i=i?[i]:[]}YE(i,r)}});var rR=ac.toolbox.restore;function iR(t){this.model=t}iR.defaultOption={show:true,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:rR.title};var aR=iR.prototype;aR.onclick=function(t,e,r){ZE(t);e.dispatchAction({type:"restore",from:this.uid})};AP("restore",iR);Kv({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var nR="urn:schemas-microsoft-com:vml";var oR=typeof window==="undefined"?null:window;var sR=false;var lR=oR&&oR.document;function uR(t){return hR(t)}var hR;if(lR&&!n.canvasSupported){try{!lR.namespaces.zrvml&&lR.namespaces.add("zrvml",nR);hR=function(t){return lR.createElement("<zrvml:"+t+' class="zrvml">')}}catch(fR){hR=function(t){return lR.createElement("<"+t+' xmlns="'+nR+'" class="zrvml">')}}}function cR(){if(sR||!lR){return}sR=true;var t=lR.styleSheets;if(t.length<31){lR.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)")}else{t[0].addRule(".zrvml","behavior:url(#default#VML)")}}var vR=go.CMD;var dR=Math.round;var pR=Math.sqrt;var gR=Math.abs;var mR=Math.cos;var yR=Math.sin;var xR=Math.max;if(!n.canvasSupported){var _R=",";var wR="progid:DXImageTransform.Microsoft";var bR=21600;var SR=bR/2;var MR=1e5;var IR=1e3;var TR=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;";t.coordsize=bR+","+bR;t.coordorigin="0,0"};var DR=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")};var AR=function(t,e,r){return"rgb("+[t,e,r].join(",")+")"};var CR=function(t,e){if(e&&t&&e.parentNode!==t){t.appendChild(e)}};var LR=function(t,e){if(e&&t&&e.parentNode===t){t.removeChild(e)}};var kR=function(t,e,r){return(parseFloat(t)||0)*MR+(parseFloat(e)||0)*IR+r};var PR=function(t,e){if(typeof t==="string"){if(t.lastIndexOf("%")>=0){return parseFloat(t)/100*e}return parseFloat(t)}return t};var NR=function(t,e,r){var i=Te(e);r=+r;if(isNaN(r)){r=1}if(i){t.color=AR(i[0],i[1],i[2]);t.opacity=r*i[3]}};var OR=function(t){var e=Te(t);return[AR(e[0],e[1],e[2]),e[3]]};var ER=function(t,e,r){var i=e.fill;if(i!=null){if(i instanceof Ts){var a;var n=0;var o=[0,0];var s=0;var l=1;var u=r.getBoundingRect();var h=u.width;var f=u.height;if(i.type==="linear"){a="gradient";var c=r.transform;var v=[i.x*h,i.y*f];var d=[i.x2*h,i.y2*f];if(c){Ct(v,v,c);Ct(d,d,c)}var p=d[0]-v[0];var g=d[1]-v[1];n=Math.atan2(p,g)*180/Math.PI;if(n<0){n+=360}if(n<1e-6){n=0}}else{a="gradientradial";var v=[i.x*h,i.y*f];var c=r.transform;var m=r.scale;var y=h;var x=f;o=[(v[0]-u.x)/y,(v[1]-u.y)/x];if(c){Ct(v,v,c)}y/=m[0]*bR;x/=m[1]*bR;var _=xR(y,x);s=2*0/_;l=2*i.r/_-s}var w=i.colorStops.slice();w.sort(function(t,e){return t.offset-e.offset});var b=w.length;var S=[];var M=[];for(var I=0;I<b;I++){var T=w[I];var D=OR(T.color);M.push(T.offset*l+s+" "+D[0]);if(I===0||I===b-1){S.push(D)}}if(b>=2){var A=S[0][0];var C=S[1][0];var L=S[0][1]*e.opacity;var k=S[1][1]*e.opacity;t.type=a;t.method="none";t.focus="100%";t.angle=n;t.color=A;t.color2=C;t.colors=M.join(",");t.opacity=k;t.opacity2=L}if(a==="radial"){t.focusposition=o.join(",")}}else{NR(t,i,e.opacity)}}};var RR=function(t,e){if(e.lineDash!=null){t.dashstyle=e.lineDash.join(" ")}if(e.stroke!=null&&!(e.stroke instanceof Ts)){NR(t,e.stroke,e.opacity)}};var zR=function(t,e,r,i){var a=e=="fill";var n=t.getElementsByTagName(e)[0];if(r[e]!=null&&r[e]!=="none"&&(a||!a&&r.lineWidth)){t[a?"filled":"stroked"]="true";if(r[e]instanceof Ts){LR(t,n)}if(!n){n=uR(e)}a?ER(n,r,i):RR(n,r);CR(t,n)}else{t[a?"filled":"stroked"]="false";LR(t,n)}};var BR=[[],[],[]];var VR=function(t,e){var r=vR.M;var i=vR.C;var a=vR.L;var n=vR.A;var o=vR.Q;var s=[];var l;var u;var h;var f;
var c;var v;var d=t.data;var p=t.len();for(f=0;f<p;){h=d[f++];u="";l=0;switch(h){case r:u=" m ";l=1;c=d[f++];v=d[f++];BR[0][0]=c;BR[0][1]=v;break;case a:u=" l ";l=1;c=d[f++];v=d[f++];BR[0][0]=c;BR[0][1]=v;break;case o:case i:u=" c ";l=3;var g=d[f++];var m=d[f++];var y=d[f++];var x=d[f++];var _;var w;if(h===o){_=y;w=x;y=(y+2*g)/3;x=(x+2*m)/3;g=(c+2*g)/3;m=(v+2*m)/3}else{_=d[f++];w=d[f++]}BR[0][0]=g;BR[0][1]=m;BR[1][0]=y;BR[1][1]=x;BR[2][0]=_;BR[2][1]=w;c=_;v=w;break;case n:var b=0;var S=0;var M=1;var I=1;var T=0;if(e){b=e[4];S=e[5];M=pR(e[0]*e[0]+e[1]*e[1]);I=pR(e[2]*e[2]+e[3]*e[3]);T=Math.atan2(-e[1]/I,e[0]/M)}var D=d[f++];var A=d[f++];var C=d[f++];var L=d[f++];var k=d[f++]+T;var P=d[f++]+k+T;f++;var N=d[f++];var O=D+mR(k)*C;var E=A+yR(k)*L;var g=D+mR(P)*C;var m=A+yR(P)*L;var R=N?" wa ":" at ";if(Math.abs(O-g)<1e-4){if(Math.abs(P-k)>.01){if(N){O+=270/bR}}else{if(Math.abs(E-A)<1e-4){if(N&&O<D||!N&&O>D){m-=270/bR}else{m+=270/bR}}else if(N&&E<A||!N&&E>A){g+=270/bR}else{g-=270/bR}}}s.push(R,dR(((D-C)*M+b)*bR-SR),_R,dR(((A-L)*I+S)*bR-SR),_R,dR(((D+C)*M+b)*bR-SR),_R,dR(((A+L)*I+S)*bR-SR),_R,dR((O*M+b)*bR-SR),_R,dR((E*I+S)*bR-SR),_R,dR((g*M+b)*bR-SR),_R,dR((m*I+S)*bR-SR));c=g;v=m;break;case vR.R:var z=BR[0];var B=BR[1];z[0]=d[f++];z[1]=d[f++];B[0]=z[0]+d[f++];B[1]=z[1]+d[f++];if(e){Ct(z,z,e);Ct(B,B,e)}z[0]=dR(z[0]*bR-SR);B[0]=dR(B[0]*bR-SR);z[1]=dR(z[1]*bR-SR);B[1]=dR(B[1]*bR-SR);s.push(" m ",z[0],_R,z[1]," l ",B[0],_R,z[1]," l ",B[0],_R,B[1]," l ",z[0],_R,B[1]);break;case vR.Z:s.push(" x ")}if(l>0){s.push(u);for(var V=0;V<l;V++){var G=BR[V];e&&Ct(G,G,e);s.push(dR(G[0]*bR-SR),_R,dR(G[1]*bR-SR),V<l-1?_R:"")}}}return s.join("")};Wo.prototype.brushVML=function(t){var e=this.style;var r=this._vmlEl;if(!r){r=uR("shape");TR(r);this._vmlEl=r}zR(r,"fill",e,this);zR(r,"stroke",e,this);var i=this.transform;var a=i!=null;var n=r.getElementsByTagName("stroke")[0];if(n){var o=e.lineWidth;if(a&&!e.strokeNoScale){var s=i[0]*i[3]-i[1]*i[2];o*=pR(gR(s))}n.weight=o+"px"}var l=this.path||(this.path=new go);if(this.__dirtyPath){l.beginPath();this.buildPath(l,this.shape);l.toStatic();this.__dirtyPath=false}r.path=VR(l,this.transform);r.style.zIndex=kR(this.zlevel,this.z,this.z2);CR(t,r);if(e.text!=null){this.drawRectText(t,this.getBoundingRect())}else{this.removeRectText(t)}};Wo.prototype.onRemove=function(t){LR(t,this._vmlEl);this.removeRectText(t)};Wo.prototype.onAdd=function(t){CR(t,this._vmlEl);this.appendRectText(t)};var GR=function(t){return typeof t==="object"&&t.tagName&&t.tagName.toUpperCase()==="IMG"};zi.prototype.brushVML=function(t){var e=this.style;var r=e.image;var i;var a;if(GR(r)){var n=r.src;if(n===this._imageSrc){i=this._imageWidth;a=this._imageHeight}else{var o=r.runtimeStyle;var s=o.width;var l=o.height;o.width="auto";o.height="auto";i=r.width;a=r.height;o.width=s;o.height=l;this._imageSrc=n;this._imageWidth=i;this._imageHeight=a}r=n}else{if(r===this._imageSrc){i=this._imageWidth;a=this._imageHeight}}if(!r){return}var u=e.x||0;var h=e.y||0;var f=e.width;var c=e.height;var v=e.sWidth;var d=e.sHeight;var p=e.sx||0;var g=e.sy||0;var m=v&&d;var y=this._vmlEl;if(!y){y=lR.createElement("div");TR(y);this._vmlEl=y}var x=y.style;var _=false;var w;var b=1;var S=1;if(this.transform){w=this.transform;b=pR(w[0]*w[0]+w[1]*w[1]);S=pR(w[2]*w[2]+w[3]*w[3]);_=w[1]||w[2]}if(_){var M=[u,h];var I=[u+f,h];var T=[u,h+c];var D=[u+f,h+c];Ct(M,M,w);Ct(I,I,w);Ct(T,T,w);Ct(D,D,w);var A=xR(M[0],I[0],T[0],D[0]);var C=xR(M[1],I[1],T[1],D[1]);var L=[];L.push("M11=",w[0]/b,_R,"M12=",w[2]/S,_R,"M21=",w[1]/b,_R,"M22=",w[3]/S,_R,"Dx=",dR(u*b+w[4]),_R,"Dy=",dR(h*S+w[5]));x.padding="0 "+dR(A)+"px "+dR(C)+"px 0";x.filter=wR+".Matrix("+L.join("")+", SizingMethod=clip)"}else{if(w){u=u*b+w[4];h=h*S+w[5]}x.filter="";x.left=dR(u)+"px";x.top=dR(h)+"px"}var k=this._imageEl;var P=this._cropEl;if(!k){k=lR.createElement("div");this._imageEl=k}var N=k.style;if(m){if(!(i&&a)){var O=new Image;var E=this;O.onload=function(){O.onload=null;i=O.width;a=O.height;N.width=dR(b*i*f/v)+"px";N.height=dR(S*a*c/d)+"px";E._imageWidth=i;E._imageHeight=a;E._imageSrc=r};O.src=r}else{N.width=dR(b*i*f/v)+"px";N.height=dR(S*a*c/d)+"px"}if(!P){P=lR.createElement("div");P.style.overflow="hidden";this._cropEl=P}var R=P.style;R.width=dR((f+p*f/v)*b);R.height=dR((c+g*c/d)*S);R.filter=wR+".Matrix(Dx="+-p*f/v*b+",Dy="+-g*c/d*S+")";if(!P.parentNode){y.appendChild(P)}if(k.parentNode!=P){P.appendChild(k)}}else{N.width=dR(b*f)+"px";N.height=dR(S*c)+"px";y.appendChild(k);if(P&&P.parentNode){y.removeChild(P);this._cropEl=null}}var z="";var B=e.opacity;if(B<1){z+=".Alpha(opacity="+dR(B*100)+") "}z+=wR+".AlphaImageLoader(src="+r+", SizingMethod=scale)";N.filter=z;y.style.zIndex=kR(this.zlevel,this.z,this.z2);CR(t,y);if(e.text!=null){this.drawRectText(t,this.getBoundingRect())}};zi.prototype.onRemove=function(t){LR(t,this._vmlEl);this._vmlEl=null;this._cropEl=null;this._imageEl=null;this.removeRectText(t)};zi.prototype.onAdd=function(t){CR(t,this._vmlEl);this.appendRectText(t)};var WR="normal";var FR={};var HR=0;var ZR=100;var UR=document.createElement("div");var XR=function(t){var e=FR[t];if(!e){if(HR>ZR){HR=0;FR={}}var r=UR.style;var i;try{r.font=t;i=r.fontFamily.split(",")[0]}catch(a){}e={style:r.fontStyle||WR,variant:r.fontVariant||WR,weight:r.fontWeight||WR,size:parseFloat(r.fontSize||12)|0,family:i||"Microsoft YaHei"};FR[t]=e;HR++}return e};var jR;qr("measureText",function(t,e){var r=lR;if(!jR){jR=r.createElement("div");jR.style.cssText="position:absolute;top:-20000px;left:0;"+"padding:0;margin:0;border:none;white-space:pre;";lR.body.appendChild(jR)}try{jR.style.font=e}catch(i){}jR.innerHTML="";jR.appendChild(r.createTextNode(t));return{width:jR.offsetWidth}});var YR=new hr;var qR=function(t,e,r,i){var a=this.style;this.__dirty&&gi(a,true);var n=a.text;n!=null&&(n+="");if(!n){return}if(a.rich){var o=hi(n,a);n=[];for(var s=0;s<o.lines.length;s++){var l=o.lines[s].tokens;var u=[];for(var h=0;h<l.length;h++){u.push(l[h].text)}n.push(u.join(""))}n=n.join("\n")}var f;var c;var v=a.textAlign;var d=a.textVerticalAlign;var p=XR(a.font);var g=p.style+" "+p.variant+" "+p.weight+" "+p.size+'px "'+p.family+'"';r=r||$r(n,g,v,d);var m=this.transform;if(m&&!i){YR.copy(e);YR.applyTransform(m);e=YR}if(!i){var y=a.textPosition;var x=a.textDistance;if(y instanceof Array){f=e.x+PR(y[0],e.width);c=e.y+PR(y[1],e.height);v=v||"left"}else{var _=ri(y,e,x);f=_.x;c=_.y;v=v||_.textAlign;d=d||_.textVerticalAlign}}else{f=e.x;c=e.y}f=ti(f,r.width,v);c=ei(c,r.height,d);c+=r.height/2;var w=uR;var b=this._textVmlEl;var S;var M;var I;if(!b){b=w("line");S=w("path");M=w("textpath");I=w("skew");M.style["v-text-align"]="left";TR(b);S.textpathok=true;M.on=true;b.from="0 0";b.to="1000 0.05";CR(b,I);CR(b,S);CR(b,M);this._textVmlEl=b}else{I=b.firstChild;S=I.nextSibling;M=S.nextSibling}var T=[f,c];var D=b.style;if(m&&i){Ct(T,T,m);I.on=true;I.matrix=m[0].toFixed(3)+_R+m[2].toFixed(3)+_R+m[1].toFixed(3)+_R+m[3].toFixed(3)+",0,0";I.offset=(dR(T[0])||0)+","+(dR(T[1])||0);I.origin="0 0";D.left="0px";D.top="0px"}else{I.on=false;D.left=dR(f)+"px";D.top=dR(c)+"px"}M.string=DR(n);try{M.style.font=g}catch(A){}zR(b,"fill",{fill:a.textFill,opacity:a.opacity},this);zR(b,"stroke",{stroke:a.textStroke,opacity:a.opacity,lineDash:a.lineDash},this);b.style.zIndex=kR(this.zlevel,this.z,this.z2);CR(t,b)};var KR=function(t){LR(t,this._textVmlEl);this._textVmlEl=null};var $R=function(t){CR(t,this._textVmlEl)};var JR=[Ei,Ri,zi,Wo,ss];for(var QR=0;QR<JR.length;QR++){var tz=JR[QR].prototype;tz.drawRectText=qR;tz.removeRectText=KR;tz.appendRectText=$R}ss.prototype.brushVML=function(t){var e=this.style;if(e.text!=null){this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),true)}else{this.removeRectText(t)}};ss.prototype.onRemove=function(t){this.removeRectText(t)};ss.prototype.onAdd=function(t){this.appendRectText(t)}}function ez(t){return parseInt(t,10)}function rz(t,e){cR();this.root=t;this.storage=e;var r=document.createElement("div");var i=document.createElement("div");r.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;";i.style.cssText="position:absolute;left:0;top:0;";t.appendChild(r);this._vmlRoot=i;this._vmlViewport=r;this.resize();var a=e.delFromStorage;var n=e.addToStorage;e.delFromStorage=function(t){a.call(e,t);if(t){t.onRemove&&t.onRemove(i)}};e.addToStorage=function(t){t.onAdd&&t.onAdd(i);n.call(e,t)};this._firstPaint=true}rz.prototype={constructor:rz,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t){return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}}},refresh:function(){var t=this.storage.getDisplayList(true,true);this._paintList(t)},_paintList:function(t){var e=this._vmlRoot;for(var r=0;r<t.length;r++){var i=t[r];if(i.invisible||i.ignore){if(!i.__alreadyNotVisible){i.onRemove(e)}i.__alreadyNotVisible=true}else{if(i.__alreadyNotVisible){i.onAdd(e)}i.__alreadyNotVisible=false;if(i.__dirty){i.beforeBrush&&i.beforeBrush();(i.brushVML||i.brush).call(i,e);i.afterBrush&&i.afterBrush()}}i.__dirty=false}if(this._firstPaint){this._vmlViewport.appendChild(e);this._firstPaint=false}},resize:function(t,e){var t=t==null?this._getWidth():t;var e=e==null?this._getHeight():e;if(this._width!=t||this._height!=e){this._width=t;this._height=e;var r=this._vmlViewport.style;r.width=t+"px";r.height=e+"px"}},dispose:function(){this.root.innerHTML="";this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){if(this._vmlViewport){this.root.removeChild(this._vmlViewport)}},_getWidth:function(){var t=this.root;var e=t.currentStyle;return(t.clientWidth||ez(e.width))-ez(e.paddingLeft)-ez(e.paddingRight)|0},_getHeight:function(){var t=this.root;var e=t.currentStyle;return(t.clientHeight||ez(e.height))-ez(e.paddingTop)-ez(e.paddingBottom)|0}};function iz(t){return function(){ar('In IE8.0 VML mode painter not support method "'+t+'"')}}L(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){rz.prototype[t]=iz(t)});Pa("vml",rz);var az="http://www.w3.org/2000/svg";function nz(t){return document.createElementNS(az,t)}var oz=go.CMD;var sz=Array.prototype.join;var lz="none";var uz=Math.round;var hz=Math.sin;var fz=Math.cos;var cz=Math.PI;var vz=Math.PI*2;var dz=180/cz;var pz=1e-4;function gz(t){return uz(t*1e4)/1e4}function mz(t){return t<pz&&t>-pz}function yz(t,e){var r=e?t.textFill:t.fill;return r!=null&&r!==lz}function xz(t,e){var r=e?t.textStroke:t.stroke;return r!=null&&r!==lz}function _z(t,e){if(e){wz(t,"transform","matrix("+sz.call(e,",")+")")}}function wz(t,e,r){if(!r||r.type!=="linear"&&r.type!=="radial"){if(typeof r==="string"&&r.indexOf("NaN")>-1){console.log(r)}t.setAttribute(e,r)}}function bz(t,e,r){t.setAttributeNS("http://www.w3.org/1999/xlink",e,r)}function Sz(t,e,r){if(yz(e,r)){var i=r?e.textFill:e.fill;i=i==="transparent"?lz:i;if(t.getAttribute("clip-path")!=="none"&&i===lz){i="rgba(0, 0, 0, 0.002)"}wz(t,"fill",i);wz(t,"fill-opacity",e.opacity)}else{wz(t,"fill",lz)}if(xz(e,r)){var a=r?e.textStroke:e.stroke;a=a==="transparent"?lz:a;wz(t,"stroke",a);var n=r?e.textStrokeWidth:e.lineWidth;var o=!r&&e.strokeNoScale?e.host.getLineScale():1;wz(t,"stroke-width",n/o);wz(t,"paint-order",r?"stroke":"fill");wz(t,"stroke-opacity",e.opacity);var s=e.lineDash;if(s){wz(t,"stroke-dasharray",e.lineDash.join(","));wz(t,"stroke-dashoffset",uz(e.lineDashOffset||0))}else{wz(t,"stroke-dasharray","")}e.lineCap&&wz(t,"stroke-linecap",e.lineCap);e.lineJoin&&wz(t,"stroke-linejoin",e.lineJoin);e.miterLimit&&wz(t,"stroke-miterlimit",e.miterLimit)}else{wz(t,"stroke",lz)}}function Mz(t){var e=[];var r=t.data;var i=t.len();for(var a=0;a<i;){var n=r[a++];var o="";var s=0;switch(n){case oz.M:o="M";s=2;break;case oz.L:o="L";s=2;break;case oz.Q:o="Q";s=4;break;case oz.C:o="C";s=6;break;case oz.A:var l=r[a++];var u=r[a++];var h=r[a++];var f=r[a++];var c=r[a++];var v=r[a++];var d=r[a++];var p=r[a++];var g=Math.abs(v);var m=mz(g-vz)&&!mz(g);var y=false;if(g>=vz){y=true}else if(mz(g)){y=false}else{y=(v>-cz&&v<0||v>cz)===!!p}var x=gz(l+h*fz(c));var _=gz(u+f*hz(c));if(m){if(p){v=vz-1e-4}else{v=-vz+1e-4}y=true;if(a===9){e.push("M",x,_)}}var w=gz(l+h*fz(c+v));var b=gz(u+f*hz(c+v));e.push("A",gz(h),gz(f),uz(d*dz),+y,+p,w,b);break;case oz.Z:o="Z";break;case oz.R:var w=gz(r[a++]);var b=gz(r[a++]);var S=gz(r[a++]);var M=gz(r[a++]);e.push("M",w,b,"L",w+S,b,"L",w+S,b+M,"L",w,b+M,"L",w,b);break}o&&e.push(o);for(var I=0;I<s;I++){e.push(gz(r[a++]))}}return e.join(" ")}var Iz={};Iz.brush=function(t){var e=t.style;var r=t.__svgEl;if(!r){r=nz("path");t.__svgEl=r}if(!t.path){t.createPathProxy()}var i=t.path;if(t.__dirtyPath){i.beginPath();t.buildPath(i,t.shape);t.__dirtyPath=false;var a=Mz(i);if(a.indexOf("NaN")<0){wz(r,"d",a)}}Sz(r,e);_z(r,t.transform);if(e.text!=null){Cz(t,t.getBoundingRect())}};var Tz={};Tz.brush=function(t){var e=t.style;var r=e.image;if(r instanceof HTMLImageElement){var i=r.src;r=i}if(!r){return}var a=e.x||0;var n=e.y||0;var o=e.width;var s=e.height;var l=t.__svgEl;if(!l){l=nz("image");t.__svgEl=l}if(r!==t.__imageSrc){bz(l,"href",r);t.__imageSrc=r}wz(l,"width",o);wz(l,"height",s);wz(l,"x",a);wz(l,"y",n);_z(l,t.transform);if(e.text!=null){Cz(t,t.getBoundingRect())}};var Dz={};var Az=new hr;var Cz=function(t,e,r){var i=t.style;t.__dirty&&gi(i,true);var a=i.text;if(a==null){return}else{a+=""}var n=t.__textSvgEl;if(!n){n=nz("text");t.__textSvgEl=n}var o;var s;var l=i.textPosition;var u=i.textDistance;var h=i.textAlign||"left";if(typeof i.fontSize==="number"){i.fontSize+="px"}var f=i.font||[i.fontStyle||"",i.fontWeight||"",i.fontSize||"",i.fontFamily||""].join(" ")||jr;var c=Lz(i.textVerticalAlign);r=$r(a,f,h,c);var v=r.lineHeight;if(l instanceof Array){o=e.x+l[0];s=e.y+l[1]}else{var d=ri(l,e,u);o=d.x;s=d.y;c=Lz(d.textVerticalAlign);h=d.textAlign}wz(n,"alignment-baseline",c);if(f){n.style.font=f}var p=i.textPadding;wz(n,"x",o);wz(n,"y",s);Sz(n,i,true);if(t instanceof ss||t.style.transformText){_z(n,t.transform)}else{if(t.transform){Az.copy(e);Az.applyTransform(t.transform);e=Az}else{var g=t.transformCoordToGlobal(e.x,e.y);e.x=g[0];e.y=g[1]}var m=i.textOrigin;if(m==="center"){o=r.width/2+o;s=r.height/2+s}else if(m){o=m[0]+o;s=m[1]+s}var y=-i.textRotation||0;var x=Zt();qt(x,t.transform,y);_z(n,x)}var _=a.split("\n");var w=_.length;var b=h;if(b==="left"){b="start";p&&(o+=p[3])}else if(b==="right"){b="end";p&&(o-=p[1])}else if(b==="center"){b="middle";p&&(o+=(p[3]-p[1])/2)}var S=0;if(c==="baseline"){S=-r.height+v;p&&(S-=p[2])}else if(c==="middle"){S=(-r.height+v)/2;p&&(s+=(p[0]-p[2])/2)}else{p&&(S+=p[0])}if(t.__text!==a||t.__textFont!==f){var M=t.__tspanList||[];t.__tspanList=M;for(var I=0;I<w;I++){var T=M[I];if(!T){T=M[I]=nz("tspan");n.appendChild(T);wz(T,"alignment-baseline",c);wz(T,"text-anchor",b)}else{T.innerHTML=""}wz(T,"x",o);wz(T,"y",s+I*v+S);T.appendChild(document.createTextNode(_[I]))}for(;I<M.length;I++){n.removeChild(M[I])}M.length=w;t.__text=a;t.__textFont=f}else if(t.__tspanList.length){var D=t.__tspanList.length;for(var I=0;I<D;++I){var T=t.__tspanList[I];if(T){wz(T,"x",o);wz(T,"y",s+I*v+S)}}}};function Lz(t){if(t==="middle"){return"middle"}else if(t==="bottom"){return"baseline"}else{return"hanging"}}Dz.drawRectText=Cz;Dz.brush=function(t){var e=t.style;if(e.text!=null){e.textPosition=[0,0];Cz(t,{x:e.x||0,y:e.y||0,width:0,height:0},t.getBoundingRect())}};function kz(){}kz.prototype={diff:function(t,e,r){if(!r){r=function(t,e){return t===e}}this.equals=r;var i=this;t=t.slice();e=e.slice();var a=e.length;var n=t.length;var o=1;var s=a+n;var l=[{newPos:-1,components:[]}];var u=this.extractCommon(l[0],e,t,0);if(l[0].newPos+1>=a&&u+1>=n){var h=[];for(var f=0;f<e.length;f++){h.push(f)}return[{indices:h,count:e.length}]}function c(){for(var r=-1*o;r<=o;r+=2){var s;var u=l[r-1];var h=l[r+1];var f=(h?h.newPos:0)-r;if(u){l[r-1]=undefined}var c=u&&u.newPos+1<a;var v=h&&0<=f&&f<n;if(!c&&!v){l[r]=undefined;continue}if(!c||v&&u.newPos<h.newPos){s=Nz(h);i.pushComponent(s.components,undefined,true)}else{s=u;s.newPos++;i.pushComponent(s.components,true,undefined)}f=i.extractCommon(s,e,t,r);if(s.newPos+1>=a&&f+1>=n){return Pz(i,s.components,e,t)}else{l[r]=s}}o++}while(o<=s){var v=c();if(v){return v}}},pushComponent:function(t,e,r){var i=t[t.length-1];if(i&&i.added===e&&i.removed===r){t[t.length-1]={count:i.count+1,added:e,removed:r}}else{t.push({count:1,added:e,removed:r})}},extractCommon:function(t,e,r,i){var a=e.length;var n=r.length;var o=t.newPos;var s=o-i;var l=0;while(o+1<a&&s+1<n&&this.equals(e[o+1],r[s+1])){o++;s++;l++}if(l){t.components.push({count:l})}t.newPos=o;return s},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};function Pz(t,e,r,i){var a=0;var n=e.length;var o=0;var s=0;for(;a<n;a++){var l=e[a];if(!l.removed){var u=[];for(var h=o;h<o+l.count;h++){u.push(h)}l.indices=u;o+=l.count;if(!l.added){s+=l.count}}else{var u=[];for(var h=s;h<s+l.count;h++){u.push(h)}l.indices=u;s+=l.count}}return e}function Nz(t){return{newPos:t.newPos,components:t.components.slice(0)}}var Oz=new kz;var Ez=function(t,e,r){return Oz.diff(t,e,r)};var Rz="0";var zz="1";function Bz(t,e,r,i,a){this._zrId=t;this._svgRoot=e;this._tagNames=typeof r==="string"?[r]:r;this._markLabel=i;this._domName=a||"_dom";this.nextId=0}Bz.prototype.createElement=nz;Bz.prototype.getDefs=function(t){var e=this._svgRoot;var r=this._svgRoot.getElementsByTagName("defs");if(r.length===0){if(t){r=e.insertBefore(this.createElement("defs"),e.firstChild);if(!r.contains){r.contains=function(t){var e=r.children;if(!e){return false}for(var i=e.length-1;i>=0;--i){if(e[i]===t){return true}}return false}}return r}else{return null}}else{return r[0]}};Bz.prototype.update=function(t,e){if(!t){return}var r=this.getDefs(false);if(t[this._domName]&&r.contains(t[this._domName])){if(typeof e==="function"){e(t)}}else{var i=this.add(t);if(i){t[this._domName]=i}}};Bz.prototype.addDom=function(t){var e=this.getDefs(true);e.appendChild(t)};Bz.prototype.removeDom=function(t){var e=this.getDefs(false);if(e&&t[this._domName]){e.removeChild(t[this._domName]);t[this._domName]=null}};Bz.prototype.getDoms=function(){var t=this.getDefs(false);if(!t){return[]}var e=[];L(this._tagNames,function(r){var i=t.getElementsByTagName(r);e=e.concat([].slice.call(i))});return e};Bz.prototype.markAllUnused=function(){var t=this.getDoms();var e=this;L(t,function(t){t[e._markLabel]=Rz})};Bz.prototype.markUsed=function(t){if(t){t[this._markLabel]=zz}};Bz.prototype.removeUnused=function(){var t=this.getDefs(false);if(!t){return}var e=this.getDoms();var r=this;L(e,function(e){if(e[r._markLabel]!==zz){t.removeChild(e)}})};Bz.prototype.getSvgProxy=function(t){if(t instanceof Wo){return Iz}else if(t instanceof zi){return Tz}else if(t instanceof ss){return Dz}else{return Iz}};Bz.prototype.getTextSvgElement=function(t){return t.__textSvgEl};Bz.prototype.getSvgElement=function(t){return t.__svgEl};function Vz(t,e){Bz.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}D(Vz,Bz);Vz.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var r=this;L(["fill","stroke"],function(i){if(e.style[i]&&(e.style[i].type==="linear"||e.style[i].type==="radial")){var a=e.style[i];var n=r.getDefs(true);var o;if(a._dom){o=a._dom;if(!n.contains(a._dom)){r.addDom(o)}}else{o=r.add(a)}r.markUsed(e);var s=o.getAttribute("id");t.setAttribute(i,"url(#"+s+")")}})}};Vz.prototype.add=function(t){var e;if(t.type==="linear"){e=this.createElement("linearGradient")}else if(t.type==="radial"){e=this.createElement("radialGradient")}else{ar("Illegal gradient type.");return null}t.id=t.id||this.nextId++;e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id);this.updateDom(t,e);this.addDom(e);return e};Vz.prototype.update=function(t){var e=this;Bz.prototype.update.call(this,t,function(){var r=t.type;var i=t._dom.tagName;if(r==="linear"&&i==="linearGradient"||r==="radial"&&i==="radialGradient"){e.updateDom(t,t._dom)}else{e.removeDom(t);e.add(t)}})};Vz.prototype.updateDom=function(t,e){if(t.type==="linear"){e.setAttribute("x1",t.x);e.setAttribute("y1",t.y);e.setAttribute("x2",t.x2);e.setAttribute("y2",t.y2)}else if(t.type==="radial"){e.setAttribute("cx",t.x);e.setAttribute("cy",t.y);e.setAttribute("r",t.r)}else{ar("Illegal gradient type.");return}if(t.global){e.setAttribute("gradientUnits","userSpaceOnUse")}else{e.setAttribute("gradientUnits","objectBoundingBox")}e.innerHTML="";var r=t.colorStops;for(var i=0,a=r.length;i<a;++i){var n=this.createElement("stop");n.setAttribute("offset",r[i].offset*100+"%");n.setAttribute("stop-color",r[i].color);e.appendChild(n)}t._dom=e};Vz.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;if(e&&e._dom){Bz.prototype.markUsed.call(this,e._dom)}e=t.style.stroke;if(e&&e._dom){Bz.prototype.markUsed.call(this,e._dom)}}};function Gz(t,e){Bz.call(this,t,e,"clipPath","__clippath_in_use__")}D(Gz,Bz);Gz.prototype.update=function(t){var e=this.getSvgElement(t);if(e){this.updateDom(e,t.__clipPaths,false)}var r=this.getTextSvgElement(t);if(r){this.updateDom(r,t.__clipPaths,true)}this.markUsed(t)};Gz.prototype.updateDom=function(t,e,r){if(e&&e.length>0){var i=this.getDefs(true);var a=e[0];var n;var o;var s=r?"_textDom":"_dom";if(a[s]){o=a[s].getAttribute("id");n=a[s];if(!i.contains(n)){i.appendChild(n)}}else{o="zr"+this._zrId+"-clip-"+this.nextId;++this.nextId;n=this.createElement("clipPath");n.setAttribute("id",o);i.appendChild(n);a[s]=n}var l=this.getSvgProxy(a);if(a.transform&&a.parent.invTransform&&!r){var u=Array.prototype.slice.call(a.transform);jt(a.transform,a.parent.invTransform,a.transform);l.brush(a);a.transform=u}else{l.brush(a)}var h=this.getSvgElement(a);n.innerHTML="";n.appendChild(h.cloneNode());t.setAttribute("clip-path","url(#"+o+")");if(e.length>1){this.updateDom(n,e.slice(1),r)}}else{if(t){t.setAttribute("clip-path","none")}}};Gz.prototype.markUsed=function(t){var e=this;if(t.__clipPaths&&t.__clipPaths.length>0){L(t.__clipPaths,function(t){if(t._dom){Bz.prototype.markUsed.call(e,t._dom)}if(t._textDom){Bz.prototype.markUsed.call(e,t._textDom)}})}};function Wz(t,e){Bz.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}D(Wz,Bz);Wz.prototype.addWithoutUpdate=function(t,e){if(e&&Fz(e.style)){var r=e.style;var i;if(r._shadowDom){i=r._shadowDom;var a=this.getDefs(true);if(!a.contains(r._shadowDom)){this.addDom(i)}}else{i=this.add(e)}this.markUsed(e);var n=i.getAttribute("id");t.style.filter="url(#"+n+")"}};Wz.prototype.add=function(t){var e=this.createElement("filter");var r=t.style;r._shadowDomId=r._shadowDomId||this.nextId++;e.setAttribute("id","zr"+this._zrId+"-shadow-"+r._shadowDomId);this.updateDom(t,e);this.addDom(e);return e};Wz.prototype.update=function(t,e){var r=e.style;if(Fz(r)){var i=this;Bz.prototype.update.call(this,e,function(t){i.updateDom(e,t._shadowDom)})}else{this.remove(t,r)}};Wz.prototype.remove=function(t,e){if(e._shadowDomId!=null){this.removeDom(e);t.style.filter=""}};Wz.prototype.updateDom=function(t,e){var r=e.getElementsByTagName("feDropShadow");if(r.length===0){r=this.createElement("feDropShadow")}else{r=r[0]}var i=t.style;var a=t.scale?t.scale[0]||1:1;var n=t.scale?t.scale[1]||1:1;var o,s,l,u;if(i.shadowBlur||i.shadowOffsetX||i.shadowOffsetY){o=i.shadowOffsetX||0;s=i.shadowOffsetY||0;l=i.shadowBlur;u=i.shadowColor}else if(i.textShadowBlur){o=i.textShadowOffsetX||0;s=i.textShadowOffsetY||0;l=i.textShadowBlur;u=i.textShadowColor}else{this.removeDom(e,i);return}r.setAttribute("dx",o/a);r.setAttribute("dy",s/n);r.setAttribute("flood-color",u);var h=l/2/a;var f=l/2/n;var c=h+" "+f;r.setAttribute("stdDeviation",c);e.setAttribute("x","-100%");e.setAttribute("y","-100%");e.setAttribute("width",Math.ceil(l/2*200)+"%");e.setAttribute("height",Math.ceil(l/2*200)+"%");e.appendChild(r);i._shadowDom=e};Wz.prototype.markUsed=function(t){var e=t.style;if(e&&e._shadowDom){Bz.prototype.markUsed.call(this,e._shadowDom)}};function Fz(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}function Hz(t){return parseInt(t,10)}function Zz(t){if(t instanceof Wo){return Iz}else if(t instanceof zi){return Tz}else if(t instanceof ss){return Dz}else{return Iz}}function Uz(t,e){return e&&t&&e.parentNode!==t}function Xz(t,e,r){if(Uz(t,e)&&r){var i=r.nextSibling;i?t.insertBefore(e,i):t.appendChild(e)}}function jz(t,e){if(Uz(t,e)){var r=t.firstChild;r?t.insertBefore(e,r):t.appendChild(e)}}function Yz(t,e){if(e&&t&&e.parentNode===t){t.removeChild(e)}}function qz(t){return t.__textSvgEl}function Kz(t){return t.__svgEl}var $z=function(t,e,r,i){this.root=t;this.storage=e;this._opts=r=w({},r||{});var a=nz("svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg");a.setAttribute("version","1.1");a.setAttribute("baseProfile","full");a.style.cssText="user-select:none;position:absolute;left:0;top:0;";this.gradientManager=new Vz(i,a);this.clipPathManager=new Gz(i,a);this.shadowManager=new Wz(i,a);var n=document.createElement("div");n.style.cssText="overflow:hidden;position:relative";this._svgRoot=a;this._viewport=n;t.appendChild(n);n.appendChild(a);this.resize(r.width,r.height);this._visibleList=[]};$z.prototype={constructor:$z,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t){return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}}},refresh:function(){var t=this.storage.getDisplayList(true);this._paintList(t)},setBackgroundColor:function(t){this._viewport.style.background=t},_paintList:function(t){this.gradientManager.markAllUnused();this.clipPathManager.markAllUnused();this.shadowManager.markAllUnused();var e=this._svgRoot;var r=this._visibleList;var i=t.length;var a=[];var n;for(n=0;n<i;n++){var o=t[n];var s=Zz(o);var l=Kz(o)||qz(o);if(!o.invisible){if(o.__dirty){s&&s.brush(o);this.clipPathManager.update(o);if(o.style){this.gradientManager.update(o.style.fill);this.gradientManager.update(o.style.stroke);this.shadowManager.update(l,o)}o.__dirty=false}a.push(o)}}var u=Ez(r,a);var h;for(n=0;n<u.length;n++){var f=u[n];if(f.removed){for(var c=0;c<f.count;c++){var o=r[f.indices[c]];var l=Kz(o);var v=qz(o);Yz(e,l);Yz(e,v)}}}for(n=0;n<u.length;n++){var f=u[n];if(f.added){for(var c=0;c<f.count;c++){var o=a[f.indices[c]];var l=Kz(o);var v=qz(o);h?Xz(e,l,h):jz(e,l);if(l){Xz(e,v,l)}else if(h){Xz(e,v,h)}else{jz(e,v)}Xz(e,v,l);h=v||l||h;this.gradientManager.addWithoutUpdate(l,o);this.shadowManager.addWithoutUpdate(h,o);this.clipPathManager.markUsed(o)}}else if(!f.removed){for(var c=0;c<f.count;c++){var o=a[f.indices[c]];h=l=qz(o)||Kz(o)||h;this.gradientManager.markUsed(o);this.gradientManager.addWithoutUpdate(l,o);this.shadowManager.markUsed(o);this.shadowManager.addWithoutUpdate(l,o);this.clipPathManager.markUsed(o)}}}this.gradientManager.removeUnused();this.clipPathManager.removeUnused();this.shadowManager.removeUnused();this._visibleList=a},_getDefs:function(t){var e=this._svgRoot;var r=this._svgRoot.getElementsByTagName("defs");if(r.length===0){if(t){var r=e.insertBefore(nz("defs"),e.firstChild);if(!r.contains){r.contains=function(t){var e=r.children;if(!e){return false}for(var i=e.length-1;i>=0;--i){if(e[i]===t){return true}}return false}}return r}else{return null}}else{return r[0]}},resize:function(t,e){var r=this._viewport;r.style.display="none";var i=this._opts;t!=null&&(i.width=t);e!=null&&(i.height=e);t=this._getSize(0);e=this._getSize(1);r.style.display="";if(this._width!==t||this._height!==e){this._width=t;this._height=e;var a=r.style;a.width=t+"px";a.height=e+"px";var n=this._svgRoot;n.setAttribute("width",t);n.setAttribute("height",e)}},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts;var r=["width","height"][t];var i=["clientWidth","clientHeight"][t];var a=["paddingLeft","paddingTop"][t];var n=["paddingRight","paddingBottom"][t];if(e[r]!=null&&e[r]!=="auto"){return parseFloat(e[r])}var o=this.root;var s=document.defaultView.getComputedStyle(o);return(o[i]||Hz(s[r])||Hz(o.style[r]))-(Hz(s[a])||0)-(Hz(s[n])||0)|0},dispose:function(){this.root.innerHTML="";this._svgRoot=this._viewport=this.storage=null},clear:function(){if(this._viewport){this.root.removeChild(this._viewport)}},pathToDataUrl:function(){this.refresh();var t=this._svgRoot.outerHTML;return"data:image/svg+xml;charset=UTF-8,"+t}};function Jz(t){return function(){ar('In SVG mode painter not support method "'+t+'"')}}L(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){$z.prototype[t]=Jz(t)});Pa("svg",$z);exports.version=Gc;exports.dependencies=Wc;exports.PRIORITY=Kc;exports.init=Vv;exports.connect=Gv;exports.disConnect=Wv;exports.disconnect=Fv;exports.dispose=Hv;exports.getInstanceByDom=Zv;exports.getInstanceById=Uv;exports.registerTheme=Xv;exports.registerPreprocessor=jv;exports.registerProcessor=Yv;exports.registerPostUpdate=qv;exports.registerAction=Kv;exports.registerCoordinateSystem=$v;exports.getCoordinateSystemDimensions=Jv;exports.registerLayout=Qv;exports.registerVisual=td;exports.registerLoading=rd;exports.extendComponentModel=id;exports.extendComponentView=ad;exports.extendSeriesModel=nd;exports.extendChartView=od;exports.setCanvasCreator=sd;exports.registerMap=ld;exports.getMap=ud;exports.dataTool=hd;exports.zrender=Ea;exports.graphic=Ml;exports.number=au;exports.format=wu;exports.throttle=tc;exports.helper=yg;exports.matrix=Qt;exports.vector=Pt;exports.color=Be;exports.parseGeoJSON=Ig;exports.parseGeoJson=Xg;exports.util=jg;exports.List=Cd;exports.Model=kl;exports.Axis=Hg;exports.env=n});