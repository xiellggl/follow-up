(function(e){if(typeof define==="function"&&typeof seajs=="object"){define(e)}else{e()}})(function(require){$.fn.JArea=function(e){var t={};var a=$(this);var i;if(typeof define==="function"&&typeof seajs=="object"){i=require("./JAreaData").__AREADATA__}else{i=__AREADATA__}var n={prov:0,city:0,dist:0,name:{prov:"prov",city:"city",dist:"dist",detail:"detail",areaJson:"areaJson"},defaults:true,wrap:'<span class="css-select">',selectClassName:"form-control",detailClassName:"detail",areaJsonClassName:"areaJson"};e=$.extend(n,e);t.create=function(){t.province=t.setDefault(1);t.hideHtml=$('<input type="hidden" name="'+e.name.detail+'" class="'+e.detailClassName+'">');t.areaJson=$('<input type="hidden" name="'+e.name.areaJson+'" class="'+e.areaJsonClassName+'">');$.each(i.prov,function(a,i){if(a==e.prov){t.province.append('<option value="'+a+'" selected>'+i+"</option>")}else{t.province.append('<option value="'+a+'">'+i+"</option>")}});t.province.on("change",function(){try{t.city.remove();t.dist.remove();t.city=null;t.dist=null}catch(n){}var s=$(this).val();if(i.city[s]&&i.city[s].length>0){t.city=t.setDefault(2);$.each(i.city[s],function(a,i){if(i.id==e.city){t.city.append('<option value="'+i.id+'" selected>'+i.name+"</option>")}else{t.city.append('<option value="'+i.id+'">'+i.name+"</option>")}});t.city.on("change",function(){try{t.dist.remove();t.dist=null}catch(a){}var n=$(this).val();if(i.dist[n]&&i.dist[n].length>0){t.dist=t.setDefault(3);$.each(i.dist[n],function(a,i){if(i.id==e.dist){t.dist.append('<option value="'+i.id+'" selected>'+i.name+"</option>")}else{t.dist.append('<option value="'+i.id+'">'+i.name+"</option>")}});t.insertObj(t.dist);t.dist.on("change",function(){t.hideHtml.val(t.getAreaString());t.areaJson.val(t.getAreaJson())}).change()}else{t.hideHtml.val(t.getAreaString());t.areaJson.val(t.getAreaJson())}});t.insertObj(t.city);t.city.trigger("change");a.append(t.hideHtml);a.append(t.areaJson)}else{t.hideHtml.val(t.getAreaString());t.areaJson.val(t.getAreaJson())}});t.insertObj(t.province);t.province.trigger("change");e.city===-1&&t.insertObj(t.city=t.setDefault(2).attr("disabled","disabled"));e.dist===-1&&t.insertObj(t.dist=t.setDefault(3).attr("disabled","disabled"))};t.getAreaId=function(){return{prov:t.province.val(),city:t.city?t.city.val():0,dist:t.dist?t.dist.val():0}};t.insertObj=function(t){var i=t;if(e.wrap!=""){i=$(e.wrap).append(t)}a.append(i)};t.setDefault=function(t){switch(t){case 1:if(e.defaults){return $('<select class="'+e.selectClassName+'" name="'+e.name.prov+'"><option value="">请选择省</option></select>')}else{return $('<select class="'+e.selectClassName+'" name="'+e.name.prov+'"></select>')}break;case 2:if(e.defaults){return $('<select class="'+e.selectClassName+'" name="'+e.name.city+'"><option value="">请选择市</option></select>')}else{return $('<select class="'+e.selectClassName+'" name="'+e.name.city+'"</select>')}break;case 3:if(e.defaults){return $('<select class="'+e.selectClassName+'" name="'+e.name.dist+'"><option value="">请选择区</option></select>')}else{return $('<select class="'+e.selectClassName+'" name="'+e.name.dist+'"></select>')}break;default:return $('<select class="'+e.selectClassName+'" name="'+e.name.prov+'"><option value="">请选择省</option></select>')}};t.getAreaString=function(){var e="";if(t.province.val()!=""){e=t.province.find("option:selected").html();try{if(t.city.val()!=""){e+=t.city.find("option:selected").html()}if(t.dist.val()!=""){e+=t.dist.find("option:selected").html()}}catch(a){}}return e};t.getAreaJson=function(){var e="",a="",i="";if(t.province.val()!=""){e=t.province.find("option:selected").html();try{if(t.city.val()!=""){a=t.city.find("option:selected").html()}if(t.dist.val()!=""){i=t.dist.find("option:selected").html()}}catch(n){}}var s={prov:e,city:a,dist:i};s=JSON.stringify(s);return s};t.create();return t}});