function luhmCheck(r){if(r.length<16||r.length>19){return 1}var a=/^\d*$/;if(!a.exec(r)){return 2}var e="10,18,30,35,37,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,58,60,62,65,68,69,84,87,88,94,95,98,99";if(e.indexOf(r.substring(0,2))==-1){return 3}var n=r.substr(r.length-1,1);var t=r.substr(0,r.length-1);var s=new Array;for(var v=t.length-1;v>-1;v--){s.push(t.substr(v,1))}var p=new Array;var h=new Array;var u=new Array;for(var l=0;l<s.length;l++){if((l+1)%2==1){if(parseInt(s[l])*2<9)p.push(parseInt(s[l])*2);else h.push(parseInt(s[l])*2)}else u.push(s[l])}var I=new Array;var f=new Array;for(var i=0;i<h.length;i++){I.push(parseInt(h[i])%10);f.push(parseInt(h[i])/10)}var g=0;var o=0;var d=0;var c=0;var w=0;for(var y=0;y<p.length;y++){g=g+parseInt(p[y])}for(var A=0;A<u.length;A++){o=o+parseInt(u[A])}for(var b=0;b<I.length;b++){d=d+parseInt(I[b]);c=c+parseInt(f[b])}w=parseInt(g)+parseInt(o)+parseInt(d)+parseInt(c);var k=parseInt(w)%10==0?10:parseInt(w)%10;var m=10-k;if(n==m){return 0}else{return 4}return 0}$.validator.addMethod("bankID",function(r,a,e){var n=["","银行卡号长度必须在16到19之间","银行卡号必须全为数字","银行卡号开头6位不符合规范","请填写有效的银行卡号"];var t=luhmCheck(r.replace(/[^\d]/g,""));e[1]=n[t];return this.optional(a)||t==0},"{1}");