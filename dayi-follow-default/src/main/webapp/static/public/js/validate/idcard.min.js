function GetVerifyBit(id){var result;var nNum=eval(id.charAt(0)*7+id.charAt(1)*9+id.charAt(2)*10+id.charAt(3)*5+id.charAt(4)*8+id.charAt(5)*4+id.charAt(6)*2+id.charAt(7)*1+id.charAt(8)*6+id.charAt(9)*3+id.charAt(10)*7+id.charAt(11)*9+id.charAt(12)*10+id.charAt(13)*5+id.charAt(14)*8+id.charAt(15)*4+id.charAt(16)*2);nNum=nNum%11;switch(nNum){case 0:result="1";break;case 1:result="0";break;case 2:result="X";break;case 3:result="9";break;case 4:result="8";break;case 5:result="7";break;case 6:result="6";break;case 7:result="5";break;case 8:result="4";break;case 9:result="3";break;case 10:result="2";break}return result}function validateIdCard(r,t,e){var a={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙 江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖 北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西 藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国 外"};var i=0;var u=r;if(t!=null){t=t.replace(/-/g,"/")}var s=u.length;if(!/^\d{17}(\d|x)$/i.test(u)&&!/^\d{15}$/i.test(u)){return 1}if(a[parseInt(u.substr(0,2))]==null){return 2}if(s==15){sBirthday="19"+u.substr(6,2)+"-"+Number(u.substr(8,2))+"-"+Number(u.substr(10,2));var n=new Date(sBirthday.replace(/-/g,"/"));var l=n.getFullYear().toString()+"-"+(n.getMonth()+1)+"-"+n.getDate();var d=u.substr(14,1);if(sBirthday!=l){return 3}if(t==""){return 4}if(t!=null&&n.getTime()!=new Date(t).getTime()){return 5}if(e!=null&&e!=0&&e!=1){return 6}if(e!=null&&d%2!=e){return 7}u=u.substring(0,6)+"19"+u.substring(6,15);u=u+GetVerifyBit(u)}var c=u.substring(6,10);if(c<1900||c>2078){return 3}u=u.replace(/x$/i,"a");sBirthday=u.substr(6,4)+"-"+Number(u.substr(10,2))+"-"+Number(u.substr(12,2));var n=new Date(sBirthday.replace(/-/g,"/"));var d=u.substr(16,1);if(sBirthday!=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()){return 3}if(t==""){return 4}if(t!=null&&n.getTime()!=new Date(t).getTime()){return 5}if(e!=null&&e!=0&&e!=1){return 6}if(e!=null&&d%2!=e){return 7}for(var h=17;h>=0;h--){i+=Math.pow(2,h)%11*parseInt(u.charAt(17-h),11)}if(i%11!=1){return 1}var b=new Array;b=new Array("11111119111111111","12121219121212121");for(var f=0;f<b.length;f++){if(u.indexOf(b[f])!=-1){return 1}}return 0}$.validator.addMethod("cretID",function(r,t,e){var a=validateIdCard(r);var i=["","非法身份证号","地区编号不合法","出生日期不合法"];e[1]=i[a];return this.optional(t)||a==0},$.validator.format("{1}"));