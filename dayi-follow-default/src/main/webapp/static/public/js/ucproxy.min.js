(function(n,e){!!n?e(n):console.error("缺少jQuery")})($||window.jQuery||window.Zepto,function(n){var e=[];function t(n){return Object.prototype.toString.apply(n)==="[object RadioNodeList]"&&n[0]||n}function o(t,o){t.setKey(o);n.each(e,function(n,e,o){o=t.encrypt(e.value);if(o){e.past=e.value;e.value=o}});return e}function r(e,t){n.getJSON(e+"?jsonpCallback=?",function(n){t(n.result)})}function c(t,c,i){if(!(e=n(t).find(".rsa")).length){i()}else if(window.JSEncrypt){r(c,function(n){i(o(new JSEncrypt,n))})}else{n.getScript("/static/public/js/RSA/jsencrypt.min.js",function(){r(c,function(n){i(o(new JSEncrypt,n))})})}}function i(){if(!!e){n.each(e,function(n,e){e.value=e.past})}}function s(n){if(!n.form)return console.error("form is null");c(n.form,t(n.form["send"]).value,function(){l(n.form,n.succback,n.errback,n.form["goto"].value)})}function l(e,o,r,c){var s=n(e).serialize();i();function l(n,e){if(typeof e==="function"){return e(n||c)}else{location.href=n||c}}t(e.send).disabled=true;n.getJSON(e.action+"?jsonpCallback=?",s,function(e){if(e.succ){var t=e.result&&e.result.ssoUrls;if(!t){o(l)}else{(function c(e){n.jsonp({url:t[e]+"&jsonpCallback=?",complete:function(){if(e<=0){o(l)}else{c(e-1)}}})})(t.length-1)}}else{if(Object.prototype.toString.apply(r)==="[object Function]"){r(e)}else{window.layer&&(layer.msg&&layer.msg('<p align="center">'+e.msg+"</p>")||layer.open({content:e.msg,className:"msgStyle"}))||alert(e.msg)}}}).fail(function(){t(e.send).disabled=false;window.layer&&(layer.msg&&layer.msg("系统出了小差，请稍后再试..")||layer.open({content:"系统出了小差，请稍后再试..",className:"msgStyle"}))||alert("系统出了小差，请稍后再试..")})}window.rsaForm=n.rsaForm=c;window.clearRsa=n.clearRsa=i;window.ucp=n.ucp=function(e){s(n.extend({form:document.forms["register"]||document.forms["login"],succback:function(n){n()}},e))}});