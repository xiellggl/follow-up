(function(d){var b={type:"normal",id:"",className:"",dayNames:["日","一","二","三","四","五","六"],numbers:["一","二","三","四","五","六"],today:true,select:true,multi:false,disOtherMonth:false,setMonth:null,setYear:null,selectDate:null,allowDate:null,prev:"icon-arrow-left",next:"icon-arrow-right",onselect:function(){},ongoprev:function(){},ongonext:function(){}};var e=function(g,f){this.el=d(g);this.opt=null;this.date=null;this.type=null;this.calendar="";this.init(g,f)};e.prototype.init=function(g,f){this.date=this.getDate();var f=this.opt=this.getOptions(f,this.date);this.type=f.type;f.target=d(g);this.calendar='<table class="flexoCalendar '+f.className+'"  id="'+f.id+'" cellspacing="0">';this.calendar+=this.bulidCH(f);if(this.type=="normal"){this.calendar+=this.bulidWeekBar(f);this.calendar+="</thead>";this.calendar+="<tbody>";this.calendar+=this.bulidFull(f)}else{if(this.type=="weekly"){this.calendar+="</thead><tbody>";this.calendar+=this.bulidWeekly(f)}else{if(this.type=="monthly"){this.calendar+="</thead><tbody>";this.calendar+=this.bulidMonthly(f)}}}this.calendar+="</tbody></table>";d(g).append(this.calendar).trigger("click");d(g).on("click",".prev, .next",f,function(){var k=d(this).data("month").split("-")[1];var i=d(this).data("month").split("-")[0];var h=f.allowDate;var j="";if(d.isArray(h)&&((i==h[0].split("-")[0]&&k==h[0].split("-")[1])||(i==h[1].split("-")[0]&&k==h[1].split("-")[1]))){return}if(f.type=="normal"){j=e.prototype.bulidFull(f,i,k)}else{if(f.type=="monthly"){j=e.prototype.bulidMonthly(f,i,k)}else{if(f.type=="weekly"){j=e.prototype.bulidWeekly(f,i,k)}}}d(f.target).find("table.flexoCalendar tbody").empty().append(j).trigger("el.create");e.prototype.changeCH(this,f);if(this.className=="prev"&&f.ongoprev){f.ongoprev.call(f.target,d(this).next(".current-year").data("year"),d(this).data("month"))}if(this.className=="next"&&f.ongonext){f.ongonext.call(f.target,d(this).next(".current-year").data("year"),d(this).data("month"))}});if(f.select){d(g).on("click","table>tbody>tr>td",f,function(){if(!f.multi){d(this).parents("tbody").find("td.selected").removeClass("selected")}if(f.disOtherMonth){if(this.className.split(" ")[0]!="other-month"){d(this).addClass("selected")}}else{d(this).addClass("selected")}if(f.onselect){f.onselect.call(f.target,d(this).data("time"))}})}};e.prototype.bulidCH=function(r){var i="";var n=r.setYear;var m=r.setMonth;var o=this.getPrev(n,m,this.type);var s=this.getNext(n,m,this.type);var g=r.prev;var j=r.next;if(this.type=="normal"){i+='<thead><tr class="calendar-hd"><th class="prev" data-month="'+o+'"><i class="'+g+'"></i></th><th class="current-year" data-year="'+n+"-"+this.dispose(m)+'" colspan="5">'+n+"年"+this.dispose(m)+'月</th><th class="next" data-month="'+s+'"><i class="'+j+'"></i></th></tr>'}else{if(this.type=="weekly"){var h=o.split("-")[1];var l=o.split("-")[0];var k=s.split("-")[1];var p=s.split("-")[0];var q=this.forWeek(l,h);var f=this.forWeek(p,k);i+='<thead><tr class="calendar-hd"><th class="prev" data-month="'+o+'" data-week="'+q+'"><i class="'+g+'"></i></th><th class="current-year" data-year="'+n+"-"+this.dispose(m)+'" colspan="5">'+n+"年"+this.dispose(m)+'月</th><th class="next" data-month="'+s+'" data-week="'+f+'"><i class="'+j+'"></i></th></tr></thead>'}else{if(this.type=="monthly"){i+='<thead><tr class="calendar-hd"><th class="prev" data-month="'+o+'" colspan="2"><i class="'+g+'"></i></th><th class="current-year" data-year="'+n+"-"+this.dispose(m)+'" colspan="4">'+n+'年</th><th class="next" data-month="'+s+'" colspan="2"><i class="'+j+'"></i></th></tr></thead>'}}}return i};e.prototype.changeCH=function(h,s){var l=d(h).data("month").split("-")[1];var m=d(h).data("month").split("-")[0];l=parseInt(l);m=parseInt(m);var n=s.type;var o=this.getPrev(m,l,n);var t=this.getNext(m,l,n);var q=m+"-"+this.dispose(l);var i=d(s.target).find(".current-year");if(n=="weekly"){var g=o.split("-")[1];var k=o.split("-")[0];var j=t.split("-")[1];var p=t.split("-")[0];var r=this.forWeek(k,g);var f=this.forWeek(p,j);d(s.target).find(".prev").data("month",o).attr("data-month",o).data("week",r).attr("data-week",r);d(s.target).find(".next").data("month",t).attr("data-month",t).data("week",f).attr("data-week",f)}else{d(s.target).find(".prev").data("month",o).attr("data-month",o);d(s.target).find(".next").data("month",t).attr("data-month",t)}d(s.target).find(".current-year").data("year",q).attr("data-year",q);if(n=="monthly"){i.text(m+"年")}else{i.text(m+"年"+this.dispose(l)+"月")}};e.prototype.bulidWeekBar=function(f){var h='<tr class="weekday">';for(var g=0;g<7;g++){h+="<th data-day=day"+g+">"+f.dayNames[g]+"</th>"}h+="</tr></thead>";return h};e.prototype.bulidFull=function(p,m,l){var k="";var l=l?parseInt(l):parseInt(p.setMonth);var m=m?parseInt(m):parseInt(p.setYear);var o=this.getPrev(m,l,"normal");var q=this.getNext(m,l,"normal");var n=eli.getMonthLen(m,l);var h=eli.getMonthLen(o.split("-")[0],o.split("-")[1]);var f=new Date(m,l-1,1).getDay();var g=p.selectDate;g=typeof g=="string"?g.indexOf("-")!=-1?g.split("-"):null:null;if(g){g[0]=g[0]=="each"?m:parseInt(g[0]);g[1]=g[1]=="each"?l:parseInt(g[1]);g[2]=g[2]=="each"?1:parseInt(g[2])}for(var i=0;i<42;i++){if(i%7==0&&i!=41){if(i!=0){k+="</tr><tr>"}else{k+="<tr>"}}if(i>=f&&(i<(f+n))){if(p.today){if(i==parseInt(p.crtdate)+f-1&&p.realyear==m&&parseInt(p.realmonth)==l){if(g&&g[0]==m&&g[1]==l&&g[2]==parseInt(p.crtdate)){k+='<td class="current-month current-day selected-day tdday day'+(i%7)+'" data-time="'+m+"-"+this.dispose(l)+"-"+this.dispose((i-f+1))+'"><span class="day">'+(i-f+1)+"</span></td>"}else{k+='<td class="current-month current-day tdday day'+(i%7)+'" data-time="'+m+"-"+this.dispose(l)+"-"+this.dispose((i-f+1))+'"><span class="day">'+(i-f+1)+"</span></td>"}}else{if(g&&g[0]==m&&g[1]==l&&g[2]==(i-f+1)){k+='<td class="current-month selected-day tdday day'+(i%7)+'" data-time="'+m+"-"+this.dispose(l)+"-"+this.dispose((i-f+1))+'"><span class="day">'+(i-f+1)+"</span></td>"}else{k+='<td class="current-month tdday day'+(i%7)+'" data-time="'+m+"-"+this.dispose(l)+"-"+this.dispose((i-f+1))+'"><span class="day">'+(i-f+1)+"</span></td>"}}}else{if(g&&g[0]==m&&g[1]==l&&g[2]==(i-f+1)){k+='<td class="current-month selected-day tdday day'+(i%7)+'" data-time="'+m+"-"+this.dispose(l)+"-"+this.dispose((i-f+1))+'"><span class="day">'+(i-f+1)+"</span></td>"}else{k+='<td class="current-month tdday day'+(i%7)+'" data-time="'+m+"-"+this.dispose(l)+"-"+this.dispose((i-f+1))+'"><span class="day">'+(i-f+1)+"</span></td>"}}}else{if(i<f){if(g&&(g[0]+"-"+g[1])==o&&g[2]==(h-(f-i-1))){k+='<td class="other-month selected-day prev-month day'+(i%7)+'" data-time="'+o+"-"+this.dispose((h-(f-i-1)))+'"><span class="day">'+(h-(f-i-1))+"</span></td>"}else{k+='<td class="other-month prev-month day'+(i%7)+'" data-time="'+o+"-"+this.dispose((h-(f-i-1)))+'"><span class="day">'+(h-(f-i-1))+"</span></td>"}}else{if(i>=(f+n)){if(g&&(g[0]+"-"+g[1])==q&&g[2]==(i-n-f+1)){k+='<td class="other-month selected-day next-month day'+(i%7)+'" data-time="'+q+"-"+this.dispose((i-n-f+1))+'"><span class="day">'+(i-n-f+1)+"</span></td>"}else{k+='<td class="other-month next-month day'+(i%7)+'" data-time="'+q+"-"+this.dispose((i-n-f+1))+'"><span class="day">'+(i-n-f+1)+"</span></td>"}}}}}k+="</tr>";return k};e.prototype.bulidWeekly=function(k,r,y){var s="";var n=k.numbers;var y=y?parseInt(y):parseInt(k.setMonth);var r=r?parseInt(r):parseInt(k.setYear);var u=this.getPrev(r,y,"weekly");var h=this.getNext(r,y,"weekly");var p=eli.getMonthLen(r,y);var z=u.split("-")[1];var f=h.split("-")[1];var t=eli.getMonthLen(u.split("-")[0],z);var l=new Date(r,y-1,1).getDay();l=l==0?7:l;var q=l!=1?t-l+2:1;var x=q!=1?z:y;var i=parseInt(q)+6>parseInt(t)?parseInt(q)+6-parseInt(t):parseInt(q)+6;var w=x>y?r-1:r;var o=x==12?w+1:w;var m=k.selectDate;m=typeof m=="string"?m.indexOf("-")!=-1?m.split("-"):null:null;if(m){m[0]=m[0]=="each"?r:parseInt(m[0]);m[1]=m[1]=="each"?y:parseInt(m[1]);m[2]=m[2]=="each"?"week1":m[2].indexOf("week")!=-1?m[2]:parseInt(m[2]);if(typeof m[2]=="number"){m[2]=eli.getMonthWeek(m[0],m[1],m[2])}}var g;for(var v=0;v<5;v++){if(v!=0&&parseInt(q)>=parseInt(i)){if(m){g="week"+(v+1);if((d.isArray(m[2])&&(r==m[2][0][0]&&y==m[2][0][1]&&m[2][0][2]==g))||(r==m[0]&&y==m[1]&&m[2]==g)){s+='<tr><td class="selected-week tweek week'+(v+1)+'" data-time="'+w+"-"+this.dispose(x)+"-"+this.dispose(q)+","+o+"-"+this.dispose(y)+"-"+this.dispose(i)+'" colspan="7"><div><span class="week">第'+n[v]+'周</span><span class="process">'+this.dispose(x)+"-"+this.dispose(q)+"~"+this.dispose(f)+"-"+this.dispose(i)+"</span></div></td></tr>"}else{s+='<tr><td class="tweek week'+(v+1)+'" data-time="'+w+"-"+this.dispose(x)+"-"+this.dispose(q)+","+o+"-"+this.dispose(f)+"-"+this.dispose(i)+'" colspan="7"><div><span class="week">第'+n[v]+'周</span><span class="process">'+this.dispose(x)+"-"+this.dispose(q)+"~"+this.dispose(f)+"-"+this.dispose(i)+"</span></div></td></tr>"}}else{s+='<tr><td class="tweek week'+(v+1)+'" data-time="'+w+"-"+this.dispose(x)+"-"+this.dispose(q)+","+o+"-"+this.dispose(f)+"-"+this.dispose(i)+'" colspan="7"><div><span class="week">第'+n[v]+'周</span><span class="process">'+this.dispose(x)+"-"+this.dispose(q)+"~"+this.dispose(f)+"-"+this.dispose(i)+"</span></div></td></tr>"}}else{if(k.today&&((parseInt(k.realmonth)==x&&q<=parseInt(k.crtdate))||(parseInt(k.realmonth)!=x&&q>=parseInt(k.crtdate)))&&parseInt(k.crtdate)<=i&&k.realyear==r&&k.realmonth==y){if(m){g="week"+(v+1);if((d.isArray(m[2])&&((r==m[2][0][0]&&y==m[2][0][1]&&m[2][0][2]==g)||(m[2][1]&&r==m[2][1][0]&&y==m[2][1][1]&&m[2][1][2]==g)))||(r==m[0]&&y==m[1]&&m[2]==g)){s+='<tr><td class="current-week current-day selected-week tweek week'+(v+1)+'" data-time="'+w+"-"+this.dispose(x)+"-"+this.dispose(q)+","+o+"-"+this.dispose(y)+"-"+this.dispose(i)+'" colspan="7"><div><span class="week">第'+n[v]+'周</span><span class="process">'+this.dispose(x)+"-"+this.dispose(q)+"~"+this.dispose(y)+"-"+this.dispose(i)+"</span></div></td></tr>"}else{s+='<tr><td class="current-week current-day tweek week'+(v+1)+'" data-time="'+w+"-"+this.dispose(x)+"-"+this.dispose(q)+","+o+"-"+this.dispose(y)+"-"+this.dispose(i)+'" colspan="7"><div><span class="week">第'+n[v]+'周</span><span class="process">'+this.dispose(x)+"-"+this.dispose(q)+"~"+this.dispose(y)+"-"+this.dispose(i)+"</span></div></td></tr>"}}else{s+='<tr><td class="current-week current-day tweek week'+(v+1)+'" data-time="'+w+"-"+this.dispose(x)+"-"+this.dispose(q)+","+o+"-"+this.dispose(y)+"-"+this.dispose(i)+'" colspan="7"><div><span class="week">第'+n[v]+'周</span><span class="process">'+this.dispose(x)+"-"+this.dispose(q)+"~"+this.dispose(y)+"-"+this.dispose(i)+"</span></div></td></tr>"}}else{if(m){g="week"+(v+1);if((d.isArray(m[2])&&((r==m[2][0][0]&&y==m[2][0][1]&&m[2][0][2]==g)||(m[2][1]&&r==m[2][1][0]&&y==m[2][1][1]&&m[2][1][2]==g)))||(r==m[0]&&y==m[1]&&m[2]==g)){s+='<tr><td class="selected-week tweek week'+(v+1)+'" data-time="'+w+"-"+this.dispose(x)+"-"+this.dispose(q)+","+o+"-"+this.dispose(y)+"-"+this.dispose(i)+'" colspan="7"><div><span class="week">第'+n[v]+'周</span><span class="process">'+this.dispose(x)+"-"+this.dispose(q)+"~"+this.dispose(y)+"-"+this.dispose(i)+"</span></div></td></tr>"}else{s+='<tr><td class="tweek week'+(v+1)+'"  data-time="'+w+"-"+this.dispose(x)+"-"+this.dispose(q)+","+o+"-"+this.dispose(y)+"-"+this.dispose(i)+'" colspan="7"><div><span class="week">第'+n[v]+'周</span><span class="process">'+this.dispose(x)+"-"+this.dispose(q)+"~"+this.dispose(y)+"-"+this.dispose(i)+"</span></div></td></tr>"}}else{s+='<tr><td class="tweek week'+(v+1)+'"  data-time="'+w+"-"+this.dispose(x)+"-"+this.dispose(q)+","+o+"-"+this.dispose(y)+"-"+this.dispose(i)+'" colspan="7"><div><span class="week">第'+n[v]+'周</span><span class="process">'+this.dispose(x)+"-"+this.dispose(q)+"~"+this.dispose(y)+"-"+this.dispose(i)+"</span></div></td></tr>"}}}if(v==0&&l!=1){x=parseInt(x)+1>12?"1":parseInt(x)+1;q=parseInt(i)+1}else{q+=7}i=q+6>p?q+6-p:q+6;w=x>y?r-1:r;o=x==12&&parseInt(i)<7?w+1:w}return s};e.prototype.forWeek=function(o,n){var k=parseInt(n);var o=parseInt(o);var q=this.getPrev(o,n,"weekly");var p=eli.getMonthLen(o,n);var h=q.split("-")[1];var i=eli.getMonthLen(q.split("-")[0],h);var g=new Date(o,n-1,1).getDay();g=g==0?7:g;var m=g!=1?i-g+2:1;var r=m!=1?h:n;var f=parseInt(m)+6>parseInt(i)?parseInt(m)+6-parseInt(i):parseInt(m)+6;var l=parseInt(r)>n?o-1:o;var s=r==12?l+1:l;var j=l+"-"+this.dispose(r)+"-"+this.dispose(m)+","+s+"-"+this.dispose(n)+"-"+this.dispose(f);return j};e.prototype.bulidMonthly=function(h,i,l){var k="";var l=l?parseInt(l):parseInt(h.setMonth);var i=i?parseInt(i):parseInt(h.setYear);var f=h.selectDate;f=typeof f=="string"?f.indexOf("-")!=-1&&f.indexOf("week")==-1?f.split("-"):null:null;if(f){f[0]=f[0]=="each"?i:parseInt(f[0]);f[1]=f[1]=="each"?1:parseInt(f[1])}for(var g=0;g<12;g++){if(g%4==0&&g!=12){if(g!=0){k+="</tr><tr>"}else{k+="<tr>"}}if(h.today&&(g+1)==h.realmonth&&h.realyear==i){if(f&&f[0]==i&&f[1]==(g+1)){k+='<td colspan=2 class="current-month current-day selected-month selected-day tmonth month'+this.dispose((g+1))+'" data-time="'+i+"-"+this.dispose((g+1))+'"><span class="month">'+(g+1)+"月</span></td>"}else{k+='<td colspan=2 class="current-month current-day tmonth month'+this.dispose((g+1))+'" data-time="'+i+"-"+this.dispose((g+1))+'"><span class="month">'+(g+1)+"月</span></td>"}}else{if(f&&f[0]==i&&f[1]==(g+1)){k+='<td colspan=2 class="selected-month selected-day tmonth month'+this.dispose((g+1))+'" data-time="'+i+"-"+this.dispose((g+1))+'"><span class="month">'+(g+1)+"月</span></td>"}else{k+='<td colspan=2 class="tmonth month'+this.dispose((g+1))+'" data-time="'+i+"-"+this.dispose((g+1))+'"><span class="month">'+(g+1)+"月</span></td>"}}}k+="</tr>";return k};e.prototype.getNext=function(h,i,g){var f;if(g=="monthly"){f=parseInt(h)+1+"-"}else{f=parseInt(i)==12?parseInt(h)+1+"-01":h+"-"+this.dispose((parseInt(i)+1))}return f};e.prototype.getPrev=function(h,i,g){var f;if(g=="monthly"){f=parseInt(h)-1+"-"}else{f=parseInt(i)==1?parseInt(h)-1+"-12":h+"-"+this.dispose((parseInt(i)-1))}return f};e.prototype.getDate=function(){var g=new Date();var h=g.getDate();var j=g.getMonth()+1;var i=g.getYear()+1900;h=this.dispose(h);j=this.dispose(j);var f={crtdate:h,realmonth:j,setMonth:j,realyear:i,setYear:i};return f};e.prototype.dispose=function(g){var f=(parseInt(g)+100);f=f.toString();f=f.substring(1);return f};e.prototype.getOptions=function(g,f){if(g&&typeof g=="object"){d.each(g,function(i,j){if(j==void 0){delete g[i]}})}var h=d.extend({target:null},b,f,g);return h};var c=function(f){return this.each(function(){var i=d(this);var h=i.data("ellie.calendar");var g=typeof f=="object"&&f;if(!h){i.data("ellie.calendar",(h=new e(this,f)))}})};d.fn.flexoCalendar=c;d.fn.flexoCalendar.Constructor=e;var a=d.fn.flexoCalendar;d.fn.flexoCalendar.noConflict=function(){d.fn.flexoCalendar=a;return this}})(jQuery);(function(c){var a=this;var b=function(d){if(d instanceof b){return d}if(!(this instanceof b)){return new b(d)}this.eliwrapped=d};a.eli=b;b.getMonthLen=function(e,f){var e=parseInt(e);var f=parseInt(f);var d=[,31,28,31,30,31,30,31,31,30,31,30,31];if((f==2)&&(e%4==0)&&((e%100!=0)||(e%400==0))){return 29}else{return d[f]}};b.getMonthWeek=function(m,l,o){var m=parseInt(m),l=parseInt(l),o=parseInt(o);var k=[m,l,],f=new Date(m,l-1,1).getDay(),d=1,j=8,n=b.getMonthLen(m,l),h=new Date(m,l,1).getDay(),p;f=f==0?7:f;j=f==1?j:(9-f);for(var g=0;g<5;g++){if(d<=o&&o<j){k[2]="week"+(g+1)}d=j;j+=7;j=j>n?n:j}if(h!=1){p=[,,"week1"];p[1]=l+1==13?1:l+1;p[0]=p[1]==1?m+1:m}var e=[k,p];return e}})(jQuery);